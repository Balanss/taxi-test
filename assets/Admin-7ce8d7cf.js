import{r as t,s as b,j as r,F as z,c as a,a as m,f as v,T as u,l as I,b as h,G as N,A as f,d as i,Q as V,K as W}from"./index-cf0e6825.js";import"./cjs-e269a208.js";import{P as q}from"./Pending-4e3a07f8.js";import{u as O,N as B,G as H,M as J,D as X}from"./Navbar-9e36a35b.js";const Y="/taxi-test/assets/untitled-f11a0ab3.mp3";function oe(){function D(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{m.onAuthStateChanged(n=>{n&&s(n.uid)})},[]),e}D();function k(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{m.onAuthStateChanged(n=>{n?v.collection("admin").doc(n.uid).get().then(o=>{s(o.data().FullName)}):s(null)})},[]),e}const c=k();function y(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{m.onAuthStateChanged(n=>{n?v.collection("manager").doc(n.uid).get().then(o=>{s(o.data().FullName)}):s(null)})},[]),e}const p=y(),{isLoaded:x}=O({googleMapsApiKey:"AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA",libraries:["places"]}),R={lat:5.839398,lng:-55.199089};t.exports.useState(null),t.exports.useState(""),t.exports.useState("");const[g,Z]=t.exports.useState(null),E=t.exports.useRef(),A=t.exports.useRef(),[C,L]=t.exports.useState([]);b(),t.exports.useEffect(()=>{(async()=>{const s=u(i,"test"),n=b(s,I("timestamp","desc"));h(n,o=>{L(o.docs.map(d=>({...d.data(),id:d.id})))})})()},[]);const[$,T]=t.exports.useState([]);t.exports.useEffect(()=>{(async()=>{const s=u(i,"place");h(s,n=>{T(n.docs.map(o=>({...o.data(),id:o.id})))})})()},[]);const[S,G]=t.exports.useState([]);t.exports.useEffect(()=>{(async()=>{const s=u(i,"place");h(s,n=>{G(n.docs.map(o=>({...o.data(),id:o.id})))})})()},[]),t.exports.useState([]);const[ee,M]=t.exports.useState(""),F=()=>S.map((e,s)=>a("div",{children:[a("h2",{onClick:()=>{M(e.id)},children:[e.number," "]}),r("button",{onClick:n=>{N(f(i,"place",e.id))},children:" remove    "})]},s));t.exports.useState("");const l=t.exports.useRef(null);t.exports.useState("");const[U,j]=t.exports.useState([]),[P,te]=t.exports.useState([]);t.exports.useState(-1);const w=()=>C.map((e,s)=>r("div",{children:a("form",{style:{background:"ghostwhite"},children:[a("p",{children:[" Name: ",e.name]}),a("p",{children:[" Number: ",e.number]}),a("p",{children:[" From : ",e.start]}),a("p",{children:[" To : ",e.end]}),a("p",{children:[" Avg duration : ",e.duration]}),a("p",{children:[" Distance : ",e.distance]}),a("p",{children:[" status : ",e.status," "]}),a("p",{children:[" taken : ",e.taken]}),a("button",{onClick:(n,o)=>{j(e.start),e.end;const d=u(i,"driver");V(d,{nameDispatch:e.name,numberDispatch:e.number,pickupDispatch:e.start,ToDispatch:e.end,distanceDispatch:e.distance,durationDispatch:e.duration,statusDispatch:"client waiting",clientId:e.client});const Q=f(i,"test",e.id),_={taken:"accepted by "+p+c};W(Q,_)},children:["  ",r("a",{href:"https://balanss.github.io/taxi-test/#/d1",target:"_blank",rel:"noreferrer",children:" Accept Route"})]}),r("button",{onClick:n=>{N(f(i,"test",e.id))},children:" delete "})]})},s));console.log(c);const K=()=>{l&&l.current&&l.current.play().catch(e=>{console.error("Error attempting to play",e)})};if(t.exports.useEffect(()=>{K()},[]),!x)return r("div",{children:" loading .... "});if(x&&p||c)return r(z,{children:a("div",{className:"admin-side",children:[r(B,{admin:c,manager:p}),a("div",{className:"split",children:[a("div",{className:"rides",children:[a("div",{className:"admin-see",children:[r(w,{}),r(q,{})]}),r("input",{className:"hide",id:"input",type:"text",placeholder:"from",ref:E,defaultValue:U}),r("input",{className:"hide",type:"text",placeholder:"to",ref:A,defaultValue:P})]}),a("div",{className:"map-and-markers",children:[a(H,{id:"map",zoom:12,center:R,mapContainerClassName:"map-container",children:[S.map((e,s)=>r(J,{position:{lat:e.lat,lng:e.lng},label:"yello"},s)),g&&r(X,{directions:g})]}),r("div",{className:"driverLocal",children:r(F,{})})]}),r("audio",{src:Y,ref:l,muted:!0,children:" sound"})]})]})});if(!c)return null}export{oe as default};
