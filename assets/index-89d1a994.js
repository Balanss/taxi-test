function CP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function bI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function LP(t){var e=t.default;if(typeof e=="function"){var n=function r(){if(this instanceof r){var s=[null];s.push.apply(s,arguments);var i=Function.bind.apply(e,s);return new i}return e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Td={exports:{}},bd={},d={exports:{}},we={};var Nu=Symbol.for("react.element"),PP=Symbol.for("react.portal"),RP=Symbol.for("react.fragment"),NP=Symbol.for("react.strict_mode"),DP=Symbol.for("react.profiler"),AP=Symbol.for("react.provider"),OP=Symbol.for("react.context"),MP=Symbol.for("react.forward_ref"),$P=Symbol.for("react.suspense"),UP=Symbol.for("react.memo"),FP=Symbol.for("react.lazy"),o0=Symbol.iterator;function BP(t){return t===null||typeof t!="object"?null:(t=o0&&t[o0]||t["@@iterator"],typeof t=="function"?t:null)}var CI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},LI=Object.assign,PI={};function ya(t,e,n){this.props=t,this.context=e,this.refs=PI,this.updater=n||CI}ya.prototype.isReactComponent={};ya.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ya.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function RI(){}RI.prototype=ya.prototype;function Kg(t,e,n){this.props=t,this.context=e,this.refs=PI,this.updater=n||CI}var Qg=Kg.prototype=new RI;Qg.constructor=Kg;LI(Qg,ya.prototype);Qg.isPureReactComponent=!0;var a0=Array.isArray,NI=Object.prototype.hasOwnProperty,Yg={current:null},DI={key:!0,ref:!0,__self:!0,__source:!0};function AI(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)NI.call(e,r)&&!DI.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Nu,type:t,key:i,ref:o,props:s,_owner:Yg.current}}function VP(t,e){return{$$typeof:Nu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xg(t){return typeof t=="object"&&t!==null&&t.$$typeof===Nu}function jP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var l0=/\/+/g;function Jf(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jP(""+t.key):e.toString(36)}function Zc(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Nu:case PP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Jf(o,0):r,a0(s)?(n="",t!=null&&(n=t.replace(l0,"$&/")+"/"),Zc(s,e,n,"",function(u){return u})):s!=null&&(Xg(s)&&(s=VP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(l0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",a0(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+Jf(i,a);o+=Zc(i,e,n,l,s)}else if(l=BP(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+Jf(i,a++),o+=Zc(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ec(t,e,n){if(t==null)return t;var r=[],s=0;return Zc(t,r,"","",function(i){return e.call(n,i,s++)}),r}function zP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Zt={current:null},Jc={transition:null},qP={ReactCurrentDispatcher:Zt,ReactCurrentBatchConfig:Jc,ReactCurrentOwner:Yg};we.Children={map:Ec,forEach:function(t,e,n){Ec(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ec(t,function(){e++}),e},toArray:function(t){return Ec(t,function(e){return e})||[]},only:function(t){if(!Xg(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=ya;we.Fragment=RP;we.Profiler=DP;we.PureComponent=Kg;we.StrictMode=NP;we.Suspense=$P;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qP;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=LI({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Yg.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)NI.call(e,l)&&!DI.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:Nu,type:t.type,key:s,ref:i,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:OP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:AP,_context:t},t.Consumer=t};we.createElement=AI;we.createFactory=function(t){var e=AI.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:MP,render:t}};we.isValidElement=Xg;we.lazy=function(t){return{$$typeof:FP,_payload:{_status:-1,_result:t},_init:zP}};we.memo=function(t,e){return{$$typeof:UP,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=Jc.transition;Jc.transition={};try{t()}finally{Jc.transition=e}};we.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};we.useCallback=function(t,e){return Zt.current.useCallback(t,e)};we.useContext=function(t){return Zt.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return Zt.current.useDeferredValue(t)};we.useEffect=function(t,e){return Zt.current.useEffect(t,e)};we.useId=function(){return Zt.current.useId()};we.useImperativeHandle=function(t,e,n){return Zt.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return Zt.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return Zt.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return Zt.current.useMemo(t,e)};we.useReducer=function(t,e,n){return Zt.current.useReducer(t,e,n)};we.useRef=function(t){return Zt.current.useRef(t)};we.useState=function(t){return Zt.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return Zt.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return Zt.current.useTransition()};we.version="18.2.0";(function(t){t.exports=we})(d);const OI=bI(d.exports),tm=CP({__proto__:null,default:OI},[d.exports]);var WP=d.exports,HP=Symbol.for("react.element"),GP=Symbol.for("react.fragment"),KP=Object.prototype.hasOwnProperty,QP=WP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YP={key:!0,ref:!0,__self:!0,__source:!0};function MI(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)KP.call(e,r)&&!YP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:HP,type:t,key:i,ref:o,props:s,_owner:QP.current}}bd.Fragment=GP;bd.jsx=MI;bd.jsxs=MI;(function(t){t.exports=bd})(Td);const Gn=Td.exports.Fragment,U=Td.exports.jsx,Y=Td.exports.jsxs;var nm={},Sr={exports:{}},kn={},$I={exports:{}},UI={};(function(t){function e(B,P){var x=B.length;B.push(P);e:for(;0<x;){var C=x-1>>>1,k=B[C];if(0<s(k,P))B[C]=P,B[x]=k,x=C;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var P=B[0],x=B.pop();if(x!==P){B[0]=x;e:for(var C=0,k=B.length,S=k>>>1;C<S;){var T=2*(C+1)-1,O=B[T],M=T+1,V=B[M];if(0>s(O,x))M<k&&0>s(V,O)?(B[C]=V,B[M]=x,C=M):(B[C]=O,B[T]=x,C=T);else if(M<k&&0>s(V,x))B[C]=V,B[M]=x,C=M;else break e}}return P}function s(B,P){var x=B.sortIndex-P.sortIndex;return x!==0?x:B.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,f=3,p=!1,m=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(B){for(var P=n(u);P!==null;){if(P.callback===null)r(u);else if(P.startTime<=B)r(u),P.sortIndex=P.expirationTime,e(l,P);else break;P=n(u)}}function w(B){if(_=!1,v(B),!m)if(n(l)!==null)m=!0,ae(b);else{var P=n(u);P!==null&&ue(w,P.startTime-B)}}function b(B,P){m=!1,_&&(_=!1,g(A),A=-1),p=!0;var x=f;try{for(v(P),h=n(l);h!==null&&(!(h.expirationTime>P)||B&&!G());){var C=h.callback;if(typeof C=="function"){h.callback=null,f=h.priorityLevel;var k=C(h.expirationTime<=P);P=t.unstable_now(),typeof k=="function"?h.callback=k:h===n(l)&&r(l),v(P)}else r(l);h=n(l)}if(h!==null)var S=!0;else{var T=n(u);T!==null&&ue(w,T.startTime-P),S=!1}return S}finally{h=null,f=x,p=!1}}var I=!1,R=null,A=-1,L=5,F=-1;function G(){return!(t.unstable_now()-F<L)}function $(){if(R!==null){var B=t.unstable_now();F=B;var P=!0;try{P=R(!0,B)}finally{P?Q():(I=!1,R=null)}}else I=!1}var Q;if(typeof y=="function")Q=function(){y($)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,ee=W.port2;W.port1.onmessage=$,Q=function(){ee.postMessage(null)}}else Q=function(){E($,0)};function ae(B){R=B,I||(I=!0,Q())}function ue(B,P){A=E(function(){B(t.unstable_now())},P)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,ae(b))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(B){switch(f){case 1:case 2:case 3:var P=3;break;default:P=f}var x=f;f=P;try{return B()}finally{f=x}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,P){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var x=f;f=B;try{return P()}finally{f=x}},t.unstable_scheduleCallback=function(B,P,x){var C=t.unstable_now();switch(typeof x=="object"&&x!==null?(x=x.delay,x=typeof x=="number"&&0<x?C+x:C):x=C,B){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=x+k,B={id:c++,callback:P,priorityLevel:B,startTime:x,expirationTime:k,sortIndex:-1},x>C?(B.sortIndex=x,e(u,B),n(l)===null&&B===n(u)&&(_?(g(A),A=-1):_=!0,ue(w,x-C))):(B.sortIndex=k,e(l,B),m||p||(m=!0,ae(b))),B},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(B){var P=f;return function(){var x=f;f=P;try{return B.apply(this,arguments)}finally{f=x}}}})(UI);(function(t){t.exports=UI})($I);var FI=d.exports,Sn=$I.exports;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var BI=new Set,zl={};function Qi(t,e){Go(t,e),Go(t+"Capture",e)}function Go(t,e){for(zl[t]=e,t=0;t<e.length;t++)BI.add(e[t])}var Ur=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rm=Object.prototype.hasOwnProperty,XP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u0={},c0={};function ZP(t){return rm.call(c0,t)?!0:rm.call(u0,t)?!1:XP.test(t)?c0[t]=!0:(u0[t]=!0,!1)}function JP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function eR(t,e,n,r){if(e===null||typeof e>"u"||JP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Ct={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ct[t]=new Jt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ct[e]=new Jt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ct[t]=new Jt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ct[t]=new Jt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ct[t]=new Jt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ct[t]=new Jt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ct[t]=new Jt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ct[t]=new Jt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ct[t]=new Jt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Zg=/[\-:]([a-z])/g;function Jg(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Zg,Jg);Ct[e]=new Jt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Zg,Jg);Ct[e]=new Jt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Zg,Jg);Ct[e]=new Jt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ct[t]=new Jt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ct.xlinkHref=new Jt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ct[t]=new Jt(t,1,!1,t.toLowerCase(),null,!0,!0)});function ev(t,e,n,r){var s=Ct.hasOwnProperty(e)?Ct[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(eR(e,n,s,r)&&(n=null),r||s===null?ZP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Gr=FI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sc=Symbol.for("react.element"),wo=Symbol.for("react.portal"),_o=Symbol.for("react.fragment"),tv=Symbol.for("react.strict_mode"),sm=Symbol.for("react.profiler"),VI=Symbol.for("react.provider"),jI=Symbol.for("react.context"),nv=Symbol.for("react.forward_ref"),im=Symbol.for("react.suspense"),om=Symbol.for("react.suspense_list"),rv=Symbol.for("react.memo"),os=Symbol.for("react.lazy"),zI=Symbol.for("react.offscreen"),h0=Symbol.iterator;function ja(t){return t===null||typeof t!="object"?null:(t=h0&&t[h0]||t["@@iterator"],typeof t=="function"?t:null)}var je=Object.assign,ep;function hl(t){if(ep===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ep=e&&e[1]||""}return`
`+ep+t}var tp=!1;function np(t,e){if(!t||tp)return"";tp=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{tp=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hl(t):""}function tR(t){switch(t.tag){case 5:return hl(t.type);case 16:return hl("Lazy");case 13:return hl("Suspense");case 19:return hl("SuspenseList");case 0:case 2:case 15:return t=np(t.type,!1),t;case 11:return t=np(t.type.render,!1),t;case 1:return t=np(t.type,!0),t;default:return""}}function am(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _o:return"Fragment";case wo:return"Portal";case sm:return"Profiler";case tv:return"StrictMode";case im:return"Suspense";case om:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jI:return(t.displayName||"Context")+".Consumer";case VI:return(t._context.displayName||"Context")+".Provider";case nv:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case rv:return e=t.displayName||null,e!==null?e:am(t.type)||"Memo";case os:e=t._payload,t=t._init;try{return am(t(e))}catch{}}return null}function nR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return am(e);case 8:return e===tv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function qI(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rR(t){var e=qI(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ic(t){t._valueTracker||(t._valueTracker=rR(t))}function WI(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=qI(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Eh(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lm(t,e){var n=e.checked;return je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function d0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function HI(t,e){e=e.checked,e!=null&&ev(t,"checked",e,!1)}function um(t,e){HI(t,e);var n=Cs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?cm(t,e.type,n):e.hasOwnProperty("defaultValue")&&cm(t,e.type,Cs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function f0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function cm(t,e,n){(e!=="number"||Eh(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var dl=Array.isArray;function Oo(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function hm(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function p0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(dl(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cs(n)}}function GI(t,e){var n=Cs(e.value),r=Cs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function m0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function KI(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dm(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?KI(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xc,QI=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xc=xc||document.createElement("div"),xc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ql(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var El={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sR=["Webkit","ms","Moz","O"];Object.keys(El).forEach(function(t){sR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),El[e]=El[t]})});function YI(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||El.hasOwnProperty(t)&&El[t]?(""+e).trim():e+"px"}function XI(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=YI(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var iR=je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fm(t,e){if(e){if(iR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function pm(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mm=null;function sv(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gm=null,Mo=null,$o=null;function g0(t){if(t=Ou(t)){if(typeof gm!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Nd(e),gm(t.stateNode,t.type,e))}}function ZI(t){Mo?$o?$o.push(t):$o=[t]:Mo=t}function JI(){if(Mo){var t=Mo,e=$o;if($o=Mo=null,g0(t),e)for(t=0;t<e.length;t++)g0(e[t])}}function ex(t,e){return t(e)}function tx(){}var rp=!1;function nx(t,e,n){if(rp)return t(e,n);rp=!0;try{return ex(t,e,n)}finally{rp=!1,(Mo!==null||$o!==null)&&(tx(),JI())}}function Wl(t,e){var n=t.stateNode;if(n===null)return null;var r=Nd(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var vm=!1;if(Ur)try{var za={};Object.defineProperty(za,"passive",{get:function(){vm=!0}}),window.addEventListener("test",za,za),window.removeEventListener("test",za,za)}catch{vm=!1}function oR(t,e,n,r,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Sl=!1,Sh=null,Ih=!1,ym=null,aR={onError:function(t){Sl=!0,Sh=t}};function lR(t,e,n,r,s,i,o,a,l){Sl=!1,Sh=null,oR.apply(aR,arguments)}function uR(t,e,n,r,s,i,o,a,l){if(lR.apply(this,arguments),Sl){if(Sl){var u=Sh;Sl=!1,Sh=null}else throw Error(q(198));Ih||(Ih=!0,ym=u)}}function Yi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,(e.flags&4098)!==0&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function rx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function v0(t){if(Yi(t)!==t)throw Error(q(188))}function cR(t){var e=t.alternate;if(!e){if(e=Yi(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return v0(s),t;if(i===r)return v0(s),e;i=i.sibling}throw Error(q(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function sx(t){return t=cR(t),t!==null?ix(t):null}function ix(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ix(t);if(e!==null)return e;t=t.sibling}return null}var ox=Sn.unstable_scheduleCallback,y0=Sn.unstable_cancelCallback,hR=Sn.unstable_shouldYield,dR=Sn.unstable_requestPaint,Ze=Sn.unstable_now,fR=Sn.unstable_getCurrentPriorityLevel,iv=Sn.unstable_ImmediatePriority,ax=Sn.unstable_UserBlockingPriority,xh=Sn.unstable_NormalPriority,pR=Sn.unstable_LowPriority,lx=Sn.unstable_IdlePriority,Cd=null,fr=null;function mR(t){if(fr&&typeof fr.onCommitFiberRoot=="function")try{fr.onCommitFiberRoot(Cd,t,void 0,(t.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:yR,gR=Math.log,vR=Math.LN2;function yR(t){return t>>>=0,t===0?32:31-(gR(t)/vR|0)|0}var kc=64,Tc=4194304;function fl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function kh(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=fl(a):(i&=o,i!==0&&(r=fl(i)))}else o=n&~s,o!==0?r=fl(o):i!==0&&(r=fl(i));if(r===0)return 0;if(e!==0&&e!==r&&(e&s)===0&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if((r&4)!==0&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Kn(e),s=1<<n,r|=t[n],e&=~s;return r}function wR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _R(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Kn(i),a=1<<o,l=s[o];l===-1?((a&n)===0||(a&r)!==0)&&(s[o]=wR(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function wm(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ux(){var t=kc;return kc<<=1,(kc&4194240)===0&&(kc=64),t}function sp(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Du(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Kn(e),t[e]=n}function ER(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Kn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ov(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Kn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var be=0;function cx(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var hx,av,dx,fx,px,_m=!1,bc=[],vs=null,ys=null,ws=null,Hl=new Map,Gl=new Map,ls=[],SR="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function w0(t,e){switch(t){case"focusin":case"focusout":vs=null;break;case"dragenter":case"dragleave":ys=null;break;case"mouseover":case"mouseout":ws=null;break;case"pointerover":case"pointerout":Hl.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gl.delete(e.pointerId)}}function qa(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ou(e),e!==null&&av(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function IR(t,e,n,r,s){switch(e){case"focusin":return vs=qa(vs,t,e,n,r,s),!0;case"dragenter":return ys=qa(ys,t,e,n,r,s),!0;case"mouseover":return ws=qa(ws,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Hl.set(i,qa(Hl.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Gl.set(i,qa(Gl.get(i)||null,t,e,n,r,s)),!0}return!1}function mx(t){var e=di(t.target);if(e!==null){var n=Yi(e);if(n!==null){if(e=n.tag,e===13){if(e=rx(n),e!==null){t.blockedOn=e,px(t.priority,function(){dx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function eh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Em(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mm=r,n.target.dispatchEvent(r),mm=null}else return e=Ou(n),e!==null&&av(e),t.blockedOn=n,!1;e.shift()}return!0}function _0(t,e,n){eh(t)&&n.delete(e)}function xR(){_m=!1,vs!==null&&eh(vs)&&(vs=null),ys!==null&&eh(ys)&&(ys=null),ws!==null&&eh(ws)&&(ws=null),Hl.forEach(_0),Gl.forEach(_0)}function Wa(t,e){t.blockedOn===e&&(t.blockedOn=null,_m||(_m=!0,Sn.unstable_scheduleCallback(Sn.unstable_NormalPriority,xR)))}function Kl(t){function e(s){return Wa(s,t)}if(0<bc.length){Wa(bc[0],t);for(var n=1;n<bc.length;n++){var r=bc[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vs!==null&&Wa(vs,t),ys!==null&&Wa(ys,t),ws!==null&&Wa(ws,t),Hl.forEach(e),Gl.forEach(e),n=0;n<ls.length;n++)r=ls[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ls.length&&(n=ls[0],n.blockedOn===null);)mx(n),n.blockedOn===null&&ls.shift()}var Uo=Gr.ReactCurrentBatchConfig,Th=!0;function kR(t,e,n,r){var s=be,i=Uo.transition;Uo.transition=null;try{be=1,lv(t,e,n,r)}finally{be=s,Uo.transition=i}}function TR(t,e,n,r){var s=be,i=Uo.transition;Uo.transition=null;try{be=4,lv(t,e,n,r)}finally{be=s,Uo.transition=i}}function lv(t,e,n,r){if(Th){var s=Em(t,e,n,r);if(s===null)pp(t,e,r,bh,n),w0(t,r);else if(IR(s,t,e,n,r))r.stopPropagation();else if(w0(t,r),e&4&&-1<SR.indexOf(t)){for(;s!==null;){var i=Ou(s);if(i!==null&&hx(i),i=Em(t,e,n,r),i===null&&pp(t,e,r,bh,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else pp(t,e,r,null,n)}}var bh=null;function Em(t,e,n,r){if(bh=null,t=sv(r),t=di(t),t!==null)if(e=Yi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=rx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return bh=t,null}function gx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(fR()){case iv:return 1;case ax:return 4;case xh:case pR:return 16;case lx:return 536870912;default:return 16}default:return 16}}var ds=null,uv=null,th=null;function vx(){if(th)return th;var t,e=uv,n=e.length,r,s="value"in ds?ds.value:ds.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return th=s.slice(t,1<r?1-r:void 0)}function nh(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Cc(){return!0}function E0(){return!1}function Tn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Cc:E0,this.isPropagationStopped=E0,this}return je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Cc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Cc)},persist:function(){},isPersistent:Cc}),e}var wa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cv=Tn(wa),Au=je({},wa,{view:0,detail:0}),bR=Tn(Au),ip,op,Ha,Ld=je({},Au,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ha&&(Ha&&t.type==="mousemove"?(ip=t.screenX-Ha.screenX,op=t.screenY-Ha.screenY):op=ip=0,Ha=t),ip)},movementY:function(t){return"movementY"in t?t.movementY:op}}),S0=Tn(Ld),CR=je({},Ld,{dataTransfer:0}),LR=Tn(CR),PR=je({},Au,{relatedTarget:0}),ap=Tn(PR),RR=je({},wa,{animationName:0,elapsedTime:0,pseudoElement:0}),NR=Tn(RR),DR=je({},wa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),AR=Tn(DR),OR=je({},wa,{data:0}),I0=Tn(OR),MR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$R={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function FR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=UR[t])?!!e[t]:!1}function hv(){return FR}var BR=je({},Au,{key:function(t){if(t.key){var e=MR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=nh(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?$R[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hv,charCode:function(t){return t.type==="keypress"?nh(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?nh(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VR=Tn(BR),jR=je({},Ld,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),x0=Tn(jR),zR=je({},Au,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hv}),qR=Tn(zR),WR=je({},wa,{propertyName:0,elapsedTime:0,pseudoElement:0}),HR=Tn(WR),GR=je({},Ld,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),KR=Tn(GR),QR=[9,13,27,32],dv=Ur&&"CompositionEvent"in window,Il=null;Ur&&"documentMode"in document&&(Il=document.documentMode);var YR=Ur&&"TextEvent"in window&&!Il,yx=Ur&&(!dv||Il&&8<Il&&11>=Il),k0=String.fromCharCode(32),T0=!1;function wx(t,e){switch(t){case"keyup":return QR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _x(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Eo=!1;function XR(t,e){switch(t){case"compositionend":return _x(e);case"keypress":return e.which!==32?null:(T0=!0,k0);case"textInput":return t=e.data,t===k0&&T0?null:t;default:return null}}function ZR(t,e){if(Eo)return t==="compositionend"||!dv&&wx(t,e)?(t=vx(),th=uv=ds=null,Eo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yx&&e.locale!=="ko"?null:e.data;default:return null}}var JR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function b0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!JR[t.type]:e==="textarea"}function Ex(t,e,n,r){ZI(r),e=Ch(e,"onChange"),0<e.length&&(n=new cv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var xl=null,Ql=null;function eN(t){Nx(t,0)}function Pd(t){var e=xo(t);if(WI(e))return t}function tN(t,e){if(t==="change")return e}var Sx=!1;if(Ur){var lp;if(Ur){var up="oninput"in document;if(!up){var C0=document.createElement("div");C0.setAttribute("oninput","return;"),up=typeof C0.oninput=="function"}lp=up}else lp=!1;Sx=lp&&(!document.documentMode||9<document.documentMode)}function L0(){xl&&(xl.detachEvent("onpropertychange",Ix),Ql=xl=null)}function Ix(t){if(t.propertyName==="value"&&Pd(Ql)){var e=[];Ex(e,Ql,t,sv(t)),nx(eN,e)}}function nN(t,e,n){t==="focusin"?(L0(),xl=e,Ql=n,xl.attachEvent("onpropertychange",Ix)):t==="focusout"&&L0()}function rN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pd(Ql)}function sN(t,e){if(t==="click")return Pd(e)}function iN(t,e){if(t==="input"||t==="change")return Pd(e)}function oN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:oN;function Yl(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rm.call(e,s)||!Yn(t[s],e[s]))return!1}return!0}function P0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function R0(t,e){var n=P0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=P0(n)}}function xx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?xx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function kx(){for(var t=window,e=Eh();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Eh(t.document)}return e}function fv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function aN(t){var e=kx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&xx(n.ownerDocument.documentElement,n)){if(r!==null&&fv(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=R0(n,i);var o=R0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var lN=Ur&&"documentMode"in document&&11>=document.documentMode,So=null,Sm=null,kl=null,Im=!1;function N0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Im||So==null||So!==Eh(r)||(r=So,"selectionStart"in r&&fv(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),kl&&Yl(kl,r)||(kl=r,r=Ch(Sm,"onSelect"),0<r.length&&(e=new cv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=So)))}function Lc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Io={animationend:Lc("Animation","AnimationEnd"),animationiteration:Lc("Animation","AnimationIteration"),animationstart:Lc("Animation","AnimationStart"),transitionend:Lc("Transition","TransitionEnd")},cp={},Tx={};Ur&&(Tx=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Rd(t){if(cp[t])return cp[t];if(!Io[t])return t;var e=Io[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Tx)return cp[t]=e[n];return t}var bx=Rd("animationend"),Cx=Rd("animationiteration"),Lx=Rd("animationstart"),Px=Rd("transitionend"),Rx=new Map,D0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vs(t,e){Rx.set(t,e),Qi(e,[t])}for(var hp=0;hp<D0.length;hp++){var dp=D0[hp],uN=dp.toLowerCase(),cN=dp[0].toUpperCase()+dp.slice(1);Vs(uN,"on"+cN)}Vs(bx,"onAnimationEnd");Vs(Cx,"onAnimationIteration");Vs(Lx,"onAnimationStart");Vs("dblclick","onDoubleClick");Vs("focusin","onFocus");Vs("focusout","onBlur");Vs(Px,"onTransitionEnd");Go("onMouseEnter",["mouseout","mouseover"]);Go("onMouseLeave",["mouseout","mouseover"]);Go("onPointerEnter",["pointerout","pointerover"]);Go("onPointerLeave",["pointerout","pointerover"]);Qi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hN=new Set("cancel close invalid load scroll toggle".split(" ").concat(pl));function A0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,uR(r,e,void 0,t),t.currentTarget=null}function Nx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;A0(s,a,u),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;A0(s,a,u),i=l}}}if(Ih)throw t=ym,Ih=!1,ym=null,t}function Ne(t,e){var n=e[Cm];n===void 0&&(n=e[Cm]=new Set);var r=t+"__bubble";n.has(r)||(Dx(e,t,2,!1),n.add(r))}function fp(t,e,n){var r=0;e&&(r|=4),Dx(n,t,r,e)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function Xl(t){if(!t[Pc]){t[Pc]=!0,BI.forEach(function(n){n!=="selectionchange"&&(hN.has(n)||fp(n,!1,t),fp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pc]||(e[Pc]=!0,fp("selectionchange",!1,e))}}function Dx(t,e,n,r){switch(gx(e)){case 1:var s=kR;break;case 4:s=TR;break;default:s=lv}n=s.bind(null,e,n,t),s=void 0,!vm||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function pp(t,e,n,r,s){var i=r;if((e&1)===0&&(e&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=di(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}nx(function(){var u=i,c=sv(n),h=[];e:{var f=Rx.get(t);if(f!==void 0){var p=cv,m=t;switch(t){case"keypress":if(nh(n)===0)break e;case"keydown":case"keyup":p=VR;break;case"focusin":m="focus",p=ap;break;case"focusout":m="blur",p=ap;break;case"beforeblur":case"afterblur":p=ap;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=S0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=LR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=qR;break;case bx:case Cx:case Lx:p=NR;break;case Px:p=HR;break;case"scroll":p=bR;break;case"wheel":p=KR;break;case"copy":case"cut":case"paste":p=AR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=x0}var _=(e&4)!==0,E=!_&&t==="scroll",g=_?f!==null?f+"Capture":null:f;_=[];for(var y=u,v;y!==null;){v=y;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,g!==null&&(w=Wl(y,g),w!=null&&_.push(Zl(y,w,v)))),E)break;y=y.return}0<_.length&&(f=new p(f,m,null,n,c),h.push({event:f,listeners:_}))}}if((e&7)===0){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==mm&&(m=n.relatedTarget||n.fromElement)&&(di(m)||m[Fr]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(m=n.relatedTarget||n.toElement,p=u,m=m?di(m):null,m!==null&&(E=Yi(m),m!==E||m.tag!==5&&m.tag!==6)&&(m=null)):(p=null,m=u),p!==m)){if(_=S0,w="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(_=x0,w="onPointerLeave",g="onPointerEnter",y="pointer"),E=p==null?f:xo(p),v=m==null?f:xo(m),f=new _(w,y+"leave",p,n,c),f.target=E,f.relatedTarget=v,w=null,di(c)===u&&(_=new _(g,y+"enter",m,n,c),_.target=v,_.relatedTarget=E,w=_),E=w,p&&m)t:{for(_=p,g=m,y=0,v=_;v;v=co(v))y++;for(v=0,w=g;w;w=co(w))v++;for(;0<y-v;)_=co(_),y--;for(;0<v-y;)g=co(g),v--;for(;y--;){if(_===g||g!==null&&_===g.alternate)break t;_=co(_),g=co(g)}_=null}else _=null;p!==null&&O0(h,f,p,_,!1),m!==null&&E!==null&&O0(h,E,m,_,!0)}}e:{if(f=u?xo(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var b=tN;else if(b0(f))if(Sx)b=iN;else{b=rN;var I=nN}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(b=sN);if(b&&(b=b(t,u))){Ex(h,b,n,c);break e}I&&I(t,f,u),t==="focusout"&&(I=f._wrapperState)&&I.controlled&&f.type==="number"&&cm(f,"number",f.value)}switch(I=u?xo(u):window,t){case"focusin":(b0(I)||I.contentEditable==="true")&&(So=I,Sm=u,kl=null);break;case"focusout":kl=Sm=So=null;break;case"mousedown":Im=!0;break;case"contextmenu":case"mouseup":case"dragend":Im=!1,N0(h,n,c);break;case"selectionchange":if(lN)break;case"keydown":case"keyup":N0(h,n,c)}var R;if(dv)e:{switch(t){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Eo?wx(t,n)&&(A="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(yx&&n.locale!=="ko"&&(Eo||A!=="onCompositionStart"?A==="onCompositionEnd"&&Eo&&(R=vx()):(ds=c,uv="value"in ds?ds.value:ds.textContent,Eo=!0)),I=Ch(u,A),0<I.length&&(A=new I0(A,t,null,n,c),h.push({event:A,listeners:I}),R?A.data=R:(R=_x(n),R!==null&&(A.data=R)))),(R=YR?XR(t,n):ZR(t,n))&&(u=Ch(u,"onBeforeInput"),0<u.length&&(c=new I0("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=R))}Nx(h,e)})}function Zl(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ch(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Wl(t,n),i!=null&&r.unshift(Zl(t,i,s)),i=Wl(t,e),i!=null&&r.push(Zl(t,i,s))),t=t.return}return r}function co(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function O0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,s?(l=Wl(n,i),l!=null&&o.unshift(Zl(n,l,a))):s||(l=Wl(n,i),l!=null&&o.push(Zl(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var dN=/\r\n?/g,fN=/\u0000|\uFFFD/g;function M0(t){return(typeof t=="string"?t:""+t).replace(dN,`
`).replace(fN,"")}function Rc(t,e,n){if(e=M0(e),M0(t)!==e&&n)throw Error(q(425))}function Lh(){}var xm=null,km=null;function Tm(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bm=typeof setTimeout=="function"?setTimeout:void 0,pN=typeof clearTimeout=="function"?clearTimeout:void 0,$0=typeof Promise=="function"?Promise:void 0,mN=typeof queueMicrotask=="function"?queueMicrotask:typeof $0<"u"?function(t){return $0.resolve(null).then(t).catch(gN)}:bm;function gN(t){setTimeout(function(){throw t})}function mp(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Kl(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Kl(e)}function _s(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function U0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var _a=Math.random().toString(36).slice(2),rr="__reactFiber$"+_a,Jl="__reactProps$"+_a,Fr="__reactContainer$"+_a,Cm="__reactEvents$"+_a,vN="__reactListeners$"+_a,yN="__reactHandles$"+_a;function di(t){var e=t[rr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Fr]||n[rr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=U0(t);t!==null;){if(n=t[rr])return n;t=U0(t)}return e}t=n,n=t.parentNode}return null}function Ou(t){return t=t[rr]||t[Fr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Nd(t){return t[Jl]||null}var Lm=[],ko=-1;function js(t){return{current:t}}function Ae(t){0>ko||(t.current=Lm[ko],Lm[ko]=null,ko--)}function Pe(t,e){ko++,Lm[ko]=t.current,t.current=e}var Ls={},zt=js(Ls),an=js(!1),Pi=Ls;function Ko(t,e){var n=t.type.contextTypes;if(!n)return Ls;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function ln(t){return t=t.childContextTypes,t!=null}function Ph(){Ae(an),Ae(zt)}function F0(t,e,n){if(zt.current!==Ls)throw Error(q(168));Pe(zt,e),Pe(an,n)}function Ax(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(q(108,nR(t)||"Unknown",s));return je({},n,r)}function Rh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ls,Pi=zt.current,Pe(zt,t),Pe(an,an.current),!0}function B0(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=Ax(t,e,Pi),r.__reactInternalMemoizedMergedChildContext=t,Ae(an),Ae(zt),Pe(zt,t)):Ae(an),Pe(an,n)}var br=null,Dd=!1,gp=!1;function Ox(t){br===null?br=[t]:br.push(t)}function wN(t){Dd=!0,Ox(t)}function zs(){if(!gp&&br!==null){gp=!0;var t=0,e=be;try{var n=br;for(be=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}br=null,Dd=!1}catch(s){throw br!==null&&(br=br.slice(t+1)),ox(iv,zs),s}finally{be=e,gp=!1}}return null}var To=[],bo=0,Nh=null,Dh=0,Pn=[],Rn=0,Ri=null,Lr=1,Pr="";function ni(t,e){To[bo++]=Dh,To[bo++]=Nh,Nh=t,Dh=e}function Mx(t,e,n){Pn[Rn++]=Lr,Pn[Rn++]=Pr,Pn[Rn++]=Ri,Ri=t;var r=Lr;t=Pr;var s=32-Kn(r)-1;r&=~(1<<s),n+=1;var i=32-Kn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Lr=1<<32-Kn(e)+s|n<<s|r,Pr=i+t}else Lr=1<<i|n<<s|r,Pr=t}function pv(t){t.return!==null&&(ni(t,1),Mx(t,1,0))}function mv(t){for(;t===Nh;)Nh=To[--bo],To[bo]=null,Dh=To[--bo],To[bo]=null;for(;t===Ri;)Ri=Pn[--Rn],Pn[Rn]=null,Pr=Pn[--Rn],Pn[Rn]=null,Lr=Pn[--Rn],Pn[Rn]=null}var yn=null,gn=null,Me=!1,Wn=null;function $x(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function V0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,gn=_s(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,gn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ri!==null?{id:Lr,overflow:Pr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,gn=null,!0):!1;default:return!1}}function Pm(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Rm(t){if(Me){var e=gn;if(e){var n=e;if(!V0(t,e)){if(Pm(t))throw Error(q(418));e=_s(n.nextSibling);var r=yn;e&&V0(t,e)?$x(r,n):(t.flags=t.flags&-4097|2,Me=!1,yn=t)}}else{if(Pm(t))throw Error(q(418));t.flags=t.flags&-4097|2,Me=!1,yn=t}}}function j0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function Nc(t){if(t!==yn)return!1;if(!Me)return j0(t),Me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Tm(t.type,t.memoizedProps)),e&&(e=gn)){if(Pm(t))throw Ux(),Error(q(418));for(;e;)$x(t,e),e=_s(e.nextSibling)}if(j0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){gn=_s(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}gn=null}}else gn=yn?_s(t.stateNode.nextSibling):null;return!0}function Ux(){for(var t=gn;t;)t=_s(t.nextSibling)}function Qo(){gn=yn=null,Me=!1}function gv(t){Wn===null?Wn=[t]:Wn.push(t)}var _N=Gr.ReactCurrentBatchConfig;function zn(t,e){if(t&&t.defaultProps){e=je({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Ah=js(null),Oh=null,Co=null,vv=null;function yv(){vv=Co=Oh=null}function wv(t){var e=Ah.current;Ae(Ah),t._currentValue=e}function Nm(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Fo(t,e){Oh=t,vv=Co=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&e)!==0&&(rn=!0),t.firstContext=null)}function Mn(t){var e=t._currentValue;if(vv!==t)if(t={context:t,memoizedValue:e,next:null},Co===null){if(Oh===null)throw Error(q(308));Co=t,Oh.dependencies={lanes:0,firstContext:t}}else Co=Co.next=t;return e}var fi=null;function _v(t){fi===null?fi=[t]:fi.push(t)}function Fx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_v(e)):(n.next=s.next,s.next=n),e.interleaved=n,Br(t,r)}function Br(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var as=!1;function Ev(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ar(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Es(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,(Ie&2)!==0){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Br(t,n)}return s=r.interleaved,s===null?(e.next=e,_v(r)):(e.next=s.next,s.next=e),r.interleaved=e,Br(t,n)}function rh(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ov(t,n)}}function z0(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Mh(t,e,n,r){var s=t.updateQueue;as=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(i!==null){var h=s.baseState;o=0,c=u=l=null,a=i;do{var f=a.lane,p=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,_=a;switch(f=e,p=n,_.tag){case 1:if(m=_.payload,typeof m=="function"){h=m.call(p,h,f);break e}h=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=_.payload,f=typeof m=="function"?m.call(p,h,f):m,f==null)break e;h=je({},h,f);break e;case 2:as=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=s.effects,f===null?s.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,o|=f;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;f=a,a=f.next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}while(1);if(c===null&&(l=h),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=c,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Di|=o,t.lanes=o,t.memoizedState=h}}function q0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(q(191,s));s.call(r)}}}var Vx=new FI.Component().refs;function Dm(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:je({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Ad={isMounted:function(t){return(t=t._reactInternals)?Yi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yt(),s=Is(t),i=Ar(r,s);i.payload=e,n!=null&&(i.callback=n),e=Es(t,i,s),e!==null&&(Qn(e,t,s,r),rh(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yt(),s=Is(t),i=Ar(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Es(t,i,s),e!==null&&(Qn(e,t,s,r),rh(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yt(),r=Is(t),s=Ar(n,r);s.tag=2,e!=null&&(s.callback=e),e=Es(t,s,r),e!==null&&(Qn(e,t,r,n),rh(e,t,r))}};function W0(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Yl(n,r)||!Yl(s,i):!0}function jx(t,e,n){var r=!1,s=Ls,i=e.contextType;return typeof i=="object"&&i!==null?i=Mn(i):(s=ln(e)?Pi:zt.current,r=e.contextTypes,i=(r=r!=null)?Ko(t,s):Ls),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ad,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function H0(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Ad.enqueueReplaceState(e,e.state,null)}function Am(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs=Vx,Ev(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Mn(i):(i=ln(e)?Pi:zt.current,s.context=Ko(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Dm(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Ad.enqueueReplaceState(s,s.state,null),Mh(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ga(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;a===Vx&&(a=s.refs={}),o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function Dc(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function G0(t){var e=t._init;return e(t._payload)}function zx(t){function e(g,y){if(t){var v=g.deletions;v===null?(g.deletions=[y],g.flags|=16):v.push(y)}}function n(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function s(g,y){return g=xs(g,y),g.index=0,g.sibling=null,g}function i(g,y,v){return g.index=v,t?(v=g.alternate,v!==null?(v=v.index,v<y?(g.flags|=2,y):v):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,y,v,w){return y===null||y.tag!==6?(y=Ip(v,g.mode,w),y.return=g,y):(y=s(y,v),y.return=g,y)}function l(g,y,v,w){var b=v.type;return b===_o?c(g,y,v.props.children,w,v.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===os&&G0(b)===y.type)?(w=s(y,v.props),w.ref=Ga(g,y,v),w.return=g,w):(w=uh(v.type,v.key,v.props,null,g.mode,w),w.ref=Ga(g,y,v),w.return=g,w)}function u(g,y,v,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=xp(v,g.mode,w),y.return=g,y):(y=s(y,v.children||[]),y.return=g,y)}function c(g,y,v,w,b){return y===null||y.tag!==7?(y=Ii(v,g.mode,w,b),y.return=g,y):(y=s(y,v),y.return=g,y)}function h(g,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Ip(""+y,g.mode,v),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sc:return v=uh(y.type,y.key,y.props,null,g.mode,v),v.ref=Ga(g,null,y),v.return=g,v;case wo:return y=xp(y,g.mode,v),y.return=g,y;case os:var w=y._init;return h(g,w(y._payload),v)}if(dl(y)||ja(y))return y=Ii(y,g.mode,v,null),y.return=g,y;Dc(g,y)}return null}function f(g,y,v,w){var b=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(g,y,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Sc:return v.key===b?l(g,y,v,w):null;case wo:return v.key===b?u(g,y,v,w):null;case os:return b=v._init,f(g,y,b(v._payload),w)}if(dl(v)||ja(v))return b!==null?null:c(g,y,v,w,null);Dc(g,v)}return null}function p(g,y,v,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(v)||null,a(y,g,""+w,b);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Sc:return g=g.get(w.key===null?v:w.key)||null,l(y,g,w,b);case wo:return g=g.get(w.key===null?v:w.key)||null,u(y,g,w,b);case os:var I=w._init;return p(g,y,v,I(w._payload),b)}if(dl(w)||ja(w))return g=g.get(v)||null,c(y,g,w,b,null);Dc(y,w)}return null}function m(g,y,v,w){for(var b=null,I=null,R=y,A=y=0,L=null;R!==null&&A<v.length;A++){R.index>A?(L=R,R=null):L=R.sibling;var F=f(g,R,v[A],w);if(F===null){R===null&&(R=L);break}t&&R&&F.alternate===null&&e(g,R),y=i(F,y,A),I===null?b=F:I.sibling=F,I=F,R=L}if(A===v.length)return n(g,R),Me&&ni(g,A),b;if(R===null){for(;A<v.length;A++)R=h(g,v[A],w),R!==null&&(y=i(R,y,A),I===null?b=R:I.sibling=R,I=R);return Me&&ni(g,A),b}for(R=r(g,R);A<v.length;A++)L=p(R,g,A,v[A],w),L!==null&&(t&&L.alternate!==null&&R.delete(L.key===null?A:L.key),y=i(L,y,A),I===null?b=L:I.sibling=L,I=L);return t&&R.forEach(function(G){return e(g,G)}),Me&&ni(g,A),b}function _(g,y,v,w){var b=ja(v);if(typeof b!="function")throw Error(q(150));if(v=b.call(v),v==null)throw Error(q(151));for(var I=b=null,R=y,A=y=0,L=null,F=v.next();R!==null&&!F.done;A++,F=v.next()){R.index>A?(L=R,R=null):L=R.sibling;var G=f(g,R,F.value,w);if(G===null){R===null&&(R=L);break}t&&R&&G.alternate===null&&e(g,R),y=i(G,y,A),I===null?b=G:I.sibling=G,I=G,R=L}if(F.done)return n(g,R),Me&&ni(g,A),b;if(R===null){for(;!F.done;A++,F=v.next())F=h(g,F.value,w),F!==null&&(y=i(F,y,A),I===null?b=F:I.sibling=F,I=F);return Me&&ni(g,A),b}for(R=r(g,R);!F.done;A++,F=v.next())F=p(R,g,A,F.value,w),F!==null&&(t&&F.alternate!==null&&R.delete(F.key===null?A:F.key),y=i(F,y,A),I===null?b=F:I.sibling=F,I=F);return t&&R.forEach(function($){return e(g,$)}),Me&&ni(g,A),b}function E(g,y,v,w){if(typeof v=="object"&&v!==null&&v.type===_o&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Sc:e:{for(var b=v.key,I=y;I!==null;){if(I.key===b){if(b=v.type,b===_o){if(I.tag===7){n(g,I.sibling),y=s(I,v.props.children),y.return=g,g=y;break e}}else if(I.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===os&&G0(b)===I.type){n(g,I.sibling),y=s(I,v.props),y.ref=Ga(g,I,v),y.return=g,g=y;break e}n(g,I);break}else e(g,I);I=I.sibling}v.type===_o?(y=Ii(v.props.children,g.mode,w,v.key),y.return=g,g=y):(w=uh(v.type,v.key,v.props,null,g.mode,w),w.ref=Ga(g,y,v),w.return=g,g=w)}return o(g);case wo:e:{for(I=v.key;y!==null;){if(y.key===I)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(g,y.sibling),y=s(y,v.children||[]),y.return=g,g=y;break e}else{n(g,y);break}else e(g,y);y=y.sibling}y=xp(v,g.mode,w),y.return=g,g=y}return o(g);case os:return I=v._init,E(g,y,I(v._payload),w)}if(dl(v))return m(g,y,v,w);if(ja(v))return _(g,y,v,w);Dc(g,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(g,y.sibling),y=s(y,v),y.return=g,g=y):(n(g,y),y=Ip(v,g.mode,w),y.return=g,g=y),o(g)):n(g,y)}return E}var Yo=zx(!0),qx=zx(!1),Mu={},pr=js(Mu),eu=js(Mu),tu=js(Mu);function pi(t){if(t===Mu)throw Error(q(174));return t}function Sv(t,e){switch(Pe(tu,e),Pe(eu,t),Pe(pr,Mu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dm(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dm(e,t)}Ae(pr),Pe(pr,e)}function Xo(){Ae(pr),Ae(eu),Ae(tu)}function Wx(t){pi(tu.current);var e=pi(pr.current),n=dm(e,t.type);e!==n&&(Pe(eu,t),Pe(pr,n))}function Iv(t){eu.current===t&&(Ae(pr),Ae(eu))}var Be=js(0);function $h(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var vp=[];function xv(){for(var t=0;t<vp.length;t++)vp[t]._workInProgressVersionPrimary=null;vp.length=0}var sh=Gr.ReactCurrentDispatcher,yp=Gr.ReactCurrentBatchConfig,Ni=0,Ve=null,st=null,dt=null,Uh=!1,Tl=!1,nu=0,EN=0;function Dt(){throw Error(q(321))}function kv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function Tv(t,e,n,r,s,i){if(Ni=i,Ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sh.current=t===null||t.memoizedState===null?kN:TN,t=n(r,s),Tl){i=0;do{if(Tl=!1,nu=0,25<=i)throw Error(q(301));i+=1,dt=st=null,e.updateQueue=null,sh.current=bN,t=n(r,s)}while(Tl)}if(sh.current=Fh,e=st!==null&&st.next!==null,Ni=0,dt=st=Ve=null,Uh=!1,e)throw Error(q(300));return t}function bv(){var t=nu!==0;return nu=0,t}function er(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Ve.memoizedState=dt=t:dt=dt.next=t,dt}function $n(){if(st===null){var t=Ve.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=dt===null?Ve.memoizedState:dt.next;if(e!==null)dt=e,st=t;else{if(t===null)throw Error(q(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},dt===null?Ve.memoizedState=dt=t:dt=dt.next=t}return dt}function ru(t,e){return typeof e=="function"?e(t):e}function wp(t){var e=$n(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=st,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,u=i;do{var c=u.lane;if((Ni&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=r):l=l.next=h,Ve.lanes|=c,Di|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=a,Yn(r,e.memoizedState)||(rn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ve.lanes|=i,Di|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _p(t){var e=$n(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Yn(i,e.memoizedState)||(rn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Hx(){}function Gx(t,e){var n=Ve,r=$n(),s=e(),i=!Yn(r.memoizedState,s);if(i&&(r.memoizedState=s,rn=!0),r=r.queue,Cv(Yx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,su(9,Qx.bind(null,n,r,s,e),void 0,null),mt===null)throw Error(q(349));(Ni&30)!==0||Kx(n,e,s)}return s}function Kx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Qx(t,e,n,r){e.value=n,e.getSnapshot=r,Xx(e)&&Zx(t)}function Yx(t,e,n){return n(function(){Xx(e)&&Zx(t)})}function Xx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function Zx(t){var e=Br(t,1);e!==null&&Qn(e,t,1,-1)}function K0(t){var e=er();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ru,lastRenderedState:t},e.queue=t,t=t.dispatch=xN.bind(null,Ve,t),[e.memoizedState,t]}function su(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ve.updateQueue,e===null?(e={lastEffect:null,stores:null},Ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Jx(){return $n().memoizedState}function ih(t,e,n,r){var s=er();Ve.flags|=t,s.memoizedState=su(1|e,n,void 0,r===void 0?null:r)}function Od(t,e,n,r){var s=$n();r=r===void 0?null:r;var i=void 0;if(st!==null){var o=st.memoizedState;if(i=o.destroy,r!==null&&kv(r,o.deps)){s.memoizedState=su(e,n,i,r);return}}Ve.flags|=t,s.memoizedState=su(1|e,n,i,r)}function Q0(t,e){return ih(8390656,8,t,e)}function Cv(t,e){return Od(2048,8,t,e)}function ek(t,e){return Od(4,2,t,e)}function tk(t,e){return Od(4,4,t,e)}function nk(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function rk(t,e,n){return n=n!=null?n.concat([t]):null,Od(4,4,nk.bind(null,e,t),n)}function Lv(){}function sk(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function ik(t,e){var n=$n();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function ok(t,e,n){return(Ni&21)===0?(t.baseState&&(t.baseState=!1,rn=!0),t.memoizedState=n):(Yn(n,e)||(n=ux(),Ve.lanes|=n,Di|=n,t.baseState=!0),e)}function SN(t,e){var n=be;be=n!==0&&4>n?n:4,t(!0);var r=yp.transition;yp.transition={};try{t(!1),e()}finally{be=n,yp.transition=r}}function ak(){return $n().memoizedState}function IN(t,e,n){var r=Is(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},lk(t))uk(e,n);else if(n=Fx(t,e,n,r),n!==null){var s=Yt();Qn(n,t,r,s),ck(n,e,r)}}function xN(t,e,n){var r=Is(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(lk(t))uk(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Yn(a,o)){var l=e.interleaved;l===null?(s.next=s,_v(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=Fx(t,e,s,r),n!==null&&(s=Yt(),Qn(n,t,r,s),ck(n,e,r))}}function lk(t){var e=t.alternate;return t===Ve||e!==null&&e===Ve}function uk(t,e){Tl=Uh=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function ck(t,e,n){if((n&4194240)!==0){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ov(t,n)}}var Fh={readContext:Mn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},kN={readContext:Mn,useCallback:function(t,e){return er().memoizedState=[t,e===void 0?null:e],t},useContext:Mn,useEffect:Q0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ih(4194308,4,nk.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ih(4194308,4,t,e)},useInsertionEffect:function(t,e){return ih(4,2,t,e)},useMemo:function(t,e){var n=er();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=er();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=IN.bind(null,Ve,t),[r.memoizedState,t]},useRef:function(t){var e=er();return t={current:t},e.memoizedState=t},useState:K0,useDebugValue:Lv,useDeferredValue:function(t){return er().memoizedState=t},useTransition:function(){var t=K0(!1),e=t[0];return t=SN.bind(null,t[1]),er().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ve,s=er();if(Me){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),mt===null)throw Error(q(349));(Ni&30)!==0||Kx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Q0(Yx.bind(null,r,i,t),[t]),r.flags|=2048,su(9,Qx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=er(),e=mt.identifierPrefix;if(Me){var n=Pr,r=Lr;n=(r&~(1<<32-Kn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=nu++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=EN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TN={readContext:Mn,useCallback:sk,useContext:Mn,useEffect:Cv,useImperativeHandle:rk,useInsertionEffect:ek,useLayoutEffect:tk,useMemo:ik,useReducer:wp,useRef:Jx,useState:function(){return wp(ru)},useDebugValue:Lv,useDeferredValue:function(t){var e=$n();return ok(e,st.memoizedState,t)},useTransition:function(){var t=wp(ru)[0],e=$n().memoizedState;return[t,e]},useMutableSource:Hx,useSyncExternalStore:Gx,useId:ak,unstable_isNewReconciler:!1},bN={readContext:Mn,useCallback:sk,useContext:Mn,useEffect:Cv,useImperativeHandle:rk,useInsertionEffect:ek,useLayoutEffect:tk,useMemo:ik,useReducer:_p,useRef:Jx,useState:function(){return _p(ru)},useDebugValue:Lv,useDeferredValue:function(t){var e=$n();return st===null?e.memoizedState=t:ok(e,st.memoizedState,t)},useTransition:function(){var t=_p(ru)[0],e=$n().memoizedState;return[t,e]},useMutableSource:Hx,useSyncExternalStore:Gx,useId:ak,unstable_isNewReconciler:!1};function Zo(t,e){try{var n="",r=e;do n+=tR(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Ep(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Om(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var CN=typeof WeakMap=="function"?WeakMap:Map;function hk(t,e,n){n=Ar(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Vh||(Vh=!0,Wm=r),Om(t,e)},n}function dk(t,e,n){n=Ar(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Om(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Om(t,e),typeof r!="function"&&(Ss===null?Ss=new Set([this]):Ss.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Y0(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new CN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=jN.bind(null,t,e,n),e.then(t,t))}function X0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Z0(t,e,n,r,s){return(t.mode&1)===0?(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ar(-1,1),e.tag=2,Es(n,e,1))),n.lanes|=1),t):(t.flags|=65536,t.lanes=s,t)}var LN=Gr.ReactCurrentOwner,rn=!1;function Wt(t,e,n,r){e.child=t===null?qx(e,null,n,r):Yo(e,t.child,n,r)}function J0(t,e,n,r,s){n=n.render;var i=e.ref;return Fo(e,s),r=Tv(t,e,n,r,i,s),n=bv(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vr(t,e,s)):(Me&&n&&pv(e),e.flags|=1,Wt(t,e,r,s),e.child)}function e_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!$v(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,fk(t,e,i,r,s)):(t=uh(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,(t.lanes&s)===0){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Yl,n(o,r)&&t.ref===e.ref)return Vr(t,e,s)}return e.flags|=1,t=xs(i,r),t.ref=e.ref,t.return=e,e.child=t}function fk(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Yl(i,r)&&t.ref===e.ref)if(rn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)(t.flags&131072)!==0&&(rn=!0);else return e.lanes=t.lanes,Vr(t,e,s)}return Mm(t,e,n,r,s)}function pk(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Po,fn),fn|=n;else{if((n&1073741824)===0)return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Po,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Pe(Po,fn),fn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Pe(Po,fn),fn|=r;return Wt(t,e,s,n),e.child}function mk(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mm(t,e,n,r,s){var i=ln(n)?Pi:zt.current;return i=Ko(e,i),Fo(e,s),n=Tv(t,e,n,r,i,s),r=bv(),t!==null&&!rn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Vr(t,e,s)):(Me&&r&&pv(e),e.flags|=1,Wt(t,e,n,s),e.child)}function t_(t,e,n,r,s){if(ln(n)){var i=!0;Rh(e)}else i=!1;if(Fo(e,s),e.stateNode===null)oh(t,e),jx(e,n,r),Am(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Mn(u):(u=ln(n)?Pi:zt.current,u=Ko(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&H0(e,o,r,u),as=!1;var f=e.memoizedState;o.state=f,Mh(e,r,o,s),l=e.memoizedState,a!==r||f!==l||an.current||as?(typeof c=="function"&&(Dm(e,n,c,r),l=e.memoizedState),(a=as||W0(e,n,a,r,f,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bx(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:zn(e.type,a),o.props=u,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Mn(l):(l=ln(n)?Pi:zt.current,l=Ko(e,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&H0(e,o,r,l),as=!1,f=e.memoizedState,o.state=f,Mh(e,r,o,s);var m=e.memoizedState;a!==h||f!==m||an.current||as?(typeof p=="function"&&(Dm(e,n,p,r),m=e.memoizedState),(u=as||W0(e,n,u,r,f,m,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return $m(t,e,n,r,i,s)}function $m(t,e,n,r,s,i){mk(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&B0(e,n,!1),Vr(t,e,i);r=e.stateNode,LN.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Yo(e,t.child,null,i),e.child=Yo(e,null,a,i)):Wt(t,e,a,i),e.memoizedState=r.state,s&&B0(e,n,!0),e.child}function gk(t){var e=t.stateNode;e.pendingContext?F0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&F0(t,e.context,!1),Sv(t,e.containerInfo)}function n_(t,e,n,r,s){return Qo(),gv(s),e.flags|=256,Wt(t,e,n,r),e.child}var Um={dehydrated:null,treeContext:null,retryLane:0};function Fm(t){return{baseLanes:t,cachePool:null,transitions:null}}function vk(t,e,n){var r=e.pendingProps,s=Be.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Pe(Be,s&1),t===null)return Rm(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((e.mode&1)===0?e.lanes=1:t.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ud(o,r,0,null),t=Ii(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fm(n),e.memoizedState=Um,t):Pv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return PN(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=xs(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=xs(a,i):(i=Ii(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Fm(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Um,r}return i=t.child,t=i.sibling,r=xs(i,{mode:"visible",children:r.children}),(e.mode&1)===0&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pv(t,e){return e=Ud({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ac(t,e,n,r){return r!==null&&gv(r),Yo(e,t.child,null,n),t=Pv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function PN(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Ep(Error(q(422))),Ac(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ud({mode:"visible",children:r.children},s,0,null),i=Ii(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,(e.mode&1)!==0&&Yo(e,t.child,null,o),e.child.memoizedState=Fm(o),e.memoizedState=Um,i);if((e.mode&1)===0)return Ac(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(q(419)),r=Ep(i,r,void 0),Ac(t,e,o,r)}if(a=(o&t.childLanes)!==0,rn||a){if(r=mt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=(s&(r.suspendedLanes|o))!==0?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Br(t,s),Qn(r,t,s,-1))}return Mv(),r=Ep(Error(q(421))),Ac(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=zN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,gn=_s(s.nextSibling),yn=e,Me=!0,Wn=null,t!==null&&(Pn[Rn++]=Lr,Pn[Rn++]=Pr,Pn[Rn++]=Ri,Lr=t.id,Pr=t.overflow,Ri=e),e=Pv(e,r.children),e.flags|=4096,e)}function r_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Nm(t.return,e,n)}function Sp(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function yk(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Wt(t,e,r.children,n),r=Be.current,(r&2)!==0)r=r&1|2,e.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&r_(t,n,e);else if(t.tag===19)r_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Pe(Be,r),(e.mode&1)===0)e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$h(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Sp(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$h(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Sp(e,!0,n,null,i);break;case"together":Sp(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function oh(t,e){(e.mode&1)===0&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Di|=e.lanes,(n&e.childLanes)===0)return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=xs(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=xs(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RN(t,e,n){switch(e.tag){case 3:gk(e),Qo();break;case 5:Wx(e);break;case 1:ln(e.type)&&Rh(e);break;case 4:Sv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Pe(Ah,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Pe(Be,Be.current&1),e.flags|=128,null):(n&e.child.childLanes)!==0?vk(t,e,n):(Pe(Be,Be.current&1),t=Vr(t,e,n),t!==null?t.sibling:null);Pe(Be,Be.current&1);break;case 19:if(r=(n&e.childLanes)!==0,(t.flags&128)!==0){if(r)return yk(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Pe(Be,Be.current),r)break;return null;case 22:case 23:return e.lanes=0,pk(t,e,n)}return Vr(t,e,n)}var wk,Bm,_k,Ek;wk=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bm=function(){};_k=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,pi(pr.current);var i=null;switch(n){case"input":s=lm(t,s),r=lm(t,r),i=[];break;case"select":s=je({},s,{value:void 0}),r=je({},r,{value:void 0}),i=[];break;case"textarea":s=hm(t,s),r=hm(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Lh)}fm(n,r);var o;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zl.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(a=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zl.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Ne("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};Ek=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ka(t,e){if(!Me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function At(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function NN(t,e,n){var r=e.pendingProps;switch(mv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return At(e),null;case 1:return ln(e.type)&&Ph(),At(e),null;case 3:return r=e.stateNode,Xo(),Ae(an),Ae(zt),xv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Nc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,Wn!==null&&(Km(Wn),Wn=null))),Bm(t,e),At(e),null;case 5:Iv(e);var s=pi(tu.current);if(n=e.type,t!==null&&e.stateNode!=null)_k(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return At(e),null}if(t=pi(pr.current),Nc(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[rr]=e,r[Jl]=i,t=(e.mode&1)!==0,n){case"dialog":Ne("cancel",r),Ne("close",r);break;case"iframe":case"object":case"embed":Ne("load",r);break;case"video":case"audio":for(s=0;s<pl.length;s++)Ne(pl[s],r);break;case"source":Ne("error",r);break;case"img":case"image":case"link":Ne("error",r),Ne("load",r);break;case"details":Ne("toggle",r);break;case"input":d0(r,i),Ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",r);break;case"textarea":p0(r,i),Ne("invalid",r)}fm(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Rc(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Rc(r.textContent,a,t),s=["children",""+a]):zl.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ne("scroll",r)}switch(n){case"input":Ic(r),f0(r,i,!0);break;case"textarea":Ic(r),m0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Lh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=KI(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script></script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[rr]=e,t[Jl]=r,wk(t,e,!1,!1),e.stateNode=t;e:{switch(o=pm(n,r),n){case"dialog":Ne("cancel",t),Ne("close",t),s=r;break;case"iframe":case"object":case"embed":Ne("load",t),s=r;break;case"video":case"audio":for(s=0;s<pl.length;s++)Ne(pl[s],t);s=r;break;case"source":Ne("error",t),s=r;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),s=r;break;case"details":Ne("toggle",t),s=r;break;case"input":d0(t,r),s=lm(t,r),Ne("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=je({},r,{value:void 0}),Ne("invalid",t);break;case"textarea":p0(t,r),s=hm(t,r),Ne("invalid",t);break;default:s=r}fm(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?XI(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&QI(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ql(t,l):typeof l=="number"&&ql(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zl.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ne("scroll",t):l!=null&&ev(t,i,l,o))}switch(n){case"input":Ic(t),f0(t,r,!1);break;case"textarea":Ic(t),m0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Oo(t,!!r.multiple,i,!1):r.defaultValue!=null&&Oo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Lh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return At(e),null;case 6:if(t&&e.stateNode!=null)Ek(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=pi(tu.current),pi(pr.current),Nc(e)){if(r=e.stateNode,n=e.memoizedProps,r[rr]=e,(i=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:Rc(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Rc(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[rr]=e,e.stateNode=r}return At(e),null;case 13:if(Ae(Be),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Me&&gn!==null&&(e.mode&1)!==0&&(e.flags&128)===0)Ux(),Qo(),e.flags|=98560,i=!1;else if(i=Nc(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(q(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(q(317));i[rr]=e}else Qo(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;At(e),i=!1}else Wn!==null&&(Km(Wn),Wn=null),i=!0;if(!i)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,(e.mode&1)!==0&&(t===null||(Be.current&1)!==0?ot===0&&(ot=3):Mv())),e.updateQueue!==null&&(e.flags|=4),At(e),null);case 4:return Xo(),Bm(t,e),t===null&&Xl(e.stateNode.containerInfo),At(e),null;case 10:return wv(e.type._context),At(e),null;case 17:return ln(e.type)&&Ph(),At(e),null;case 19:if(Ae(Be),i=e.memoizedState,i===null)return At(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ka(i,!1);else{if(ot!==0||t!==null&&(t.flags&128)!==0)for(t=e.child;t!==null;){if(o=$h(t),o!==null){for(e.flags|=128,Ka(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Pe(Be,Be.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ze()>Jo&&(e.flags|=128,r=!0,Ka(i,!1),e.lanes=4194304)}else{if(!r)if(t=$h(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ka(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Me)return At(e),null}else 2*Ze()-i.renderingStartTime>Jo&&n!==1073741824&&(e.flags|=128,r=!0,Ka(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ze(),e.sibling=null,n=Be.current,Pe(Be,r?n&1|2:n&1),e):(At(e),null);case 22:case 23:return Ov(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&(e.mode&1)!==0?(fn&1073741824)!==0&&(At(e),e.subtreeFlags&6&&(e.flags|=8192)):At(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function DN(t,e){switch(mv(e),e.tag){case 1:return ln(e.type)&&Ph(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Xo(),Ae(an),Ae(zt),xv(),t=e.flags,(t&65536)!==0&&(t&128)===0?(e.flags=t&-65537|128,e):null;case 5:return Iv(e),null;case 13:if(Ae(Be),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));Qo()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ae(Be),null;case 4:return Xo(),null;case 10:return wv(e.type._context),null;case 22:case 23:return Ov(),null;case 24:return null;default:return null}}var Oc=!1,$t=!1,AN=typeof WeakSet=="function"?WeakSet:Set,te=null;function Lo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){We(t,e,r)}else n.current=null}function Vm(t,e,n){try{n()}catch(r){We(t,e,r)}}var s_=!1;function ON(t,e){if(xm=Th,t=kx(),fv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var p;h!==n||s!==0&&h.nodeType!==3||(a=o+s),h!==i||r!==0&&h.nodeType!==3||(l=o+r),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++u===s&&(a=o),f===i&&++c===r&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(km={focusedElem:t,selectionRange:n},Th=!1,te=e;te!==null;)if(e=te,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,te=t;else for(;te!==null;){e=te;try{var m=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var _=m.memoizedProps,E=m.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?_:zn(e.type,_),E);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(w){We(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,te=t;break}te=e.return}return m=s_,s_=!1,m}function bl(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Vm(e,n,i)}s=s.next}while(s!==r)}}function Md(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function jm(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Sk(t){var e=t.alternate;e!==null&&(t.alternate=null,Sk(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[rr],delete e[Jl],delete e[Cm],delete e[vN],delete e[yN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ik(t){return t.tag===5||t.tag===3||t.tag===4}function i_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ik(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Lh));else if(r!==4&&(t=t.child,t!==null))for(zm(t,e,n),t=t.sibling;t!==null;)zm(t,e,n),t=t.sibling}function qm(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(qm(t,e,n),t=t.sibling;t!==null;)qm(t,e,n),t=t.sibling}var St=null,qn=!1;function es(t,e,n){for(n=n.child;n!==null;)xk(t,e,n),n=n.sibling}function xk(t,e,n){if(fr&&typeof fr.onCommitFiberUnmount=="function")try{fr.onCommitFiberUnmount(Cd,n)}catch{}switch(n.tag){case 5:$t||Lo(n,e);case 6:var r=St,s=qn;St=null,es(t,e,n),St=r,qn=s,St!==null&&(qn?(t=St,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):St.removeChild(n.stateNode));break;case 18:St!==null&&(qn?(t=St,n=n.stateNode,t.nodeType===8?mp(t.parentNode,n):t.nodeType===1&&mp(t,n),Kl(t)):mp(St,n.stateNode));break;case 4:r=St,s=qn,St=n.stateNode.containerInfo,qn=!0,es(t,e,n),St=r,qn=s;break;case 0:case 11:case 14:case 15:if(!$t&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!==0||(i&4)!==0)&&Vm(n,e,o),s=s.next}while(s!==r)}es(t,e,n);break;case 1:if(!$t&&(Lo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){We(n,e,a)}es(t,e,n);break;case 21:es(t,e,n);break;case 22:n.mode&1?($t=(r=$t)||n.memoizedState!==null,es(t,e,n),$t=r):es(t,e,n);break;default:es(t,e,n)}}function o_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new AN),e.forEach(function(r){var s=qN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:St=a.stateNode,qn=!1;break e;case 3:St=a.stateNode.containerInfo,qn=!0;break e;case 4:St=a.stateNode.containerInfo,qn=!0;break e}a=a.return}if(St===null)throw Error(q(160));xk(i,o,s),St=null,qn=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){We(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)kk(e,t),e=e.sibling}function kk(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),Jn(t),r&4){try{bl(3,t,t.return),Md(3,t)}catch(_){We(t,t.return,_)}try{bl(5,t,t.return)}catch(_){We(t,t.return,_)}}break;case 1:Vn(e,t),Jn(t),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(Vn(e,t),Jn(t),r&512&&n!==null&&Lo(n,n.return),t.flags&32){var s=t.stateNode;try{ql(s,"")}catch(_){We(t,t.return,_)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&HI(s,i),pm(a,o);var u=pm(a,i);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?XI(s,h):c==="dangerouslySetInnerHTML"?QI(s,h):c==="children"?ql(s,h):ev(s,c,h,u)}switch(a){case"input":um(s,i);break;case"textarea":GI(s,i);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Oo(s,!!i.multiple,p,!1):f!==!!i.multiple&&(i.defaultValue!=null?Oo(s,!!i.multiple,i.defaultValue,!0):Oo(s,!!i.multiple,i.multiple?[]:"",!1))}s[Jl]=i}catch(_){We(t,t.return,_)}}break;case 6:if(Vn(e,t),Jn(t),r&4){if(t.stateNode===null)throw Error(q(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(_){We(t,t.return,_)}}break;case 3:if(Vn(e,t),Jn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Kl(e.containerInfo)}catch(_){We(t,t.return,_)}break;case 4:Vn(e,t),Jn(t);break;case 13:Vn(e,t),Jn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Dv=Ze())),r&4&&o_(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?($t=(u=$t)||c,Vn(e,t),$t=u):Vn(e,t),Jn(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&(t.mode&1)!==0)for(te=t,c=t.child;c!==null;){for(h=te=c;te!==null;){switch(f=te,p=f.child,f.tag){case 0:case 11:case 14:case 15:bl(4,f,f.return);break;case 1:Lo(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(_){We(r,n,_)}}break;case 5:Lo(f,f.return);break;case 22:if(f.memoizedState!==null){l_(h);continue}}p!==null?(p.return=f,te=p):l_(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{s=h.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=YI("display",o))}catch(_){We(t,t.return,_)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(_){We(t,t.return,_)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Vn(e,t),Jn(t),r&4&&o_(t);break;case 21:break;default:Vn(e,t),Jn(t)}}function Jn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Ik(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ql(s,""),r.flags&=-33);var i=i_(t);qm(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=i_(t);zm(t,a,o);break;default:throw Error(q(161))}}catch(l){We(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function MN(t,e,n){te=t,Tk(t)}function Tk(t,e,n){for(var r=(t.mode&1)!==0;te!==null;){var s=te,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Oc;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||$t;a=Oc;var u=$t;if(Oc=o,($t=l)&&!u)for(te=s;te!==null;)o=te,l=o.child,o.tag===22&&o.memoizedState!==null?u_(s):l!==null?(l.return=o,te=l):u_(s);for(;i!==null;)te=i,Tk(i),i=i.sibling;te=s,Oc=a,$t=u}a_(t)}else(s.subtreeFlags&8772)!==0&&i!==null?(i.return=s,te=i):a_(t)}}function a_(t){for(;te!==null;){var e=te;if((e.flags&8772)!==0){var n=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:$t||Md(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!$t)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&q0(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}q0(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Kl(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}$t||e.flags&512&&jm(e)}catch(f){We(e,e.return,f)}}if(e===t){te=null;break}if(n=e.sibling,n!==null){n.return=e.return,te=n;break}te=e.return}}function l_(t){for(;te!==null;){var e=te;if(e===t){te=null;break}var n=e.sibling;if(n!==null){n.return=e.return,te=n;break}te=e.return}}function u_(t){for(;te!==null;){var e=te;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Md(4,e)}catch(l){We(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){We(e,s,l)}}var i=e.return;try{jm(e)}catch(l){We(e,i,l)}break;case 5:var o=e.return;try{jm(e)}catch(l){We(e,o,l)}}}catch(l){We(e,e.return,l)}if(e===t){te=null;break}var a=e.sibling;if(a!==null){a.return=e.return,te=a;break}te=e.return}}var $N=Math.ceil,Bh=Gr.ReactCurrentDispatcher,Rv=Gr.ReactCurrentOwner,On=Gr.ReactCurrentBatchConfig,Ie=0,mt=null,rt=null,kt=0,fn=0,Po=js(0),ot=0,iu=null,Di=0,$d=0,Nv=0,Cl=null,nn=null,Dv=0,Jo=1/0,Tr=null,Vh=!1,Wm=null,Ss=null,Mc=!1,fs=null,jh=0,Ll=0,Hm=null,ah=-1,lh=0;function Yt(){return(Ie&6)!==0?Ze():ah!==-1?ah:ah=Ze()}function Is(t){return(t.mode&1)===0?1:(Ie&2)!==0&&kt!==0?kt&-kt:_N.transition!==null?(lh===0&&(lh=ux()),lh):(t=be,t!==0||(t=window.event,t=t===void 0?16:gx(t.type)),t)}function Qn(t,e,n,r){if(50<Ll)throw Ll=0,Hm=null,Error(q(185));Du(t,n,r),((Ie&2)===0||t!==mt)&&(t===mt&&((Ie&2)===0&&($d|=n),ot===4&&us(t,kt)),un(t,r),n===1&&Ie===0&&(e.mode&1)===0&&(Jo=Ze()+500,Dd&&zs()))}function un(t,e){var n=t.callbackNode;_R(t,e);var r=kh(t,t===mt?kt:0);if(r===0)n!==null&&y0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&y0(n),e===1)t.tag===0?wN(c_.bind(null,t)):Ox(c_.bind(null,t)),mN(function(){(Ie&6)===0&&zs()}),n=null;else{switch(cx(r)){case 1:n=iv;break;case 4:n=ax;break;case 16:n=xh;break;case 536870912:n=lx;break;default:n=xh}n=Ak(n,bk.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bk(t,e){if(ah=-1,lh=0,(Ie&6)!==0)throw Error(q(327));var n=t.callbackNode;if(Bo()&&t.callbackNode!==n)return null;var r=kh(t,t===mt?kt:0);if(r===0)return null;if((r&30)!==0||(r&t.expiredLanes)!==0||e)e=zh(t,r);else{e=r;var s=Ie;Ie|=2;var i=Lk();(mt!==t||kt!==e)&&(Tr=null,Jo=Ze()+500,Si(t,e));do try{BN();break}catch(a){Ck(t,a)}while(1);yv(),Bh.current=i,Ie=s,rt!==null?e=0:(mt=null,kt=0,e=ot)}if(e!==0){if(e===2&&(s=wm(t),s!==0&&(r=s,e=Gm(t,s))),e===1)throw n=iu,Si(t,0),us(t,r),un(t,Ze()),n;if(e===6)us(t,r);else{if(s=t.current.alternate,(r&30)===0&&!UN(s)&&(e=zh(t,r),e===2&&(i=wm(t),i!==0&&(r=i,e=Gm(t,i))),e===1))throw n=iu,Si(t,0),us(t,r),un(t,Ze()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:ri(t,nn,Tr);break;case 3:if(us(t,r),(r&130023424)===r&&(e=Dv+500-Ze(),10<e)){if(kh(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Yt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bm(ri.bind(null,t,nn,Tr),e);break}ri(t,nn,Tr);break;case 4:if(us(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Kn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*$N(r/1960))-r,10<r){t.timeoutHandle=bm(ri.bind(null,t,nn,Tr),r);break}ri(t,nn,Tr);break;case 5:ri(t,nn,Tr);break;default:throw Error(q(329))}}}return un(t,Ze()),t.callbackNode===n?bk.bind(null,t):null}function Gm(t,e){var n=Cl;return t.current.memoizedState.isDehydrated&&(Si(t,e).flags|=256),t=zh(t,e),t!==2&&(e=nn,nn=n,e!==null&&Km(e)),t}function Km(t){nn===null?nn=t:nn.push.apply(nn,t)}function UN(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function us(t,e){for(e&=~Nv,e&=~$d,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Kn(e),r=1<<n;t[n]=-1,e&=~r}}function c_(t){if((Ie&6)!==0)throw Error(q(327));Bo();var e=kh(t,0);if((e&1)===0)return un(t,Ze()),null;var n=zh(t,e);if(t.tag!==0&&n===2){var r=wm(t);r!==0&&(e=r,n=Gm(t,r))}if(n===1)throw n=iu,Si(t,0),us(t,e),un(t,Ze()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ri(t,nn,Tr),un(t,Ze()),null}function Av(t,e){var n=Ie;Ie|=1;try{return t(e)}finally{Ie=n,Ie===0&&(Jo=Ze()+500,Dd&&zs())}}function Ai(t){fs!==null&&fs.tag===0&&(Ie&6)===0&&Bo();var e=Ie;Ie|=1;var n=On.transition,r=be;try{if(On.transition=null,be=1,t)return t()}finally{be=r,On.transition=n,Ie=e,(Ie&6)===0&&zs()}}function Ov(){fn=Po.current,Ae(Po)}function Si(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,pN(n)),rt!==null)for(n=rt.return;n!==null;){var r=n;switch(mv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ph();break;case 3:Xo(),Ae(an),Ae(zt),xv();break;case 5:Iv(r);break;case 4:Xo();break;case 13:Ae(Be);break;case 19:Ae(Be);break;case 10:wv(r.type._context);break;case 22:case 23:Ov()}n=n.return}if(mt=t,rt=t=xs(t.current,null),kt=fn=e,ot=0,iu=null,Nv=$d=Di=0,nn=Cl=null,fi!==null){for(e=0;e<fi.length;e++)if(n=fi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}fi=null}return t}function Ck(t,e){do{var n=rt;try{if(yv(),sh.current=Fh,Uh){for(var r=Ve.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Uh=!1}if(Ni=0,dt=st=Ve=null,Tl=!1,nu=0,Rv.current=null,n===null||n.return===null){ot=1,iu=e,rt=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=kt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if((c.mode&1)===0&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=X0(o);if(p!==null){p.flags&=-257,Z0(p,o,a,i,e),p.mode&1&&Y0(i,u,e),e=p,l=u;var m=e.updateQueue;if(m===null){var _=new Set;_.add(l),e.updateQueue=_}else m.add(l);break e}else{if((e&1)===0){Y0(i,u,e),Mv();break e}l=Error(q(426))}}else if(Me&&a.mode&1){var E=X0(o);if(E!==null){(E.flags&65536)===0&&(E.flags|=256),Z0(E,o,a,i,e),gv(Zo(l,a));break e}}i=l=Zo(l,a),ot!==4&&(ot=2),Cl===null?Cl=[i]:Cl.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=hk(i,l,e);z0(i,g);break e;case 1:a=l;var y=i.type,v=i.stateNode;if((i.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Ss===null||!Ss.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=dk(i,a,e);z0(i,w);break e}}i=i.return}while(i!==null)}Rk(n)}catch(b){e=b,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(1)}function Lk(){var t=Bh.current;return Bh.current=Fh,t===null?Fh:t}function Mv(){(ot===0||ot===3||ot===2)&&(ot=4),mt===null||(Di&268435455)===0&&($d&268435455)===0||us(mt,kt)}function zh(t,e){var n=Ie;Ie|=2;var r=Lk();(mt!==t||kt!==e)&&(Tr=null,Si(t,e));do try{FN();break}catch(s){Ck(t,s)}while(1);if(yv(),Ie=n,Bh.current=r,rt!==null)throw Error(q(261));return mt=null,kt=0,ot}function FN(){for(;rt!==null;)Pk(rt)}function BN(){for(;rt!==null&&!hR();)Pk(rt)}function Pk(t){var e=Dk(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?Rk(t):rt=e,Rv.current=null}function Rk(t){var e=t;do{var n=e.alternate;if(t=e.return,(e.flags&32768)===0){if(n=NN(n,e,fn),n!==null){rt=n;return}}else{if(n=DN(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ot=6,rt=null;return}}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);ot===0&&(ot=5)}function ri(t,e,n){var r=be,s=On.transition;try{On.transition=null,be=1,VN(t,e,n,r)}finally{On.transition=s,be=r}return null}function VN(t,e,n,r){do Bo();while(fs!==null);if((Ie&6)!==0)throw Error(q(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(ER(t,i),t===mt&&(rt=mt=null,kt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Mc||(Mc=!0,Ak(xh,function(){return Bo(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=On.transition,On.transition=null;var o=be;be=1;var a=Ie;Ie|=4,Rv.current=null,ON(t,n),kk(n,t),aN(km),Th=!!xm,km=xm=null,t.current=n,MN(n),dR(),Ie=a,be=o,On.transition=i}else t.current=n;if(Mc&&(Mc=!1,fs=t,jh=s),i=t.pendingLanes,i===0&&(Ss=null),mR(n.stateNode),un(t,Ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Vh)throw Vh=!1,t=Wm,Wm=null,t;return(jh&1)!==0&&t.tag!==0&&Bo(),i=t.pendingLanes,(i&1)!==0?t===Hm?Ll++:(Ll=0,Hm=t):Ll=0,zs(),null}function Bo(){if(fs!==null){var t=cx(jh),e=On.transition,n=be;try{if(On.transition=null,be=16>t?16:t,fs===null)var r=!1;else{if(t=fs,fs=null,jh=0,(Ie&6)!==0)throw Error(q(331));var s=Ie;for(Ie|=4,te=t.current;te!==null;){var i=te,o=i.child;if((te.flags&16)!==0){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(te=u;te!==null;){var c=te;switch(c.tag){case 0:case 11:case 15:bl(8,c,i)}var h=c.child;if(h!==null)h.return=c,te=h;else for(;te!==null;){c=te;var f=c.sibling,p=c.return;if(Sk(c),c===u){te=null;break}if(f!==null){f.return=p,te=f;break}te=p}}}var m=i.alternate;if(m!==null){var _=m.child;if(_!==null){m.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}te=i}}if((i.subtreeFlags&2064)!==0&&o!==null)o.return=i,te=o;else e:for(;te!==null;){if(i=te,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:bl(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,te=g;break e}te=i.return}}var y=t.current;for(te=y;te!==null;){o=te;var v=o.child;if((o.subtreeFlags&2064)!==0&&v!==null)v.return=o,te=v;else e:for(o=y;te!==null;){if(a=te,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:Md(9,a)}}catch(b){We(a,a.return,b)}if(a===o){te=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,te=w;break e}te=a.return}}if(Ie=s,zs(),fr&&typeof fr.onPostCommitFiberRoot=="function")try{fr.onPostCommitFiberRoot(Cd,t)}catch{}r=!0}return r}finally{be=n,On.transition=e}}return!1}function h_(t,e,n){e=Zo(n,e),e=hk(t,e,1),t=Es(t,e,1),e=Yt(),t!==null&&(Du(t,1,e),un(t,e))}function We(t,e,n){if(t.tag===3)h_(t,t,n);else for(;e!==null;){if(e.tag===3){h_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Ss===null||!Ss.has(r))){t=Zo(n,t),t=dk(e,t,1),e=Es(e,t,1),t=Yt(),e!==null&&(Du(e,1,t),un(e,t));break}}e=e.return}}function jN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yt(),t.pingedLanes|=t.suspendedLanes&n,mt===t&&(kt&n)===n&&(ot===4||ot===3&&(kt&130023424)===kt&&500>Ze()-Dv?Si(t,0):Nv|=n),un(t,e)}function Nk(t,e){e===0&&((t.mode&1)===0?e=1:(e=Tc,Tc<<=1,(Tc&130023424)===0&&(Tc=4194304)));var n=Yt();t=Br(t,e),t!==null&&(Du(t,e,n),un(t,n))}function zN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nk(t,n)}function qN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),Nk(t,n)}var Dk;Dk=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||an.current)rn=!0;else{if((t.lanes&n)===0&&(e.flags&128)===0)return rn=!1,RN(t,e,n);rn=(t.flags&131072)!==0}else rn=!1,Me&&(e.flags&1048576)!==0&&Mx(e,Dh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;oh(t,e),t=e.pendingProps;var s=Ko(e,zt.current);Fo(e,n),s=Tv(null,e,r,t,s,n);var i=bv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ln(r)?(i=!0,Rh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ev(e),s.updater=Ad,e.stateNode=s,s._reactInternals=e,Am(e,r,t,n),e=$m(null,e,r,!0,i,n)):(e.tag=0,Me&&i&&pv(e),Wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(oh(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=HN(r),t=zn(r,t),s){case 0:e=Mm(null,e,r,t,n);break e;case 1:e=t_(null,e,r,t,n);break e;case 11:e=J0(null,e,r,t,n);break e;case 14:e=e_(null,e,r,zn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),Mm(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),t_(t,e,r,s,n);case 3:e:{if(gk(e),t===null)throw Error(q(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Bx(t,e),Mh(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zo(Error(q(423)),e),e=n_(t,e,r,n,s);break e}else if(r!==s){s=Zo(Error(q(424)),e),e=n_(t,e,r,n,s);break e}else for(gn=_s(e.stateNode.containerInfo.firstChild),yn=e,Me=!0,Wn=null,n=qx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Qo(),r===s){e=Vr(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return Wx(e),t===null&&Rm(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Tm(r,s)?o=null:i!==null&&Tm(r,i)&&(e.flags|=32),mk(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&Rm(e),null;case 13:return vk(t,e,n);case 4:return Sv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Yo(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),J0(t,e,r,s,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Pe(Ah,r._currentValue),r._currentValue=o,i!==null)if(Yn(i.value,o)){if(i.children===s.children&&!an.current){e=Vr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ar(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Nm(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Nm(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Fo(e,n),s=Mn(s),r=r(s),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,s=zn(r,e.pendingProps),s=zn(r.type,s),e_(t,e,r,s,n);case 15:return fk(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),oh(t,e),e.tag=1,ln(r)?(t=!0,Rh(e)):t=!1,Fo(e,n),jx(e,r,s),Am(e,r,s,n),$m(null,e,r,!0,t,n);case 19:return yk(t,e,n);case 22:return pk(t,e,n)}throw Error(q(156,e.tag))};function Ak(t,e){return ox(t,e)}function WN(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new WN(t,e,n,r)}function $v(t){return t=t.prototype,!(!t||!t.isReactComponent)}function HN(t){if(typeof t=="function")return $v(t)?1:0;if(t!=null){if(t=t.$$typeof,t===nv)return 11;if(t===rv)return 14}return 2}function xs(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function uh(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")$v(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case _o:return Ii(n.children,s,i,e);case tv:o=8,s|=8;break;case sm:return t=Nn(12,n,e,s|2),t.elementType=sm,t.lanes=i,t;case im:return t=Nn(13,n,e,s),t.elementType=im,t.lanes=i,t;case om:return t=Nn(19,n,e,s),t.elementType=om,t.lanes=i,t;case zI:return Ud(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case VI:o=10;break e;case jI:o=9;break e;case nv:o=11;break e;case rv:o=14;break e;case os:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=Nn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ii(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function Ud(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=zI,t.lanes=n,t.stateNode={isHidden:!1},t}function Ip(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function xp(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function GN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sp(0),this.expirationTimes=sp(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sp(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Uv(t,e,n,r,s,i,o,a,l){return t=new GN(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Nn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ev(i),t}function KN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wo,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ok(t){if(!t)return Ls;t=t._reactInternals;e:{if(Yi(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ln(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(ln(n))return Ax(t,n,e)}return e}function Mk(t,e,n,r,s,i,o,a,l){return t=Uv(n,r,!0,t,s,i,o,a,l),t.context=Ok(null),n=t.current,r=Yt(),s=Is(n),i=Ar(r,s),i.callback=e??null,Es(n,i,s),t.current.lanes=s,Du(t,s,r),un(t,r),t}function Fd(t,e,n,r){var s=e.current,i=Yt(),o=Is(s);return n=Ok(n),e.context===null?e.context=n:e.pendingContext=n,e=Ar(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Es(s,e,o),t!==null&&(Qn(t,s,o,i),rh(t,s,o)),o}function qh(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function d_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Fv(t,e){d_(t,e),(t=t.alternate)&&d_(t,e)}function QN(){return null}var $k=typeof reportError=="function"?reportError:function(t){console.error(t)};function Bv(t){this._internalRoot=t}Bd.prototype.render=Bv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));Fd(t,e,null,null)};Bd.prototype.unmount=Bv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ai(function(){Fd(null,t,null,null)}),e[Fr]=null}};function Bd(t){this._internalRoot=t}Bd.prototype.unstable_scheduleHydration=function(t){if(t){var e=fx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ls.length&&e!==0&&e<ls[n].priority;n++);ls.splice(n,0,t),n===0&&mx(t)}};function Vv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function f_(){}function YN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var u=qh(o);i.call(u)}}var o=Mk(e,r,t,0,null,!1,!1,"",f_);return t._reactRootContainer=o,t[Fr]=o.current,Xl(t.nodeType===8?t.parentNode:t),Ai(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var u=qh(l);a.call(u)}}var l=Uv(t,0,!1,null,null,!1,!1,"",f_);return t._reactRootContainer=l,t[Fr]=l.current,Xl(t.nodeType===8?t.parentNode:t),Ai(function(){Fd(e,l,n,r)}),l}function jd(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=qh(o);a.call(l)}}Fd(e,o,t,s)}else o=YN(n,e,t,s,r);return qh(o)}hx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fl(e.pendingLanes);n!==0&&(ov(e,n|1),un(e,Ze()),(Ie&6)===0&&(Jo=Ze()+500,zs()))}break;case 13:Ai(function(){var r=Br(t,1);if(r!==null){var s=Yt();Qn(r,t,1,s)}}),Fv(t,1)}};av=function(t){if(t.tag===13){var e=Br(t,134217728);if(e!==null){var n=Yt();Qn(e,t,134217728,n)}Fv(t,134217728)}};dx=function(t){if(t.tag===13){var e=Is(t),n=Br(t,e);if(n!==null){var r=Yt();Qn(n,t,e,r)}Fv(t,e)}};fx=function(){return be};px=function(t,e){var n=be;try{return be=t,e()}finally{be=n}};gm=function(t,e,n){switch(e){case"input":if(um(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Nd(r);if(!s)throw Error(q(90));WI(r),um(r,s)}}}break;case"textarea":GI(t,n);break;case"select":e=n.value,e!=null&&Oo(t,!!n.multiple,e,!1)}};ex=Av;tx=Ai;var XN={usingClientEntryPoint:!1,Events:[Ou,xo,Nd,ZI,JI,Av]},Qa={findFiberByHostInstance:di,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ZN={bundleType:Qa.bundleType,version:Qa.version,rendererPackageName:Qa.rendererPackageName,rendererConfig:Qa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=sx(t),t===null?null:t.stateNode},findFiberByHostInstance:Qa.findFiberByHostInstance||QN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$c.isDisabled&&$c.supportsFiber)try{Cd=$c.inject(ZN),fr=$c}catch{}}kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XN;kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vv(e))throw Error(q(200));return KN(t,e,null,n)};kn.createRoot=function(t,e){if(!Vv(t))throw Error(q(299));var n=!1,r="",s=$k;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Uv(t,1,!1,null,null,n,!1,r,s),t[Fr]=e.current,Xl(t.nodeType===8?t.parentNode:t),new Bv(e)};kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=sx(e),t=t===null?null:t.stateNode,t};kn.flushSync=function(t){return Ai(t)};kn.hydrate=function(t,e,n){if(!Vd(e))throw Error(q(200));return jd(null,t,e,!0,n)};kn.hydrateRoot=function(t,e,n){if(!Vv(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$k;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Mk(e,null,t,1,n??null,s,!1,i,o),t[Fr]=e.current,Xl(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Bd(e)};kn.render=function(t,e,n){if(!Vd(e))throw Error(q(200));return jd(null,t,e,!1,n)};kn.unmountComponentAtNode=function(t){if(!Vd(t))throw Error(q(40));return t._reactRootContainer?(Ai(function(){jd(null,null,t,!1,function(){t._reactRootContainer=null,t[Fr]=null})}),!0):!1};kn.unstable_batchedUpdates=Av;kn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vd(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return jd(t,e,n,!1,r)};kn.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=kn})(Sr);var p_=Sr.exports;nm.createRoot=p_.createRoot,nm.hydrateRoot=p_.hydrateRoot;var JN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ge={exports:{}},Ya={};var m_;function eD(){if(m_)return Ya;m_=1;var t=OI,e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,u){var c,h={},f=null,p=null;u!==void 0&&(f=""+u),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(p=l.ref);for(c in l)r.call(l,c)&&!i.hasOwnProperty(c)&&(h[c]=l[c]);if(a&&a.defaultProps)for(c in l=a.defaultProps,l)h[c]===void 0&&(h[c]=l[c]);return{$$typeof:e,type:a,key:f,ref:p,props:h,_owner:s.current}}return Ya.Fragment=n,Ya.jsx=o,Ya.jsxs=o,Ya}(function(t){t.exports=eD()})(Ge);var tD=function(t,e,n,r,s,i,o,a){if(!t){var l;if(e===void 0)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,s,i,o,a],c=0;l=new Error(e.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}},lt=tD;const pe=d.exports.createContext(null);function nD(){lt(!!d.exports.useContext,"useGoogleMap is React hook and requires React version 16.8+");const t=d.exports.useContext(pe);return lt(!!t,"useGoogleMap needs a GoogleMap available up in the tree"),t}function rD(t,e,n){return Object.keys(t).reduce(function(s,i){return e(s,t[i],i)},n)}function sD(t,e){Object.keys(t).forEach(n=>e(t[n],n))}function iD(t,e,n,r){const s={};return sD(t,(o,a)=>{const l=n[a];l!==e[a]&&(s[a]=l,o(r,l))}),s}function oD(t,e,n){return rD(n,function(i,o,a){return typeof t[a]=="function"&&i.push(google.maps.event.addListener(e,o,t[a])),i},[])}function aD(t){google.maps.event.removeListener(t)}function ge(t=[]){t.forEach(aD)}function me({updaterMap:t,eventMap:e,prevProps:n,nextProps:r,instance:s}){const i=oD(r,s,e);return iD(t,n,r,s),i}const g_={onDblClick:"dblclick",onDragEnd:"dragend",onDragStart:"dragstart",onMapTypeIdChanged:"maptypeid_changed",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseDown:"mousedown",onMouseUp:"mouseup",onRightClick:"rightclick",onTilesLoaded:"tilesloaded",onBoundsChanged:"bounds_changed",onCenterChanged:"center_changed",onClick:"click",onDrag:"drag",onHeadingChanged:"heading_changed",onIdle:"idle",onProjectionChanged:"projection_changed",onResize:"resize",onTiltChanged:"tilt_changed",onZoomChanged:"zoom_changed"},v_={extraMapTypes(t,e){e.forEach(function(r,s){t.mapTypes.set(String(s),r)})},center(t,e){t.setCenter(e)},clickableIcons(t,e){t.setClickableIcons(e)},heading(t,e){t.setHeading(e)},mapTypeId(t,e){t.setMapTypeId(e)},options(t,e){t.setOptions(e)},streetView(t,e){t.setStreetView(e)},tilt(t,e){t.setTilt(e)},zoom(t,e){t.setZoom(e)}};function lD({children:t,options:e,id:n,mapContainerStyle:r,mapContainerClassName:s,center:i,onClick:o,onDblClick:a,onDrag:l,onDragEnd:u,onDragStart:c,onMouseMove:h,onMouseOut:f,onMouseOver:p,onMouseDown:m,onMouseUp:_,onRightClick:E,onCenterChanged:g,onLoad:y,onUnmount:v}){const[w,b]=d.exports.useState(null),I=d.exports.useRef(null),[R,A]=d.exports.useState(null),[L,F]=d.exports.useState(null),[G,$]=d.exports.useState(null),[Q,W]=d.exports.useState(null),[ee,ae]=d.exports.useState(null),[ue,B]=d.exports.useState(null),[P,x]=d.exports.useState(null),[C,k]=d.exports.useState(null),[S,T]=d.exports.useState(null),[O,M]=d.exports.useState(null),[V,K]=d.exports.useState(null),[le,ne]=d.exports.useState(null);return d.exports.useEffect(()=>{e&&w!==null&&w.setOptions(e)},[w,e]),d.exports.useEffect(()=>{w!==null&&typeof i<"u"&&w.setCenter(i)},[w,i]),d.exports.useEffect(()=>{w&&a&&(L!==null&&google.maps.event.removeListener(L),F(google.maps.event.addListener(w,"dblclick",a)))},[a]),d.exports.useEffect(()=>{w&&u&&(G!==null&&google.maps.event.removeListener(G),$(google.maps.event.addListener(w,"dragend",u)))},[u]),d.exports.useEffect(()=>{w&&c&&(Q!==null&&google.maps.event.removeListener(Q),W(google.maps.event.addListener(w,"dragstart",c)))},[c]),d.exports.useEffect(()=>{w&&m&&(ee!==null&&google.maps.event.removeListener(ee),ae(google.maps.event.addListener(w,"mousedown",m)))},[m]),d.exports.useEffect(()=>{w&&h&&(ue!==null&&google.maps.event.removeListener(ue),B(google.maps.event.addListener(w,"mousemove",h)))},[h]),d.exports.useEffect(()=>{w&&f&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(w,"mouseout",f)))},[f]),d.exports.useEffect(()=>{w&&p&&(C!==null&&google.maps.event.removeListener(C),k(google.maps.event.addListener(w,"mouseover",p)))},[p]),d.exports.useEffect(()=>{w&&_&&(S!==null&&google.maps.event.removeListener(S),T(google.maps.event.addListener(w,"mouseup",_)))},[_]),d.exports.useEffect(()=>{w&&E&&(O!==null&&google.maps.event.removeListener(O),M(google.maps.event.addListener(w,"rightclick",E)))},[E]),d.exports.useEffect(()=>{w&&o&&(V!==null&&google.maps.event.removeListener(V),K(google.maps.event.addListener(w,"click",o)))},[o]),d.exports.useEffect(()=>{w&&l&&(le!==null&&google.maps.event.removeListener(le),ne(google.maps.event.addListener(w,"drag",l)))},[l]),d.exports.useEffect(()=>{w&&g&&(R!==null&&google.maps.event.removeListener(R),A(google.maps.event.addListener(w,"center_changed",g)))},[o]),d.exports.useEffect(()=>{const Re=I.current===null?null:new google.maps.Map(I.current,e);return b(Re),Re!==null&&y&&y(Re),()=>{Re!==null&&v&&v(Re)}},[]),Ge.exports.jsx("div",Object.assign({id:n,ref:I,style:r,className:s},{children:Ge.exports.jsx(pe.Provider,Object.assign({value:w},{children:w!==null?t:Ge.exports.jsx(Ge.exports.Fragment,{})}))}))}d.exports.memo(lD);class $u extends d.exports.PureComponent{constructor(){super(...arguments),this.state={map:null},this.registeredEvents=[],this.mapRef=null,this.getInstance=()=>this.mapRef===null?null:new google.maps.Map(this.mapRef,this.props.options),this.panTo=e=>{const n=this.getInstance();n&&n.panTo(e)},this.setMapCallback=()=>{this.state.map!==null&&this.props.onLoad&&this.props.onLoad(this.state.map)},this.getRef=e=>{this.mapRef=e}}componentDidMount(){const e=this.getInstance();this.registeredEvents=me({updaterMap:v_,eventMap:g_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{map:e}},this.setMapCallback)}componentDidUpdate(e){this.state.map!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:v_,eventMap:g_,prevProps:e,nextProps:this.props,instance:this.state.map}))}componentWillUnmount(){this.state.map!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.map),ge(this.registeredEvents))}render(){return Ge.exports.jsx("div",Object.assign({id:this.props.id,ref:this.getRef,style:this.props.mapContainerStyle,className:this.props.mapContainerClassName},{children:Ge.exports.jsx(pe.Provider,Object.assign({value:this.state.map},{children:this.state.map!==null?this.props.children:Ge.exports.jsx(Ge.exports.Fragment,{})}))}))}}function jv(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function uD(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}const mi=typeof document<"u";function Uk({url:t,id:e,nonce:n}){return mi?new Promise(function(s,i){const o=document.getElementById(e),a=window;if(o){const u=o.getAttribute("data-state");if(o.src===t&&u!=="error"){if(u==="ready")return s(e);{const c=a.initMap,h=o.onerror;a.initMap=function(){c&&c(),s(e)},o.onerror=function(f){h&&h(f),i(f)};return}}else o.remove()}const l=document.createElement("script");l.type="text/javascript",l.src=t,l.id=e,l.async=!0,l.nonce=n,l.onerror=function(c){l.setAttribute("data-state","error"),i(c)},a.initMap=function(){l.setAttribute("data-state","ready"),s(e)},document.head.appendChild(l)}).catch(r=>{throw console.error("injectScript error: ",r),r}):Promise.reject(new Error("document is undefined"))}function y_(t){const e=t.href;return e&&(e.indexOf("https://fonts.googleapis.com/css?family=Roboto")===0||e.indexOf("https://fonts.googleapis.com/css?family=Google+Sans+Text")===0)?!0:t.tagName.toLowerCase()==="style"&&t.styleSheet&&t.styleSheet.cssText&&t.styleSheet.cssText.replace(`\r
`,"").indexOf(".gm-style")===0?(t.styleSheet.cssText="",!0):t.tagName.toLowerCase()==="style"&&t.innerHTML&&t.innerHTML.replace(`\r
`,"").indexOf(".gm-style")===0?(t.innerHTML="",!0):t.tagName.toLowerCase()==="style"&&!t.styleSheet&&!t.innerHTML}function Fk(){const t=document.getElementsByTagName("head")[0],e=t.insertBefore.bind(t);t.insertBefore=function(s,i){y_(s)||Reflect.apply(e,t,[s,i])};const n=t.appendChild.bind(t);t.appendChild=function(s){y_(s)||Reflect.apply(n,t,[s])}}function Bk({googleMapsApiKey:t,googleMapsClientId:e,version:n="weekly",language:r,region:s,libraries:i,channel:o,mapIds:a,authReferrerPolicy:l}){const u=[];return lt(t&&e||!(t&&e),"You need to specify either googleMapsApiKey or googleMapsClientId for @react-google-maps/api load script to work. You cannot use both at the same time."),t?u.push(`key=${t}`):e&&u.push(`client=${e}`),n&&u.push(`v=${n}`),r&&u.push(`language=${r}`),s&&u.push(`region=${s}`),i&&i.length&&u.push(`libraries=${i.sort().join(",")}`),o&&u.push(`channel=${o}`),a&&a.length&&u.push(`map_ids=${a.join(",")}`),l&&u.push(`auth_referrer_policy=${l}`),u.push("callback=initMap"),`https://maps.googleapis.com/maps/api/js?${u.join("&")}`}let Xa=!1;function Vk(){return Ge.exports.jsx("div",{children:"Loading..."})}const Qm={id:"script-loader",version:"weekly"};class cD extends d.exports.PureComponent{constructor(){super(...arguments),this.check=d.exports.createRef(),this.state={loaded:!1},this.cleanupCallback=()=>{delete window.google.maps,this.injectScript()},this.isCleaningUp=()=>uD(this,void 0,void 0,function*(){function e(n){if(!Xa)n();else if(mi){const r=window.setInterval(function(){Xa||(window.clearInterval(r),n())},1)}}return new Promise(e)}),this.cleanup=()=>{Xa=!0;const e=document.getElementById(this.props.id);e&&e.parentNode&&e.parentNode.removeChild(e),Array.prototype.slice.call(document.getElementsByTagName("script")).filter(function(r){return typeof r.src=="string"&&r.src.includes("maps.googleapis")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("link")).filter(function(r){return r.href==="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Google+Sans"}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)}),Array.prototype.slice.call(document.getElementsByTagName("style")).filter(function(r){return r.innerText!==void 0&&r.innerText.length>0&&r.innerText.includes(".gm-")}).forEach(function(r){r.parentNode&&r.parentNode.removeChild(r)})},this.injectScript=()=>{this.props.preventGoogleFontsLoading&&Fk(),lt(!!this.props.id,'LoadScript requires "id" prop to be a string: %s',this.props.id);const e={id:this.props.id,nonce:this.props.nonce,url:Bk(this.props)};Uk(e).then(()=>{this.props.onLoad&&this.props.onLoad(),this.setState(function(){return{loaded:!0}})}).catch(n=>{this.props.onError&&this.props.onError(n),console.error(`
          There has been an Error with loading Google Maps API script, please check that you provided correct google API key (${this.props.googleMapsApiKey||"-"}) or Client ID (${this.props.googleMapsClientId||"-"}) to <LoadScript />
          Otherwise it is a Network issue.
        `)})}}componentDidMount(){if(mi){if(window.google&&window.google.maps&&!Xa){console.error("google api is already presented");return}this.isCleaningUp().then(this.injectScript).catch(function(n){console.error("Error at injecting script after cleaning up: ",n)})}}componentDidUpdate(e){this.props.libraries!==e.libraries&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),mi&&e.language!==this.props.language&&(this.cleanup(),this.setState(function(){return{loaded:!1}},this.cleanupCallback))}componentWillUnmount(){if(mi){this.cleanup();const e=()=>{this.check.current||(delete window.google,Xa=!1)};window.setTimeout(e,1),this.props.onUnmount&&this.props.onUnmount()}}render(){return Ge.exports.jsxs(Ge.exports.Fragment,{children:[Ge.exports.jsx("div",{ref:this.check}),this.state.loaded?this.props.children:this.props.loadingElement||Ge.exports.jsx(Vk,{})]})}}cD.defaultProps=Qm;let w_;function Ea({id:t=Qm.id,version:e=Qm.version,nonce:n,googleMapsApiKey:r,googleMapsClientId:s,language:i,region:o,libraries:a,preventGoogleFontsLoading:l,channel:u,mapIds:c,authReferrerPolicy:h}){const f=d.exports.useRef(!1),[p,m]=d.exports.useState(!1),[_,E]=d.exports.useState(void 0);d.exports.useEffect(function(){return f.current=!0,()=>{f.current=!1}},[]),d.exports.useEffect(function(){mi&&l&&Fk()},[l]),d.exports.useEffect(function(){p&&lt(!!window.google,"useLoadScript was marked as loaded, but window.google is not present. Something went wrong.")},[p]);const g=Bk({version:e,googleMapsApiKey:r,googleMapsClientId:s,language:i,region:o,libraries:a,channel:u,mapIds:c,authReferrerPolicy:h});d.exports.useEffect(function(){if(!mi)return;function w(){f.current&&(m(!0),w_=g)}if(window.google&&window.google.maps&&w_===g){w();return}Uk({id:t,url:g,nonce:n}).then(w).catch(function(I){f.current&&E(I),console.warn(`
        There has been an Error with loading Google Maps API script, please check that you provided correct google API key (${r||"-"}) or Client ID (${s||"-"})
        Otherwise it is a Network issue.
      `),console.error(I)})},[t,g,n]);const y=d.exports.useRef();return d.exports.useEffect(function(){y.current&&a!==y.current&&console.warn("Performance warning! LoadScript has been reloaded unintentionally! You should not pass `libraries` prop as new array. Please keep an array of libraries as static class property for Components and PureComponents, or just a const variable outside of component, or somewhere in config files or ENV variables"),y.current=a},[a]),{isLoaded:p,loadError:_,url:g}}const hD=Ge.exports.jsx(Vk,{});function dD(t){var{loadingElement:e,onLoad:n,onError:r,onUnmount:s,children:i}=t,o=jv(t,["loadingElement","onLoad","onError","onUnmount","children"]);const{isLoaded:a,loadError:l}=Ea(o);return d.exports.useEffect(function(){a&&typeof n=="function"&&n()},[a,n]),d.exports.useEffect(function(){l&&typeof r=="function"&&r(l)},[l,r]),d.exports.useEffect(function(){return()=>{s&&s()}},[s]),a?i:e||hD}d.exports.memo(dD);var __;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})(__||(__={}));const E_={},S_={options(t,e){t.setOptions(e)}};function fD({options:t,onLoad:e,onUnmount:n}){const r=d.exports.useContext(pe),[s,i]=d.exports.useState(null);return d.exports.useEffect(()=>{s!==null&&s.setMap(r)},[r]),d.exports.useEffect(()=>{t&&s!==null&&s.setOptions(t)},[s,t]),d.exports.useEffect(()=>{const o=new google.maps.TrafficLayer(Object.assign(Object.assign({},t||{}),{map:r}));return i(o),e&&e(o),()=>{s!==null&&(n&&n(s),s.setMap(null))}},[]),null}d.exports.memo(fD);class pD extends d.exports.PureComponent{constructor(){super(...arguments),this.state={trafficLayer:null},this.setTrafficLayerCallback=()=>{this.state.trafficLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.trafficLayer)},this.registeredEvents=[]}componentDidMount(){const e=new google.maps.TrafficLayer(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=me({updaterMap:S_,eventMap:E_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{trafficLayer:e}},this.setTrafficLayerCallback)}componentDidUpdate(e){this.state.trafficLayer!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:S_,eventMap:E_,prevProps:e,nextProps:this.props,instance:this.state.trafficLayer}))}componentWillUnmount(){this.state.trafficLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.trafficLayer),ge(this.registeredEvents),this.state.trafficLayer.setMap(null))}render(){return null}}pD.contextType=pe;function mD({onLoad:t,onUnmount:e}){const n=d.exports.useContext(pe),[r,s]=d.exports.useState(null);return d.exports.useEffect(()=>{r!==null&&r.setMap(n)},[n]),d.exports.useEffect(()=>{const i=new google.maps.BicyclingLayer;return s(i),i.setMap(n),t&&t(i),()=>{i!==null&&(e&&e(i),i.setMap(null))}},[]),null}d.exports.memo(mD);class gD extends d.exports.PureComponent{constructor(){super(...arguments),this.state={bicyclingLayer:null},this.setBicyclingLayerCallback=()=>{this.state.bicyclingLayer!==null&&(this.state.bicyclingLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.bicyclingLayer))}}componentDidMount(){const e=new google.maps.BicyclingLayer;this.setState(()=>({bicyclingLayer:e}),this.setBicyclingLayerCallback)}componentWillUnmount(){this.state.bicyclingLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.bicyclingLayer),this.state.bicyclingLayer.setMap(null))}render(){return null}}gD.contextType=pe;function vD({onLoad:t,onUnmount:e}){const n=d.exports.useContext(pe),[r,s]=d.exports.useState(null);return d.exports.useEffect(()=>{r!==null&&r.setMap(n)},[n]),d.exports.useEffect(()=>{const i=new google.maps.TransitLayer;return s(i),i.setMap(n),t&&t(i),()=>{r!==null&&(e&&e(r),this.state.transitLayer.setMap(null))}},[]),null}d.exports.memo(vD);class yD extends d.exports.PureComponent{constructor(){super(...arguments),this.state={transitLayer:null},this.setTransitLayerCallback=()=>{this.state.transitLayer!==null&&(this.state.transitLayer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.transitLayer))}}componentDidMount(){const e=new google.maps.TransitLayer;this.setState(function(){return{transitLayer:e}},this.setTransitLayerCallback)}componentWillUnmount(){this.state.transitLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.transitLayer),this.state.transitLayer.setMap(null))}render(){return null}}yD.contextType=pe;const I_={onCircleComplete:"circlecomplete",onMarkerComplete:"markercomplete",onOverlayComplete:"overlaycomplete",onPolygonComplete:"polygoncomplete",onPolylineComplete:"polylinecomplete",onRectangleComplete:"rectanglecomplete"},x_={drawingMode(t,e){t.setDrawingMode(e)},options(t,e){t.setOptions(e)}};function wD({options:t,drawingMode:e,onCircleComplete:n,onMarkerComplete:r,onOverlayComplete:s,onPolygonComplete:i,onPolylineComplete:o,onRectangleComplete:a,onLoad:l,onUnmount:u}){const c=d.exports.useContext(pe),[h,f]=d.exports.useState(null),[p,m]=d.exports.useState(null),[_,E]=d.exports.useState(null),[g,y]=d.exports.useState(null),[v,w]=d.exports.useState(null),[b,I]=d.exports.useState(null),[R,A]=d.exports.useState(null);return d.exports.useEffect(()=>{h!==null&&h.setMap(c)},[c]),d.exports.useEffect(()=>{t&&h!==null&&h.setOptions(t)},[h,t]),d.exports.useEffect(()=>{e&&h!==null&&h.setDrawingMode(e)},[h,e]),d.exports.useEffect(()=>{h&&n&&(p!==null&&google.maps.event.removeListener(p),m(google.maps.event.addListener(h,"circlecomplete",n)))},[h,n]),d.exports.useEffect(()=>{h&&r&&(_!==null&&google.maps.event.removeListener(_),E(google.maps.event.addListener(h,"markercomplete",r)))},[h,r]),d.exports.useEffect(()=>{h&&s&&(g!==null&&google.maps.event.removeListener(g),y(google.maps.event.addListener(h,"overlaycomplete",s)))},[h,s]),d.exports.useEffect(()=>{h&&i&&(v!==null&&google.maps.event.removeListener(v),w(google.maps.event.addListener(h,"polygoncomplete",i)))},[h,i]),d.exports.useEffect(()=>{h&&o&&(b!==null&&google.maps.event.removeListener(b),I(google.maps.event.addListener(h,"polylinecomplete",o)))},[h,o]),d.exports.useEffect(()=>{h&&a&&(R!==null&&google.maps.event.removeListener(R),A(google.maps.event.addListener(h,"rectanglecomplete",a)))},[h,a]),d.exports.useEffect(()=>{lt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing);const L=new google.maps.drawing.DrawingManager(Object.assign(Object.assign({},t||{}),{map:c}));return e&&L.setDrawingMode(e),n&&m(google.maps.event.addListener(L,"circlecomplete",n)),r&&E(google.maps.event.addListener(L,"markercomplete",r)),s&&y(google.maps.event.addListener(L,"overlaycomplete",s)),i&&w(google.maps.event.addListener(L,"polygoncomplete",i)),o&&I(google.maps.event.addListener(L,"polylinecomplete",o)),a&&A(google.maps.event.addListener(L,"rectanglecomplete",a)),f(L),l&&l(L),()=>{h!==null&&(p&&google.maps.event.removeListener(p),_&&google.maps.event.removeListener(_),g&&google.maps.event.removeListener(g),v&&google.maps.event.removeListener(v),b&&google.maps.event.removeListener(b),R&&google.maps.event.removeListener(R),u&&u(h),h.setMap(null))}},[]),null}d.exports.memo(wD);class _D extends d.exports.PureComponent{constructor(e){super(e),this.registeredEvents=[],this.state={drawingManager:null},this.setDrawingManagerCallback=()=>{this.state.drawingManager!==null&&this.props.onLoad&&this.props.onLoad(this.state.drawingManager)},lt(!!google.maps.drawing,"Did you include prop libraries={['drawing']} in the URL? %s",google.maps.drawing)}componentDidMount(){const e=new google.maps.drawing.DrawingManager(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=me({updaterMap:x_,eventMap:I_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{drawingManager:e}},this.setDrawingManagerCallback)}componentDidUpdate(e){this.state.drawingManager!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:x_,eventMap:I_,prevProps:e,nextProps:this.props,instance:this.state.drawingManager}))}componentWillUnmount(){this.state.drawingManager!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.drawingManager),ge(this.registeredEvents),this.state.drawingManager.setMap(null))}render(){return null}}_D.contextType=pe;const k_={onAnimationChanged:"animation_changed",onClick:"click",onClickableChanged:"clickable_changed",onCursorChanged:"cursor_changed",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDraggableChanged:"draggable_changed",onDragStart:"dragstart",onFlatChanged:"flat_changed",onIconChanged:"icon_changed",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onPositionChanged:"position_changed",onRightClick:"rightclick",onShapeChanged:"shape_changed",onTitleChanged:"title_changed",onVisibleChanged:"visible_changed",onZindexChanged:"zindex_changed"},T_={animation(t,e){t.setAnimation(e)},clickable(t,e){t.setClickable(e)},cursor(t,e){t.setCursor(e)},draggable(t,e){t.setDraggable(e)},icon(t,e){t.setIcon(e)},label(t,e){t.setLabel(e)},map(t,e){t.setMap(e)},opacity(t,e){t.setOpacity(e)},options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},shape(t,e){t.setShape(e)},title(t,e){t.setTitle(e)},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},Wh={};function ED({position:t,options:e,clusterer:n,noClustererRedraw:r,children:s,draggable:i,visible:o,animation:a,clickable:l,cursor:u,icon:c,label:h,opacity:f,shape:p,title:m,zIndex:_,onClick:E,onDblClick:g,onDrag:y,onDragEnd:v,onDragStart:w,onMouseOut:b,onMouseOver:I,onMouseUp:R,onMouseDown:A,onRightClick:L,onClickableChanged:F,onCursorChanged:G,onAnimationChanged:$,onDraggableChanged:Q,onFlatChanged:W,onIconChanged:ee,onPositionChanged:ae,onShapeChanged:ue,onTitleChanged:B,onVisibleChanged:P,onZindexChanged:x,onLoad:C,onUnmount:k}){const S=d.exports.useContext(pe),[T,O]=d.exports.useState(null),[M,V]=d.exports.useState(null),[K,le]=d.exports.useState(null),[ne,Re]=d.exports.useState(null),[Nt,bn]=d.exports.useState(null),[ve,ao]=d.exports.useState(null),[kr,Js]=d.exports.useState(null),[lo,Fa]=d.exports.useState(null),[ei,Ba]=d.exports.useState(null),[uo,Ww]=d.exports.useState(null),[Hw,Gw]=d.exports.useState(null),[hc,Kw]=d.exports.useState(null),[dc,Qw]=d.exports.useState(null),[fc,Yw]=d.exports.useState(null),[pc,Xw]=d.exports.useState(null),[mc,Zw]=d.exports.useState(null),[gc,Jw]=d.exports.useState(null),[vc,e0]=d.exports.useState(null),[t0,n0]=d.exports.useState(null),[yc,r0]=d.exports.useState(null),[wc,s0]=d.exports.useState(null),[_c,i0]=d.exports.useState(null);d.exports.useEffect(()=>{T!==null&&T.setMap(S)},[S]),d.exports.useEffect(()=>{typeof e<"u"&&T!==null&&T.setOptions(e)},[T,e]),d.exports.useEffect(()=>{typeof i<"u"&&T!==null&&T.setDraggable(i)},[T,i]),d.exports.useEffect(()=>{t&&T!==null&&T.setPosition(t)},[T,t]),d.exports.useEffect(()=>{typeof o<"u"&&T!==null&&T.setVisible(o)},[T,o]),d.exports.useEffect(()=>{a&&T!==null&&T.setAnimation(a)},[T,a]),d.exports.useEffect(()=>{T&&g&&(M!==null&&google.maps.event.removeListener(M),V(google.maps.event.addListener(T,"dblclick",g)))},[g]),d.exports.useEffect(()=>{T&&v&&(K!==null&&google.maps.event.removeListener(K),le(google.maps.event.addListener(T,"dragend",v)))},[v]),d.exports.useEffect(()=>{T&&w&&(ne!==null&&google.maps.event.removeListener(ne),Re(google.maps.event.addListener(T,"dragstart",w)))},[w]),d.exports.useEffect(()=>{T&&A&&(Nt!==null&&google.maps.event.removeListener(Nt),bn(google.maps.event.addListener(T,"mousedown",A)))},[A]),d.exports.useEffect(()=>{T&&b&&(ve!==null&&google.maps.event.removeListener(ve),ao(google.maps.event.addListener(T,"mouseout",b)))},[b]),d.exports.useEffect(()=>{T&&I&&(kr!==null&&google.maps.event.removeListener(kr),Js(google.maps.event.addListener(T,"mouseover",I)))},[I]),d.exports.useEffect(()=>{T&&R&&(lo!==null&&google.maps.event.removeListener(lo),Fa(google.maps.event.addListener(T,"mouseup",R)))},[R]),d.exports.useEffect(()=>{T&&L&&(ei!==null&&google.maps.event.removeListener(ei),Ba(google.maps.event.addListener(T,"rightclick",L)))},[L]),d.exports.useEffect(()=>{T&&E&&(uo!==null&&google.maps.event.removeListener(uo),Ww(google.maps.event.addListener(T,"click",E)))},[E]),d.exports.useEffect(()=>{T&&y&&(Hw!==null&&google.maps.event.removeListener(Hw),Gw(google.maps.event.addListener(T,"drag",y)))},[y]),d.exports.useEffect(()=>{T&&F&&(hc!==null&&google.maps.event.removeListener(hc),Kw(google.maps.event.addListener(T,"clickable_changed",F)))},[F]),d.exports.useEffect(()=>{T&&G&&(dc!==null&&google.maps.event.removeListener(dc),Qw(google.maps.event.addListener(T,"cursor_changed",G)))},[G]),d.exports.useEffect(()=>{T&&$&&(fc!==null&&google.maps.event.removeListener(fc),Yw(google.maps.event.addListener(T,"animation_changed",$)))},[$]),d.exports.useEffect(()=>{T&&Q&&(pc!==null&&google.maps.event.removeListener(pc),Xw(google.maps.event.addListener(T,"draggable_changed",Q)))},[Q]),d.exports.useEffect(()=>{T&&W&&(mc!==null&&google.maps.event.removeListener(mc),Zw(google.maps.event.addListener(T,"flat_changed",W)))},[W]),d.exports.useEffect(()=>{T&&ee&&(gc!==null&&google.maps.event.removeListener(gc),Jw(google.maps.event.addListener(T,"icon_changed",ee)))},[ee]),d.exports.useEffect(()=>{T&&ae&&(vc!==null&&google.maps.event.removeListener(vc),e0(google.maps.event.addListener(T,"position_changed",ae)))},[ae]),d.exports.useEffect(()=>{T&&ue&&(t0!==null&&google.maps.event.removeListener(t0),n0(google.maps.event.addListener(T,"shape_changed",ue)))},[ue]),d.exports.useEffect(()=>{T&&B&&(yc!==null&&google.maps.event.removeListener(yc),r0(google.maps.event.addListener(T,"title_changed",B)))},[B]),d.exports.useEffect(()=>{T&&P&&(wc!==null&&google.maps.event.removeListener(wc),s0(google.maps.event.addListener(T,"visible_changed",P)))},[P]),d.exports.useEffect(()=>{T&&x&&(_c!==null&&google.maps.event.removeListener(_c),i0(google.maps.event.addListener(T,"zindex_changed",x)))},[x]),d.exports.useEffect(()=>{const Va=Object.assign(Object.assign(Object.assign({},e||Wh),n?Wh:{map:S}),{position:t}),he=new google.maps.Marker(Va);return n?n.addMarker(he,!!r):he.setMap(S),t&&he.setPosition(t),typeof o<"u"&&he.setVisible(o),typeof i<"u"&&he.setDraggable(i),typeof l<"u"&&he.setClickable(l),typeof u=="string"&&he.setCursor(u),c&&he.setIcon(c),typeof h<"u"&&he.setLabel(h),typeof f<"u"&&he.setOpacity(f),p&&he.setShape(p),typeof m=="string"&&he.setTitle(m),typeof _=="number"&&he.setZIndex(_),g&&V(google.maps.event.addListener(he,"dblclick",g)),v&&le(google.maps.event.addListener(he,"dragend",v)),w&&Re(google.maps.event.addListener(he,"dragstart",w)),A&&bn(google.maps.event.addListener(he,"mousedown",A)),b&&ao(google.maps.event.addListener(he,"mouseout",b)),I&&Js(google.maps.event.addListener(he,"mouseover",I)),R&&Fa(google.maps.event.addListener(he,"mouseup",R)),L&&Ba(google.maps.event.addListener(he,"rightclick",L)),E&&Ww(google.maps.event.addListener(he,"click",E)),y&&Gw(google.maps.event.addListener(he,"drag",y)),F&&Kw(google.maps.event.addListener(he,"clickable_changed",F)),G&&Qw(google.maps.event.addListener(he,"cursor_changed",G)),$&&Yw(google.maps.event.addListener(he,"animation_changed",$)),Q&&Xw(google.maps.event.addListener(he,"draggable_changed",Q)),W&&Zw(google.maps.event.addListener(he,"flat_changed",W)),ee&&Jw(google.maps.event.addListener(he,"icon_changed",ee)),ae&&e0(google.maps.event.addListener(he,"position_changed",ae)),ue&&n0(google.maps.event.addListener(he,"shape_changed",ue)),B&&r0(google.maps.event.addListener(he,"title_changed",B)),P&&s0(google.maps.event.addListener(he,"visible_changed",P)),x&&i0(google.maps.event.addListener(he,"zindex_changed",x)),O(he),C&&C(he),()=>{M!==null&&google.maps.event.removeListener(M),K!==null&&google.maps.event.removeListener(K),ne!==null&&google.maps.event.removeListener(ne),Nt!==null&&google.maps.event.removeListener(Nt),ve!==null&&google.maps.event.removeListener(ve),kr!==null&&google.maps.event.removeListener(kr),lo!==null&&google.maps.event.removeListener(lo),ei!==null&&google.maps.event.removeListener(ei),uo!==null&&google.maps.event.removeListener(uo),hc!==null&&google.maps.event.removeListener(hc),dc!==null&&google.maps.event.removeListener(dc),fc!==null&&google.maps.event.removeListener(fc),pc!==null&&google.maps.event.removeListener(pc),mc!==null&&google.maps.event.removeListener(mc),gc!==null&&google.maps.event.removeListener(gc),vc!==null&&google.maps.event.removeListener(vc),yc!==null&&google.maps.event.removeListener(yc),wc!==null&&google.maps.event.removeListener(wc),_c!==null&&google.maps.event.removeListener(_c),k&&k(he),n?n.removeMarker(he,!!r):he&&he.setMap(null)}},[]);const bP=d.exports.useMemo(()=>s?d.exports.Children.map(s,Va=>{if(!d.exports.isValidElement(Va))return Va;const he=Va;return d.exports.cloneElement(he,{anchor:T})}):null,[s,T]);return Ge.exports.jsx(Ge.exports.Fragment,{children:bP})||null}d.exports.memo(ED);class ea extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[]}componentDidMount(){const e=Object.assign(Object.assign(Object.assign({},this.props.options||Wh),this.props.clusterer?Wh:{map:this.context}),{position:this.props.position});this.marker=new google.maps.Marker(e),this.props.clusterer?this.props.clusterer.addMarker(this.marker,!!this.props.noClustererRedraw):this.marker.setMap(this.context),this.registeredEvents=me({updaterMap:T_,eventMap:k_,prevProps:{},nextProps:this.props,instance:this.marker}),this.props.onLoad&&this.props.onLoad(this.marker)}componentDidUpdate(e){this.marker&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:T_,eventMap:k_,prevProps:e,nextProps:this.props,instance:this.marker}))}componentWillUnmount(){this.marker&&(this.props.onUnmount&&this.props.onUnmount(this.marker),ge(this.registeredEvents),this.props.clusterer?this.props.clusterer.removeMarker(this.marker,!!this.props.noClustererRedraw):this.marker&&this.marker.setMap(null))}render(){let e=null;return this.props.children&&(e=d.exports.Children.map(this.props.children,n=>{if(!d.exports.isValidElement(n))return n;let r=n;return d.exports.cloneElement(r,{anchor:this.marker})})),e||null}}ea.contextType=pe;var SD=function(){function t(e,n){e.getClusterer().extend(t,google.maps.OverlayView),this.cluster=e,this.clusterClassName=this.cluster.getClusterer().getClusterClass(),this.className=this.clusterClassName,this.styles=n,this.center=void 0,this.div=null,this.sums=null,this.visible=!1,this.boundsChangedListener=null,this.url="",this.height=0,this.width=0,this.anchorText=[0,0],this.anchorIcon=[0,0],this.textColor="black",this.textSize=11,this.textDecoration="none",this.fontWeight="bold",this.fontStyle="normal",this.fontFamily="Arial,sans-serif",this.backgroundPosition="0 0",this.cMouseDownInCluster=null,this.cDraggingMapByCluster=null,this.timeOut=null,this.setMap(e.getMap()),this.onBoundsChanged=this.onBoundsChanged.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onClick=this.onClick.bind(this),this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this),this.onAdd=this.onAdd.bind(this),this.onRemove=this.onRemove.bind(this),this.draw=this.draw.bind(this),this.hide=this.hide.bind(this),this.show=this.show.bind(this),this.useStyle=this.useStyle.bind(this),this.setCenter=this.setCenter.bind(this),this.getPosFromLatLng=this.getPosFromLatLng.bind(this)}return t.prototype.onBoundsChanged=function(){this.cDraggingMapByCluster=this.cMouseDownInCluster},t.prototype.onMouseDown=function(){this.cMouseDownInCluster=!0,this.cDraggingMapByCluster=!1},t.prototype.onClick=function(e){if(this.cMouseDownInCluster=!1,!this.cDraggingMapByCluster){var n=this.cluster.getClusterer();if(google.maps.event.trigger(n,"click",this.cluster),google.maps.event.trigger(n,"clusterclick",this.cluster),n.getZoomOnClick()){var r=n.getMaxZoom(),s=this.cluster.getBounds(),i=n.getMap();i!==null&&"fitBounds"in i&&i.fitBounds(s),this.timeOut=window.setTimeout(function(){var o=n.getMap();if(o!==null){"fitBounds"in o&&o.fitBounds(s);var a=o.getZoom()||0;r!==null&&a>r&&o.setZoom(r+1)}},100)}e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}},t.prototype.onMouseOver=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseover",this.cluster)},t.prototype.onMouseOut=function(){google.maps.event.trigger(this.cluster.getClusterer(),"mouseout",this.cluster)},t.prototype.onAdd=function(){var e;this.div=document.createElement("div"),this.div.className=this.className,this.visible&&this.show(),(e=this.getPanes())===null||e===void 0||e.overlayMouseTarget.appendChild(this.div);var n=this.getMap();n!==null&&(this.boundsChangedListener=google.maps.event.addListener(n,"bounds_changed",this.onBoundsChanged),this.div.addEventListener("mousedown",this.onMouseDown),this.div.addEventListener("click",this.onClick),this.div.addEventListener("mouseover",this.onMouseOver),this.div.addEventListener("mouseout",this.onMouseOut))},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.hide(),this.boundsChangedListener!==null&&google.maps.event.removeListener(this.boundsChangedListener),this.div.removeEventListener("mousedown",this.onMouseDown),this.div.removeEventListener("click",this.onClick),this.div.removeEventListener("mouseover",this.onMouseOver),this.div.removeEventListener("mouseout",this.onMouseOut),this.div.parentNode.removeChild(this.div),this.timeOut!==null&&(window.clearTimeout(this.timeOut),this.timeOut=null),this.div=null)},t.prototype.draw=function(){if(this.visible&&this.div!==null&&this.center){var e=this.getPosFromLatLng(this.center);this.div.style.top=e!==null?"".concat(e.y,"px"):"0",this.div.style.left=e!==null?"".concat(e.x,"px"):"0"}},t.prototype.hide=function(){this.div&&(this.div.style.display="none"),this.visible=!1},t.prototype.show=function(){var e,n,r,s;if(this.div&&this.center){var i=this.sums===null||typeof this.sums.title>"u"||this.sums.title===""?this.cluster.getClusterer().getTitle():this.sums.title,o=this.backgroundPosition.split(" "),a=parseInt(o[0].replace(/^\s+|\s+$/g,""),10),l=parseInt(o[1].replace(/^\s+|\s+$/g,""),10),u=this.getPosFromLatLng(this.center);this.div.className=this.className,this.div.setAttribute("style","cursor: pointer; position: absolute; top: ".concat(u!==null?"".concat(u.y,"px"):"0","; left: ").concat(u!==null?"".concat(u.x,"px"):"0","; width: ").concat(this.width,"px; height: ").concat(this.height,"px; "));var c=document.createElement("img");c.alt=i,c.src=this.url,c.width=this.width,c.height=this.height,c.setAttribute("style","position: absolute; top: ".concat(l,"px; left: ").concat(a,"px")),this.cluster.getClusterer().enableRetinaIcons||(c.style.clip="rect(-".concat(l,"px, -").concat(a+this.width,"px, -").concat(l+this.height,", -").concat(a,")"));var h=document.createElement("div");h.setAttribute("style","position: absolute; top: ".concat(this.anchorText[0],"px; left: ").concat(this.anchorText[1],"px; color: ").concat(this.textColor,"; font-size: ").concat(this.textSize,"px; font-family: ").concat(this.fontFamily,"; font-weight: ").concat(this.fontWeight,"; fontStyle: ").concat(this.fontStyle,"; text-decoration: ").concat(this.textDecoration,"; text-align: center; width: ").concat(this.width,"px; line-height: ").concat(this.height,"px")),!((e=this.sums)===null||e===void 0)&&e.text&&(h.innerText="".concat((n=this.sums)===null||n===void 0?void 0:n.text)),!((r=this.sums)===null||r===void 0)&&r.html&&(h.innerHTML="".concat((s=this.sums)===null||s===void 0?void 0:s.html)),this.div.innerHTML="",this.div.appendChild(c),this.div.appendChild(h),this.div.title=i,this.div.style.display=""}this.visible=!0},t.prototype.useStyle=function(e){this.sums=e;var n=this.cluster.getClusterer().getStyles(),r=n[Math.min(n.length-1,Math.max(0,e.index-1))];this.url=r.url,this.height=r.height,this.width=r.width,r.className&&(this.className="".concat(this.clusterClassName," ").concat(r.className)),this.anchorText=r.anchorText||[0,0],this.anchorIcon=r.anchorIcon||[this.height/2,this.width/2],this.textColor=r.textColor||"black",this.textSize=r.textSize||11,this.textDecoration=r.textDecoration||"none",this.fontWeight=r.fontWeight||"bold",this.fontStyle=r.fontStyle||"normal",this.fontFamily=r.fontFamily||"Arial,sans-serif",this.backgroundPosition=r.backgroundPosition||"0 0"},t.prototype.setCenter=function(e){this.center=e},t.prototype.getPosFromLatLng=function(e){var n=this.getProjection().fromLatLngToDivPixel(e);return n!==null&&(n.x-=this.anchorIcon[1],n.y-=this.anchorIcon[0]),n},t}(),ID=function(){function t(e){this.markerClusterer=e,this.map=this.markerClusterer.getMap(),this.gridSize=this.markerClusterer.getGridSize(),this.minClusterSize=this.markerClusterer.getMinimumClusterSize(),this.averageCenter=this.markerClusterer.getAverageCenter(),this.markers=[],this.center=void 0,this.bounds=null,this.clusterIcon=new SD(this,this.markerClusterer.getStyles()),this.getSize=this.getSize.bind(this),this.getMarkers=this.getMarkers.bind(this),this.getCenter=this.getCenter.bind(this),this.getMap=this.getMap.bind(this),this.getClusterer=this.getClusterer.bind(this),this.getBounds=this.getBounds.bind(this),this.remove=this.remove.bind(this),this.addMarker=this.addMarker.bind(this),this.isMarkerInClusterBounds=this.isMarkerInClusterBounds.bind(this),this.calculateBounds=this.calculateBounds.bind(this),this.updateIcon=this.updateIcon.bind(this),this.isMarkerAlreadyAdded=this.isMarkerAlreadyAdded.bind(this)}return t.prototype.getSize=function(){return this.markers.length},t.prototype.getMarkers=function(){return this.markers},t.prototype.getCenter=function(){return this.center},t.prototype.getMap=function(){return this.map},t.prototype.getClusterer=function(){return this.markerClusterer},t.prototype.getBounds=function(){for(var e=new google.maps.LatLngBounds(this.center,this.center),n=this.getMarkers(),r=0;r<n.length;r++){var s=n[r].getPosition();s&&e.extend(s)}return e},t.prototype.remove=function(){this.clusterIcon.setMap(null),this.markers=[],delete this.markers},t.prototype.addMarker=function(e){var n;if(this.isMarkerAlreadyAdded(e))return!1;if(this.center){if(this.averageCenter){var r=e.getPosition();if(r){var s=this.markers.length+1;this.center=new google.maps.LatLng((this.center.lat()*(s-1)+r.lat())/s,(this.center.lng()*(s-1)+r.lng())/s),this.calculateBounds()}}}else{var r=e.getPosition();r&&(this.center=r,this.calculateBounds())}e.isAdded=!0,this.markers.push(e);var i=this.markers.length,o=this.markerClusterer.getMaxZoom(),a=(n=this.map)===null||n===void 0?void 0:n.getZoom();if(o!==null&&typeof a<"u"&&a>o)e.getMap()!==this.map&&e.setMap(this.map);else if(i<this.minClusterSize)e.getMap()!==this.map&&e.setMap(this.map);else if(i===this.minClusterSize)for(var l=0;l<i;l++)this.markers[l].setMap(null);else e.setMap(null);return!0},t.prototype.isMarkerInClusterBounds=function(e){if(this.bounds!==null){var n=e.getPosition();if(n)return this.bounds.contains(n)}return!1},t.prototype.calculateBounds=function(){this.bounds=this.markerClusterer.getExtendedBounds(new google.maps.LatLngBounds(this.center,this.center))},t.prototype.updateIcon=function(){var e,n=this.markers.length,r=this.markerClusterer.getMaxZoom(),s=(e=this.map)===null||e===void 0?void 0:e.getZoom();if(r!==null&&typeof s<"u"&&s>r){this.clusterIcon.hide();return}if(n<this.minClusterSize){this.clusterIcon.hide();return}this.center&&this.clusterIcon.setCenter(this.center),this.clusterIcon.useStyle(this.markerClusterer.getCalculator()(this.markers,this.markerClusterer.getStyles().length)),this.clusterIcon.show()},t.prototype.isMarkerAlreadyAdded=function(e){if(this.markers.includes)return this.markers.includes(e);for(var n=0;n<this.markers.length;n++)if(e===this.markers[n])return!0;return!1},t}();function xD(t,e){var n=t.length,r=n.toString().length,s=Math.min(r,e);return{text:n.toString(),index:s,title:""}}var kD=2e3,TD=500,bD="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/m",CD="png",LD=[53,56,66,78,90],PD="cluster",jk=function(){function t(e,n,r){n===void 0&&(n=[]),r===void 0&&(r={}),this.getMinimumClusterSize=this.getMinimumClusterSize.bind(this),this.setMinimumClusterSize=this.setMinimumClusterSize.bind(this),this.getEnableRetinaIcons=this.getEnableRetinaIcons.bind(this),this.setEnableRetinaIcons=this.setEnableRetinaIcons.bind(this),this.addToClosestCluster=this.addToClosestCluster.bind(this),this.getImageExtension=this.getImageExtension.bind(this),this.setImageExtension=this.setImageExtension.bind(this),this.getExtendedBounds=this.getExtendedBounds.bind(this),this.getAverageCenter=this.getAverageCenter.bind(this),this.setAverageCenter=this.setAverageCenter.bind(this),this.getTotalClusters=this.getTotalClusters.bind(this),this.fitMapToMarkers=this.fitMapToMarkers.bind(this),this.getIgnoreHidden=this.getIgnoreHidden.bind(this),this.setIgnoreHidden=this.setIgnoreHidden.bind(this),this.getClusterClass=this.getClusterClass.bind(this),this.setClusterClass=this.setClusterClass.bind(this),this.getTotalMarkers=this.getTotalMarkers.bind(this),this.getZoomOnClick=this.getZoomOnClick.bind(this),this.setZoomOnClick=this.setZoomOnClick.bind(this),this.getBatchSizeIE=this.getBatchSizeIE.bind(this),this.setBatchSizeIE=this.setBatchSizeIE.bind(this),this.createClusters=this.createClusters.bind(this),this.onZoomChanged=this.onZoomChanged.bind(this),this.getImageSizes=this.getImageSizes.bind(this),this.setImageSizes=this.setImageSizes.bind(this),this.getCalculator=this.getCalculator.bind(this),this.setCalculator=this.setCalculator.bind(this),this.removeMarkers=this.removeMarkers.bind(this),this.resetViewport=this.resetViewport.bind(this),this.getImagePath=this.getImagePath.bind(this),this.setImagePath=this.setImagePath.bind(this),this.pushMarkerTo=this.pushMarkerTo.bind(this),this.removeMarker=this.removeMarker.bind(this),this.clearMarkers=this.clearMarkers.bind(this),this.setupStyles=this.setupStyles.bind(this),this.getGridSize=this.getGridSize.bind(this),this.setGridSize=this.setGridSize.bind(this),this.getClusters=this.getClusters.bind(this),this.getMaxZoom=this.getMaxZoom.bind(this),this.setMaxZoom=this.setMaxZoom.bind(this),this.getMarkers=this.getMarkers.bind(this),this.addMarkers=this.addMarkers.bind(this),this.getStyles=this.getStyles.bind(this),this.setStyles=this.setStyles.bind(this),this.addMarker=this.addMarker.bind(this),this.onRemove=this.onRemove.bind(this),this.getTitle=this.getTitle.bind(this),this.setTitle=this.setTitle.bind(this),this.repaint=this.repaint.bind(this),this.onIdle=this.onIdle.bind(this),this.redraw=this.redraw.bind(this),this.extend=this.extend.bind(this),this.onAdd=this.onAdd.bind(this),this.draw=this.draw.bind(this),this.extend(t,google.maps.OverlayView),this.markers=[],this.clusters=[],this.listeners=[],this.activeMap=null,this.ready=!1,this.gridSize=r.gridSize||60,this.minClusterSize=r.minimumClusterSize||2,this.maxZoom=r.maxZoom||null,this.styles=r.styles||[],this.title=r.title||"",this.zoomOnClick=!0,r.zoomOnClick!==void 0&&(this.zoomOnClick=r.zoomOnClick),this.averageCenter=!1,r.averageCenter!==void 0&&(this.averageCenter=r.averageCenter),this.ignoreHidden=!1,r.ignoreHidden!==void 0&&(this.ignoreHidden=r.ignoreHidden),this.enableRetinaIcons=!1,r.enableRetinaIcons!==void 0&&(this.enableRetinaIcons=r.enableRetinaIcons),this.imagePath=r.imagePath||bD,this.imageExtension=r.imageExtension||CD,this.imageSizes=r.imageSizes||LD,this.calculator=r.calculator||xD,this.batchSize=r.batchSize||kD,this.batchSizeIE=r.batchSizeIE||TD,this.clusterClass=r.clusterClass||PD,navigator.userAgent.toLowerCase().indexOf("msie")!==-1&&(this.batchSize=this.batchSizeIE),this.timerRefStatic=null,this.setupStyles(),this.addMarkers(n,!0),this.setMap(e)}return t.prototype.onZoomChanged=function(){var e,n;this.resetViewport(!1),(((e=this.getMap())===null||e===void 0?void 0:e.getZoom())===(this.get("minZoom")||0)||((n=this.getMap())===null||n===void 0?void 0:n.getZoom())===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")},t.prototype.onIdle=function(){this.redraw()},t.prototype.onAdd=function(){var e=this.getMap();this.activeMap=e,this.ready=!0,this.repaint(),e!==null&&(this.listeners=[google.maps.event.addListener(e,"zoom_changed",this.onZoomChanged),google.maps.event.addListener(e,"idle",this.onIdle)])},t.prototype.onRemove=function(){for(var e=0;e<this.markers.length;e++)this.markers[e].getMap()!==this.activeMap&&this.markers[e].setMap(this.activeMap);for(var e=0;e<this.clusters.length;e++)this.clusters[e].remove();this.clusters=[];for(var e=0;e<this.listeners.length;e++)google.maps.event.removeListener(this.listeners[e]);this.listeners=[],this.activeMap=null,this.ready=!1},t.prototype.draw=function(){},t.prototype.setupStyles=function(){if(!(this.styles.length>0))for(var e=0;e<this.imageSizes.length;e++)this.styles.push({url:"".concat(this.imagePath+(e+1),".").concat(this.imageExtension),height:this.imageSizes[e],width:this.imageSizes[e]})},t.prototype.fitMapToMarkers=function(){for(var e=this.getMarkers(),n=new google.maps.LatLngBounds,r=0;r<e.length;r++){var s=e[r].getPosition();s&&n.extend(s)}var i=this.getMap();i!==null&&"fitBounds"in i&&i.fitBounds(n)},t.prototype.getGridSize=function(){return this.gridSize},t.prototype.setGridSize=function(e){this.gridSize=e},t.prototype.getMinimumClusterSize=function(){return this.minClusterSize},t.prototype.setMinimumClusterSize=function(e){this.minClusterSize=e},t.prototype.getMaxZoom=function(){return this.maxZoom},t.prototype.setMaxZoom=function(e){this.maxZoom=e},t.prototype.getStyles=function(){return this.styles},t.prototype.setStyles=function(e){this.styles=e},t.prototype.getTitle=function(){return this.title},t.prototype.setTitle=function(e){this.title=e},t.prototype.getZoomOnClick=function(){return this.zoomOnClick},t.prototype.setZoomOnClick=function(e){this.zoomOnClick=e},t.prototype.getAverageCenter=function(){return this.averageCenter},t.prototype.setAverageCenter=function(e){this.averageCenter=e},t.prototype.getIgnoreHidden=function(){return this.ignoreHidden},t.prototype.setIgnoreHidden=function(e){this.ignoreHidden=e},t.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons},t.prototype.setEnableRetinaIcons=function(e){this.enableRetinaIcons=e},t.prototype.getImageExtension=function(){return this.imageExtension},t.prototype.setImageExtension=function(e){this.imageExtension=e},t.prototype.getImagePath=function(){return this.imagePath},t.prototype.setImagePath=function(e){this.imagePath=e},t.prototype.getImageSizes=function(){return this.imageSizes},t.prototype.setImageSizes=function(e){this.imageSizes=e},t.prototype.getCalculator=function(){return this.calculator},t.prototype.setCalculator=function(e){this.calculator=e},t.prototype.getBatchSizeIE=function(){return this.batchSizeIE},t.prototype.setBatchSizeIE=function(e){this.batchSizeIE=e},t.prototype.getClusterClass=function(){return this.clusterClass},t.prototype.setClusterClass=function(e){this.clusterClass=e},t.prototype.getMarkers=function(){return this.markers},t.prototype.getTotalMarkers=function(){return this.markers.length},t.prototype.getClusters=function(){return this.clusters},t.prototype.getTotalClusters=function(){return this.clusters.length},t.prototype.addMarker=function(e,n){this.pushMarkerTo(e),n||this.redraw()},t.prototype.addMarkers=function(e,n){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&this.pushMarkerTo(e[r]);n||this.redraw()},t.prototype.pushMarkerTo=function(e){var n=this;e.getDraggable()&&google.maps.event.addListener(e,"dragend",function(){n.ready&&(e.isAdded=!1,n.repaint())}),e.isAdded=!1,this.markers.push(e)},t.prototype.removeMarker_=function(e){var n=-1;if(this.markers.indexOf)n=this.markers.indexOf(e);else for(var r=0;r<this.markers.length;r++)if(e===this.markers[r]){n=r;break}return n===-1?!1:(e.setMap(null),this.markers.splice(n,1),!0)},t.prototype.removeMarker=function(e,n){var r=this.removeMarker_(e);return!n&&r&&this.repaint(),r},t.prototype.removeMarkers=function(e,n){for(var r=!1,s=0;s<e.length;s++)r=r||this.removeMarker_(e[s]);return!n&&r&&this.repaint(),r},t.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers=[]},t.prototype.repaint=function(){var e=this.clusters.slice();this.clusters=[],this.resetViewport(!1),this.redraw(),setTimeout(function(){for(var r=0;r<e.length;r++)e[r].remove()},0)},t.prototype.getExtendedBounds=function(e){var n=this.getProjection(),r=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()));r!==null&&(r.x+=this.gridSize,r.y-=this.gridSize);var s=n.fromLatLngToDivPixel(new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()));if(s!==null&&(s.x-=this.gridSize,s.y+=this.gridSize),r!==null){var i=n.fromDivPixelToLatLng(r);i!==null&&e.extend(i)}if(s!==null){var o=n.fromDivPixelToLatLng(s);o!==null&&e.extend(o)}return e},t.prototype.redraw=function(){this.createClusters(0)},t.prototype.resetViewport=function(e){for(var n=0;n<this.clusters.length;n++)this.clusters[n].remove();this.clusters=[];for(var n=0;n<this.markers.length;n++){var r=this.markers[n];r.isAdded=!1,e&&r.setMap(null)}},t.prototype.distanceBetweenPoints=function(e,n){var r=6371,s=(n.lat()-e.lat())*Math.PI/180,i=(n.lng()-e.lng())*Math.PI/180,o=Math.sin(s/2)*Math.sin(s/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(n.lat()*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2);return r*(2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o)))},t.prototype.isMarkerInBounds=function(e,n){var r=e.getPosition();return r?n.contains(r):!1},t.prototype.addToClosestCluster=function(e){for(var n,r=4e4,s=null,i=0;i<this.clusters.length;i++){n=this.clusters[i];var o=n.getCenter(),a=e.getPosition();if(o&&a){var l=this.distanceBetweenPoints(o,a);l<r&&(r=l,s=n)}}s&&s.isMarkerInClusterBounds(e)?s.addMarker(e):(n=new ID(this),n.addMarker(e),this.clusters.push(n))},t.prototype.createClusters=function(e){var n=this;if(!!this.ready){e===0&&(google.maps.event.trigger(this,"clusteringbegin",this),this.timerRefStatic!==null&&(window.clearTimeout(this.timerRefStatic),delete this.timerRefStatic));for(var r=this.getMap(),s=r!==null&&("getBounds"in r)?r.getBounds():null,i=(r==null?void 0:r.getZoom())||0,o=i>3?new google.maps.LatLngBounds(s==null?void 0:s.getSouthWest(),s==null?void 0:s.getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625)),a=this.getExtendedBounds(o),l=Math.min(e+this.batchSize,this.markers.length),u=e;u<l;u++){var c=this.markers[u];!c.isAdded&&this.isMarkerInBounds(c,a)&&(!this.ignoreHidden||this.ignoreHidden&&c.getVisible())&&this.addToClosestCluster(c)}if(l<this.markers.length)this.timerRefStatic=window.setTimeout(function(){n.createClusters(l)},0);else{this.timerRefStatic=null,google.maps.event.trigger(this,"clusteringend",this);for(var u=0;u<this.clusters.length;u++)this.clusters[u].updateIcon()}}},t.prototype.extend=function(e,n){return function(s){for(var i in s.prototype)this.prototype[i]=s.prototype[i];return this}.apply(e,[n])},t}();const Cn={onClick:"click",onClusteringBegin:"clusteringbegin",onClusteringEnd:"clusteringend",onMouseOut:"mouseout",onMouseOver:"mouseover"},ke={averageCenter(t,e){t.setAverageCenter(e)},batchSizeIE(t,e){t.setBatchSizeIE(e)},calculator(t,e){t.setCalculator(e)},clusterClass(t,e){t.setClusterClass(e)},enableRetinaIcons(t,e){t.setEnableRetinaIcons(e)},gridSize(t,e){t.setGridSize(e)},ignoreHidden(t,e){t.setIgnoreHidden(e)},imageExtension(t,e){t.setImageExtension(e)},imagePath(t,e){t.setImagePath(e)},imageSizes(t,e){t.setImageSizes(e)},maxZoom(t,e){t.setMaxZoom(e)},minimumClusterSize(t,e){t.setMinimumClusterSize(e)},styles(t,e){t.setStyles(e)},title(t,e){t.setTitle(e)},zoomOnClick(t,e){t.setZoomOnClick(e)}},RD={};function ND(t){const{children:e,options:n,averageCenter:r,batchSizeIE:s,calculator:i,clusterClass:o,enableRetinaIcons:a,gridSize:l,ignoreHidden:u,imageExtension:c,imagePath:h,imageSizes:f,maxZoom:p,minimumClusterSize:m,styles:_,title:E,zoomOnClick:g,onClick:y,onClusteringBegin:v,onClusteringEnd:w,onMouseOver:b,onMouseOut:I,onLoad:R,onUnmount:A}=t,[L,F]=d.exports.useState(null),G=d.exports.useContext(pe),[$,Q]=d.exports.useState(null),[W,ee]=d.exports.useState(null),[ae,ue]=d.exports.useState(null),[B,P]=d.exports.useState(null),[x,C]=d.exports.useState(null);return d.exports.useEffect(()=>{L&&I&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(L,Cn.onMouseOut,I)))},[I]),d.exports.useEffect(()=>{L&&b&&(x!==null&&google.maps.event.removeListener(x),C(google.maps.event.addListener(L,Cn.onMouseOver,b)))},[b]),d.exports.useEffect(()=>{L&&y&&($!==null&&google.maps.event.removeListener($),Q(google.maps.event.addListener(L,Cn.onClick,y)))},[y]),d.exports.useEffect(()=>{L&&v&&(W!==null&&google.maps.event.removeListener(W),ee(google.maps.event.addListener(L,Cn.onClusteringBegin,v)))},[v]),d.exports.useEffect(()=>{L&&w&&(ae!==null&&google.maps.event.removeListener(ae),ee(google.maps.event.addListener(L,Cn.onClusteringEnd,w)))},[w]),d.exports.useEffect(()=>{typeof r<"u"&&L!==null&&ke.averageCenter(L,r)},[L,r]),d.exports.useEffect(()=>{typeof s<"u"&&L!==null&&ke.batchSizeIE(L,s)},[L,s]),d.exports.useEffect(()=>{typeof i<"u"&&L!==null&&ke.calculator(L,i)},[L,i]),d.exports.useEffect(()=>{typeof o<"u"&&L!==null&&ke.clusterClass(L,o)},[L,o]),d.exports.useEffect(()=>{typeof a<"u"&&L!==null&&ke.enableRetinaIcons(L,a)},[L,a]),d.exports.useEffect(()=>{typeof l<"u"&&L!==null&&ke.gridSize(L,l)},[L,l]),d.exports.useEffect(()=>{typeof u<"u"&&L!==null&&ke.ignoreHidden(L,u)},[L,u]),d.exports.useEffect(()=>{typeof c<"u"&&L!==null&&ke.imageExtension(L,c)},[L,c]),d.exports.useEffect(()=>{typeof h<"u"&&L!==null&&ke.imagePath(L,h)},[L,h]),d.exports.useEffect(()=>{typeof f<"u"&&L!==null&&ke.imageSizes(L,f)},[L,f]),d.exports.useEffect(()=>{typeof p<"u"&&L!==null&&ke.maxZoom(L,p)},[L,p]),d.exports.useEffect(()=>{typeof m<"u"&&L!==null&&ke.minimumClusterSize(L,m)},[L,m]),d.exports.useEffect(()=>{typeof _<"u"&&L!==null&&ke.styles(L,_)},[L,_]),d.exports.useEffect(()=>{typeof E<"u"&&L!==null&&ke.title(L,E)},[L,E]),d.exports.useEffect(()=>{typeof g<"u"&&L!==null&&ke.zoomOnClick(L,g)},[L,g]),d.exports.useEffect(()=>{if(!G)return;const k=Object.assign({},n||RD),S=new jk(G,[],k);return r&&ke.averageCenter(S,r),s&&ke.batchSizeIE(S,s),i&&ke.calculator(S,i),o&&ke.clusterClass(S,o),a&&ke.enableRetinaIcons(S,a),l&&ke.gridSize(S,l),u&&ke.ignoreHidden(S,u),c&&ke.imageExtension(S,c),h&&ke.imagePath(S,h),f&&ke.imageSizes(S,f),p&&ke.maxZoom(S,p),m&&ke.minimumClusterSize(S,m),_&&ke.styles(S,_),E&&ke.title(S,E),g&&ke.zoomOnClick(S,g),I&&P(google.maps.event.addListener(S,Cn.onMouseOut,I)),b&&C(google.maps.event.addListener(S,Cn.onMouseOver,b)),y&&Q(google.maps.event.addListener(S,Cn.onClick,y)),v&&ee(google.maps.event.addListener(S,Cn.onClusteringBegin,v)),w&&ue(google.maps.event.addListener(S,Cn.onClusteringEnd,w)),F(S),R&&R(S),()=>{B!==null&&google.maps.event.removeListener(B),x!==null&&google.maps.event.removeListener(x),$!==null&&google.maps.event.removeListener($),W!==null&&google.maps.event.removeListener(W),ae!==null&&google.maps.event.removeListener(ae),A&&A(S)}},[]),L!==null&&e(L)||null}d.exports.memo(ND);class DD extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={markerClusterer:null},this.setClustererCallback=()=>{this.state.markerClusterer!==null&&this.props.onLoad&&this.props.onLoad(this.state.markerClusterer)}}componentDidMount(){if(this.context){const e=new jk(this.context,[],this.props.options);this.registeredEvents=me({updaterMap:ke,eventMap:Cn,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({markerClusterer:e}),this.setClustererCallback)}}componentDidUpdate(e){this.state.markerClusterer&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:ke,eventMap:Cn,prevProps:e,nextProps:this.props,instance:this.state.markerClusterer}))}componentWillUnmount(){this.state.markerClusterer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.markerClusterer),ge(this.registeredEvents),this.state.markerClusterer.setMap(null))}render(){return this.state.markerClusterer!==null?this.props.children(this.state.markerClusterer):null}}DD.contextType=pe;function b_(t){t.cancelBubble=!0,t.stopPropagation&&t.stopPropagation()}var zk=function(){function t(e){e===void 0&&(e={}),this.getCloseClickHandler=this.getCloseClickHandler.bind(this),this.closeClickHandler=this.closeClickHandler.bind(this),this.createInfoBoxDiv=this.createInfoBoxDiv.bind(this),this.addClickHandler=this.addClickHandler.bind(this),this.getCloseBoxImg=this.getCloseBoxImg.bind(this),this.getBoxWidths=this.getBoxWidths.bind(this),this.setBoxStyle=this.setBoxStyle.bind(this),this.setPosition=this.setPosition.bind(this),this.getPosition=this.getPosition.bind(this),this.setOptions=this.setOptions.bind(this),this.setContent=this.setContent.bind(this),this.setVisible=this.setVisible.bind(this),this.getContent=this.getContent.bind(this),this.getVisible=this.getVisible.bind(this),this.setZIndex=this.setZIndex.bind(this),this.getZIndex=this.getZIndex.bind(this),this.onRemove=this.onRemove.bind(this),this.panBox=this.panBox.bind(this),this.extend=this.extend.bind(this),this.close=this.close.bind(this),this.draw=this.draw.bind(this),this.show=this.show.bind(this),this.hide=this.hide.bind(this),this.open=this.open.bind(this),this.extend(t,google.maps.OverlayView),this.content=e.content||"",this.disableAutoPan=e.disableAutoPan||!1,this.maxWidth=e.maxWidth||0,this.pixelOffset=e.pixelOffset||new google.maps.Size(0,0),this.position=e.position||new google.maps.LatLng(0,0),this.zIndex=e.zIndex||null,this.boxClass=e.boxClass||"infoBox",this.boxStyle=e.boxStyle||{},this.closeBoxMargin=e.closeBoxMargin||"2px",this.closeBoxURL=e.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",e.closeBoxURL===""&&(this.closeBoxURL=""),this.infoBoxClearance=e.infoBoxClearance||new google.maps.Size(1,1),typeof e.visible>"u"&&(typeof e.isHidden>"u"?e.visible=!0:e.visible=!e.isHidden),this.isHidden=!e.visible,this.alignBottom=e.alignBottom||!1,this.pane=e.pane||"floatPane",this.enableEventPropagation=e.enableEventPropagation||!1,this.div=null,this.closeListener=null,this.moveListener=null,this.mapListener=null,this.contextListener=null,this.eventListeners=null,this.fixedWidthSet=null}return t.prototype.createInfoBoxDiv=function(){var e=this,n=function(a){a.returnValue=!1,a.preventDefault&&a.preventDefault(),e.enableEventPropagation||b_(a)};if(!this.div){this.div=document.createElement("div"),this.setBoxStyle(),typeof this.content=="string"?this.div.innerHTML=this.getCloseBoxImg()+this.content:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(this.content));var r=this.getPanes();if(r!==null&&r[this.pane].appendChild(this.div),this.addClickHandler(),this.div.style.width)this.fixedWidthSet=!0;else if(this.maxWidth!==0&&this.div.offsetWidth>this.maxWidth)this.div.style.width=this.maxWidth+"px",this.fixedWidthSet=!0;else{var s=this.getBoxWidths();this.div.style.width=this.div.offsetWidth-s.left-s.right+"px",this.fixedWidthSet=!1}if(this.panBox(this.disableAutoPan),!this.enableEventPropagation){this.eventListeners=[];for(var i=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],o=0;o<i.length;o++)this.eventListeners.push(google.maps.event.addListener(this.div,i[o],b_));this.eventListeners.push(google.maps.event.addListener(this.div,"mouseover",function(){e.div&&(e.div.style.cursor="default")}))}this.contextListener=google.maps.event.addListener(this.div,"contextmenu",n),google.maps.event.trigger(this,"domready")}},t.prototype.getCloseBoxImg=function(){var e="";return this.closeBoxURL!==""&&(e='<img alt=""',e+=' aria-hidden="true"',e+=" src='"+this.closeBoxURL+"'",e+=" align=right",e+=" style='",e+=" position: relative;",e+=" cursor: pointer;",e+=" margin: "+this.closeBoxMargin+";",e+="'>"),e},t.prototype.addClickHandler=function(){this.closeListener=this.div&&this.div.firstChild&&this.closeBoxURL!==""?google.maps.event.addListener(this.div.firstChild,"click",this.getCloseClickHandler()):null},t.prototype.closeClickHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(this,"closeclick"),this.close()},t.prototype.getCloseClickHandler=function(){return this.closeClickHandler},t.prototype.panBox=function(e){if(this.div&&!e){var n=this.getMap();if(n instanceof google.maps.Map){var r=0,s=0,i=n.getBounds();i&&!i.contains(this.position)&&n.setCenter(this.position);var o=n.getDiv(),a=o.offsetWidth,l=o.offsetHeight,u=this.pixelOffset.width,c=this.pixelOffset.height,h=this.div.offsetWidth,f=this.div.offsetHeight,p=this.infoBoxClearance.width,m=this.infoBoxClearance.height,_=this.getProjection(),E=_.fromLatLngToContainerPixel(this.position);E!==null&&(E.x<-u+p?r=E.x+u-p:E.x+h+u+p>a&&(r=E.x+h+u+p-a),this.alignBottom?E.y<-c+m+f?s=E.y+c-m-f:E.y+c+m>l&&(s=E.y+c+m-l):E.y<-c+m?s=E.y+c-m:E.y+f+c+m>l&&(s=E.y+f+c+m-l)),r===0&&s===0||n.panBy(r,s)}}},t.prototype.setBoxStyle=function(){if(this.div){this.div.className=this.boxClass,this.div.style.cssText="";var e=this.boxStyle;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.div.style[n]=e[n]);if(this.div.style.webkitTransform="translateZ(0)",typeof this.div.style.opacity<"u"&&this.div.style.opacity!==""){var r=parseFloat(this.div.style.opacity||"");this.div.style.msFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+r*100+')"',this.div.style.filter="alpha(opacity="+r*100+")"}this.div.style.position="absolute",this.div.style.visibility="hidden",this.zIndex!==null&&(this.div.style.zIndex=this.zIndex+""),this.div.style.overflow||(this.div.style.overflow="auto")}},t.prototype.getBoxWidths=function(){var e={top:0,bottom:0,left:0,right:0};if(!this.div)return e;if(document.defaultView){var n=this.div.ownerDocument,r=n&&n.defaultView?n.defaultView.getComputedStyle(this.div,""):null;r&&(e.top=parseInt(r.borderTopWidth||"",10)||0,e.bottom=parseInt(r.borderBottomWidth||"",10)||0,e.left=parseInt(r.borderLeftWidth||"",10)||0,e.right=parseInt(r.borderRightWidth||"",10)||0)}else if(document.documentElement.currentStyle){var s=this.div.currentStyle;s&&(e.top=parseInt(s.borderTopWidth||"",10)||0,e.bottom=parseInt(s.borderBottomWidth||"",10)||0,e.left=parseInt(s.borderLeftWidth||"",10)||0,e.right=parseInt(s.borderRightWidth||"",10)||0)}return e},t.prototype.onRemove=function(){this.div&&this.div.parentNode&&(this.div.parentNode.removeChild(this.div),this.div=null)},t.prototype.draw=function(){if(this.createInfoBoxDiv(),this.div){var e=this.getProjection(),n=e.fromLatLngToDivPixel(this.position);n!==null&&(this.div.style.left=n.x+this.pixelOffset.width+"px",this.alignBottom?this.div.style.bottom=-(n.y+this.pixelOffset.height)+"px":this.div.style.top=n.y+this.pixelOffset.height+"px"),this.isHidden?this.div.style.visibility="hidden":this.div.style.visibility="visible"}},t.prototype.setOptions=function(e){e===void 0&&(e={}),typeof e.boxClass<"u"&&(this.boxClass=e.boxClass,this.setBoxStyle()),typeof e.boxStyle<"u"&&(this.boxStyle=e.boxStyle,this.setBoxStyle()),typeof e.content<"u"&&this.setContent(e.content),typeof e.disableAutoPan<"u"&&(this.disableAutoPan=e.disableAutoPan),typeof e.maxWidth<"u"&&(this.maxWidth=e.maxWidth),typeof e.pixelOffset<"u"&&(this.pixelOffset=e.pixelOffset),typeof e.alignBottom<"u"&&(this.alignBottom=e.alignBottom),typeof e.position<"u"&&this.setPosition(e.position),typeof e.zIndex<"u"&&this.setZIndex(e.zIndex),typeof e.closeBoxMargin<"u"&&(this.closeBoxMargin=e.closeBoxMargin),typeof e.closeBoxURL<"u"&&(this.closeBoxURL=e.closeBoxURL),typeof e.infoBoxClearance<"u"&&(this.infoBoxClearance=e.infoBoxClearance),typeof e.isHidden<"u"&&(this.isHidden=e.isHidden),typeof e.visible<"u"&&(this.isHidden=!e.visible),typeof e.enableEventPropagation<"u"&&(this.enableEventPropagation=e.enableEventPropagation),this.div&&this.draw()},t.prototype.setContent=function(e){this.content=e,this.div&&(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.fixedWidthSet||(this.div.style.width=""),typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e)),this.fixedWidthSet||(this.div.style.width=this.div.offsetWidth+"px",typeof e=="string"?this.div.innerHTML=this.getCloseBoxImg()+e:(this.div.innerHTML=this.getCloseBoxImg(),this.div.appendChild(e))),this.addClickHandler()),google.maps.event.trigger(this,"content_changed")},t.prototype.setPosition=function(e){this.position=e,this.div&&this.draw(),google.maps.event.trigger(this,"position_changed")},t.prototype.setVisible=function(e){this.isHidden=!e,this.div&&(this.div.style.visibility=this.isHidden?"hidden":"visible")},t.prototype.setZIndex=function(e){this.zIndex=e,this.div&&(this.div.style.zIndex=e+""),google.maps.event.trigger(this,"zindex_changed")},t.prototype.getContent=function(){return this.content},t.prototype.getPosition=function(){return this.position},t.prototype.getZIndex=function(){return this.zIndex},t.prototype.getVisible=function(){var e=this.getMap();return typeof e>"u"||e===null?!1:!this.isHidden},t.prototype.show=function(){this.isHidden=!1,this.div&&(this.div.style.visibility="visible")},t.prototype.hide=function(){this.isHidden=!0,this.div&&(this.div.style.visibility="hidden")},t.prototype.open=function(e,n){var r=this;n&&(this.position=n.getPosition(),this.moveListener=google.maps.event.addListener(n,"position_changed",function(){var s=n.getPosition();r.setPosition(s)}),this.mapListener=google.maps.event.addListener(n,"map_changed",function(){r.setMap(n.map)})),this.setMap(e),this.div&&this.panBox()},t.prototype.close=function(){if(this.closeListener&&(google.maps.event.removeListener(this.closeListener),this.closeListener=null),this.eventListeners){for(var e=0;e<this.eventListeners.length;e++)google.maps.event.removeListener(this.eventListeners[e]);this.eventListeners=null}this.moveListener&&(google.maps.event.removeListener(this.moveListener),this.moveListener=null),this.mapListener&&(google.maps.event.removeListener(this.mapListener),this.mapListener=null),this.contextListener&&(google.maps.event.removeListener(this.contextListener),this.contextListener=null),this.setMap(null)},t.prototype.extend=function(e,n){return function(s){for(var i in s.prototype)Object.prototype.hasOwnProperty.call(this,i)||(this.prototype[i]=s.prototype[i]);return this}.apply(e,[n])},t}();const C_={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},L_={options(t,e){t.setOptions(e)},position(t,e){e instanceof google.maps.LatLng?t.setPosition(e):t.setPosition(new google.maps.LatLng(e.lat,e.lng))},visible(t,e){t.setVisible(e)},zIndex(t,e){t.setZIndex(e)}},AD={};function OD({children:t,anchor:e,options:n,position:r,zIndex:s,onCloseClick:i,onDomReady:o,onContentChanged:a,onPositionChanged:l,onZindexChanged:u,onLoad:c,onUnmount:h}){const f=d.exports.useContext(pe),[p,m]=d.exports.useState(null),[_,E]=d.exports.useState(null),[g,y]=d.exports.useState(null),[v,w]=d.exports.useState(null),[b,I]=d.exports.useState(null),[R,A]=d.exports.useState(null),L=d.exports.useRef(null);return d.exports.useEffect(()=>{f&&p!==null&&(p.close(),e?p.open(f,e):p.getPosition()&&p.open(f))},[f,p,e]),d.exports.useEffect(()=>{n&&p!==null&&p.setOptions(n)},[p,n]),d.exports.useEffect(()=>{if(r&&p!==null){const F=r instanceof google.maps.LatLng?r:new google.maps.LatLng(r.lat,r.lng);p.setPosition(F)}},[r]),d.exports.useEffect(()=>{typeof s=="number"&&p!==null&&p.setZIndex(s)},[s]),d.exports.useEffect(()=>{p&&i&&(_!==null&&google.maps.event.removeListener(_),E(google.maps.event.addListener(p,"closeclick",i)))},[i]),d.exports.useEffect(()=>{p&&o&&(g!==null&&google.maps.event.removeListener(g),y(google.maps.event.addListener(p,"domready",o)))},[o]),d.exports.useEffect(()=>{p&&a&&(v!==null&&google.maps.event.removeListener(v),w(google.maps.event.addListener(p,"content_changed",a)))},[a]),d.exports.useEffect(()=>{p&&l&&(b!==null&&google.maps.event.removeListener(b),I(google.maps.event.addListener(p,"position_changed",l)))},[l]),d.exports.useEffect(()=>{p&&u&&(R!==null&&google.maps.event.removeListener(R),A(google.maps.event.addListener(p,"zindex_changed",u)))},[u]),d.exports.useEffect(()=>{if(f){const F=n||AD,{position:G}=F,$=jv(F,["position"]);let Q;G&&!(G instanceof google.maps.LatLng)&&(Q=new google.maps.LatLng(G.lat,G.lng));const W=new zk(Object.assign(Object.assign({},$),Q?{position:Q}:{}));L.current=document.createElement("div"),m(W),i&&E(google.maps.event.addListener(W,"closeclick",i)),o&&y(google.maps.event.addListener(W,"domready",o)),a&&w(google.maps.event.addListener(W,"content_changed",a)),l&&I(google.maps.event.addListener(W,"position_changed",l)),u&&A(google.maps.event.addListener(W,"zindex_changed",u)),W.setContent(L.current),e?W.open(f,e):W.getPosition()?W.open(f):lt(!1,"You must provide either an anchor or a position prop for <InfoBox>."),c&&c(W)}return()=>{p!==null&&(_&&google.maps.event.removeListener(_),v&&google.maps.event.removeListener(v),g&&google.maps.event.removeListener(g),b&&google.maps.event.removeListener(b),R&&google.maps.event.removeListener(R),h&&h(p),p.close())}},[]),L.current?Sr.exports.createPortal(d.exports.Children.only(t),L.current):null}d.exports.memo(OD);class MD extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.containerElement=null,this.state={infoBox:null},this.open=(e,n)=>{n?e.open(this.context,n):e.getPosition()?e.open(this.context):lt(!1,"You must provide either an anchor or a position prop for <InfoBox>.")},this.setInfoBoxCallback=()=>{this.state.infoBox!==null&&this.containerElement!==null&&(this.state.infoBox.setContent(this.containerElement),this.open(this.state.infoBox,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoBox))}}componentDidMount(){const e=this.props.options||{},{position:n}=e,r=jv(e,["position"]);let s;n&&!(n instanceof google.maps.LatLng)&&(s=new google.maps.LatLng(n.lat,n.lng));const i=new zk(Object.assign(Object.assign({},r),s?{position:s}:{}));this.containerElement=document.createElement("div"),this.registeredEvents=me({updaterMap:L_,eventMap:C_,prevProps:{},nextProps:this.props,instance:i}),this.setState({infoBox:i},this.setInfoBoxCallback)}componentDidUpdate(e){const{infoBox:n}=this.state;n!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:L_,eventMap:C_,prevProps:e,nextProps:this.props,instance:n}))}componentWillUnmount(){const{onUnmount:e}=this.props,{infoBox:n}=this.state;n!==null&&(e&&e(n),ge(this.registeredEvents),n.close())}render(){return this.containerElement?Sr.exports.createPortal(d.exports.Children.only(this.props.children),this.containerElement):null}}MD.contextType=pe;var P_=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,s,i;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!t(e[s],n[s]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,i[s]))return!1;for(s=r;s--!==0;){var o=i[s];if(!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},qk={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(JN,function(){function n(f,p,m,_,E,g){if(!(E-_<=m)){var y=_+E>>1;r(f,p,y,_,E,g%2),n(f,p,m,_,y-1,g+1),n(f,p,m,y+1,E,g+1)}}function r(f,p,m,_,E,g){for(;E>_;){if(E-_>600){var y=E-_+1,v=m-_+1,w=Math.log(y),b=.5*Math.exp(2*w/3),I=.5*Math.sqrt(w*b*(y-b)/y)*(v-y/2<0?-1:1),R=Math.max(_,Math.floor(m-v*b/y+I)),A=Math.min(E,Math.floor(m+(y-v)*b/y+I));r(f,p,m,R,A,g)}var L=p[2*m+g],F=_,G=E;for(s(f,p,_,m),p[2*E+g]>L&&s(f,p,_,E);F<G;){for(s(f,p,F,G),F++,G--;p[2*F+g]<L;)F++;for(;p[2*G+g]>L;)G--}p[2*_+g]===L?s(f,p,_,G):(G++,s(f,p,G,E)),G<=m&&(_=G+1),m<=G&&(E=G-1)}}function s(f,p,m,_){i(f,m,_),i(p,2*m,2*_),i(p,2*m+1,2*_+1)}function i(f,p,m){var _=f[p];f[p]=f[m],f[m]=_}function o(f,p,m,_,E,g,y){for(var v=[0,f.length-1,0],w=[],b,I;v.length;){var R=v.pop(),A=v.pop(),L=v.pop();if(A-L<=y){for(var F=L;F<=A;F++)b=p[2*F],I=p[2*F+1],b>=m&&b<=E&&I>=_&&I<=g&&w.push(f[F]);continue}var G=Math.floor((L+A)/2);b=p[2*G],I=p[2*G+1],b>=m&&b<=E&&I>=_&&I<=g&&w.push(f[G]);var $=(R+1)%2;(R===0?m<=b:_<=I)&&(v.push(L),v.push(G-1),v.push($)),(R===0?E>=b:g>=I)&&(v.push(G+1),v.push(A),v.push($))}return w}function a(f,p,m,_,E,g){for(var y=[0,f.length-1,0],v=[],w=E*E;y.length;){var b=y.pop(),I=y.pop(),R=y.pop();if(I-R<=g){for(var A=R;A<=I;A++)l(p[2*A],p[2*A+1],m,_)<=w&&v.push(f[A]);continue}var L=Math.floor((R+I)/2),F=p[2*L],G=p[2*L+1];l(F,G,m,_)<=w&&v.push(f[L]);var $=(b+1)%2;(b===0?m-E<=F:_-E<=G)&&(y.push(R),y.push(L-1),y.push($)),(b===0?m+E>=F:_+E>=G)&&(y.push(L+1),y.push(I),y.push($))}return v}function l(f,p,m,_){var E=f-m,g=p-_;return E*E+g*g}var u=function(f){return f[0]},c=function(f){return f[1]},h=function(p,m,_,E,g){m===void 0&&(m=u),_===void 0&&(_=c),E===void 0&&(E=64),g===void 0&&(g=Float64Array),this.nodeSize=E,this.points=p;for(var y=p.length<65536?Uint16Array:Uint32Array,v=this.ids=new y(p.length),w=this.coords=new g(p.length*2),b=0;b<p.length;b++)v[b]=b,w[2*b]=m(p[b]),w[2*b+1]=_(p[b]);n(v,w,E,0,v.length-1,0)};return h.prototype.range=function(p,m,_,E){return o(this.ids,this.coords,p,m,_,E,this.nodeSize)},h.prototype.within=function(p,m,_){return a(this.ids,this.coords,p,m,_,this.nodeSize)},h})})(qk);var R_=qk.exports;const $D={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},Hh=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1));class UD{constructor(e){this.options=Pl(Object.create($D),e),this.trees=new Array(this.options.maxZoom+1)}load(e){const{log:n,minZoom:r,maxZoom:s,nodeSize:i}=this.options;n&&console.time("total time");const o=`prepare ${e.length} points`;n&&console.time(o),this.points=e;let a=[];for(let l=0;l<e.length;l++)!e[l].geometry||a.push(BD(e[l],l));this.trees[s+1]=new R_(a,D_,A_,i,Float32Array),n&&console.timeEnd(o);for(let l=s;l>=r;l--){const u=+Date.now();a=this._cluster(a,l),this.trees[l]=new R_(a,D_,A_,i,Float32Array),n&&console.log("z%d: %d clusters in %dms",l,a.length,+Date.now()-u)}return n&&console.timeEnd("total time"),this}getClusters(e,n){let r=((e[0]+180)%360+360)%360-180;const s=Math.max(-90,Math.min(90,e[1]));let i=e[2]===180?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,i=180;else if(r>i){const c=this.getClusters([r,s,180,o],n),h=this.getClusters([-180,s,i,o],n);return c.concat(h)}const a=this.trees[this._limitZoom(n)],l=a.range(ch(r),hh(o),ch(i),hh(s)),u=[];for(const c of l){const h=a.points[c];u.push(h.numPoints?N_(h):this.points[h.index])}return u}getChildren(e){const n=this._getOriginId(e),r=this._getOriginZoom(e),s="No cluster with the specified id.",i=this.trees[r];if(!i)throw new Error(s);const o=i.points[n];if(!o)throw new Error(s);const a=this.options.radius/(this.options.extent*Math.pow(2,r-1)),l=i.within(o.x,o.y,a),u=[];for(const c of l){const h=i.points[c];h.parentId===e&&u.push(h.numPoints?N_(h):this.points[h.index])}if(u.length===0)throw new Error(s);return u}getLeaves(e,n,r){n=n||10,r=r||0;const s=[];return this._appendLeaves(s,e,n,r,0),s}getTile(e,n,r){const s=this.trees[this._limitZoom(e)],i=Math.pow(2,e),{extent:o,radius:a}=this.options,l=a/o,u=(r-l)/i,c=(r+1+l)/i,h={features:[]};return this._addTileFeatures(s.range((n-l)/i,u,(n+1+l)/i,c),s.points,n,r,i,h),n===0&&this._addTileFeatures(s.range(1-l/i,u,1,c),s.points,i,r,i,h),n===i-1&&this._addTileFeatures(s.range(0,u,l/i,c),s.points,-1,r,i,h),h.features.length?h:null}getClusterExpansionZoom(e){let n=this._getOriginZoom(e)-1;for(;n<=this.options.maxZoom;){const r=this.getChildren(e);if(n++,r.length!==1)break;e=r[0].properties.cluster_id}return n}_appendLeaves(e,n,r,s,i){const o=this.getChildren(n);for(const a of o){const l=a.properties;if(l&&l.cluster?i+l.point_count<=s?i+=l.point_count:i=this._appendLeaves(e,l.cluster_id,r,s,i):i<s?i++:e.push(a),e.length===r)break}return i}_addTileFeatures(e,n,r,s,i,o){for(const a of e){const l=n[a],u=l.numPoints;let c,h,f;if(u)c=Wk(l),h=l.x,f=l.y;else{const _=this.points[l.index];c=_.properties,h=ch(_.geometry.coordinates[0]),f=hh(_.geometry.coordinates[1])}const p={type:1,geometry:[[Math.round(this.options.extent*(h*i-r)),Math.round(this.options.extent*(f*i-s))]],tags:c};let m;u?m=l.id:this.options.generateId?m=l.index:this.points[l.index].id&&(m=this.points[l.index].id),m!==void 0&&(p.id=m),o.features.push(p)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(+e,this.options.maxZoom+1))}_cluster(e,n){const r=[],{radius:s,extent:i,reduce:o,minPoints:a}=this.options,l=s/(i*Math.pow(2,n));for(let u=0;u<e.length;u++){const c=e[u];if(c.zoom<=n)continue;c.zoom=n;const h=this.trees[n+1],f=h.within(c.x,c.y,l),p=c.numPoints||1;let m=p;for(const _ of f){const E=h.points[_];E.zoom>n&&(m+=E.numPoints||1)}if(m>p&&m>=a){let _=c.x*p,E=c.y*p,g=o&&p>1?this._map(c,!0):null;const y=(u<<5)+(n+1)+this.points.length;for(const v of f){const w=h.points[v];if(w.zoom<=n)continue;w.zoom=n;const b=w.numPoints||1;_+=w.x*b,E+=w.y*b,w.parentId=y,o&&(g||(g=this._map(c,!0)),o(g,this._map(w)))}c.parentId=y,r.push(FD(_/m,E/m,y,m,g))}else if(r.push(c),m>1)for(const _ of f){const E=h.points[_];E.zoom<=n||(E.zoom=n,r.push(E))}}return r}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,n){if(e.numPoints)return n?Pl({},e.properties):e.properties;const r=this.points[e.index].properties,s=this.options.map(r);return n&&s===r?Pl({},s):s}}function FD(t,e,n,r,s){return{x:Hh(t),y:Hh(e),zoom:1/0,id:n,parentId:-1,numPoints:r,properties:s}}function BD(t,e){const[n,r]=t.geometry.coordinates;return{x:Hh(ch(n)),y:Hh(hh(r)),zoom:1/0,index:e,parentId:-1}}function N_(t){return{type:"Feature",id:t.id,properties:Wk(t),geometry:{type:"Point",coordinates:[VD(t.x),jD(t.y)]}}}function Wk(t){const e=t.numPoints,n=e>=1e4?`${Math.round(e/1e3)}k`:e>=1e3?`${Math.round(e/100)/10}k`:e;return Pl(Pl({},t.properties),{cluster:!0,cluster_id:t.id,point_count:e,point_count_abbreviated:n})}function ch(t){return t/360+.5}function hh(t){const e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}function VD(t){return(t-.5)*360}function jD(t){const e=(180-t*360)*Math.PI/180;return 360*Math.atan(Math.exp(e))/Math.PI-90}function Pl(t,e){for(const n in e)t[n]=e[n];return t}function D_(t){return t.x}function A_(t){return t.y}function zD(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}class Ym{constructor({markers:e,position:n}){this.markers=e,n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))}get bounds(){if(!(this.markers.length===0&&!this._position))return this.markers.reduce((e,n)=>e.extend(n.getPosition()),new google.maps.LatLngBounds(this._position,this._position))}get position(){return this._position||this.bounds.getCenter()}get count(){return this.markers.filter(e=>e.getVisible()).length}push(e){this.markers.push(e)}delete(){this.marker&&(this.marker.setMap(null),delete this.marker),this.markers.length=0}}class qD{constructor({maxZoom:e=16}){this.maxZoom=e}noop({markers:e}){return WD(e)}}const WD=t=>t.map(n=>new Ym({position:n.getPosition(),markers:[n]}));class HD extends qD{constructor(e){var{maxZoom:n,radius:r=60}=e,s=zD(e,["maxZoom","radius"]);super({maxZoom:n}),this.superCluster=new UD(Object.assign({maxZoom:this.maxZoom,radius:r},s)),this.state={zoom:null}}calculate(e){let n=!1;if(!P_(e.markers,this.markers)){n=!0,this.markers=[...e.markers];const s=this.markers.map(i=>({type:"Feature",geometry:{type:"Point",coordinates:[i.getPosition().lng(),i.getPosition().lat()]},properties:{marker:i}}));this.superCluster.load(s)}const r={zoom:e.map.getZoom()};return n||this.state.zoom>this.maxZoom&&r.zoom>this.maxZoom||(n=n||!P_(this.state,r)),this.state=r,n&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:n}}cluster({map:e}){return this.superCluster.getClusters([-180,-90,180,90],Math.round(e.getZoom())).map(this.transformCluster.bind(this))}transformCluster({geometry:{coordinates:[e,n]},properties:r}){if(r.cluster)return new Ym({markers:this.superCluster.getLeaves(r.cluster_id,1/0).map(s=>s.properties.marker),position:new google.maps.LatLng({lat:n,lng:e})});{const s=r.marker;return new Ym({markers:[s],position:s.getPosition()})}}}class GD{constructor(e,n){this.markers={sum:e.length};const r=n.map(i=>i.count),s=r.reduce((i,o)=>i+o,0);this.clusters={count:n.length,markers:{mean:s/n.length,sum:s,min:Math.min(...r),max:Math.max(...r)}}}}class KD{render({count:e,position:n},r){const s=e>Math.max(10,r.clusters.markers.mean)?"#ff0000":"#0000ff",i=window.btoa(`
  <svg fill="${s}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240">
    <circle cx="120" cy="120" opacity=".6" r="70" />
    <circle cx="120" cy="120" opacity=".3" r="90" />
    <circle cx="120" cy="120" opacity=".2" r="110" />
  </svg>`);return new google.maps.Marker({position:n,icon:{url:`data:image/svg+xml;base64,${i}`,scaledSize:new google.maps.Size(45,45)},label:{text:String(e),color:"rgba(255,255,255,0.9)",fontSize:"12px"},title:`Cluster of ${e} markers`,zIndex:Number(google.maps.Marker.MAX_ZINDEX)+e})}}function QD(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}class zv{constructor(){QD(zv,google.maps.OverlayView)}}var Rl;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click"})(Rl||(Rl={}));const YD=(t,e,n)=>{n.fitBounds(e.bounds)};class XD extends zv{constructor({map:e,markers:n=[],algorithm:r=new HD({}),renderer:s=new KD,onClusterClick:i=YD}){super(),this.markers=[...n],this.clusters=[],this.algorithm=r,this.renderer=s,this.onClusterClick=i,e&&this.setMap(e)}addMarker(e,n){this.markers.includes(e)||(this.markers.push(e),n||this.render())}addMarkers(e,n){e.forEach(r=>{this.addMarker(r,!0)}),n||this.render()}removeMarker(e,n){const r=this.markers.indexOf(e);return r===-1?!1:(e.setMap(null),this.markers.splice(r,1),n||this.render(),!0)}removeMarkers(e,n){let r=!1;return e.forEach(s=>{r=this.removeMarker(s,!0)||r}),r&&!n&&this.render(),r}clearMarkers(e){this.markers.length=0,e||this.render()}render(){const e=this.getMap();if(e instanceof google.maps.Map&&this.getProjection()){google.maps.event.trigger(this,Rl.CLUSTERING_BEGIN,this);const{clusters:n,changed:r}=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()});(r||r==null)&&(this.reset(),this.clusters=n,this.renderClusters()),google.maps.event.trigger(this,Rl.CLUSTERING_END,this)}}onAdd(){this.idleListener=this.getMap().addListener("idle",this.render.bind(this)),this.render()}onRemove(){google.maps.event.removeListener(this.idleListener),this.reset()}reset(){this.markers.forEach(e=>e.setMap(null)),this.clusters.forEach(e=>e.delete()),this.clusters=[]}renderClusters(){const e=new GD(this.markers,this.clusters),n=this.getMap();this.clusters.forEach(r=>{r.markers.length===1?r.marker=r.markers[0]:(r.marker=this.renderer.render(r,e),this.onClusterClick&&r.marker.addListener("click",s=>{google.maps.event.trigger(this,Rl.CLUSTER_CLICK,r),this.onClusterClick(s,r,n)})),r.marker.setMap(n)})}}function ZD(t){const e=nD(),[n,r]=d.exports.useState(null);return d.exports.useEffect(()=>{if(e&&n===null){const s=new XD(Object.assign(Object.assign({},t),{map:e}));r(s)}},[e]),n}function JD({children:t,options:e}){const n=ZD(e);return n!==null?t(n):null}d.exports.memo(JD);const O_={onCloseClick:"closeclick",onContentChanged:"content_changed",onDomReady:"domready",onPositionChanged:"position_changed",onZindexChanged:"zindex_changed"},M_={options(t,e){t.setOptions(e)},position(t,e){t.setPosition(e)},zIndex(t,e){t.setZIndex(e)}};function eA({children:t,anchor:e,options:n,position:r,zIndex:s,onCloseClick:i,onDomReady:o,onContentChanged:a,onPositionChanged:l,onZindexChanged:u,onLoad:c,onUnmount:h}){const f=d.exports.useContext(pe),[p,m]=d.exports.useState(null),[_,E]=d.exports.useState(null),[g,y]=d.exports.useState(null),[v,w]=d.exports.useState(null),[b,I]=d.exports.useState(null),[R,A]=d.exports.useState(null),L=d.exports.useRef(null);return d.exports.useEffect(()=>{p!==null&&(p.close(),e?p.open(f,e):p.getPosition()&&p.open(f))},[f,p,e]),d.exports.useEffect(()=>{n&&p!==null&&p.setOptions(n)},[p,n]),d.exports.useEffect(()=>{r&&p!==null&&p.setPosition(r)},[r]),d.exports.useEffect(()=>{typeof s=="number"&&p!==null&&p.setZIndex(s)},[s]),d.exports.useEffect(()=>{p&&i&&(_!==null&&google.maps.event.removeListener(_),E(google.maps.event.addListener(p,"closeclick",i)))},[i]),d.exports.useEffect(()=>{p&&o&&(g!==null&&google.maps.event.removeListener(g),y(google.maps.event.addListener(p,"domready",o)))},[o]),d.exports.useEffect(()=>{p&&a&&(v!==null&&google.maps.event.removeListener(v),w(google.maps.event.addListener(p,"content_changed",a)))},[a]),d.exports.useEffect(()=>{p&&l&&(b!==null&&google.maps.event.removeListener(b),I(google.maps.event.addListener(p,"position_changed",l)))},[l]),d.exports.useEffect(()=>{p&&u&&(R!==null&&google.maps.event.removeListener(R),A(google.maps.event.addListener(p,"zindex_changed",u)))},[u]),d.exports.useEffect(()=>{const F=new google.maps.InfoWindow(Object.assign({},n||{}));return m(F),L.current=document.createElement("div"),i&&E(google.maps.event.addListener(F,"closeclick",i)),o&&y(google.maps.event.addListener(F,"domready",o)),a&&w(google.maps.event.addListener(F,"content_changed",a)),l&&I(google.maps.event.addListener(F,"position_changed",l)),u&&A(google.maps.event.addListener(F,"zindex_changed",u)),F.setContent(L.current),r&&F.setPosition(r),s&&F.setZIndex(s),e?F.open(f,e):F.getPosition()?F.open(f):lt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>."),c&&c(F),()=>{_&&google.maps.event.removeListener(_),v&&google.maps.event.removeListener(v),g&&google.maps.event.removeListener(g),b&&google.maps.event.removeListener(b),R&&google.maps.event.removeListener(R),h&&h(F),F.close()}},[]),L.current?Sr.exports.createPortal(d.exports.Children.only(t),L.current):null}d.exports.memo(eA);class tA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.containerElement=null,this.state={infoWindow:null},this.open=(e,n)=>{n?e.open(this.context,n):e.getPosition()?e.open(this.context):lt(!1,"You must provide either an anchor (typically render it inside a <Marker>) or a position props for <InfoWindow>.")},this.setInfoWindowCallback=()=>{this.state.infoWindow!==null&&this.containerElement!==null&&(this.state.infoWindow.setContent(this.containerElement),this.open(this.state.infoWindow,this.props.anchor),this.props.onLoad&&this.props.onLoad(this.state.infoWindow))}}componentDidMount(){const e=new google.maps.InfoWindow(Object.assign({},this.props.options||{}));this.containerElement=document.createElement("div"),this.registeredEvents=me({updaterMap:M_,eventMap:O_,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({infoWindow:e}),this.setInfoWindowCallback)}componentDidUpdate(e){this.state.infoWindow!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:M_,eventMap:O_,prevProps:e,nextProps:this.props,instance:this.state.infoWindow}))}componentWillUnmount(){this.state.infoWindow!==null&&(ge(this.registeredEvents),this.props.onUnmount&&this.props.onUnmount(this.state.infoWindow),this.state.infoWindow.close())}render(){return this.containerElement?Sr.exports.createPortal(d.exports.Children.only(this.props.children),this.containerElement):null}}tA.contextType=pe;const $_={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},U_={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},visible(t,e){t.setVisible(e)}},nA={};function rA({options:t,draggable:e,editable:n,visible:r,path:s,onDblClick:i,onDragEnd:o,onDragStart:a,onMouseDown:l,onMouseMove:u,onMouseOut:c,onMouseOver:h,onMouseUp:f,onRightClick:p,onClick:m,onDrag:_,onLoad:E,onUnmount:g}){const y=d.exports.useContext(pe),[v,w]=d.exports.useState(null),[b,I]=d.exports.useState(null),[R,A]=d.exports.useState(null),[L,F]=d.exports.useState(null),[G,$]=d.exports.useState(null),[Q,W]=d.exports.useState(null),[ee,ae]=d.exports.useState(null),[ue,B]=d.exports.useState(null),[P,x]=d.exports.useState(null),[C,k]=d.exports.useState(null),[S,T]=d.exports.useState(null),[O,M]=d.exports.useState(null);return d.exports.useEffect(()=>{v!==null&&v.setMap(y)},[y]),d.exports.useEffect(()=>{typeof t<"u"&&v!==null&&v.setOptions(t)},[v,t]),d.exports.useEffect(()=>{typeof e<"u"&&v!==null&&v.setDraggable(e)},[v,e]),d.exports.useEffect(()=>{typeof n<"u"&&v!==null&&v.setEditable(n)},[v,n]),d.exports.useEffect(()=>{typeof r<"u"&&v!==null&&v.setVisible(r)},[v,r]),d.exports.useEffect(()=>{typeof s<"u"&&v!==null&&v.setPath(s)},[v,s]),d.exports.useEffect(()=>{v&&i&&(b!==null&&google.maps.event.removeListener(b),I(google.maps.event.addListener(v,"dblclick",i)))},[i]),d.exports.useEffect(()=>{v&&o&&(R!==null&&google.maps.event.removeListener(R),A(google.maps.event.addListener(v,"dragend",o)))},[o]),d.exports.useEffect(()=>{v&&a&&(L!==null&&google.maps.event.removeListener(L),F(google.maps.event.addListener(v,"dragstart",a)))},[a]),d.exports.useEffect(()=>{v&&l&&(G!==null&&google.maps.event.removeListener(G),$(google.maps.event.addListener(v,"mousedown",l)))},[l]),d.exports.useEffect(()=>{v&&u&&(Q!==null&&google.maps.event.removeListener(Q),W(google.maps.event.addListener(v,"mousemove",u)))},[u]),d.exports.useEffect(()=>{v&&c&&(ee!==null&&google.maps.event.removeListener(ee),ae(google.maps.event.addListener(v,"mouseout",c)))},[c]),d.exports.useEffect(()=>{v&&h&&(ue!==null&&google.maps.event.removeListener(ue),B(google.maps.event.addListener(v,"mouseover",h)))},[h]),d.exports.useEffect(()=>{v&&f&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(v,"mouseup",f)))},[f]),d.exports.useEffect(()=>{v&&p&&(C!==null&&google.maps.event.removeListener(C),k(google.maps.event.addListener(v,"rightclick",p)))},[p]),d.exports.useEffect(()=>{v&&m&&(S!==null&&google.maps.event.removeListener(S),T(google.maps.event.addListener(v,"click",m)))},[m]),d.exports.useEffect(()=>{v&&_&&(O!==null&&google.maps.event.removeListener(O),M(google.maps.event.addListener(v,"drag",_)))},[_]),d.exports.useEffect(()=>{const V=new google.maps.Polyline(Object.assign(Object.assign({},t||nA),{map:y}));return s&&V.setPath(s),typeof r<"u"&&V.setVisible(r),typeof n<"u"&&V.setEditable(n),typeof e<"u"&&V.setDraggable(e),i&&I(google.maps.event.addListener(V,"dblclick",i)),o&&A(google.maps.event.addListener(V,"dragend",o)),a&&F(google.maps.event.addListener(V,"dragstart",a)),l&&$(google.maps.event.addListener(V,"mousedown",l)),u&&W(google.maps.event.addListener(V,"mousemove",u)),c&&ae(google.maps.event.addListener(V,"mouseout",c)),h&&B(google.maps.event.addListener(V,"mouseover",h)),f&&x(google.maps.event.addListener(V,"mouseup",f)),p&&k(google.maps.event.addListener(V,"rightclick",p)),m&&T(google.maps.event.addListener(V,"click",m)),_&&M(google.maps.event.addListener(V,"drag",_)),w(V),E&&E(V),()=>{b!==null&&google.maps.event.removeListener(b),R!==null&&google.maps.event.removeListener(R),L!==null&&google.maps.event.removeListener(L),G!==null&&google.maps.event.removeListener(G),Q!==null&&google.maps.event.removeListener(Q),ee!==null&&google.maps.event.removeListener(ee),ue!==null&&google.maps.event.removeListener(ue),P!==null&&google.maps.event.removeListener(P),C!==null&&google.maps.event.removeListener(C),S!==null&&google.maps.event.removeListener(S),g&&g(V),V.setMap(null)}},[]),null}d.exports.memo(rA);class sA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={polyline:null},this.setPolylineCallback=()=>{this.state.polyline!==null&&this.props.onLoad&&this.props.onLoad(this.state.polyline)}}componentDidMount(){const e=new google.maps.Polyline(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=me({updaterMap:U_,eventMap:$_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polyline:e}},this.setPolylineCallback)}componentDidUpdate(e){this.state.polyline!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:U_,eventMap:$_,prevProps:e,nextProps:this.props,instance:this.state.polyline}))}componentWillUnmount(){this.state.polyline!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polyline),ge(this.registeredEvents),this.state.polyline.setMap(null))}render(){return null}}sA.contextType=pe;const F_={onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},B_={draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},path(t,e){t.setPath(e)},paths(t,e){t.setPaths(e)},visible(t,e){t.setVisible(e)}};function iA({options:t,draggable:e,editable:n,visible:r,path:s,paths:i,onDblClick:o,onDragEnd:a,onDragStart:l,onMouseDown:u,onMouseMove:c,onMouseOut:h,onMouseOver:f,onMouseUp:p,onRightClick:m,onClick:_,onDrag:E,onLoad:g,onUnmount:y}){const v=d.exports.useContext(pe),[w,b]=d.exports.useState(null),[I,R]=d.exports.useState(null),[A,L]=d.exports.useState(null),[F,G]=d.exports.useState(null),[$,Q]=d.exports.useState(null),[W,ee]=d.exports.useState(null),[ae,ue]=d.exports.useState(null),[B,P]=d.exports.useState(null),[x,C]=d.exports.useState(null),[k,S]=d.exports.useState(null),[T,O]=d.exports.useState(null),[M,V]=d.exports.useState(null);return d.exports.useEffect(()=>{w!==null&&w.setMap(v)},[v]),d.exports.useEffect(()=>{typeof t<"u"&&w!==null&&w.setOptions(t)},[w,t]),d.exports.useEffect(()=>{typeof e<"u"&&w!==null&&w.setDraggable(e)},[w,e]),d.exports.useEffect(()=>{typeof n<"u"&&w!==null&&w.setEditable(n)},[w,n]),d.exports.useEffect(()=>{typeof r<"u"&&w!==null&&w.setVisible(r)},[w,r]),d.exports.useEffect(()=>{typeof s<"u"&&w!==null&&w.setPath(s)},[w,s]),d.exports.useEffect(()=>{typeof i<"u"&&w!==null&&w.setPaths(i)},[w,i]),d.exports.useEffect(()=>{w&&o&&(I!==null&&google.maps.event.removeListener(I),R(google.maps.event.addListener(w,"dblclick",o)))},[o]),d.exports.useEffect(()=>{w&&a&&(A!==null&&google.maps.event.removeListener(A),L(google.maps.event.addListener(w,"dragend",a)))},[a]),d.exports.useEffect(()=>{w&&l&&(F!==null&&google.maps.event.removeListener(F),G(google.maps.event.addListener(w,"dragstart",l)))},[l]),d.exports.useEffect(()=>{w&&u&&($!==null&&google.maps.event.removeListener($),Q(google.maps.event.addListener(w,"mousedown",u)))},[u]),d.exports.useEffect(()=>{w&&c&&(W!==null&&google.maps.event.removeListener(W),ee(google.maps.event.addListener(w,"mousemove",c)))},[c]),d.exports.useEffect(()=>{w&&h&&(ae!==null&&google.maps.event.removeListener(ae),ue(google.maps.event.addListener(w,"mouseout",h)))},[h]),d.exports.useEffect(()=>{w&&f&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(w,"mouseover",f)))},[f]),d.exports.useEffect(()=>{w&&p&&(x!==null&&google.maps.event.removeListener(x),C(google.maps.event.addListener(w,"mouseup",p)))},[p]),d.exports.useEffect(()=>{w&&m&&(k!==null&&google.maps.event.removeListener(k),S(google.maps.event.addListener(w,"rightclick",m)))},[m]),d.exports.useEffect(()=>{w&&_&&(T!==null&&google.maps.event.removeListener(T),O(google.maps.event.addListener(w,"click",_)))},[_]),d.exports.useEffect(()=>{w&&E&&(M!==null&&google.maps.event.removeListener(M),V(google.maps.event.addListener(w,"drag",E)))},[E]),d.exports.useEffect(()=>{const K=new google.maps.Polygon(Object.assign(Object.assign({},t||{}),{map:v}));return s&&K.setPath(s),i&&K.setPaths(i),typeof r<"u"&&K.setVisible(r),typeof n<"u"&&K.setEditable(n),typeof e<"u"&&K.setDraggable(e),o&&R(google.maps.event.addListener(K,"dblclick",o)),a&&L(google.maps.event.addListener(K,"dragend",a)),l&&G(google.maps.event.addListener(K,"dragstart",l)),u&&Q(google.maps.event.addListener(K,"mousedown",u)),c&&ee(google.maps.event.addListener(K,"mousemove",c)),h&&ue(google.maps.event.addListener(K,"mouseout",h)),f&&P(google.maps.event.addListener(K,"mouseover",f)),p&&C(google.maps.event.addListener(K,"mouseup",p)),m&&S(google.maps.event.addListener(K,"rightclick",m)),_&&O(google.maps.event.addListener(K,"click",_)),E&&V(google.maps.event.addListener(K,"drag",E)),b(K),g&&g(K),()=>{I!==null&&google.maps.event.removeListener(I),A!==null&&google.maps.event.removeListener(A),F!==null&&google.maps.event.removeListener(F),$!==null&&google.maps.event.removeListener($),W!==null&&google.maps.event.removeListener(W),ae!==null&&google.maps.event.removeListener(ae),B!==null&&google.maps.event.removeListener(B),x!==null&&google.maps.event.removeListener(x),k!==null&&google.maps.event.removeListener(k),T!==null&&google.maps.event.removeListener(T),y&&y(K),K.setMap(null)}},[]),null}d.exports.memo(iA);class oA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={polygon:null},this.setPolygonCallback=()=>{this.state.polygon!==null&&this.props.onLoad&&this.props.onLoad(this.state.polygon)}}componentDidMount(){const e=new google.maps.Polygon(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=me({updaterMap:B_,eventMap:F_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{polygon:e}},this.setPolygonCallback)}componentDidUpdate(e){this.state.polygon!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:B_,eventMap:F_,prevProps:e,nextProps:this.props,instance:this.state.polygon}))}componentWillUnmount(){this.state.polygon!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.polygon),ge(this.registeredEvents),this.state.polygon&&this.state.polygon.setMap(null))}render(){return null}}oA.contextType=pe;const V_={onBoundsChanged:"bounds_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},j_={bounds(t,e){t.setBounds(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},visible(t,e){t.setVisible(e)}};function aA({options:t,bounds:e,draggable:n,editable:r,visible:s,onDblClick:i,onDragEnd:o,onDragStart:a,onMouseDown:l,onMouseMove:u,onMouseOut:c,onMouseOver:h,onMouseUp:f,onRightClick:p,onClick:m,onDrag:_,onBoundsChanged:E,onLoad:g,onUnmount:y}){const v=d.exports.useContext(pe),[w,b]=d.exports.useState(null),[I,R]=d.exports.useState(null),[A,L]=d.exports.useState(null),[F,G]=d.exports.useState(null),[$,Q]=d.exports.useState(null),[W,ee]=d.exports.useState(null),[ae,ue]=d.exports.useState(null),[B,P]=d.exports.useState(null),[x,C]=d.exports.useState(null),[k,S]=d.exports.useState(null),[T,O]=d.exports.useState(null),[M,V]=d.exports.useState(null),[K,le]=d.exports.useState(null);return d.exports.useEffect(()=>{w!==null&&w.setMap(v)},[v]),d.exports.useEffect(()=>{typeof t<"u"&&w!==null&&w.setOptions(t)},[w,t]),d.exports.useEffect(()=>{typeof n<"u"&&w!==null&&w.setDraggable(n)},[w,n]),d.exports.useEffect(()=>{typeof r<"u"&&w!==null&&w.setEditable(r)},[w,r]),d.exports.useEffect(()=>{typeof s<"u"&&w!==null&&w.setVisible(s)},[w,s]),d.exports.useEffect(()=>{typeof e<"u"&&w!==null&&w.setBounds(e)},[w,e]),d.exports.useEffect(()=>{w&&i&&(I!==null&&google.maps.event.removeListener(I),R(google.maps.event.addListener(w,"dblclick",i)))},[i]),d.exports.useEffect(()=>{w&&o&&(A!==null&&google.maps.event.removeListener(A),L(google.maps.event.addListener(w,"dragend",o)))},[o]),d.exports.useEffect(()=>{w&&a&&(F!==null&&google.maps.event.removeListener(F),G(google.maps.event.addListener(w,"dragstart",a)))},[a]),d.exports.useEffect(()=>{w&&l&&($!==null&&google.maps.event.removeListener($),Q(google.maps.event.addListener(w,"mousedown",l)))},[l]),d.exports.useEffect(()=>{w&&u&&(W!==null&&google.maps.event.removeListener(W),ee(google.maps.event.addListener(w,"mousemove",u)))},[u]),d.exports.useEffect(()=>{w&&c&&(ae!==null&&google.maps.event.removeListener(ae),ue(google.maps.event.addListener(w,"mouseout",c)))},[c]),d.exports.useEffect(()=>{w&&h&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(w,"mouseover",h)))},[h]),d.exports.useEffect(()=>{w&&f&&(x!==null&&google.maps.event.removeListener(x),C(google.maps.event.addListener(w,"mouseup",f)))},[f]),d.exports.useEffect(()=>{w&&p&&(k!==null&&google.maps.event.removeListener(k),S(google.maps.event.addListener(w,"rightclick",p)))},[p]),d.exports.useEffect(()=>{w&&m&&(T!==null&&google.maps.event.removeListener(T),O(google.maps.event.addListener(w,"click",m)))},[m]),d.exports.useEffect(()=>{w&&_&&(M!==null&&google.maps.event.removeListener(M),V(google.maps.event.addListener(w,"drag",_)))},[_]),d.exports.useEffect(()=>{w&&E&&(K!==null&&google.maps.event.removeListener(K),le(google.maps.event.addListener(w,"bounds_changed",E)))},[E]),d.exports.useEffect(()=>{const ne=new google.maps.Rectangle(Object.assign(Object.assign({},t||{}),{map:v}));return typeof s<"u"&&ne.setVisible(s),typeof r<"u"&&ne.setEditable(r),typeof n<"u"&&ne.setDraggable(n),typeof e<"u"&&ne.setBounds(e),i&&R(google.maps.event.addListener(ne,"dblclick",i)),o&&L(google.maps.event.addListener(ne,"dragend",o)),a&&G(google.maps.event.addListener(ne,"dragstart",a)),l&&Q(google.maps.event.addListener(ne,"mousedown",l)),u&&ee(google.maps.event.addListener(ne,"mousemove",u)),c&&ue(google.maps.event.addListener(ne,"mouseout",c)),h&&P(google.maps.event.addListener(ne,"mouseover",h)),f&&C(google.maps.event.addListener(ne,"mouseup",f)),p&&S(google.maps.event.addListener(ne,"rightclick",p)),m&&O(google.maps.event.addListener(ne,"click",m)),_&&V(google.maps.event.addListener(ne,"drag",_)),E&&le(google.maps.event.addListener(ne,"bounds_changed",E)),b(ne),g&&g(ne),()=>{I!==null&&google.maps.event.removeListener(I),A!==null&&google.maps.event.removeListener(A),F!==null&&google.maps.event.removeListener(F),$!==null&&google.maps.event.removeListener($),W!==null&&google.maps.event.removeListener(W),ae!==null&&google.maps.event.removeListener(ae),B!==null&&google.maps.event.removeListener(B),x!==null&&google.maps.event.removeListener(x),k!==null&&google.maps.event.removeListener(k),T!==null&&google.maps.event.removeListener(T),M!==null&&google.maps.event.removeListener(M),K!==null&&google.maps.event.removeListener(K),y&&y(ne),ne.setMap(null)}},[]),null}d.exports.memo(aA);class lA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={rectangle:null},this.setRectangleCallback=()=>{this.state.rectangle!==null&&this.props.onLoad&&this.props.onLoad(this.state.rectangle)}}componentDidMount(){const e=new google.maps.Rectangle(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=me({updaterMap:j_,eventMap:V_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{rectangle:e}},this.setRectangleCallback)}componentDidUpdate(e){this.state.rectangle!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:j_,eventMap:V_,prevProps:e,nextProps:this.props,instance:this.state.rectangle}))}componentWillUnmount(){this.state.rectangle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.rectangle),ge(this.registeredEvents),this.state.rectangle.setMap(null))}render(){return null}}lA.contextType=pe;const z_={onCenterChanged:"center_changed",onRadiusChanged:"radius_changed",onClick:"click",onDblClick:"dblclick",onDrag:"drag",onDragEnd:"dragend",onDragStart:"dragstart",onMouseDown:"mousedown",onMouseMove:"mousemove",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick"},q_={center(t,e){t.setCenter(e)},draggable(t,e){t.setDraggable(e)},editable(t,e){t.setEditable(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},radius(t,e){t.setRadius(e)},visible(t,e){t.setVisible(e)}},uA={};function cA({options:t,center:e,radius:n,draggable:r,editable:s,visible:i,onDblClick:o,onDragEnd:a,onDragStart:l,onMouseDown:u,onMouseMove:c,onMouseOut:h,onMouseOver:f,onMouseUp:p,onRightClick:m,onClick:_,onDrag:E,onCenterChanged:g,onRadiusChanged:y,onLoad:v,onUnmount:w}){const b=d.exports.useContext(pe),[I,R]=d.exports.useState(null),[A,L]=d.exports.useState(null),[F,G]=d.exports.useState(null),[$,Q]=d.exports.useState(null),[W,ee]=d.exports.useState(null),[ae,ue]=d.exports.useState(null),[B,P]=d.exports.useState(null),[x,C]=d.exports.useState(null),[k,S]=d.exports.useState(null),[T,O]=d.exports.useState(null),[M,V]=d.exports.useState(null),[K,le]=d.exports.useState(null),[ne,Re]=d.exports.useState(null),[Nt,bn]=d.exports.useState(null);return d.exports.useEffect(()=>{I!==null&&I.setMap(b)},[b]),d.exports.useEffect(()=>{typeof t<"u"&&I!==null&&I.setOptions(t)},[I,t]),d.exports.useEffect(()=>{typeof r<"u"&&I!==null&&I.setDraggable(r)},[I,r]),d.exports.useEffect(()=>{typeof s<"u"&&I!==null&&I.setEditable(s)},[I,s]),d.exports.useEffect(()=>{typeof i<"u"&&I!==null&&I.setVisible(i)},[I,i]),d.exports.useEffect(()=>{typeof n=="number"&&I!==null&&I.setRadius(n)},[I,n]),d.exports.useEffect(()=>{typeof e<"u"&&I!==null&&I.setCenter(e)},[I,e]),d.exports.useEffect(()=>{I&&o&&(A!==null&&google.maps.event.removeListener(A),L(google.maps.event.addListener(I,"dblclick",o)))},[o]),d.exports.useEffect(()=>{I&&a&&(F!==null&&google.maps.event.removeListener(F),G(google.maps.event.addListener(I,"dragend",a)))},[a]),d.exports.useEffect(()=>{I&&l&&($!==null&&google.maps.event.removeListener($),Q(google.maps.event.addListener(I,"dragstart",l)))},[l]),d.exports.useEffect(()=>{I&&u&&(W!==null&&google.maps.event.removeListener(W),ee(google.maps.event.addListener(I,"mousedown",u)))},[u]),d.exports.useEffect(()=>{I&&c&&(ae!==null&&google.maps.event.removeListener(ae),ue(google.maps.event.addListener(I,"mousemove",c)))},[c]),d.exports.useEffect(()=>{I&&h&&(B!==null&&google.maps.event.removeListener(B),P(google.maps.event.addListener(I,"mouseout",h)))},[h]),d.exports.useEffect(()=>{I&&f&&(x!==null&&google.maps.event.removeListener(x),C(google.maps.event.addListener(I,"mouseover",f)))},[f]),d.exports.useEffect(()=>{I&&p&&(k!==null&&google.maps.event.removeListener(k),S(google.maps.event.addListener(I,"mouseup",p)))},[p]),d.exports.useEffect(()=>{I&&m&&(T!==null&&google.maps.event.removeListener(T),O(google.maps.event.addListener(I,"rightclick",m)))},[m]),d.exports.useEffect(()=>{I&&_&&(M!==null&&google.maps.event.removeListener(M),V(google.maps.event.addListener(I,"click",_)))},[_]),d.exports.useEffect(()=>{I&&E&&(K!==null&&google.maps.event.removeListener(K),le(google.maps.event.addListener(I,"drag",E)))},[E]),d.exports.useEffect(()=>{I&&g&&(ne!==null&&google.maps.event.removeListener(ne),Re(google.maps.event.addListener(I,"center_changed",g)))},[_]),d.exports.useEffect(()=>{I&&y&&(Nt!==null&&google.maps.event.removeListener(Nt),bn(google.maps.event.addListener(I,"radius_changed",y)))},[y]),d.exports.useEffect(()=>{const ve=new google.maps.Circle(Object.assign(Object.assign({},t||uA),{map:b}));return typeof n=="number"&&ve.setRadius(n),typeof e<"u"&&ve.setCenter(e),typeof n=="number"&&ve.setRadius(n),typeof i<"u"&&ve.setVisible(i),typeof s<"u"&&ve.setEditable(s),typeof r<"u"&&ve.setDraggable(r),o&&L(google.maps.event.addListener(ve,"dblclick",o)),a&&G(google.maps.event.addListener(ve,"dragend",a)),l&&Q(google.maps.event.addListener(ve,"dragstart",l)),u&&ee(google.maps.event.addListener(ve,"mousedown",u)),c&&ue(google.maps.event.addListener(ve,"mousemove",c)),h&&P(google.maps.event.addListener(ve,"mouseout",h)),f&&C(google.maps.event.addListener(ve,"mouseover",f)),p&&S(google.maps.event.addListener(ve,"mouseup",p)),m&&O(google.maps.event.addListener(ve,"rightclick",m)),_&&V(google.maps.event.addListener(ve,"click",_)),E&&le(google.maps.event.addListener(ve,"drag",E)),g&&Re(google.maps.event.addListener(ve,"center_changed",g)),y&&bn(google.maps.event.addListener(ve,"radius_changed",y)),R(ve),v&&v(ve),()=>{A!==null&&google.maps.event.removeListener(A),F!==null&&google.maps.event.removeListener(F),$!==null&&google.maps.event.removeListener($),W!==null&&google.maps.event.removeListener(W),ae!==null&&google.maps.event.removeListener(ae),B!==null&&google.maps.event.removeListener(B),x!==null&&google.maps.event.removeListener(x),k!==null&&google.maps.event.removeListener(k),T!==null&&google.maps.event.removeListener(T),M!==null&&google.maps.event.removeListener(M),ne!==null&&google.maps.event.removeListener(ne),Nt!==null&&google.maps.event.removeListener(Nt),w&&w(ve),ve.setMap(null)}},[]),null}d.exports.memo(cA);class hA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={circle:null},this.setCircleCallback=()=>{this.state.circle!==null&&this.props.onLoad&&this.props.onLoad(this.state.circle)}}componentDidMount(){const e=new google.maps.Circle(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=me({updaterMap:q_,eventMap:z_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{circle:e}},this.setCircleCallback)}componentDidUpdate(e){this.state.circle!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:q_,eventMap:z_,prevProps:e,nextProps:this.props,instance:this.state.circle}))}componentWillUnmount(){this.state.circle!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.circle),ge(this.registeredEvents),this.state.circle&&this.state.circle.setMap(null))}render(){return null}}hA.contextType=pe;const W_={onClick:"click",onDblClick:"dblclick",onMouseDown:"mousedown",onMouseOut:"mouseout",onMouseOver:"mouseover",onMouseUp:"mouseup",onRightClick:"rightclick",onAddFeature:"addfeature",onRemoveFeature:"removefeature",onRemoveProperty:"removeproperty",onSetGeometry:"setgeometry",onSetProperty:"setproperty"},H_={add(t,e){t.add(e)},addgeojson(t,e,n){t.addGeoJson(e,n)},contains(t,e){t.contains(e)},foreach(t,e){t.forEach(e)},loadgeojson(t,e,n,r){t.loadGeoJson(e,n,r)},overridestyle(t,e,n){t.overrideStyle(e,n)},remove(t,e){t.remove(e)},revertstyle(t,e){t.revertStyle(e)},controlposition(t,e){t.setControlPosition(e)},controls(t,e){t.setControls(e)},drawingmode(t,e){t.setDrawingMode(e)},map(t,e){t.setMap(e)},style(t,e){t.setStyle(e)},togeojson(t,e){t.toGeoJson(e)}};function dA({options:t,onClick:e,onDblClick:n,onMouseDown:r,onMouseMove:s,onMouseOut:i,onMouseOver:o,onMouseUp:a,onRightClick:l,onAddFeature:u,onRemoveFeature:c,onRemoveProperty:h,onSetGeometry:f,onSetProperty:p,onLoad:m,onUnmount:_}){const E=d.exports.useContext(pe),[g,y]=d.exports.useState(null),[v,w]=d.exports.useState(null),[b,I]=d.exports.useState(null),[R,A]=d.exports.useState(null),[L,F]=d.exports.useState(null),[G,$]=d.exports.useState(null),[Q,W]=d.exports.useState(null),[ee,ae]=d.exports.useState(null),[ue,B]=d.exports.useState(null),[P,x]=d.exports.useState(null),[C,k]=d.exports.useState(null),[S,T]=d.exports.useState(null),[O,M]=d.exports.useState(null),[V,K]=d.exports.useState(null);return d.exports.useEffect(()=>{g!==null&&g.setMap(E)},[E]),d.exports.useEffect(()=>{g&&n&&(v!==null&&google.maps.event.removeListener(v),w(google.maps.event.addListener(g,"dblclick",n)))},[n]),d.exports.useEffect(()=>{g&&r&&(b!==null&&google.maps.event.removeListener(b),I(google.maps.event.addListener(g,"mousedown",r)))},[r]),d.exports.useEffect(()=>{g&&s&&(R!==null&&google.maps.event.removeListener(R),A(google.maps.event.addListener(g,"mousemove",s)))},[s]),d.exports.useEffect(()=>{g&&i&&(L!==null&&google.maps.event.removeListener(L),F(google.maps.event.addListener(g,"mouseout",i)))},[i]),d.exports.useEffect(()=>{g&&o&&(G!==null&&google.maps.event.removeListener(G),$(google.maps.event.addListener(g,"mouseover",o)))},[o]),d.exports.useEffect(()=>{g&&a&&(Q!==null&&google.maps.event.removeListener(Q),W(google.maps.event.addListener(g,"mouseup",a)))},[a]),d.exports.useEffect(()=>{g&&l&&(ee!==null&&google.maps.event.removeListener(ee),ae(google.maps.event.addListener(g,"rightclick",l)))},[l]),d.exports.useEffect(()=>{g&&e&&(ue!==null&&google.maps.event.removeListener(ue),B(google.maps.event.addListener(g,"click",e)))},[e]),d.exports.useEffect(()=>{g&&u&&(P!==null&&google.maps.event.removeListener(P),x(google.maps.event.addListener(g,"addfeature",u)))},[u]),d.exports.useEffect(()=>{g&&c&&(C!==null&&google.maps.event.removeListener(C),k(google.maps.event.addListener(g,"removefeature",c)))},[c]),d.exports.useEffect(()=>{g&&h&&(S!==null&&google.maps.event.removeListener(S),T(google.maps.event.addListener(g,"removeproperty",h)))},[h]),d.exports.useEffect(()=>{g&&f&&(O!==null&&google.maps.event.removeListener(O),M(google.maps.event.addListener(g,"setgeometry",f)))},[f]),d.exports.useEffect(()=>{g&&p&&(V!==null&&google.maps.event.removeListener(V),K(google.maps.event.addListener(g,"setproperty",p)))},[p]),d.exports.useEffect(()=>{if(E!==null){const le=new google.maps.Data(Object.assign(Object.assign({},t||{}),{map:E}));n&&w(google.maps.event.addListener(le,"dblclick",n)),r&&I(google.maps.event.addListener(le,"mousedown",r)),s&&A(google.maps.event.addListener(le,"mousemove",s)),i&&F(google.maps.event.addListener(le,"mouseout",i)),o&&$(google.maps.event.addListener(le,"mouseover",o)),a&&W(google.maps.event.addListener(le,"mouseup",a)),l&&ae(google.maps.event.addListener(le,"rightclick",l)),e&&B(google.maps.event.addListener(le,"click",e)),u&&x(google.maps.event.addListener(le,"addfeature",u)),c&&k(google.maps.event.addListener(le,"removefeature",c)),h&&T(google.maps.event.addListener(le,"removeproperty",h)),f&&M(google.maps.event.addListener(le,"setgeometry",f)),p&&K(google.maps.event.addListener(le,"setproperty",p)),y(le),m&&m(le)}return()=>{g&&(v!==null&&google.maps.event.removeListener(v),b!==null&&google.maps.event.removeListener(b),R!==null&&google.maps.event.removeListener(R),L!==null&&google.maps.event.removeListener(L),G!==null&&google.maps.event.removeListener(G),Q!==null&&google.maps.event.removeListener(Q),ee!==null&&google.maps.event.removeListener(ee),ue!==null&&google.maps.event.removeListener(ue),P!==null&&google.maps.event.removeListener(P),C!==null&&google.maps.event.removeListener(C),S!==null&&google.maps.event.removeListener(S),O!==null&&google.maps.event.removeListener(O),V!==null&&google.maps.event.removeListener(V),_&&_(g),g.setMap(null))}},[]),null}d.exports.memo(dA);class fA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={data:null},this.setDataCallback=()=>{this.state.data!==null&&this.props.onLoad&&this.props.onLoad(this.state.data)}}componentDidMount(){if(this.context!==null){const e=new google.maps.Data(Object.assign(Object.assign({},this.props.options||{}),{map:this.context}));this.registeredEvents=me({updaterMap:H_,eventMap:W_,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({data:e}),this.setDataCallback)}}componentDidUpdate(e){this.state.data!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:H_,eventMap:W_,prevProps:e,nextProps:this.props,instance:this.state.data}))}componentWillUnmount(){this.state.data!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.data),ge(this.registeredEvents),this.state.data&&this.state.data.setMap(null))}render(){return null}}fA.contextType=pe;const G_={onClick:"click",onDefaultViewportChanged:"defaultviewport_changed",onStatusChanged:"status_changed"},K_={options(t,e){t.setOptions(e)},url(t,e){t.setUrl(e)},zIndex(t,e){t.setZIndex(e)}};class pA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={kmlLayer:null},this.setKmlLayerCallback=()=>{this.state.kmlLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.kmlLayer)}}componentDidMount(){const e=new google.maps.KmlLayer(Object.assign(Object.assign({},this.props.options),{map:this.context}));this.registeredEvents=me({updaterMap:K_,eventMap:G_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{kmlLayer:e}},this.setKmlLayerCallback)}componentDidUpdate(e){this.state.kmlLayer!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:K_,eventMap:G_,prevProps:e,nextProps:this.props,instance:this.state.kmlLayer}))}componentWillUnmount(){this.state.kmlLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.kmlLayer),ge(this.registeredEvents),this.state.kmlLayer.setMap(null))}render(){return null}}pA.contextType=pe;function Hk(t,e){return typeof e=="function"?e(t.offsetWidth,t.offsetHeight):{x:0,y:0}}function mA(t,e){return new e(t.lat,t.lng)}function gA(t,e){return new e(new google.maps.LatLng(t.ne.lat,t.ne.lng),new google.maps.LatLng(t.sw.lat,t.sw.lng))}function vA(t,e,n){return t instanceof e?t:n(t,e)}function yA(t,e,n){return t instanceof e?t:n(t,e)}function wA(t,e,n){const r=t&&t.fromLatLngToDivPixel(n.getNorthEast()),s=t&&t.fromLatLngToDivPixel(n.getSouthWest());return r&&s?{left:`${s.x+e.x}px`,top:`${r.y+e.y}px`,width:`${r.x-s.x-e.x}px`,height:`${s.y-r.y-e.y}px`}:{left:"-9999px",top:"-9999px"}}function _A(t,e,n){const r=t&&t.fromLatLngToDivPixel(n);if(r){const{x:s,y:i}=r;return{left:`${s+e.x}px`,top:`${i+e.y}px`}}return{left:"-9999px",top:"-9999px"}}function Gk(t,e,n,r){return n!==void 0?wA(t,e,yA(n,google.maps.LatLngBounds,gA)):_A(t,e,vA(r,google.maps.LatLng,mA))}function EA(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.height&&t.height===e.height}function SA(t,e,n,r,s){class i extends google.maps.OverlayView{constructor(a,l,u,c){super(),this.container=a,this.pane=l,this.position=u,this.bounds=c}onAdd(){var a;const l=(a=this.getPanes())===null||a===void 0?void 0:a[this.pane];l==null||l.appendChild(this.container)}draw(){const a=this.getProjection(),l=Object.assign({},this.container?Hk(this.container,s):{x:0,y:0}),u=Gk(a,l,this.bounds,this.position);for(const[c,h]of Object.entries(u))this.container.style[c]=h}onRemove(){this.container.parentNode!==null&&this.container.parentNode.removeChild(this.container)}}return new i(t,e,n,r)}function Q_(t){return t?(t instanceof google.maps.LatLng?t:new google.maps.LatLng(t.lat,t.lng))+"":""}function Y_(t){return t?(t instanceof google.maps.LatLngBounds?t:new google.maps.LatLngBounds(new google.maps.LatLng(t.south,t.east),new google.maps.LatLng(t.north,t.west)))+"":""}function IA({position:t,bounds:e,mapPaneName:n,zIndex:r,onLoad:s,onUnmount:i,getPixelPositionOffset:o,children:a}){const l=d.exports.useContext(pe),u=d.exports.useMemo(()=>{const h=document.createElement("div");return h.style.position="absolute",h},[]),c=d.exports.useMemo(()=>SA(u,n,t,e,o),[u,n,t,e]);return d.exports.useEffect(()=>(s==null||s(c),c==null||c.setMap(l),()=>{i==null||i(c),c==null||c.setMap(null)}),[l,c]),d.exports.useEffect(()=>{u.style.zIndex=`${r}`},[r,u]),Sr.exports.createPortal(a,u)}d.exports.memo(IA);class Sa extends d.exports.PureComponent{constructor(e){super(e),this.state={paneEl:null,containerStyle:{position:"absolute"}},this.updatePane=()=>{const r=this.props.mapPaneName,s=this.overlayView.getPanes();lt(!!r,"OverlayView requires props.mapPaneName but got %s",r),s?this.setState({paneEl:s[r]}):this.setState({paneEl:null})},this.onAdd=()=>{var r,s;this.updatePane(),(s=(r=this.props).onLoad)===null||s===void 0||s.call(r,this.overlayView)},this.onPositionElement=()=>{const r=this.overlayView.getProjection(),s=Object.assign({x:0,y:0},this.containerRef.current?Hk(this.containerRef.current,this.props.getPixelPositionOffset):{}),i=Gk(r,s,this.props.bounds,this.props.position),{left:o,top:a,width:l,height:u}=this.state.containerStyle;EA(i,{left:o,top:a,width:l,height:u})||this.setState({containerStyle:Object.assign(Object.assign({},i),{position:"absolute"})})},this.draw=()=>{this.onPositionElement()},this.onRemove=()=>{var r,s;this.setState(()=>({paneEl:null})),(s=(r=this.props).onUnmount)===null||s===void 0||s.call(r,this.overlayView)},this.containerRef=d.exports.createRef();const n=new google.maps.OverlayView;n.onAdd=this.onAdd,n.draw=this.draw,n.onRemove=this.onRemove,this.overlayView=n}componentDidMount(){this.overlayView.setMap(this.context)}componentDidUpdate(e){const n=Q_(e.position),r=Q_(this.props.position),s=Y_(e.bounds),i=Y_(this.props.bounds);(n!==r||s!==i)&&this.overlayView.draw(),e.mapPaneName!==this.props.mapPaneName&&this.updatePane()}componentWillUnmount(){this.overlayView.setMap(null)}render(){const e=this.state.paneEl;return e?Sr.exports.createPortal(Ge.exports.jsx("div",Object.assign({ref:this.containerRef,style:this.state.containerStyle},{children:d.exports.Children.only(this.props.children)})),e):null}}Sa.FLOAT_PANE="floatPane";Sa.MAP_PANE="mapPane";Sa.MARKER_LAYER="markerLayer";Sa.OVERLAY_LAYER="overlayLayer";Sa.OVERLAY_MOUSE_TARGET="overlayMouseTarget";Sa.contextType=pe;function xA(){}const X_={onDblClick:"dblclick",onClick:"click"},Z_={opacity(t,e){t.setOpacity(e)}};class Kk extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={groundOverlay:null},this.setGroundOverlayCallback=()=>{this.state.groundOverlay!==null&&this.props.onLoad&&this.props.onLoad(this.state.groundOverlay)}}componentDidMount(){lt(!!this.props.url||!!this.props.bounds,"For GroundOverlay, url and bounds are passed in to constructor and are immutable after instantiated. This is the behavior of Google Maps JavaScript API v3 ( See https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay) Hence, use the corresponding two props provided by `react-google-maps-api`, url and bounds. In some cases, you'll need the GroundOverlay component to reflect the changes of url and bounds. You can leverage the React's key property to remount the component. Typically, just `key={url}` would serve your need. See https://github.com/tomchentw/react-google-maps/issues/655");const e=new google.maps.GroundOverlay(this.props.url,this.props.bounds,Object.assign(Object.assign({},this.props.options),{map:this.context}));this.registeredEvents=me({updaterMap:Z_,eventMap:X_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{groundOverlay:e}},this.setGroundOverlayCallback)}componentDidUpdate(e){this.state.groundOverlay!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:Z_,eventMap:X_,prevProps:e,nextProps:this.props,instance:this.state.groundOverlay}))}componentWillUnmount(){this.state.groundOverlay&&(this.props.onUnmount&&this.props.onUnmount(this.state.groundOverlay),this.state.groundOverlay.setMap(null))}render(){return null}}Kk.defaultProps={onLoad:xA};Kk.contextType=pe;const J_={},eE={data(t,e){t.setData(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)}};function kA({data:t,onLoad:e,onUnmount:n,options:r}){const s=d.exports.useContext(pe),[i,o]=d.exports.useState(null);return d.exports.useEffect(()=>{google.maps.visualization||lt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} in useJsApiScript? %s',google.maps.visualization)},[]),d.exports.useEffect(()=>{lt(!!t,"data property is required in HeatmapLayer %s",t)},[t]),d.exports.useEffect(()=>{i!==null&&i.setMap(s)},[s]),d.exports.useEffect(()=>{r&&i!==null&&i.setOptions(r)},[i,r]),d.exports.useEffect(()=>{const a=new google.maps.visualization.HeatmapLayer(Object.assign(Object.assign({},r||{}),{data:t,map:s}));return o(a),e&&e(a),()=>{i!==null&&(n&&n(i),i.setMap(null))}},[]),null}d.exports.memo(kA);class TA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={heatmapLayer:null},this.setHeatmapLayerCallback=()=>{this.state.heatmapLayer!==null&&this.props.onLoad&&this.props.onLoad(this.state.heatmapLayer)}}componentDidMount(){lt(!!google.maps.visualization,'Did you include prop libraries={["visualization"]} to <LoadScript />? %s',google.maps.visualization),lt(!!this.props.data,"data property is required in HeatmapLayer %s",this.props.data);const e=new google.maps.visualization.HeatmapLayer(Object.assign(Object.assign({},this.props.options||{}),{data:this.props.data,map:this.context}));this.registeredEvents=me({updaterMap:eE,eventMap:J_,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{heatmapLayer:e}},this.setHeatmapLayerCallback)}componentDidUpdate(e){ge(this.registeredEvents),this.registeredEvents=me({updaterMap:eE,eventMap:J_,prevProps:e,nextProps:this.props,instance:this.state.heatmapLayer})}componentWillUnmount(){this.state.heatmapLayer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.heatmapLayer),ge(this.registeredEvents),this.state.heatmapLayer.setMap(null))}render(){return null}}TA.contextType=pe;const tE={onCloseClick:"closeclick",onPanoChanged:"pano_changed",onPositionChanged:"position_changed",onPovChanged:"pov_changed",onResize:"resize",onStatusChanged:"status_changed",onVisibleChanged:"visible_changed",onZoomChanged:"zoom_changed"},nE={register(t,e,n){t.registerPanoProvider(e,n)},links(t,e){t.setLinks(e)},motionTracking(t,e){t.setMotionTracking(e)},options(t,e){t.setOptions(e)},pano(t,e){t.setPano(e)},position(t,e){t.setPosition(e)},pov(t,e){t.setPov(e)},visible(t,e){t.setVisible(e)},zoom(t,e){t.setZoom(e)}};class bA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={streetViewPanorama:null},this.setStreetViewPanoramaCallback=()=>{this.state.streetViewPanorama!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewPanorama)}}componentDidMount(){const e=this.context.getStreetView();this.registeredEvents=me({updaterMap:nE,eventMap:tE,prevProps:{},nextProps:this.props,instance:e}),this.setState(()=>({streetViewPanorama:e}),this.setStreetViewPanoramaCallback)}componentDidUpdate(e){this.state.streetViewPanorama!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:nE,eventMap:tE,prevProps:e,nextProps:this.props,instance:this.state.streetViewPanorama}))}componentWillUnmount(){this.state.streetViewPanorama!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.streetViewPanorama),ge(this.registeredEvents),this.state.streetViewPanorama.setVisible(!1))}render(){return null}}bA.contextType=pe;class CA extends d.exports.PureComponent{constructor(){super(...arguments),this.state={streetViewService:null},this.setStreetViewServiceCallback=()=>{this.state.streetViewService!==null&&this.props.onLoad&&this.props.onLoad(this.state.streetViewService)}}componentDidMount(){const e=new google.maps.StreetViewService;this.setState(function(){return{streetViewService:e}},this.setStreetViewServiceCallback)}componentWillUnmount(){this.state.streetViewService!==null&&this.props.onUnmount&&this.props.onUnmount(this.state.streetViewService)}render(){return null}}CA.contextType=pe;const rE={onDirectionsChanged:"directions_changed"},sE={directions(t,e){t.setDirections(e)},map(t,e){t.setMap(e)},options(t,e){t.setOptions(e)},panel(t,e){t.setPanel(e)},routeIndex(t,e){t.setRouteIndex(e)}};class zd extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.state={directionsRenderer:null},this.setDirectionsRendererCallback=()=>{this.state.directionsRenderer!==null&&(this.state.directionsRenderer.setMap(this.context),this.props.onLoad&&this.props.onLoad(this.state.directionsRenderer))}}componentDidMount(){const e=new google.maps.DirectionsRenderer(this.props.options);this.registeredEvents=me({updaterMap:sE,eventMap:rE,prevProps:{},nextProps:this.props,instance:e}),this.setState(function(){return{directionsRenderer:e}},this.setDirectionsRendererCallback)}componentDidUpdate(e){this.state.directionsRenderer!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:sE,eventMap:rE,prevProps:e,nextProps:this.props,instance:this.state.directionsRenderer}))}componentWillUnmount(){this.state.directionsRenderer!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.directionsRenderer),ge(this.registeredEvents),this.state.directionsRenderer&&this.state.directionsRenderer.setMap(null))}render(){return Ge.exports.jsx(Ge.exports.Fragment,{})}}zd.contextType=pe;const iE={onPlacesChanged:"places_changed"},oE={bounds(t,e){t.setBounds(e)}};class LA extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.containerElement=d.exports.createRef(),this.state={searchBox:null},this.setSearchBoxCallback=()=>{this.state.searchBox!==null&&this.props.onLoad&&this.props.onLoad(this.state.searchBox)}}componentDidMount(){if(lt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places),this.containerElement!==null&&this.containerElement.current!==null){const e=this.containerElement.current.querySelector("input");if(e!==null){const n=new google.maps.places.SearchBox(e,this.props.options);this.registeredEvents=me({updaterMap:oE,eventMap:iE,prevProps:{},nextProps:this.props,instance:n}),this.setState(function(){return{searchBox:n}},this.setSearchBoxCallback)}}}componentDidUpdate(e){this.state.searchBox!==null&&(ge(this.registeredEvents),this.registeredEvents=me({updaterMap:oE,eventMap:iE,prevProps:e,nextProps:this.props,instance:this.state.searchBox}))}componentWillUnmount(){this.state.searchBox!==null&&(this.props.onUnmount&&this.props.onUnmount(this.state.searchBox),ge(this.registeredEvents))}render(){return Ge.exports.jsx("div",Object.assign({ref:this.containerElement},{children:d.exports.Children.only(this.props.children)}))}}LA.contextType=pe;const aE={onPlaceChanged:"place_changed"},lE={bounds(t,e){t.setBounds(e)},restrictions(t,e){t.setComponentRestrictions(e)},fields(t,e){t.setFields(e)},options(t,e){t.setOptions(e)},types(t,e){t.setTypes(e)}};class Gh extends d.exports.PureComponent{constructor(){super(...arguments),this.registeredEvents=[],this.containerElement=d.exports.createRef(),this.state={autocomplete:null},this.setAutocompleteCallback=()=>{this.state.autocomplete!==null&&this.props.onLoad&&this.props.onLoad(this.state.autocomplete)}}componentDidMount(){lt(!!google.maps.places,'You need to provide libraries={["places"]} prop to <LoadScript /> component %s',google.maps.places);const e=this.containerElement.current.querySelector("input");if(e){const n=new google.maps.places.Autocomplete(e,this.props.options);this.registeredEvents=me({updaterMap:lE,eventMap:aE,prevProps:{},nextProps:this.props,instance:n}),this.setState(()=>({autocomplete:n}),this.setAutocompleteCallback)}}componentDidUpdate(e){ge(this.registeredEvents),this.registeredEvents=me({updaterMap:lE,eventMap:aE,prevProps:e,nextProps:this.props,instance:this.state.autocomplete})}componentWillUnmount(){this.state.autocomplete!==null&&ge(this.registeredEvents)}render(){return Ge.exports.jsx("div",Object.assign({ref:this.containerElement,className:this.props.className},{children:d.exports.Children.only(this.props.children)}))}}Gh.defaultProps={className:""};Gh.contextType=pe;function Kh(){return Kh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Kh.apply(this,arguments)}var ps;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ps||(ps={}));const uE="popstate";function PA(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Xi(s.location.hash.substr(1));return Xm("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,u=l.indexOf("#");a=u===-1?l:l.slice(0,u)}return a+"#"+(typeof i=="string"?i:ou(i))}function r(s,i){RA(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return AA(e,n,r,t)}function at(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function RA(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NA(){return Math.random().toString(36).substr(2,8)}function cE(t){return{usr:t.state,key:t.key}}function Xm(t,e,n,r){return n===void 0&&(n=null),Kh({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Xi(e):e,{state:n,key:e&&e.key||r||NA()})}function ou(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Xi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function DA(t){let e=typeof window<"u"&&typeof window.location<"u"&&window.location.origin!=="null"?window.location.origin:window.location.href,n=typeof t=="string"?t:ou(t);return at(e,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,e)}function AA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=ps.Pop,l=null;function u(){a=ps.Pop,l&&l({action:a,location:f.location})}function c(p,m){a=ps.Push;let _=Xm(f.location,p,m);n&&n(_,p);let E=cE(_),g=f.createHref(_);try{o.pushState(E,"",g)}catch{s.location.assign(g)}i&&l&&l({action:a,location:f.location})}function h(p,m){a=ps.Replace;let _=Xm(f.location,p,m);n&&n(_,p);let E=cE(_),g=f.createHref(_);o.replaceState(E,"",g),i&&l&&l({action:a,location:f.location})}let f={get action(){return a},get location(){return t(s,o)},listen(p){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(uE,u),l=p,()=>{s.removeEventListener(uE,u),l=null}},createHref(p){return e(s,p)},encodeLocation(p){let m=DA(typeof p=="string"?p:ou(p));return{pathname:m.pathname,search:m.search,hash:m.hash}},push:c,replace:h,go(p){return o.go(p)}};return f}var hE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hE||(hE={}));function OA(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Xi(e):e,s=Yk(r.pathname||"/",n);if(s==null)return null;let i=Qk(t);MA(i);let o=null;for(let a=0;o==null&&a<i.length;++a)o=WA(i[a],KA(s));return o}function Qk(t,e,n,r){return e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r=""),t.forEach((s,i)=>{let o={relativePath:s.path||"",caseSensitive:s.caseSensitive===!0,childrenIndex:i,route:s};o.relativePath.startsWith("/")&&(at(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),o.relativePath=o.relativePath.slice(r.length));let a=ks([r,o.relativePath]),l=n.concat(o);s.children&&s.children.length>0&&(at(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+a+'".')),Qk(s.children,e,l,a)),!(s.path==null&&!s.index)&&e.push({path:a,score:zA(a,s.index),routesMeta:l})}),e}function MA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const $A=/^:\w+$/,UA=3,FA=2,BA=1,VA=10,jA=-2,dE=t=>t==="*";function zA(t,e){let n=t.split("/"),r=n.length;return n.some(dE)&&(r+=jA),e&&(r+=FA),n.filter(s=>!dE(s)).reduce((s,i)=>s+($A.test(i)?UA:i===""?BA:VA),r)}function qA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function WA(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,u=s==="/"?e:e.slice(s.length)||"/",c=HA({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},u);if(!c)return null;Object.assign(r,c.params);let h=a.route;i.push({params:r,pathname:ks([s,c.pathname]),pathnameBase:ZA(ks([s,c.pathnameBase])),route:h}),c.pathnameBase!=="/"&&(s=ks([s,c.pathnameBase]))}return i}function HA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=GA(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((u,c,h)=>{if(c==="*"){let f=a[h]||"";o=i.slice(0,i.length-f.length).replace(/(.)\/+$/,"$1")}return u[c]=QA(a[h]||"",c),u},{}),pathname:i,pathnameBase:o,pattern:t}}function GA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),qv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(o,a)=>(r.push(a),"([^\\/]+)"));return t.endsWith("*")?(r.push("*"),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function KA(t){try{return decodeURI(t)}catch(e){return qv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function QA(t,e){try{return decodeURIComponent(t)}catch(n){return qv(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function Yk(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function qv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Xi(t):t;return{pathname:n?n.startsWith("/")?n:XA(n,e):e,search:JA(r),hash:eO(s)}}function XA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function kp(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Xk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Zk(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Xi(t):(s=Kh({},t),at(!s.pathname||!s.pathname.includes("?"),kp("?","pathname","search",s)),at(!s.pathname||!s.pathname.includes("#"),kp("#","pathname","hash",s)),at(!s.search||!s.search.includes("#"),kp("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(r||o==null)a=n;else{let h=e.length-1;if(o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=YA(s,a),u=o&&o!=="/"&&o.endsWith("/"),c=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const ks=t=>t.join("/").replace(/\/\/+/g,"/"),ZA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),JA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,eO=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class tO{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function nO(t){return t instanceof tO}const rO=["post","put","patch","delete"];[...rO];function Zm(){return Zm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zm.apply(this,arguments)}function sO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}const iO=typeof Object.is=="function"?Object.is:sO,{useState:oO,useEffect:aO,useLayoutEffect:lO,useDebugValue:uO}=tm;function cO(t,e,n){const r=e(),[{inst:s},i]=oO({inst:{value:r,getSnapshot:e}});return lO(()=>{s.value=r,s.getSnapshot=e,Tp(s)&&i({inst:s})},[t,r,e]),aO(()=>(Tp(s)&&i({inst:s}),t(()=>{Tp(s)&&i({inst:s})})),[t]),uO(r),r}function Tp(t){const e=t.getSnapshot,n=t.value;try{const r=e();return!iO(n,r)}catch{return!0}}function hO(t,e,n){return e()}const dO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",fO=!dO,pO=fO?hO:cO;"useSyncExternalStore"in tm&&(t=>t.useSyncExternalStore)(tm);const mO=d.exports.createContext(null),gO=d.exports.createContext(null),Jk=d.exports.createContext(null),qd=d.exports.createContext(null),Wd=d.exports.createContext(null),Uu=d.exports.createContext({outlet:null,matches:[]}),eT=d.exports.createContext(null);function vO(t,e){let{relative:n}=e===void 0?{}:e;Fu()||at(!1);let{basename:r,navigator:s}=d.exports.useContext(qd),{hash:i,pathname:o,search:a}=tT(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:ks([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Fu(){return d.exports.useContext(Wd)!=null}function Hd(){return Fu()||at(!1),d.exports.useContext(Wd).location}function Gd(){Fu()||at(!1);let{basename:t,navigator:e}=d.exports.useContext(qd),{matches:n}=d.exports.useContext(Uu),{pathname:r}=Hd(),s=JSON.stringify(Xk(n).map(a=>a.pathnameBase)),i=d.exports.useRef(!1);return d.exports.useEffect(()=>{i.current=!0}),d.exports.useCallback(function(a,l){if(l===void 0&&(l={}),!i.current)return;if(typeof a=="number"){e.go(a);return}let u=Zk(a,JSON.parse(s),r,l.relative==="path");t!=="/"&&(u.pathname=u.pathname==="/"?t:ks([t,u.pathname])),(l.replace?e.replace:e.push)(u,l.state,l)},[t,e,s,r])}function tT(t,e){let{relative:n}=e===void 0?{}:e,{matches:r}=d.exports.useContext(Uu),{pathname:s}=Hd(),i=JSON.stringify(Xk(r).map(o=>o.pathnameBase));return d.exports.useMemo(()=>Zk(t,JSON.parse(i),s,n==="path"),[t,i,s,n])}function yO(t,e){Fu()||at(!1);let{navigator:n}=d.exports.useContext(qd),r=d.exports.useContext(Jk),{matches:s}=d.exports.useContext(Uu),i=s[s.length-1],o=i?i.params:{};i&&i.pathname;let a=i?i.pathnameBase:"/";i&&i.route;let l=Hd(),u;if(e){var c;let _=typeof e=="string"?Xi(e):e;a==="/"||((c=_.pathname)==null?void 0:c.startsWith(a))||at(!1),u=_}else u=l;let h=u.pathname||"/",f=a==="/"?h:h.slice(a.length)||"/",p=OA(t,{pathname:f}),m=SO(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},o,_.params),pathname:ks([a,n.encodeLocation?n.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?a:ks([a,n.encodeLocation?n.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,r||void 0);return e&&m?d.exports.createElement(Wd.Provider,{value:{location:Zm({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ps.Pop}},m):m}function wO(){let t=xO(),e=nO(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},i={padding:"2px 4px",backgroundColor:r};return d.exports.createElement(d.exports.Fragment,null,d.exports.createElement("h2",null,"Unhandled Thrown Error!"),d.exports.createElement("h3",{style:{fontStyle:"italic"}},e),n?d.exports.createElement("pre",{style:s},n):null,d.exports.createElement("p",null," Hey developer "),d.exports.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own",d.exports.createElement("code",{style:i},"errorElement")," props on",d.exports.createElement("code",{style:i},"<Route>")))}class _O extends d.exports.Component{constructor(e){super(e),this.state={location:e.location,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location?{error:e.error,location:e.location}:{error:e.error||n.error,location:n.location}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?d.exports.createElement(eT.Provider,{value:this.state.error,children:this.props.component}):this.props.children}}function EO(t){let{routeContext:e,match:n,children:r}=t,s=d.exports.useContext(mO);return s&&n.route.errorElement&&(s._deepestRenderedBoundaryId=n.route.id),d.exports.createElement(Uu.Provider,{value:e},r)}function SO(t,e,n){if(e===void 0&&(e=[]),t==null)if(n!=null&&n.errors)t=n.matches;else return null;let r=t,s=n==null?void 0:n.errors;if(s!=null){let i=r.findIndex(o=>o.route.id&&(s==null?void 0:s[o.route.id]));i>=0||at(!1),r=r.slice(0,Math.min(r.length,i+1))}return r.reduceRight((i,o,a)=>{let l=o.route.id?s==null?void 0:s[o.route.id]:null,u=n?o.route.errorElement||d.exports.createElement(wO,null):null,c=()=>d.exports.createElement(EO,{match:o,routeContext:{outlet:i,matches:e.concat(r.slice(0,a+1))}},l?u:o.route.element!==void 0?o.route.element:i);return n&&(o.route.errorElement||a===0)?d.exports.createElement(_O,{location:n.location,component:u,error:l,children:c()}):c()},null)}var fE;(function(t){t.UseRevalidator="useRevalidator"})(fE||(fE={}));var Jm;(function(t){t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator"})(Jm||(Jm={}));function IO(t){let e=d.exports.useContext(Jk);return e||at(!1),e}function xO(){var t;let e=d.exports.useContext(eT),n=IO(Jm.UseRouteError),r=d.exports.useContext(Uu),s=r.matches[r.matches.length-1];return e||(r||at(!1),s.route.id||at(!1),(t=n.errors)==null?void 0:t[s.route.id])}function si(t){at(!1)}function kO(t){let{basename:e="/",children:n=null,location:r,navigationType:s=ps.Pop,navigator:i,static:o=!1}=t;Fu()&&at(!1);let a=e.replace(/^\/*/,"/"),l=d.exports.useMemo(()=>({basename:a,navigator:i,static:o}),[a,i,o]);typeof r=="string"&&(r=Xi(r));let{pathname:u="/",search:c="",hash:h="",state:f=null,key:p="default"}=r,m=d.exports.useMemo(()=>{let _=Yk(u,a);return _==null?null:{pathname:_,search:c,hash:h,state:f,key:p}},[a,u,c,h,f,p]);return m==null?null:d.exports.createElement(qd.Provider,{value:l},d.exports.createElement(Wd.Provider,{children:n,value:{location:m,navigationType:s}}))}function TO(t){let{children:e,location:n}=t,r=d.exports.useContext(gO),s=r&&!e?r.router.routes:eg(e);return yO(s,n)}var pE;(function(t){t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error"})(pE||(pE={}));new Promise(()=>{});function eg(t,e){e===void 0&&(e=[]);let n=[];return d.exports.Children.forEach(t,(r,s)=>{if(!d.exports.isValidElement(r))return;if(r.type===d.exports.Fragment){n.push.apply(n,eg(r.props.children,e));return}r.type!==si&&at(!1),!r.props.index||!r.props.children||at(!1);let i=[...e,s],o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,hasErrorBoundary:r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle};r.props.children&&(o.children=eg(r.props.children,i)),n.push(o)}),n}function tg(){return tg=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},tg.apply(this,arguments)}function bO(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function CO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function LO(t,e){return t.button===0&&(!e||e==="_self")&&!CO(t)}const PO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function RO(t){let{basename:e,children:n,window:r}=t,s=d.exports.useRef();s.current==null&&(s.current=PA({window:r,v5Compat:!0}));let i=s.current,[o,a]=d.exports.useState({action:i.action,location:i.location});return d.exports.useLayoutEffect(()=>i.listen(a),[i]),d.exports.createElement(kO,{basename:e,children:n,location:o.location,navigationType:o.action,navigator:i})}const nr=d.exports.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:c}=e,h=bO(e,PO),f=vO(u,{relative:s}),p=NO(u,{replace:o,state:a,target:l,preventScrollReset:c,relative:s});function m(_){r&&r(_),_.defaultPrevented||p(_)}return d.exports.createElement("a",tg({},h,{href:f,onClick:i?r:m,ref:n,target:l}))});var mE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmitImpl="useSubmitImpl",t.UseFetcher="useFetcher"})(mE||(mE={}));var gE;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gE||(gE={}));function NO(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o}=e===void 0?{}:e,a=Gd(),l=Hd(),u=tT(t,{relative:o});return d.exports.useCallback(c=>{if(LO(c,n)){c.preventDefault();let h=r!==void 0?r:ou(l)===ou(u);a(t,{replace:h,state:s,preventScrollReset:i,relative:o})}},[l,a,u,r,s,n,t,i,o])}const nT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},DO=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},rT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,c=i>>2,h=(i&3)<<4|a>>4;let f=(a&15)<<2|u>>6,p=u&63;l||(p=64,o||(f=64)),r.push(n[c],n[h],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(nT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):DO(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||h==null)throw Error();const f=i<<2|a>>4;if(r.push(f),u!==64){const p=a<<4&240|u>>2;if(r.push(p),h!==64){const m=u<<6&192|h;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},AO=function(t){const e=nT(t);return rT.encodeByteArray(e,!0)},Qh=function(t){return AO(t).replace(/\./g,"")},sT=function(t){try{return rT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Yh(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!OO(n)||(t[n]=Yh(t[n],e[n]));return t}function OO(t){return t!=="__proto__"}function ze(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function MO(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Kd(){try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $O(){return typeof self=="object"&&self.self===self}function iT(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Wv(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oT(){const t=ze();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function UO(){return!Kd()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function au(){try{return typeof indexedDB=="object"}catch{return!1}}function FO(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function BO(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const VO=()=>BO().__FIREBASE_DEFAULTS__,jO=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zO=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&sT(t[1]);return e&&JSON.parse(e)},Hv=()=>{try{return VO()||jO()||zO()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},qO=t=>{var e,n;return(n=(e=Hv())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},WO=t=>{const e=qO(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},HO=()=>{var t;return(t=Hv())===null||t===void 0?void 0:t.config},GO=t=>{var e;return(e=Hv())===null||e===void 0?void 0:e[`_${t}`]};class KO{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function aT(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[Qh(JSON.stringify(n)),Qh(JSON.stringify(o)),a].join(".")}const QO="FirebaseError";class Bt extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=QO,Object.setPrototypeOf(this,Bt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zi.prototype.create)}}class Zi{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?YO(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Bt(s,a,r)}}function YO(t,e){return t.replace(XO,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const XO=/\{\$([^}]+)}/g;function vE(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ZO(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ng(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(yE(i)&&yE(o)){if(!ng(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yE(t){return t!==null&&typeof t=="object"}function Ia(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ro(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ml(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function lT(t,e){const n=new JO(t,e);return n.subscribe.bind(n)}class JO{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");eM(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=bp),s.error===void 0&&(s.error=bp),s.complete===void 0&&(s.complete=bp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eM(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function bp(){}function re(t){return t&&t._delegate?t._delegate:t}class Un{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ii="[DEFAULT]";class tM{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new KO;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rM(e))try{this.getOrInitializeService({instanceIdentifier:ii})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ii){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ii){return this.instances.has(e)}getOptions(e=ii){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(!!r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nM(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ii){return this.component?this.component.multipleInstances?e:ii:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nM(t){return t===ii?void 0:t}function rM(t){return t.instantiationMode==="EAGER"}class sM{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tM(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}const Gv=[];var Se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Se||(Se={}));const uT={debug:Se.DEBUG,verbose:Se.VERBOSE,info:Se.INFO,warn:Se.WARN,error:Se.ERROR,silent:Se.SILENT},iM=Se.INFO,oM={[Se.DEBUG]:"log",[Se.VERBOSE]:"log",[Se.INFO]:"info",[Se.WARN]:"warn",[Se.ERROR]:"error"},aM=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=oM[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Qd{constructor(e){this.name=e,this._logLevel=iM,this._logHandler=aM,this._userLogHandler=null,Gv.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Se.DEBUG,...e),this._logHandler(this,Se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Se.VERBOSE,...e),this._logHandler(this,Se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Se.INFO,...e),this._logHandler(this,Se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Se.WARN,...e),this._logHandler(this,Se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Se.ERROR,...e),this._logHandler(this,Se.ERROR,...e)}}function lM(t){Gv.forEach(e=>{e.setLogLevel(t)})}function uM(t,e){for(const n of Gv){let r=null;e&&e.level&&(r=uT[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(s,i,...o)=>{const a=o.map(l=>{if(l==null)return null;if(typeof l=="string")return l;if(typeof l=="number"||typeof l=="boolean")return l.toString();if(l instanceof Error)return l.message;try{return JSON.stringify(l)}catch{return null}}).filter(l=>l).join(" ");i>=(r??s.logLevel)&&t({level:Se[i].toLowerCase(),message:a,args:o,type:s.name})}}}const cM=(t,e)=>e.some(n=>t instanceof n);let wE,_E;function hM(){return wE||(wE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function dM(){return _E||(_E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cT=new WeakMap,rg=new WeakMap,hT=new WeakMap,Cp=new WeakMap,Kv=new WeakMap;function fM(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ts(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&cT.set(n,t)}).catch(()=>{}),Kv.set(e,t),e}function pM(t){if(rg.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});rg.set(t,e)}let sg={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rg.get(t);if(e==="objectStoreNames")return t.objectStoreNames||hT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ts(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function mM(t){sg=t(sg)}function gM(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Lp(this),e,...n);return hT.set(r,e.sort?e.sort():[e]),Ts(r)}:dM().includes(t)?function(...e){return t.apply(Lp(this),e),Ts(cT.get(this))}:function(...e){return Ts(t.apply(Lp(this),e))}}function vM(t){return typeof t=="function"?gM(t):(t instanceof IDBTransaction&&pM(t),cM(t,hM())?new Proxy(t,sg):t)}function Ts(t){if(t instanceof IDBRequest)return fM(t);if(Cp.has(t))return Cp.get(t);const e=vM(t);return e!==t&&(Cp.set(t,e),Kv.set(e,t)),e}const Lp=t=>Kv.get(t);function yM(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ts(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Ts(o.result),l.oldVersion,l.newVersion,Ts(o.transaction))}),n&&o.addEventListener("blocked",()=>n()),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",()=>s())}).catch(()=>{}),a}const wM=["get","getKey","getAll","getAllKeys","count"],_M=["put","add","delete","clear"],Pp=new Map;function EE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Pp.get(e))return Pp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_M.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||wM.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return r&&(u=u.index(a.shift())),(await Promise.all([u[n](...a),s&&l.done]))[0]};return Pp.set(e,i),i}mM(t=>({...t,get:(e,n,r)=>EE(e,n)||t.get(e,n,r),has:(e,n)=>!!EE(e,n)||t.has(e,n)}));class EM{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(SM(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function SM(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ig="@firebase/app",SE="0.9.0";const Oi=new Qd("@firebase/app"),IM="@firebase/app-compat",xM="@firebase/analytics-compat",kM="@firebase/analytics",TM="@firebase/app-check-compat",bM="@firebase/app-check",CM="@firebase/auth",LM="@firebase/auth-compat",PM="@firebase/database",RM="@firebase/database-compat",NM="@firebase/functions",DM="@firebase/functions-compat",AM="@firebase/installations",OM="@firebase/installations-compat",MM="@firebase/messaging",$M="@firebase/messaging-compat",UM="@firebase/performance",FM="@firebase/performance-compat",BM="@firebase/remote-config",VM="@firebase/remote-config-compat",jM="@firebase/storage",zM="@firebase/storage-compat",qM="@firebase/firestore",WM="@firebase/firestore-compat",HM="firebase",GM="9.15.0";const Ps="[DEFAULT]",KM={[ig]:"fire-core",[IM]:"fire-core-compat",[kM]:"fire-analytics",[xM]:"fire-analytics-compat",[bM]:"fire-app-check",[TM]:"fire-app-check-compat",[CM]:"fire-auth",[LM]:"fire-auth-compat",[PM]:"fire-rtdb",[RM]:"fire-rtdb-compat",[NM]:"fire-fn",[DM]:"fire-fn-compat",[AM]:"fire-iid",[OM]:"fire-iid-compat",[MM]:"fire-fcm",[$M]:"fire-fcm-compat",[UM]:"fire-perf",[FM]:"fire-perf-compat",[BM]:"fire-rc",[VM]:"fire-rc-compat",[jM]:"fire-gcs",[zM]:"fire-gcs-compat",[qM]:"fire-fst",[WM]:"fire-fst-compat","fire-js":"fire-js",[HM]:"fire-js-all"};const Rs=new Map,lu=new Map;function Xh(t,e){try{t.container.addComponent(e)}catch(n){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function dT(t,e){t.container.addOrOverwriteComponent(e)}function jr(t){const e=t.name;if(lu.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;lu.set(e,t);for(const n of Rs.values())Xh(n,t);return!0}function Qv(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function QM(t,e,n=Ps){Qv(t,e).clearInstance(n)}function YM(){lu.clear()}const XM={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Or=new Zi("app","Firebase",XM);let ZM=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Un("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Or.create("app-deleted",{appName:this._name})}};const qs=GM;function Yv(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ps,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Or.create("bad-app-name",{appName:String(s)});if(n||(n=HO()),!n)throw Or.create("no-options");const i=Rs.get(s);if(i){if(ng(n,i.options)&&ng(r,i.config))return i;throw Or.create("duplicate-app",{appName:s})}const o=new sM(s);for(const l of lu.values())o.addComponent(l);const a=new ZM(n,r,o);return Rs.set(s,a),a}function fT(t=Ps){const e=Rs.get(t);if(!e&&t===Ps)return Yv();if(!e)throw Or.create("no-app",{appName:t});return e}function JM(){return Array.from(Rs.values())}async function pT(t){const e=t.name;Rs.has(e)&&(Rs.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function wn(t,e,n){var r;let s=(r=KM[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(a.join(" "));return}jr(new Un(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}function mT(t,e){if(t!==null&&typeof t!="function")throw Or.create("invalid-log-argument");uM(t,e)}function gT(t){lM(t)}const e$="firebase-heartbeat-database",t$=1,uu="firebase-heartbeat-store";let Rp=null;function vT(){return Rp||(Rp=yM(e$,t$,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(uu)}}}).catch(t=>{throw Or.create("idb-open",{originalErrorMessage:t.message})})),Rp}async function n$(t){try{return(await vT()).transaction(uu).objectStore(uu).get(yT(t))}catch(e){if(e instanceof Bt)Oi.warn(e.message);else{const n=Or.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Oi.warn(n.message)}}}async function IE(t,e){try{const r=(await vT()).transaction(uu,"readwrite");return await r.objectStore(uu).put(e,yT(t)),r.done}catch(n){if(n instanceof Bt)Oi.warn(n.message);else{const r=Or.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Oi.warn(r.message)}}}function yT(t){return`${t.name}!${t.options.appId}`}const r$=1024,s$=30*24*60*60*1e3;class i${constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new a$(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=xE();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const i=new Date(s.date).valueOf();return Date.now()-i<=s$}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=xE(),{heartbeatsToSend:n,unsentEntries:r}=o$(this._heartbeatsCache.heartbeats),s=Qh(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function xE(){return new Date().toISOString().substring(0,10)}function o$(t,e=r$){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),kE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),kE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class a${constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return au()?FO().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await n$(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return IE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return IE(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function kE(t){return Qh(JSON.stringify({version:2,heartbeats:t})).length}function l$(t){jr(new Un("platform-logger",e=>new EM(e),"PRIVATE")),jr(new Un("heartbeat",e=>new i$(e),"PRIVATE")),wn(ig,SE,t),wn(ig,SE,"esm2017"),wn("fire-js","")}l$("");const u$=Object.freeze(Object.defineProperty({__proto__:null,SDK_VERSION:qs,_DEFAULT_ENTRY_NAME:Ps,_addComponent:Xh,_addOrOverwriteComponent:dT,_apps:Rs,_clearComponents:YM,_components:lu,_getProvider:Qv,_registerComponent:jr,_removeServiceInstance:QM,deleteApp:pT,getApp:fT,getApps:JM,initializeApp:Yv,onLog:mT,registerVersion:wn,setLogLevel:gT,FirebaseError:Bt},Symbol.toStringTag,{value:"Module"}));class c${constructor(e,n){this._delegate=e,this.firebase=n,Xh(e,new Un("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),pT(this._delegate)))}_getService(e,n=Ps){var r;this._delegate.checkDestroyed();const s=this._delegate.container.getProvider(e);return!s.isInitialized()&&((r=s.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&s.initialize(),s.getImmediate({identifier:n})}_removeServiceInstance(e,n=Ps){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Xh(this._delegate,e)}_addOrOverwriteComponent(e){dT(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const h$={["no-app"]:"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance."},TE=new Zi("app-compat","Firebase",h$);function d$(t){const e={},n={__esModule:!0,initializeApp:i,app:s,registerVersion:wn,setLogLevel:gT,onLog:mT,apps:null,SDK_VERSION:qs,INTERNAL:{registerComponent:a,removeApp:r,useAsService:l,modularAPIs:u$}};n.default=n,Object.defineProperty(n,"apps",{get:o});function r(u){delete e[u]}function s(u){if(u=u||Ps,!vE(e,u))throw TE.create("no-app",{appName:u});return e[u]}s.App=t;function i(u,c={}){const h=Yv(u,c);if(vE(e,h.name))return e[h.name];const f=new t(h,n);return e[h.name]=f,f}function o(){return Object.keys(e).map(u=>e[u])}function a(u){const c=u.name,h=c.replace("-compat","");if(jr(u)&&u.type==="PUBLIC"){const f=(p=s())=>{if(typeof p[h]!="function")throw TE.create("invalid-app-argument",{appName:c});return p[h]()};u.serviceProps!==void 0&&Yh(f,u.serviceProps),n[h]=f,t.prototype[h]=function(...p){return this._getService.bind(this,c).apply(this,u.multipleInstances?p:[])}}return u.type==="PUBLIC"?n[h]:null}function l(u,c){return c==="serverAuth"?null:c}return n}function wT(){const t=d$(c$);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:wT,extendNamespace:e,createSubscribe:lT,ErrorFactory:Zi,deepExtend:Yh});function e(n){Yh(t,n)}return t}const f$=wT();const bE=new Qd("@firebase/app-compat"),p$="@firebase/app-compat",m$="0.2.0";function g$(t){wn(p$,m$,t)}if($O()&&self.firebase!==void 0){bE.warn(`
    Warning: Firebase is already defined in the global scope. Please make sure
    Firebase library is only loaded once.
  `);const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&bE.warn(`
    Warning: You are trying to load Firebase while using Firebase Performance standalone script.
    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.
    `)}const Zn=f$;g$();const _T="firebasestorage.googleapis.com",ET="storageBucket",v$=2*60*1e3,y$=10*60*1e3,w$=1e3;class qe extends Bt{constructor(e,n,r=0){super(Np(e),`Firebase Storage: ${n} (${Np(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,qe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Np(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}function Np(t){return"storage/"+t}function Xv(){const t="An unknown error occurred, please check the error payload for server response.";return new qe("unknown",t)}function _$(t){return new qe("object-not-found","Object '"+t+"' does not exist.")}function E$(t){return new qe("quota-exceeded","Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function S$(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new qe("unauthenticated",t)}function I$(){return new qe("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}function x$(t){return new qe("unauthorized","User does not have permission to access '"+t+"'.")}function ST(){return new qe("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function IT(){return new qe("canceled","User canceled the upload/download.")}function k$(t){return new qe("invalid-url","Invalid URL '"+t+"'.")}function T$(t){return new qe("invalid-default-bucket","Invalid default bucket '"+t+"'.")}function b$(){return new qe("no-default-bucket","No default bucket found. Did you set the '"+ET+"' property when initializing the app?")}function xT(){return new qe("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function C$(){return new qe("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}function L$(){return new qe("no-download-url","The given file does not have any download URLs.")}function P$(t){return new qe("unsupported-environment",`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Vo(t){return new qe("invalid-argument",t)}function kT(){return new qe("app-deleted","The Firebase app was deleted.")}function TT(t){return new qe("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Nl(t,e){return new qe("invalid-format","String does not match format '"+t+"': "+e)}function Za(t){throw new qe("internal-error","Internal error: "+t)}class Ft{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ft.makeFromUrl(e,n)}catch{return new Ft(e,"")}if(r.path==="")return r;throw T$(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",h=n.replace(/[.]/g,"\\."),f="(/([^?#]*).*)?$",p=new RegExp(`^https?://${h}/${c}/b/${s}/o${f}`,"i"),m={bucket:1,path:3},_=n===_T?"(?:storage.googleapis.com|storage.cloud.google.com)":n,E="([^?#]*)",g=new RegExp(`^https?://${_}/${s}/${E}`,"i"),v=[{regex:a,indices:l,postModify:i},{regex:p,indices:m,postModify:u},{regex:g,indices:{bucket:1,path:2},postModify:u}];for(let w=0;w<v.length;w++){const b=v[w],I=b.regex.exec(e);if(I){const R=I[b.indices.bucket];let A=I[b.indices.path];A||(A=""),r=new Ft(R,A),b.postModify(r);break}}if(r==null)throw k$(e);return r}}class R${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function N$(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function c(...E){u||(u=!0,e.apply(null,E))}function h(E){s=setTimeout(()=>{s=null,t(p,l())},E)}function f(){i&&clearTimeout(i)}function p(E,...g){if(u){f();return}if(E){f(),c.call(null,E,...g);return}if(l()||o){f(),c.call(null,E,...g);return}r<64&&(r*=2);let v;a===1?(a=2,v=0):v=(r+Math.random())*1e3,h(v)}let m=!1;function _(E){m||(m=!0,f(),!u&&(s!==null?(E||(a=2),clearTimeout(s),h(0)):E||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,_(!0)},n),_}function D$(t){t(!1)}function A$(t){return t!==void 0}function O$(t){return typeof t=="function"}function M$(t){return typeof t=="object"&&!Array.isArray(t)}function Yd(t){return typeof t=="string"||t instanceof String}function CE(t){return Zv()&&t instanceof Blob}function Zv(){return typeof Blob<"u"&&!Kd()}function og(t,e,n,r){if(r<e)throw Vo(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Vo(`Invalid value for '${t}'. Expected ${n} or less.`)}function Ws(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function bT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var xi;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(xi||(xi={}));function CT(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}class $${constructor(e,n,r,s,i,o,a,l,u,c,h,f=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=c,this.connectionFactory_=h,this.retry=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((p,m)=>{this.resolve_=p,this.reject_=m,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Uc(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===xi.NO_ERROR,l=i.getStatus();if((!a||CT(l,this.additionalRetryCodes_))&&this.retry){const c=i.getErrorCode()===xi.ABORT;r(!1,new Uc(!1,null,c));return}const u=this.successCodes_.indexOf(l)!==-1;r(!0,new Uc(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());A$(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=Xv();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?kT():IT();o(l)}else{const l=ST();o(l)}};this.canceled_?n(!1,new Uc(!1,null,!0)):this.backoffId_=N$(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&D$(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Uc{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function U$(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function F$(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function B$(t,e){e&&(t["X-Firebase-GMPID"]=e)}function V$(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function j$(t,e,n,r,s,i,o=!0){const a=bT(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return B$(u,e),U$(u,n),F$(u,i),V$(u,r),new $$(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}function z$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function q$(...t){const e=z$();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Zv())return new Blob(t);throw new qe("unsupported-environment","This browser doesn't seem to support creating Blobs")}}function W$(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function H$(t){if(typeof atob>"u")throw P$("base-64");return atob(t)}const Dn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Dp{constructor(e,n){this.data=e,this.contentType=n||null}}function LT(t,e){switch(t){case Dn.RAW:return new Dp(PT(e));case Dn.BASE64:case Dn.BASE64URL:return new Dp(RT(t,e));case Dn.DATA_URL:return new Dp(K$(e),Q$(e))}throw Xv()}function PT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function G$(t){let e;try{e=decodeURIComponent(t)}catch{throw Nl(Dn.DATA_URL,"Malformed data URL.")}return PT(e)}function RT(t,e){switch(t){case Dn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Nl(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Dn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Nl(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=H$(e)}catch(s){throw s.message.includes("polyfill")?s:Nl(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class NT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Nl(Dn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Y$(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function K$(t){const e=new NT(t);return e.base64?RT(Dn.BASE64,e.rest):G$(e.rest)}function Q$(t){return new NT(t).contentType}function Y$(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class Cr{constructor(e,n){let r=0,s="";CE(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(CE(this.data_)){const r=this.data_,s=W$(r,e,n);return s===null?null:new Cr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Cr(r,!0)}}static getBlob(...e){if(Zv()){const n=e.map(r=>r instanceof Cr?r.data_:r);return new Cr(q$.apply(null,n))}else{const n=e.map(o=>Yd(o)?LT(Dn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)s[i++]=o[a]}),new Cr(s,!0)}}uploadData(){return this.data_}}function Jv(t){let e;try{e=JSON.parse(t)}catch{return null}return M$(e)?e:null}function X$(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Z$(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function DT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function J$(t,e){return e}class qt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||J$}}let Fc=null;function eU(t){return!Yd(t)||t.length<2?t:DT(t)}function Xd(){if(Fc)return Fc;const t=[];t.push(new qt("bucket")),t.push(new qt("generation")),t.push(new qt("metageneration")),t.push(new qt("name","fullPath",!0));function e(i,o){return eU(o)}const n=new qt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new qt("size");return s.xform=r,t.push(s),t.push(new qt("timeCreated")),t.push(new qt("updated")),t.push(new qt("md5Hash",null,!0)),t.push(new qt("cacheControl",null,!0)),t.push(new qt("contentDisposition",null,!0)),t.push(new qt("contentEncoding",null,!0)),t.push(new qt("contentLanguage",null,!0)),t.push(new qt("contentType",null,!0)),t.push(new qt("metadata","customMetadata",!0)),Fc=t,Fc}function tU(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Ft(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function nU(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return tU(r,t),r}function AT(t,e,n){const r=Jv(e);return r===null?null:nU(t,r,n)}function rU(t,e,n,r){const s=Jv(e);if(s===null||!Yd(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(u=>{const c=t.bucket,h=t.fullPath,f="/b/"+o(c)+"/o/"+o(h),p=Ws(f,n,r),m=bT({alt:"media",token:u});return p+m})[0]}function ey(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}const LE="prefixes",PE="items";function sU(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[LE])for(const s of n[LE]){const i=s.replace(/\/$/,""),o=t._makeStorageReference(new Ft(e,i));r.prefixes.push(o)}if(n[PE])for(const s of n[PE]){const i=t._makeStorageReference(new Ft(e,s.name));r.items.push(i)}return r}function iU(t,e,n){const r=Jv(n);return r===null?null:sU(t,e,r)}class Kr{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function mr(t){if(!t)throw Xv()}function Zd(t,e){function n(r,s){const i=AT(t,s,e);return mr(i!==null),i}return n}function oU(t,e){function n(r,s){const i=iU(t,e,s);return mr(i!==null),i}return n}function aU(t,e){function n(r,s){const i=AT(t,s,e);return mr(i!==null),rU(i,s,t.host,t._protocol)}return n}function xa(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=I$():s=S$():n.getStatus()===402?s=E$(t.bucket):n.getStatus()===403?s=x$(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Jd(t){const e=xa(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=_$(t.path)),i.serverResponse=s.serverResponse,i}return n}function OT(t,e,n){const r=e.fullServerUrl(),s=Ws(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Kr(s,i,Zd(t,n),o);return a.errorHandler=Jd(e),a}function lU(t,e,n,r,s){const i={};e.isRoot?i.prefix="":i.prefix=e.path+"/",n&&n.length>0&&(i.delimiter=n),r&&(i.pageToken=r),s&&(i.maxResults=s);const o=e.bucketOnlyServerUrl(),a=Ws(o,t.host,t._protocol),l="GET",u=t.maxOperationRetryTime,c=new Kr(a,l,oU(t,e.bucket),u);return c.urlParams=i,c.errorHandler=xa(e),c}function uU(t,e,n){const r=e.fullServerUrl(),s=Ws(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,a=new Kr(s,i,aU(t,n),o);return a.errorHandler=Jd(e),a}function cU(t,e,n,r){const s=e.fullServerUrl(),i=Ws(s,t.host,t._protocol),o="PATCH",a=ey(n,r),l={"Content-Type":"application/json; charset=utf-8"},u=t.maxOperationRetryTime,c=new Kr(i,o,Zd(t,r),u);return c.headers=l,c.body=a,c.errorHandler=Jd(e),c}function hU(t,e){const n=e.fullServerUrl(),r=Ws(n,t.host,t._protocol),s="DELETE",i=t.maxOperationRetryTime;function o(l,u){}const a=new Kr(r,s,o,i);return a.successCodes=[200,204],a.errorHandler=Jd(e),a}function dU(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function MT(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=dU(null,e)),r}function fU(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let v="";for(let w=0;w<2;w++)v=v+Math.random().toString().slice(2);return v}const l=a();o["Content-Type"]="multipart/related; boundary="+l;const u=MT(e,r,s),c=ey(u,n),h="--"+l+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+l+`\r
Content-Type: `+u.contentType+`\r
\r
`,f=`\r
--`+l+"--",p=Cr.getBlob(h,r,f);if(p===null)throw xT();const m={name:u.fullPath},_=Ws(i,t.host,t._protocol),E="POST",g=t.maxUploadRetryTime,y=new Kr(_,E,Zd(t,n),g);return y.urlParams=m,y.headers=o,y.body=p.uploadData(),y.errorHandler=xa(e),y}class Zh{constructor(e,n,r,s){this.current=e,this.total=n,this.finalized=!!r,this.metadata=s||null}}function ty(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch{mr(!1)}return mr(!!n&&(e||["active"]).indexOf(n)!==-1),n}function pU(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o=MT(e,r,s),a={name:o.fullPath},l=Ws(i,t.host,t._protocol),u="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},h=ey(o,n),f=t.maxUploadRetryTime;function p(_){ty(_);let E;try{E=_.getResponseHeader("X-Goog-Upload-URL")}catch{mr(!1)}return mr(Yd(E)),E}const m=new Kr(l,u,p,f);return m.urlParams=a,m.headers=c,m.body=h,m.errorHandler=xa(e),m}function mU(t,e,n,r){const s={"X-Goog-Upload-Command":"query"};function i(u){const c=ty(u,["active","final"]);let h=null;try{h=u.getResponseHeader("X-Goog-Upload-Size-Received")}catch{mr(!1)}h||mr(!1);const f=Number(h);return mr(!isNaN(f)),new Zh(f,r.size(),c==="final")}const o="POST",a=t.maxUploadRetryTime,l=new Kr(n,o,i,a);return l.headers=s,l.errorHandler=xa(e),l}const RE=256*1024;function gU(t,e,n,r,s,i,o,a){const l=new Zh(0,0);if(o?(l.current=o.current,l.total=o.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw C$();const u=l.total-l.current;let c=u;s>0&&(c=Math.min(c,s));const h=l.current,f=h+c;let p="";c===0?p="finalize":u===c?p="upload, finalize":p="upload";const m={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},_=r.slice(h,f);if(_===null)throw xT();function E(w,b){const I=ty(w,["active","final"]),R=l.current+c,A=r.size();let L;return I==="final"?L=Zd(e,i)(w,b):L=null,new Zh(R,A,I==="final",L)}const g="POST",y=e.maxUploadRetryTime,v=new Kr(n,g,E,y);return v.headers=m,v.body=_.uploadData(),v.progressCallback=a||null,v.errorHandler=xa(t),v}const vU={STATE_CHANGED:"state_changed"},Gt={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ap(t){switch(t){case"running":case"pausing":case"canceling":return Gt.RUNNING;case"paused":return Gt.PAUSED;case"success":return Gt.SUCCESS;case"canceled":return Gt.CANCELED;case"error":return Gt.ERROR;default:return Gt.ERROR}}class yU{constructor(e,n,r){if(O$(e)||n!=null||r!=null)this.next=e,this.error=n??void 0,this.complete=r??void 0;else{const i=e;this.next=i.next,this.error=i.error,this.complete=i.complete}}}function ho(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class wU{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xi.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xi.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xi.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw Za("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Za("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Za("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Za("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Za("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class _U extends wU{initXhr(){this.xhr_.responseType="text"}}function sr(){return new _U}class $T{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=Xd(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals("canceled"))this._needToFetchStatus=!0,this.completeTransitions_();else{const i=this.isExponentialBackoffExpired();if(CT(s.status,[]))if(i)s=ST();else{this.sleepTime=Math.max(this.sleepTime*2,w$),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals("canceled")?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,i)=>{this._resolve=s,this._reject=i,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=pU(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,sr,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._uploadUrl=i,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const s=mU(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(s,sr,n,r);this._request=i,i.getPromise().then(o=>{o=o,this._request=void 0,this._updateProgress(o.current),this._needToFetchStatus=!1,o.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=RE*this._chunkMultiplier,n=new Zh(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,i)=>{let o;try{o=gU(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(l){this._error=l,this._transition("error");return}const a=this._ref.storage._makeRequest(o,sr,s,i,!1);this._request=a,a.getPromise().then(l=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(l.current),l.finalized?(this._metadata=l.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){RE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=OT(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,sr,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=fU(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,sr,e,n);this._request=s,s.getPromise().then(i=>{this._request=void 0,this._metadata=i,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=IT(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Ap(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,s){const i=new yU(n||void 0,r||void 0,s||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Ap(this._state)){case Gt.SUCCESS:ho(this._resolve.bind(null,this.snapshot))();break;case Gt.CANCELED:case Gt.ERROR:const n=this._reject;ho(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ap(this._state)){case Gt.RUNNING:case Gt.PAUSED:e.next&&ho(e.next.bind(e,this.snapshot))();break;case Gt.SUCCESS:e.complete&&ho(e.complete.bind(e))();break;case Gt.CANCELED:case Gt.ERROR:e.error&&ho(e.error.bind(e,this._error))();break;default:e.error&&ho(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}class Mi{constructor(e,n){this._service=e,n instanceof Ft?this._location=n:this._location=Ft.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Mi(e,n)}get root(){const e=new Ft(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DT(this._location.path)}get storage(){return this._service}get parent(){const e=X$(this._location.path);if(e===null)return null;const n=new Ft(this._location.bucket,e);return new Mi(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw TT(e)}}function EU(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new $T(t,new Cr(e),n)}function SU(t){const e={prefixes:[],items:[]};return UT(t,e).then(()=>e)}async function UT(t,e,n){const s=await FT(t,{pageToken:n});e.prefixes.push(...s.prefixes),e.items.push(...s.items),s.nextPageToken!=null&&await UT(t,e,s.nextPageToken)}function FT(t,e){e!=null&&typeof e.maxResults=="number"&&og("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=lU(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,sr)}function IU(t){t._throwIfRoot("getMetadata");const e=OT(t.storage,t._location,Xd());return t.storage.makeRequestWithTokens(e,sr)}function xU(t,e){t._throwIfRoot("updateMetadata");const n=cU(t.storage,t._location,e,Xd());return t.storage.makeRequestWithTokens(n,sr)}function kU(t){t._throwIfRoot("getDownloadURL");const e=uU(t.storage,t._location,Xd());return t.storage.makeRequestWithTokens(e,sr).then(n=>{if(n===null)throw L$();return n})}function TU(t){t._throwIfRoot("deleteObject");const e=hU(t.storage,t._location);return t.storage.makeRequestWithTokens(e,sr)}function BT(t,e){const n=Z$(t._location.path,e),r=new Ft(t._location.bucket,n);return new Mi(t.storage,r)}function bU(t){return/^[A-Za-z]+:\/\//.test(t)}function CU(t,e){return new Mi(t,e)}function VT(t,e){if(t instanceof ny){const n=t;if(n._bucket==null)throw b$();const r=new Mi(n,n._bucket);return e!=null?VT(r,e):r}else return e!==void 0?BT(t,e):t}function LU(t,e){if(e&&bU(e)){if(t instanceof ny)return CU(t,e);throw Vo("To use ref(service, url), the first argument must be a Storage instance.")}else return VT(t,e)}function NE(t,e){const n=e==null?void 0:e[ET];return n==null?null:Ft.makeFromBucketSpec(n,t)}function PU(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:aT(s,t.app.options.projectId))}class ny{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=_T,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=v$,this._maxUploadRetryTime=y$,this._requests=new Set,s!=null?this._bucket=Ft.makeFromBucketSpec(s,this._host):this._bucket=NE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ft.makeFromBucketSpec(this._url,e):this._bucket=NE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){og("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){og("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Mi(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new R$(kT());{const o=j$(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const DE="@firebase/storage",AE="0.10.0";const RU="storage";function NU(t,e,n){return t=re(t),EU(t,e,n)}function DU(t){return t=re(t),IU(t)}function AU(t,e){return t=re(t),xU(t,e)}function OU(t,e){return t=re(t),FT(t,e)}function MU(t){return t=re(t),SU(t)}function $U(t){return t=re(t),kU(t)}function UU(t){return t=re(t),TU(t)}function OE(t,e){return t=re(t),LU(t,e)}function FU(t,e){return BT(t,e)}function BU(t,e,n,r={}){PU(t,e,n,r)}function VU(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ny(n,r,s,e,qs)}function jU(){jr(new Un(RU,VU,"PUBLIC").setMultipleInstances(!0)),wn(DE,AE,""),wn(DE,AE,"esm2017")}jU();class Bc{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ME{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Bc(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new Bc(r,this,this._ref))},n)}on(e,n,r,s){let i;return n&&(typeof n=="function"?i=o=>n(new Bc(o,this,this._ref)):i={next:n.next?o=>n.next(new Bc(o,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,i,r||void 0,s||void 0)}}class $E{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Mr(e,this._service))}get items(){return this._delegate.items.map(e=>new Mr(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Mr{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=FU(this._delegate,e);return new Mr(n,this.storage)}get root(){return new Mr(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Mr(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new ME(NU(this._delegate,e,n),this)}putString(e,n=Dn.RAW,r){this._throwIfRoot("putString");const s=LT(n,e),i=Object.assign({},r);return i.contentType==null&&s.contentType!=null&&(i.contentType=s.contentType),new ME(new $T(this._delegate,new Cr(s.data,!0),i),this)}listAll(){return MU(this._delegate).then(e=>new $E(e,this.storage))}list(e){return OU(this._delegate,e||void 0).then(n=>new $E(n,this.storage))}getMetadata(){return DU(this._delegate)}updateMetadata(e){return AU(this._delegate,e)}getDownloadURL(){return $U(this._delegate)}delete(){return this._throwIfRoot("delete"),UU(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw TT(e)}}class jT{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(UE(e))throw Vo("ref() expected a child path but got a URL, use refFromURL instead.");return new Mr(OE(this._delegate,e),this)}refFromURL(e){if(!UE(e))throw Vo("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ft.makeFromUrl(e,this._delegate.host)}catch{throw Vo("refFromUrl() expected a valid full URL but got an invalid one.")}return new Mr(OE(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){BU(this._delegate,e,n,r)}}function UE(t){return/^[A-Za-z]+:\/\//.test(t)}const zU="@firebase/storage-compat",qU="0.2.0";const WU="storage-compat";function HU(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new jT(n,r)}function GU(t){const e={TaskState:Gt,TaskEvent:vU,StringFormat:Dn,Storage:jT,Reference:Mr};t.INTERNAL.registerComponent(new Un(WU,HU,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(zU,qU)}GU(Zn);var KU="firebase",QU="9.15.0";Zn.registerVersion(KU,QU,"app-compat");function ry(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}const Ja={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},fo={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function YU(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}}function zT(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XU=YU,ZU=zT,qT=new Zi("auth","Firebase",zT());const FE=new Qd("@firebase/auth");function dh(t,...e){FE.logLevel<=Se.ERROR&&FE.error(`Auth (${qs}): ${t}`,...e)}function Lt(t,...e){throw sy(t,...e)}function Tt(t,...e){return sy(t,...e)}function WT(t,e,n){const r=Object.assign(Object.assign({},ZU()),{[e]:n});return new Zi("auth","Firebase",r).create(e,{appName:t.name})}function ka(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Lt(t,"argument-error"),WT(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function sy(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return qT.create(t,...e)}function H(t,e,...n){if(!t)throw sy(e,...n)}function cr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw dh(e),new Error(e)}function Xn(t,e){t||cr(e)}const BE=new Map;function vn(t){Xn(t instanceof Function,"Expected a class definition");let e=BE.get(t);return e?(Xn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,BE.set(t,e),e)}function JU(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function cu(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iy(){return VE()==="http:"||VE()==="https:"}function VE(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}function eF(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iy()||iT()||"connection"in navigator)?navigator.onLine:!0}function tF(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}class Bu{constructor(e,n){this.shortDelay=e,this.longDelay=n,Xn(n>e,"Short delay should be less than long delay!"),this.isMobile=MO()||Wv()}get(){return eF()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function oy(t,e){Xn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class HT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const nF={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"};const rF=new Bu(3e4,6e4);function ct(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wt(t,e,n,r,s={}){return GT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ia(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),HT.fetch()(KT(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function GT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},nF),e);try{const s=new sF(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw gl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw gl(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw gl(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw gl(t,"user-disabled",o);const c=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw WT(t,c,u);Lt(t,c)}}catch(s){if(s instanceof Bt)throw s;Lt(t,"network-request-failed")}}async function Qr(t,e,n,r,s={}){const i=await wt(t,e,n,r,s);return"mfaPendingCredential"in i&&Lt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function KT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?oy(t.config,s):`${t.config.apiScheme}://${s}`}class sF{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tt(this.auth,"network-request-failed")),rF.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Tt(t,e,r);return s.customData._tokenResponse=n,s}async function iF(t,e){return wt(t,"POST","/v1/accounts:delete",e)}async function oF(t,e){return wt(t,"POST","/v1/accounts:update",e)}async function aF(t,e){return wt(t,"POST","/v1/accounts:lookup",e)}function Dl(t){if(!!t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lF(t,e=!1){const n=re(t),r=await n.getIdToken(e),s=ef(r);H(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Dl(Op(s.auth_time)),issuedAtTime:Dl(Op(s.iat)),expirationTime:Dl(Op(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Op(t){return Number(t)*1e3}function ef(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return dh("JWT malformed, contained fewer than 3 sections"),null;try{const s=sT(n);return s?JSON.parse(s):(dh("Failed to decode base64 JWT payload"),null)}catch(s){return dh("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function uF(t){const e=ef(t);return H(e,"internal-error"),H(typeof e.exp<"u","internal-error"),H(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function zr(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Bt&&cF(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function cF({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}class hF{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class QT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Dl(this.lastLoginAt),this.creationTime=Dl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function hu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await zr(t,aF(n,{idToken:r}));H(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?pF(i.providerUserInfo):[],a=fF(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),c=l?u:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new QT(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,h)}async function dF(t){const e=re(t);await hu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fF(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function pF(t){return t.map(e=>{var{providerId:n}=e,r=ry(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}async function mF(t,e){const n=await GT(t,{},async()=>{const r=Ia({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=KT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",HT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}class du{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){H(e.idToken,"internal-error"),H(typeof e.idToken<"u","internal-error"),H(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):uF(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return H(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await mF(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new du;return r&&(H(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(H(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(H(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new du,this.toJSON())}_performRefresh(){return cr("not implemented")}}function ts(t,e){H(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class ki{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=ry(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hF(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new QT(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await zr(this,this.stsTokenManager.getToken(this.auth,e));return H(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lF(this,e)}reload(){return dF(this)}_assign(e){this!==e&&(H(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new ki(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){H(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await hu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await zr(this,iF(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,u,c;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(s=n.email)!==null&&s!==void 0?s:void 0,p=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,m=(o=n.photoURL)!==null&&o!==void 0?o:void 0,_=(a=n.tenantId)!==null&&a!==void 0?a:void 0,E=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,g=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:I,stsTokenManager:R}=n;H(v&&R,e,"internal-error");const A=du.fromJSON(this.name,R);H(typeof v=="string",e,"internal-error"),ts(h,e.name),ts(f,e.name),H(typeof w=="boolean",e,"internal-error"),H(typeof b=="boolean",e,"internal-error"),ts(p,e.name),ts(m,e.name),ts(_,e.name),ts(E,e.name),ts(g,e.name),ts(y,e.name);const L=new ki({uid:v,auth:e,email:f,emailVerified:w,displayName:h,isAnonymous:b,photoURL:m,phoneNumber:p,tenantId:_,stsTokenManager:A,createdAt:g,lastLoginAt:y});return I&&Array.isArray(I)&&(L.providerData=I.map(F=>Object.assign({},F))),E&&(L._redirectEventId=E),L}static async _fromIdTokenResponse(e,n,r=!1){const s=new du;s.updateFromServerResponse(n);const i=new ki({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await hu(i),i}}class YT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}YT.type="NONE";const ta=YT;function Ti(t,e,n){return`firebase:${t}:${e}:${n}`}class jo{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ti(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ti("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ki._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new jo(vn(ta),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||vn(ta);const o=Ti(r,e.config.apiKey,e.name);let a=null;for(const u of n)try{const c=await u._get(o);if(c){const h=ki._fromJSON(e,c);u!==i&&(a=h),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new jo(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new jo(i,e,r))}}function jE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(JT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(XT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(e1(e))return"Blackberry";if(t1(e))return"Webos";if(ay(e))return"Safari";if((e.includes("chrome/")||ZT(e))&&!e.includes("edge/"))return"Chrome";if(Vu(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function XT(t=ze()){return/firefox\//i.test(t)}function ay(t=ze()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ZT(t=ze()){return/crios\//i.test(t)}function JT(t=ze()){return/iemobile/i.test(t)}function Vu(t=ze()){return/android/i.test(t)}function e1(t=ze()){return/blackberry/i.test(t)}function t1(t=ze()){return/webos/i.test(t)}function Ta(t=ze()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gF(t=ze()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function vF(t=ze()){var e;return Ta(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function yF(){return oT()&&document.documentMode===10}function n1(t=ze()){return Ta(t)||Vu(t)||t1(t)||e1(t)||/windows phone/i.test(t)||JT(t)}function wF(){try{return!!(window&&window!==window.top)}catch{return!1}}function r1(t,e=[]){let n;switch(t){case"Browser":n=jE(ze());break;case"Worker":n=`${jE(ze())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}class _F{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}class EF{constructor(e,n,r){this.app=e,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zE(this),this.idTokenSubscription=new zE(this),this.beforeStateQueue=new _F(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=qT,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=vn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await jo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l==null?void 0:l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return H(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await hu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=tF()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?re(e):null;return n&&H(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&H(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(vn(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zi("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&vn(e)||this._popupRedirectResolver;H(n,this,"argument-error"),this.redirectPersistenceManager=await jo.create(this,[vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n),o=this._isInitialized?Promise.resolve():this._initializationPromise;return H(o,this,"internal-error"),o.then(()=>i(this.currentUser)),typeof n=="function"?e.addObserver(n,r,s):e.addObserver(n)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return H(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=r1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());return r&&(n["X-Firebase-Client"]=r),n}}function vt(t){return re(t)}class zE{constructor(e){this.auth=e,this.observer=null,this.addObserver=lT(n=>this.observer=n)}get next(){return H(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function SF(t,e,n){const r=vt(t);H(r._canInitEmulator,r,"emulator-config-failed"),H(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=s1(e),{host:o,port:a}=IF(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||xF()}function s1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function IF(t){const e=s1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:qE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:qE(o)}}}function qE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function xF(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}class ba{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function i1(t,e){return wt(t,"POST","/v1/accounts:resetPassword",ct(t,e))}async function o1(t,e){return wt(t,"POST","/v1/accounts:update",e)}async function kF(t,e){return wt(t,"POST","/v1/accounts:update",ct(t,e))}async function TF(t,e){return Qr(t,"POST","/v1/accounts:signInWithPassword",ct(t,e))}async function tf(t,e){return wt(t,"POST","/v1/accounts:sendOobCode",ct(t,e))}async function bF(t,e){return tf(t,e)}async function CF(t,e){return tf(t,e)}async function LF(t,e){return tf(t,e)}async function PF(t,e){return tf(t,e)}async function RF(t,e){return Qr(t,"POST","/v1/accounts:signInWithEmailLink",ct(t,e))}async function NF(t,e){return Qr(t,"POST","/v1/accounts:signInWithEmailLink",ct(t,e))}class fu extends ba{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new fu(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new fu(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if((n==null?void 0:n.email)&&(n==null?void 0:n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return TF(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return RF(e,{email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return o1(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return NF(e,{idToken:n,email:this._email,oobCode:this._password});default:Lt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function $r(t,e){return Qr(t,"POST","/v1/accounts:signInWithIdp",ct(t,e))}const DF="http://localhost";class wr extends ba{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new wr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Lt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=ry(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new wr(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return $r(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$r(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$r(e,n)}buildRequest(){const e={requestUri:DF,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ia(n)}return e}}async function AF(t,e){return wt(t,"POST","/v1/accounts:sendVerificationCode",ct(t,e))}async function OF(t,e){return Qr(t,"POST","/v1/accounts:signInWithPhoneNumber",ct(t,e))}async function MF(t,e){const n=await Qr(t,"POST","/v1/accounts:signInWithPhoneNumber",ct(t,e));if(n.temporaryProof)throw gl(t,"account-exists-with-different-credential",n);return n}const $F={USER_NOT_FOUND:"user-not-found"};async function UF(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Qr(t,"POST","/v1/accounts:signInWithPhoneNumber",ct(t,n),$F)}class bi extends ba{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new bi({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new bi({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return OF(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return MF(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return UF(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:s}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:s}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i}=e;return!r&&!n&&!s&&!i?null:new bi({verificationId:n,verificationCode:r,phoneNumber:s,temporaryProof:i})}}function FF(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function BF(t){const e=Ro(ml(t)).link,n=e?Ro(ml(e)).deep_link_id:null,r=Ro(ml(t)).deep_link_id;return(r?Ro(ml(r)).link:null)||r||n||e||t}class nf{constructor(e){var n,r,s,i,o,a;const l=Ro(ml(e)),u=(n=l.apiKey)!==null&&n!==void 0?n:null,c=(r=l.oobCode)!==null&&r!==void 0?r:null,h=FF((s=l.mode)!==null&&s!==void 0?s:null);H(u&&c&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=c,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=BF(e);try{return new nf(n)}catch{return null}}}class Hs{constructor(){this.providerId=Hs.PROVIDER_ID}static credential(e,n){return fu._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=nf.parseLink(n);return H(r,"argument-error"),fu._fromEmailAndCode(e,r.code,r.tenantId)}}Hs.PROVIDER_ID="password";Hs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Hs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Yr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ca extends Yr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class zo extends Ca{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return H("providerId"in n&&"signInMethod"in n,"argument-error"),wr._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return H(e.idToken||e.accessToken,"argument-error"),wr._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return zo.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return zo.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:s,pendingToken:i,nonce:o,providerId:a}=e;if(!r&&!s&&!n&&!i||!a)return null;try{return new zo(a)._credential({idToken:n,accessToken:r,nonce:o,pendingToken:i})}catch{return null}}}class ir extends Ca{constructor(){super("facebook.com")}static credential(e){return wr._fromParams({providerId:ir.PROVIDER_ID,signInMethod:ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ir.credentialFromTaggedObject(e)}static credentialFromError(e){return ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ir.credential(e.oauthAccessToken)}catch{return null}}}ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";ir.PROVIDER_ID="facebook.com";class or extends Ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return wr._fromParams({providerId:or.PROVIDER_ID,signInMethod:or.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return or.credentialFromTaggedObject(e)}static credentialFromError(e){return or.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return or.credential(n,r)}catch{return null}}}or.GOOGLE_SIGN_IN_METHOD="google.com";or.PROVIDER_ID="google.com";class ar extends Ca{constructor(){super("github.com")}static credential(e){return wr._fromParams({providerId:ar.PROVIDER_ID,signInMethod:ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ar.credentialFromTaggedObject(e)}static credentialFromError(e){return ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ar.credential(e.oauthAccessToken)}catch{return null}}}ar.GITHUB_SIGN_IN_METHOD="github.com";ar.PROVIDER_ID="github.com";const VF="http://localhost";class na extends ba{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return $r(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,$r(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,$r(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,pendingToken:i}=n;return!r||!s||!i||r!==s?null:new na(r,i)}static _create(e,n){return new na(e,n)}buildRequest(){return{requestUri:VF,returnSecureToken:!0,pendingToken:this.pendingToken}}}const jF="saml.";class Jh extends Yr{constructor(e){H(e.startsWith(jF),"argument-error"),super(e)}static credentialFromResult(e){return Jh.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Jh.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=na.fromJSON(e);return H(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return na._create(r,n)}catch{return null}}}class lr extends Ca{constructor(){super("twitter.com")}static credential(e,n){return wr._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return lr.credential(n,r)}catch{return null}}}lr.TWITTER_SIGN_IN_METHOD="twitter.com";lr.PROVIDER_ID="twitter.com";async function a1(t,e){return Qr(t,"POST","/v1/accounts:signUp",ct(t,e))}class Fn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await ki._fromIdTokenResponse(e,r,s),o=WE(r);return new Fn({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=WE(r);return new Fn({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function WE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}async function zF(t){var e;const n=vt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new Fn({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await a1(n,{returnSecureToken:!0}),s=await Fn._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(s.user),s}class ed extends Bt{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ed.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ed(e,n,r,s)}}function l1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?ed._fromErrorAndOperation(t,i,e,r):i})}function u1(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}async function qF(t,e){const n=re(t);await rf(!0,n,e);const{providerUserInfo:r}=await oF(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=u1(r||[]);return n.providerData=n.providerData.filter(i=>s.has(i.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ly(t,e,n=!1){const r=await zr(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Fn._forOperation(t,"link",r)}async function rf(t,e,n){await hu(e);const r=u1(e.providerData),s=t===!1?"provider-already-linked":"no-such-provider";H(r.has(n)===t,e.auth,s)}async function c1(t,e,n=!1){const{auth:r}=t,s="reauthenticate";try{const i=await zr(t,l1(r,s,e,t),n);H(i.idToken,r,"internal-error");const o=ef(i.idToken);H(o,r,"internal-error");const{sub:a}=o;return H(t.uid===a,r,"user-mismatch"),Fn._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Lt(r,"user-mismatch"),i}}async function h1(t,e,n=!1){const r="signIn",s=await l1(t,r,e),i=await Fn._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function sf(t,e){return h1(vt(t),e)}async function d1(t,e){const n=re(t);return await rf(!1,n,e.providerId),ly(n,e)}async function f1(t,e){return c1(re(t),e)}async function WF(t,e){return Qr(t,"POST","/v1/accounts:signInWithCustomToken",ct(t,e))}async function HF(t,e){const n=vt(t),r=await WF(n,{token:e,returnSecureToken:!0}),s=await Fn._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(s.user),s}class of{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?uy._fromServerResponse(e,n):Lt(e,"internal-error")}}class uy extends of{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new uy(n)}}function af(t,e,n){var r;H(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),H(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(H(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(H(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}async function GF(t,e,n){const r=re(t),s={requestType:"PASSWORD_RESET",email:e};n&&af(r,s,n),await CF(r,s)}async function KF(t,e,n){await i1(re(t),{oobCode:e,newPassword:n})}async function QF(t,e){await kF(re(t),{oobCode:e})}async function p1(t,e){const n=re(t),r=await i1(n,{oobCode:e}),s=r.requestType;switch(H(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":H(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":H(r.mfaInfo,n,"internal-error");default:H(r.email,n,"internal-error")}let i=null;return r.mfaInfo&&(i=of._fromServerResponse(vt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:i},operation:s}}async function YF(t,e){const{data:n}=await p1(re(t),e);return n.email}async function XF(t,e,n){const r=vt(t),s=await a1(r,{returnSecureToken:!0,email:e,password:n}),i=await Fn._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(i.user),i}function ZF(t,e,n){return sf(re(t),Hs.credential(e,n))}async function JF(t,e,n){const r=re(t),s={requestType:"EMAIL_SIGNIN",email:e};H(n.handleCodeInApp,r,"argument-error"),n&&af(r,s,n),await LF(r,s)}function eB(t,e){const n=nf.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function tB(t,e,n){const r=re(t),s=Hs.credentialWithLink(e,n||cu());return H(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),sf(r,s)}async function nB(t,e){return wt(t,"POST","/v1/accounts:createAuthUri",ct(t,e))}async function rB(t,e){const n=iy()?cu():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await nB(re(t),r);return s||[]}async function sB(t,e){const n=re(t),s={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&af(n.auth,s,e);const{email:i}=await bF(n.auth,s);i!==t.email&&await t.reload()}async function iB(t,e,n){const r=re(t),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&af(r.auth,i,n);const{email:o}=await PF(r.auth,i);o!==t.email&&await t.reload()}async function oB(t,e){return wt(t,"POST","/v1/accounts:update",e)}async function aB(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=re(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await zr(r,oB(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function lB(t,e){return m1(re(t),e,null)}function uB(t,e){return m1(re(t),null,e)}async function m1(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(i.email=e),n&&(i.password=n);const o=await zr(t,o1(r,i));await t._updateTokensIfNecessary(o,!0)}function cB(t){var e,n;if(!t)return null;const{providerId:r}=t,s=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},i=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t==null?void 0:t.idToken)){const o=(n=(e=ef(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(o){const a=o!=="anonymous"&&o!=="custom"?o:null;return new qo(i,a)}}if(!r)return null;switch(r){case"facebook.com":return new hB(i,s);case"github.com":return new dB(i,s);case"google.com":return new fB(i,s);case"twitter.com":return new pB(i,s,t.screenName||null);case"custom":case"anonymous":return new qo(i,null);default:return new qo(i,r,s)}}class qo{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class g1 extends qo{constructor(e,n,r,s){super(e,n,r),this.username=s}}class hB extends qo{constructor(e,n){super(e,"facebook.com",n)}}class dB extends g1{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class fB extends qo{constructor(e,n){super(e,"google.com",n)}}class pB extends g1{constructor(e,n,r){super(e,"twitter.com",n,r)}}function mB(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:cB(n)}function gB(t,e,n,r){return re(t).onAuthStateChanged(e,n,r)}class gi{constructor(e,n,r){this.type=e,this.credential=n,this.auth=r}static _fromIdtoken(e,n){return new gi("enroll",e,n)}static _fromMfaPendingCredential(e){return new gi("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return gi._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return gi._fromIdtoken(e.multiFactorSession.idToken)}return null}}class cy{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=vt(e),s=n.customData._serverResponse,i=(s.mfaInfo||[]).map(a=>of._fromServerResponse(r,a));H(s.mfaPendingCredential,r,"internal-error");const o=gi._fromMfaPendingCredential(s.mfaPendingCredential);return new cy(o,i,async a=>{const l=await a._process(r,o);delete s.mfaInfo,delete s.mfaPendingCredential;const u=Object.assign(Object.assign({},s),{idToken:l.idToken,refreshToken:l.refreshToken});switch(n.operationType){case"signIn":const c=await Fn._fromIdTokenResponse(r,n.operationType,u);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return H(n.user,r,"internal-error"),Fn._forOperation(n.user,n.operationType,u);default:Lt(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function vB(t,e){var n;const r=re(t),s=e;return H(e.customData.operationType,r,"argument-error"),H((n=s.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),cy._fromError(r,s)}function yB(t,e){return wt(t,"POST","/v2/accounts/mfaEnrollment:start",ct(t,e))}function wB(t,e){return wt(t,"POST","/v2/accounts/mfaEnrollment:finalize",ct(t,e))}function _B(t,e){return wt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",ct(t,e))}class hy{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>of._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new hy(e)}async getSession(){return gi._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,n){const r=e,s=await this.getSession(),i=await zr(this.user,r._process(this.user.auth,s,n));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken(),s=await zr(this.user,_B(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:i})=>i!==n),await this.user._updateTokensIfNecessary(s);try{await this.user.reload()}catch(i){if((i==null?void 0:i.code)!=="auth/user-token-expired")throw i}}}const Mp=new WeakMap;function EB(t){const e=re(t);return Mp.has(e)||Mp.set(e,hy._fromUser(e)),Mp.get(e)}const td="__sak";class v1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(td,"1"),this.storage.removeItem(td),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}function SB(){const t=ze();return ay(t)||Ta(t)}const IB=1e3,xB=10;class y1 extends v1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=SB()&&wF(),this.fallbackToPolling=n1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);yF()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,xB):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},IB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}y1.type="LOCAL";const dy=y1;class w1 extends v1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}w1.type="SESSION";const $i=w1;function kB(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class lf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new lf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async u=>u(n.origin,i)),l=await kB(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}lf.receivers=[];function ju(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}class TB{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=ju("",20);s.port1.start();const c=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(h){const f=h;if(f.data.eventId===u)switch(f.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(f.data.response);break;default:clearTimeout(c),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}function it(){return window}function bB(t){it().location.href=t}function fy(){return typeof it().WorkerGlobalScope<"u"&&typeof it().importScripts=="function"}async function CB(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LB(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function PB(){return fy()?self:null}const _1="firebaseLocalStorageDb",RB=1,nd="firebaseLocalStorage",E1="fbase_key";class zu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function uf(t,e){return t.transaction([nd],e?"readwrite":"readonly").objectStore(nd)}function NB(){const t=indexedDB.deleteDatabase(_1);return new zu(t).toPromise()}function ag(){const t=indexedDB.open(_1,RB);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nd,{keyPath:E1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nd)?e(r):(r.close(),await NB(),e(await ag()))})})}async function HE(t,e,n){const r=uf(t,!0).put({[E1]:e,value:n});return new zu(r).toPromise()}async function DB(t,e){const n=uf(t,!1).get(e),r=await new zu(n).toPromise();return r===void 0?null:r.value}function GE(t,e){const n=uf(t,!0).delete(e);return new zu(n).toPromise()}const AB=800,OB=3;class S1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ag(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>OB)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fy()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=lf._getInstance(PB()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await CB(),!this.activeServiceWorker)return;this.sender=new TB(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);!r||((e=r[0])===null||e===void 0?void 0:e.fulfilled)&&((n=r[0])===null||n===void 0?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LB()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ag();return await HE(e,td,"1"),await GE(e,td),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>HE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>DB(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>GE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=uf(s,!1).getAll();return new zu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),AB)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}S1.type="LOCAL";const pu=S1;function MB(t,e){return wt(t,"POST","/v2/accounts/mfaSignIn:start",ct(t,e))}function $B(t,e){return wt(t,"POST","/v2/accounts/mfaSignIn:finalize",ct(t,e))}async function UB(t){return(await wt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}function FB(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function I1(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Tt("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",FB().appendChild(r)})}function x1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const BB=500,VB=6e4,Vc=1e12;class jB{constructor(e){this.auth=e,this.counter=Vc,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new zB(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||Vc;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||Vc;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||Vc;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class zB{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const s=typeof e=="string"?document.getElementById(e):e;H(s,"argument-error",{appName:n}),this.container=s,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=qB(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch{}this.isVisible&&this.execute()},VB)},BB))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function qB(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}const $p=x1("rcb"),WB=new Bu(3e4,6e4),HB="https://www.google.com/recaptcha/api.js?";class GB{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=it().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return H(KB(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(it().grecaptcha):new Promise((r,s)=>{const i=it().setTimeout(()=>{s(Tt(e,"network-request-failed"))},WB.get());it()[$p]=()=>{it().clearTimeout(i),delete it()[$p];const a=it().grecaptcha;if(!a){s(Tt(e,"internal-error"));return}const l=a.render;a.render=(u,c)=>{const h=l(u,c);return this.counter++,h},this.hostLanguage=n,r(a)};const o=`${HB}?${Ia({onload:$p,render:"explicit",hl:n})}`;I1(o).catch(()=>{clearTimeout(i),s(Tt(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=it().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function KB(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class QB{async load(e){return new jB(e)}clearedOneInstance(){}}const k1="recaptcha",YB={theme:"light",type:"image"};let XB=class{constructor(e,n=Object.assign({},YB),r){this.parameters=n,this.type=k1,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=vt(r),this.isInvisible=this.parameters.size==="invisible",H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const s=typeof e=="string"?document.getElementById(e):e;H(s,this.auth,"argument-error"),this.container=s,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new QB:new GB,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(s=>{const i=o=>{!o||(this.tokenChangeListeners.delete(i),s(o))};this.tokenChangeListeners.add(i),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){H(!this.parameters.sitekey,this.auth,"argument-error"),H(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),H(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=it()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){H(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){H(iy()&&!fy(),this.auth,"internal-error"),await ZB(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await UB(this.auth);H(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return H(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function ZB(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}class py{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=bi._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function JB(t,e,n){const r=vt(t),s=await cf(r,e,re(n));return new py(s,i=>sf(r,i))}async function e2(t,e,n){const r=re(t);await rf(!1,r,"phone");const s=await cf(r.auth,e,re(n));return new py(s,i=>d1(r,i))}async function t2(t,e,n){const r=re(t),s=await cf(r.auth,e,re(n));return new py(s,i=>f1(r,i))}async function cf(t,e,n){var r;const s=await n.verify();try{H(typeof s=="string",t,"argument-error"),H(n.type===k1,t,"argument-error");let i;if(typeof e=="string"?i={phoneNumber:e}:i=e,"session"in i){const o=i.session;if("phoneNumber"in i)return H(o.type==="enroll",t,"internal-error"),(await yB(t,{idToken:o.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}})).phoneSessionInfo.sessionInfo;{H(o.type==="signin",t,"internal-error");const a=((r=i.multiFactorHint)===null||r===void 0?void 0:r.uid)||i.multiFactorUid;return H(a,t,"missing-multi-factor-info"),(await MB(t,{mfaPendingCredential:o.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:s}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:o}=await AF(t,{phoneNumber:i.phoneNumber,recaptchaToken:s});return o}}finally{n._reset()}}async function n2(t,e){await ly(re(t),e)}let gr=class{constructor(e){this.providerId=gr.PROVIDER_ID,this.auth=vt(e)}verifyPhoneNumber(e,n){return cf(this.auth,e,re(n))}static credential(e,n){return bi._fromVerification(e,n)}static credentialFromResult(e){const n=e;return gr.credentialFromTaggedObject(n)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?bi._fromTokenResponse(n,r):null}};gr.PROVIDER_ID="phone";gr.PHONE_SIGN_IN_METHOD="phone";function Ji(t,e){return e?vn(e):(H(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}class my extends ba{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return $r(e,this._buildIdpRequest())}_linkToIdToken(e,n){return $r(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return $r(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function r2(t){return h1(t.auth,new my(t),t.bypassAuthState)}function s2(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),c1(n,new my(t),t.bypassAuthState)}async function i2(t){const{auth:e,user:n}=t;return H(n,e,"internal-error"),ly(n,new my(t),t.bypassAuthState)}class T1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return r2;case"linkViaPopup":case"linkViaRedirect":return i2;case"reauthViaPopup":case"reauthViaRedirect":return s2;default:Lt(this.auth,"internal-error")}}resolve(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const o2=new Bu(2e3,1e4);async function a2(t,e,n){const r=vt(t);ka(t,e,Yr);const s=Ji(r,n);return new Rr(r,"signInViaPopup",e,s).executeNotNull()}async function l2(t,e,n){const r=re(t);ka(r.auth,e,Yr);const s=Ji(r.auth,n);return new Rr(r.auth,"reauthViaPopup",e,s,r).executeNotNull()}async function u2(t,e,n){const r=re(t);ka(r.auth,e,Yr);const s=Ji(r.auth,n);return new Rr(r.auth,"linkViaPopup",e,s,r).executeNotNull()}class Rr extends T1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Rr.currentPopupAction&&Rr.currentPopupAction.cancel(),Rr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return H(e,this.auth,"internal-error"),e}async onExecution(){Xn(this.filter.length===1,"Popup operations only handle one event");const e=ju();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tt(this.auth,"popup-closed-by-user"))},2e3);return}this.pollId=window.setTimeout(e,o2.get())};e()}}Rr.currentPopupAction=null;const c2="pendingRedirect",Al=new Map;class h2 extends T1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Al.get(this.auth._key());if(!e){try{const r=await d2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Al.set(this.auth._key(),e)}return this.bypassAuthState||Al.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function d2(t,e){const n=C1(e),r=b1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function gy(t,e){return b1(t)._set(C1(e),"true")}function f2(){Al.clear()}function vy(t,e){Al.set(t._key(),e)}function b1(t){return vn(t._redirectPersistence)}function C1(t){return Ti(c2,t.config.apiKey,t.name)}function p2(t,e,n){return m2(t,e,n)}async function m2(t,e,n){const r=vt(t);ka(t,e,Yr);const s=Ji(r,n);return await gy(s,r),s._openRedirect(r,e,"signInViaRedirect")}function g2(t,e,n){return v2(t,e,n)}async function v2(t,e,n){const r=re(t);ka(r.auth,e,Yr);const s=Ji(r.auth,n);await gy(s,r.auth);const i=await L1(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",i)}function y2(t,e,n){return w2(t,e,n)}async function w2(t,e,n){const r=re(t);ka(r.auth,e,Yr);const s=Ji(r.auth,n);await rf(!1,r,e.providerId),await gy(s,r.auth);const i=await L1(r);return s._openRedirect(r.auth,e,"linkViaRedirect",i)}async function _2(t,e){return await vt(t)._initializationPromise,hf(t,e,!1)}async function hf(t,e,n=!1){const r=vt(t),s=Ji(r,e),o=await new h2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}async function L1(t){const e=ju(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}const E2=10*60*1e3;class P1{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!S2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!R1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tt(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=E2&&this.cachedEventUids.clear(),this.cachedEventUids.has(KE(e))}saveEventToCache(e){this.cachedEventUids.add(KE(e)),this.lastProcessedEventTime=Date.now()}}function KE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function R1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function S2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return R1(t);default:return!1}}async function N1(t,e={}){return wt(t,"GET","/v1/projects",e)}const I2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,x2=/^https?/;async function k2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await N1(t);for(const n of e)try{if(T2(n))return}catch{}Lt(t,"unauthorized-domain")}function T2(t){const e=cu(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!x2.test(n))return!1;if(I2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const b2=new Bu(3e4,6e4);function QE(){const t=it().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function C2(t){return new Promise((e,n)=>{var r,s,i;function o(){QE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{QE(),n(Tt(t,"network-request-failed"))},timeout:b2.get()})}if(!((s=(r=it().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=it().gapi)===null||i===void 0)&&i.load)o();else{const a=x1("iframefcb");return it()[a]=()=>{gapi.load?o():n(Tt(t,"network-request-failed"))},I1(`https://apis.google.com/js/api.js?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw fh=null,e})}let fh=null;function L2(t){return fh=fh||C2(t),fh}const P2=new Bu(5e3,15e3),R2="__/auth/iframe",N2="emulator/auth/iframe",D2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},A2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function O2(t){const e=t.config;H(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oy(e,N2):`https://${t.config.authDomain}/${R2}`,r={apiKey:e.apiKey,appName:t.name,v:qs},s=A2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ia(r).slice(1)}`}async function M2(t){const e=await L2(t),n=it().gapi;return H(n,t,"internal-error"),e.open({where:document.body,url:O2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D2,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Tt(t,"network-request-failed"),a=it().setTimeout(()=>{i(o)},P2.get());function l(){it().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}const $2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U2=500,F2=600,B2="_blank",V2="http://localhost";class YE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function j2(t,e,n,r=U2,s=F2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},$2),{width:r.toString(),height:s.toString(),top:i,left:o}),u=ze().toLowerCase();n&&(a=ZT(u)?B2:n),XT(u)&&(e=e||V2,l.scrollbars="yes");const c=Object.entries(l).reduce((f,[p,m])=>`${f}${p}=${m},`,"");if(vF(u)&&a!=="_self")return z2(e||"",a),new YE(null);const h=window.open(e||"",a,c);H(h,t,"popup-blocked");try{h.focus()}catch{}return new YE(h)}function z2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}const q2="__/auth/handler",W2="emulator/auth/handler";function lg(t,e,n,r,s,i){H(t.config.authDomain,t,"auth-domain-config-required"),H(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qs,eventId:s};if(e instanceof Yr){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",ZO(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[l,u]of Object.entries(i||{}))o[l]=u}if(e instanceof Ca){const l=e.getScopes().filter(u=>u!=="");l.length>0&&(o.scopes=l.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const l of Object.keys(a))a[l]===void 0&&delete a[l];return`${H2(t)}?${Ia(a).slice(1)}`}function H2({config:t}){return t.emulator?oy(t,W2):`https://${t.authDomain}/${q2}`}const Up="webStorageSupport";class G2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=$i,this._completeRedirectFn=hf,this._overrideRedirectResult=vy}async _openPopup(e,n,r,s){var i;Xn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=lg(e,n,r,cu(),s);return j2(e,o,ju())}async _openRedirect(e,n,r,s){return await this._originValidation(e),bB(lg(e,n,r,cu(),s)),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Xn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await M2(e),r=new P1(e);return n.register("authEvent",s=>(H(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Up,{type:Up},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Up];o!==void 0&&n(!!o),Lt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=k2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return n1()||ay()||Ta()}}const K2=G2;class Q2{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return cr("unexpected MultiFactorSessionType")}}}class yy extends Q2{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new yy(e)}_finalizeEnroll(e,n,r){return wB(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return $B(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class D1{constructor(){}static assertion(e){return yy._fromCredential(e)}}D1.FACTOR_ID="phone";var XE="@firebase/auth",ZE="0.21.0";class Y2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);!n||(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){H(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function X2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function Z2(t){jr(new Un("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),{apiKey:i,authDomain:o}=r.options;return((a,l)=>{H(i&&!i.includes(":"),"invalid-api-key",{appName:a.name}),H(!(o!=null&&o.includes(":")),"argument-error",{appName:a.name});const u={apiKey:i,authDomain:o,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:r1(t)},c=new EF(a,l,u);return JU(c,n),c})(r,s)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),jr(new Un("auth-internal",e=>{const n=vt(e.getProvider("auth").getImmediate());return(r=>new Y2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),wn(XE,ZE,X2(t)),wn(XE,ZE,"esm2017")}const J2=5*60;GO("authIdTokenMaxAge");Z2("Browser");function Ui(){return window}const eV=2e3;async function tV(t,e,n){var r;const{BuildInfo:s}=Ui();Xn(e.sessionId,"AuthEvent did not contain a session ID");const i=await oV(e.sessionId),o={};return Ta()?o.ibi=s.packageName:Vu()?o.apn=s.packageName:Lt(t,"operation-not-supported-in-this-environment"),s.displayName&&(o.appDisplayName=s.displayName),o.sessionId=i,lg(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,o)}async function nV(t){const{BuildInfo:e}=Ui(),n={};Ta()?n.iosBundleId=e.packageName:Vu()?n.androidPackageName=e.packageName:Lt(t,"operation-not-supported-in-this-environment"),await N1(t,n)}function rV(t){const{cordova:e}=Ui();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let s=null;r?e.plugins.browsertab.openUrl(t):s=e.InAppBrowser.open(t,gF()?"_blank":"_system","location=yes"),n(s)})})}async function sV(t,e,n){const{cordova:r}=Ui();let s=()=>{};try{await new Promise((i,o)=>{let a=null;function l(){var h;i();const f=(h=r.plugins.browsertab)===null||h===void 0?void 0:h.close;typeof f=="function"&&f(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(Tt(t,"redirect-cancelled-by-user"))},eV))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&u()}e.addPassiveListener(l),document.addEventListener("resume",u,!1),Vu()&&document.addEventListener("visibilitychange",c,!1),s=()=>{e.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{s()}}function iV(t){var e,n,r,s,i,o,a,l,u,c;const h=Ui();H(typeof((e=h==null?void 0:h.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),H(typeof((n=h==null?void 0:h.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),H(typeof((i=(s=(r=h==null?void 0:h.cordova)===null||r===void 0?void 0:r.plugins)===null||s===void 0?void 0:s.browsertab)===null||i===void 0?void 0:i.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H(typeof((l=(a=(o=h==null?void 0:h.cordova)===null||o===void 0?void 0:o.plugins)===null||a===void 0?void 0:a.browsertab)===null||l===void 0?void 0:l.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),H(typeof((c=(u=h==null?void 0:h.cordova)===null||u===void 0?void 0:u.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function oV(t){const e=aV(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function aV(t){if(Xn(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}const lV=20;class uV extends P1{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function cV(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:fV(),postBody:null,tenantId:t.tenantId,error:Tt(t,"no-auth-event")}}function hV(t,e){return ug()._set(cg(t),e)}async function JE(t){const e=await ug()._get(cg(t));return e&&await ug()._remove(cg(t)),e}function dV(t,e){var n,r;const s=mV(e);if(s.includes("/__/auth/callback")){const i=ph(s),o=i.firebaseError?pV(decodeURIComponent(i.firebaseError)):null,a=(r=(n=o==null?void 0:o.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],l=a?Tt(a):null;return l?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:l,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:s,postBody:null}}return null}function fV(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<lV;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function ug(){return vn(dy)}function cg(t){return Ti("authEvent",t.config.apiKey,t.name)}function pV(t){try{return JSON.parse(t)}catch{return null}}function mV(t){const e=ph(t),n=e.link?decodeURIComponent(e.link):void 0,r=ph(n).link,s=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return ph(s).link||s||r||n||t}function ph(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Ro(n.join("?"))}const gV=500;class vV{constructor(){this._redirectPersistence=$i,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=hf,this._overrideRedirectResult=vy}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new uV(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Lt(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,s){iV(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),f2(),await this._originValidation(e);const o=cV(e,r,s);await hV(e,o);const a=await tV(e,o,n),l=await rV(a);return sV(e,i,l)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nV(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:s,BuildInfo:i}=Ui(),o=setTimeout(async()=>{await JE(e),n.onEvent(eS())},gV),a=async c=>{clearTimeout(o);const h=await JE(e);let f=null;h&&(c==null?void 0:c.url)&&(f=dV(h,c.url)),n.onEvent(f||eS())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const l=s,u=`${i.packageName.toLowerCase()}://`;Ui().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(u)&&a({url:c}),typeof l=="function")try{l(c)}catch(h){console.error(h)}}}}const yV=vV;function eS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tt("no-auth-event")}}function wV(t,e){vt(t)._logFramework(e)}var _V="@firebase/auth-compat",EV="0.3.0";const SV=1e3;function Ol(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function IV(){return Ol()==="http:"||Ol()==="https:"}function A1(t=ze()){return!!((Ol()==="file:"||Ol()==="ionic:"||Ol()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function xV(){return Wv()||Kd()}function kV(){return oT()&&(document==null?void 0:document.documentMode)===11}function TV(t=ze()){return/Edge\/\d+/.test(t)}function bV(t=ze()){return kV()||TV(t)}function O1(){try{const t=self.localStorage,e=ju();if(t)return t.setItem(e,"1"),t.removeItem(e),bV()?au():!0}catch{return wy()&&au()}return!1}function wy(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Fp(){return(IV()||iT()||A1())&&!xV()&&O1()&&!wy()}function M1(){return A1()&&typeof document<"u"}async function CV(){return M1()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},SV);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function LV(){return typeof window<"u"?window:null}const pn={LOCAL:"local",NONE:"none",SESSION:"session"},el=H,$1="persistence";function PV(t,e){if(el(Object.values(pn).includes(e),t,"invalid-persistence-type"),Wv()){el(e!==pn.SESSION,t,"unsupported-persistence-type");return}if(Kd()){el(e===pn.NONE,t,"unsupported-persistence-type");return}if(wy()){el(e===pn.NONE||e===pn.LOCAL&&au(),t,"unsupported-persistence-type");return}el(e===pn.NONE||O1(),t,"unsupported-persistence-type")}async function hg(t){await t._initializationPromise;const e=U1(),n=Ti($1,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function RV(t,e){const n=U1();if(!n)return[];const r=Ti($1,t,e);switch(n.getItem(r)){case pn.NONE:return[ta];case pn.LOCAL:return[pu,$i];case pn.SESSION:return[$i];default:return[]}}function U1(){var t;try{return((t=LV())===null||t===void 0?void 0:t.sessionStorage)||null}catch{return null}}const NV=H;class ms{constructor(){this.browserResolver=vn(K2),this.cordovaResolver=vn(yV),this.underlyingResolver=null,this._redirectPersistence=$i,this._completeRedirectFn=hf,this._overrideRedirectResult=vy}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,s)}async _openRedirect(e,n,r,s){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,s)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return M1()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return NV(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await CV();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function F1(t){return t.unwrap()}function DV(t){return t.wrapped()}function AV(t){return B1(t)}function OV(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const s=e;s.resolver=new MV(t,vB(t,e))}else if(r){const s=B1(e),i=e;s&&(i.credential=s,i.tenantId=r.tenantId||void 0,i.email=r.email||void 0,i.phoneNumber=r.phoneNumber||void 0)}}function B1(t){const{_tokenResponse:e}=t instanceof Bt?t.customData:t;if(!e)return null;if(!(t instanceof Bt)&&"temporaryProof"in e&&"phoneNumber"in e)return gr.credentialFromResult(t);const n=e.providerId;if(!n||n===Ja.PASSWORD)return null;let r;switch(n){case Ja.GOOGLE:r=or;break;case Ja.FACEBOOK:r=ir;break;case Ja.GITHUB:r=ar;break;case Ja.TWITTER:r=lr;break;default:const{oauthIdToken:s,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:a,nonce:l}=e;return!i&&!o&&!s&&!a?null:a?n.startsWith("saml.")?na._create(n,a):wr._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:s,accessToken:i}):new zo(n).credential({idToken:s,accessToken:i,rawNonce:l})}return t instanceof Bt?r.credentialFromError(t):r.credentialFromResult(t)}function en(t,e){return e.catch(n=>{throw n instanceof Bt&&OV(t,n),n}).then(n=>{const r=n.operationType,s=n.user;return{operationType:r,credential:AV(n),additionalUserInfo:mB(n),user:Nr.getOrCreate(s)}})}async function dg(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>en(t,n.confirm(r))}}class MV{constructor(e,n){this.resolver=n,this.auth=DV(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return en(F1(this.auth),this.resolver.resolveSignIn(e))}}class Nr{constructor(e){this._delegate=e,this.multiFactor=EB(e)}static getOrCreate(e){return Nr.USER_MAP.has(e)||Nr.USER_MAP.set(e,new Nr(e)),Nr.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return en(this.auth,d1(this._delegate,e))}async linkWithPhoneNumber(e,n){return dg(this.auth,e2(this._delegate,e,n))}async linkWithPopup(e){return en(this.auth,u2(this._delegate,e,ms))}async linkWithRedirect(e){return await hg(vt(this.auth)),y2(this._delegate,e,ms)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return en(this.auth,f1(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return dg(this.auth,t2(this._delegate,e,n))}reauthenticateWithPopup(e){return en(this.auth,l2(this._delegate,e,ms))}async reauthenticateWithRedirect(e){return await hg(vt(this.auth)),g2(this._delegate,e,ms)}sendEmailVerification(e){return sB(this._delegate,e)}async unlink(e){return await qF(this._delegate,e),this}updateEmail(e){return lB(this._delegate,e)}updatePassword(e){return uB(this._delegate,e)}updatePhoneNumber(e){return n2(this._delegate,e)}updateProfile(e){return aB(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return iB(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Nr.USER_MAP=new WeakMap;const tl=H;class fg{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;tl(r,"invalid-api-key",{appName:e.name}),tl(r,"invalid-api-key",{appName:e.name});const s=typeof window<"u"?ms:void 0;this._delegate=n.initialize({options:{persistence:$V(r,e.name),popupRedirectResolver:s}}),this._delegate._updateErrorMap(XU),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Nr.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){SF(this._delegate,e,n)}applyActionCode(e){return QF(this._delegate,e)}checkActionCode(e){return p1(this._delegate,e)}confirmPasswordReset(e,n){return KF(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return en(this._delegate,XF(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return rB(this._delegate,e)}isSignInWithEmailLink(e){return eB(this._delegate,e)}async getRedirectResult(){tl(Fp(),this._delegate,"operation-not-supported-in-this-environment");const e=await _2(this._delegate,ms);return e?en(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){wV(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:s,error:i,complete:o}=tS(e,n,r);return this._delegate.onAuthStateChanged(s,i,o)}onIdTokenChanged(e,n,r){const{next:s,error:i,complete:o}=tS(e,n,r);return this._delegate.onIdTokenChanged(s,i,o)}sendSignInLinkToEmail(e,n){return JF(this._delegate,e,n)}sendPasswordResetEmail(e,n){return GF(this._delegate,e,n||void 0)}async setPersistence(e){PV(this._delegate,e);let n;switch(e){case pn.SESSION:n=$i;break;case pn.LOCAL:n=await vn(pu)._isAvailable()?pu:dy;break;case pn.NONE:n=ta;break;default:return Lt("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return en(this._delegate,zF(this._delegate))}signInWithCredential(e){return en(this._delegate,sf(this._delegate,e))}signInWithCustomToken(e){return en(this._delegate,HF(this._delegate,e))}signInWithEmailAndPassword(e,n){return en(this._delegate,ZF(this._delegate,e,n))}signInWithEmailLink(e,n){return en(this._delegate,tB(this._delegate,e,n))}signInWithPhoneNumber(e,n){return dg(this._delegate,JB(this._delegate,e,n))}async signInWithPopup(e){return tl(Fp(),this._delegate,"operation-not-supported-in-this-environment"),en(this._delegate,a2(this._delegate,e,ms))}async signInWithRedirect(e){return tl(Fp(),this._delegate,"operation-not-supported-in-this-environment"),await hg(this._delegate),p2(this._delegate,e,ms)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return YF(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}fg.Persistence=pn;function tS(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const s=r;return{next:o=>s(o&&Nr.getOrCreate(o)),error:e,complete:n}}function $V(t,e){const n=RV(t,e);if(typeof self<"u"&&!n.includes(pu)&&n.push(pu),typeof window<"u")for(const r of[dy,$i])n.includes(r)||n.push(r);return n.includes(ta)||n.push(ta),n}class _y{constructor(){this.providerId="phone",this._delegate=new gr(F1(Zn.auth()))}static credential(e,n){return gr.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}_y.PHONE_SIGN_IN_METHOD=gr.PHONE_SIGN_IN_METHOD;_y.PROVIDER_ID=gr.PROVIDER_ID;const UV=H;class FV{constructor(e,n,r=Zn.app()){var s;UV((s=r.options)===null||s===void 0?void 0:s.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new XB(e,n,r.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}const BV="auth-compat";function VV(t){t.INTERNAL.registerComponent(new Un(BV,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new fg(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:fo.EMAIL_SIGNIN,PASSWORD_RESET:fo.PASSWORD_RESET,RECOVER_EMAIL:fo.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:fo.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:fo.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:fo.VERIFY_EMAIL}},EmailAuthProvider:Hs,FacebookAuthProvider:ir,GithubAuthProvider:ar,GoogleAuthProvider:or,OAuthProvider:zo,SAMLAuthProvider:Jh,PhoneAuthProvider:_y,PhoneMultiFactorGenerator:D1,RecaptchaVerifier:FV,TwitterAuthProvider:lr,Auth:fg,AuthCredential:ba,Error:Bt}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(_V,EV)}VV(Zn);var jV=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},se,Ey=Ey||{},ce=jV||self;function rd(){}function df(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function qu(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function zV(t){return Object.prototype.hasOwnProperty.call(t,Bp)&&t[Bp]||(t[Bp]=++qV)}var Bp="closure_uid_"+(1e9*Math.random()>>>0),qV=0;function WV(t,e,n){return t.call.apply(t.bind,arguments)}function HV(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,r),t.apply(e,s)}}return function(){return t.apply(e,arguments)}}function Vt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Vt=WV:Vt=HV,Vt.apply(null,arguments)}function jc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function Rt(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Wb=function(r,s,i){for(var o=Array(arguments.length-2),a=2;a<arguments.length;a++)o[a-2]=arguments[a];return e.prototype[s].apply(r,o)}}function Gs(){this.s=this.s,this.o=this.o}var GV=0;Gs.prototype.s=!1;Gs.prototype.na=function(){!this.s&&(this.s=!0,this.M(),GV!=0)&&zV(this)};Gs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const V1=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function Sy(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function nS(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(df(r)){const s=t.length||0,i=r.length||0;t.length=s+i;for(let o=0;o<i;o++)t[s+o]=r[o]}else t.push(r)}}function jt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}jt.prototype.h=function(){this.defaultPrevented=!0};var KV=function(){if(!ce.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ce.addEventListener("test",rd,e),ce.removeEventListener("test",rd,e)}catch{}return t}();function sd(t){return/^[\s\xa0]*$/.test(t)}var rS=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Vp(t,e){return t<e?-1:t>e?1:0}function ff(){var t=ce.navigator;return t&&(t=t.userAgent)?t:""}function ur(t){return ff().indexOf(t)!=-1}function Iy(t){return Iy[" "](t),t}Iy[" "]=rd;function QV(t){var e=ZV;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=t(9)}var YV=ur("Opera"),ra=ur("Trident")||ur("MSIE"),j1=ur("Edge"),pg=j1||ra,z1=ur("Gecko")&&!(ff().toLowerCase().indexOf("webkit")!=-1&&!ur("Edge"))&&!(ur("Trident")||ur("MSIE"))&&!ur("Edge"),XV=ff().toLowerCase().indexOf("webkit")!=-1&&!ur("Edge");function q1(){var t=ce.document;return t?t.documentMode:void 0}var id;e:{var jp="",zp=function(){var t=ff();if(z1)return/rv:([^\);]+)(\)|;)/.exec(t);if(j1)return/Edge\/([\d\.]+)/.exec(t);if(ra)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(XV)return/WebKit\/(\S+)/.exec(t);if(YV)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(zp&&(jp=zp?zp[1]:""),ra){var qp=q1();if(qp!=null&&qp>parseFloat(jp)){id=String(qp);break e}}id=jp}var ZV={};function JV(){return QV(function(){let t=0;const e=rS(String(id)).split("."),n=rS("9").split("."),r=Math.max(e.length,n.length);for(let o=0;t==0&&o<r;o++){var s=e[o]||"",i=n[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s[0].length==0&&i[0].length==0)break;t=Vp(s[1].length==0?0:parseInt(s[1],10),i[1].length==0?0:parseInt(i[1],10))||Vp(s[2].length==0,i[2].length==0)||Vp(s[2],i[2]),s=s[3],i=i[3]}while(t==0)}return 0<=t})}var mg;if(ce.document&&ra){var sS=q1();mg=sS||parseInt(id,10)||void 0}else mg=void 0;var ej=mg;function mu(t,e){if(jt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(z1){e:{try{Iy(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:tj[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&mu.X.h.call(this)}}Rt(mu,jt);var tj={2:"touch",3:"pen",4:"mouse"};mu.prototype.h=function(){mu.X.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Wu="closure_listenable_"+(1e6*Math.random()|0),nj=0;function rj(t,e,n,r,s){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ha=s,this.key=++nj,this.ba=this.ea=!1}function pf(t){t.ba=!0,t.listener=null,t.proxy=null,t.src=null,t.ha=null}function xy(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function W1(t){const e={};for(const n in t)e[n]=t[n];return e}const iS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function H1(t,e){let n,r;for(let s=1;s<arguments.length;s++){r=arguments[s];for(n in r)t[n]=r[n];for(let i=0;i<iS.length;i++)n=iS[i],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function mf(t){this.src=t,this.g={},this.h=0}mf.prototype.add=function(t,e,n,r,s){var i=t.toString();t=this.g[i],t||(t=this.g[i]=[],this.h++);var o=vg(t,e,r,s);return-1<o?(e=t[o],n||(e.ea=!1)):(e=new rj(e,this.src,i,!!r,s),e.ea=n,t.push(e)),e};function gg(t,e){var n=e.type;if(n in t.g){var r=t.g[n],s=V1(r,e),i;(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(pf(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function vg(t,e,n,r){for(var s=0;s<t.length;++s){var i=t[s];if(!i.ba&&i.listener==e&&i.capture==!!n&&i.ha==r)return s}return-1}var ky="closure_lm_"+(1e6*Math.random()|0),Wp={};function G1(t,e,n,r,s){if(r&&r.once)return Q1(t,e,n,r,s);if(Array.isArray(e)){for(var i=0;i<e.length;i++)G1(t,e[i],n,r,s);return null}return n=Cy(n),t&&t[Wu]?t.N(e,n,qu(r)?!!r.capture:!!r,s):K1(t,e,n,!1,r,s)}function K1(t,e,n,r,s,i){if(!e)throw Error("Invalid event type");var o=qu(s)?!!s.capture:!!s,a=by(t);if(a||(t[ky]=a=new mf(t)),n=a.add(e,n,r,o,i),n.proxy)return n;if(r=sj(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)KV||(s=o),s===void 0&&(s=!1),t.addEventListener(e.toString(),r,s);else if(t.attachEvent)t.attachEvent(X1(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function sj(){function t(n){return e.call(t.src,t.listener,n)}const e=ij;return t}function Q1(t,e,n,r,s){if(Array.isArray(e)){for(var i=0;i<e.length;i++)Q1(t,e[i],n,r,s);return null}return n=Cy(n),t&&t[Wu]?t.O(e,n,qu(r)?!!r.capture:!!r,s):K1(t,e,n,!0,r,s)}function Y1(t,e,n,r,s){if(Array.isArray(e))for(var i=0;i<e.length;i++)Y1(t,e[i],n,r,s);else r=qu(r)?!!r.capture:!!r,n=Cy(n),t&&t[Wu]?(t=t.i,e=String(e).toString(),e in t.g&&(i=t.g[e],n=vg(i,n,r,s),-1<n&&(pf(i[n]),Array.prototype.splice.call(i,n,1),i.length==0&&(delete t.g[e],t.h--)))):t&&(t=by(t))&&(e=t.g[e.toString()],t=-1,e&&(t=vg(e,n,r,s)),(n=-1<t?e[t]:null)&&Ty(n))}function Ty(t){if(typeof t!="number"&&t&&!t.ba){var e=t.src;if(e&&e[Wu])gg(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(X1(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=by(e))?(gg(n,t),n.h==0&&(n.src=null,e[ky]=null)):pf(t)}}}function X1(t){return t in Wp?Wp[t]:Wp[t]="on"+t}function ij(t,e){if(t.ba)t=!0;else{e=new mu(e,this);var n=t.listener,r=t.ha||t.src;t.ea&&Ty(t),t=n.call(r,e)}return t}function by(t){return t=t[ky],t instanceof mf?t:null}var Hp="__closure_events_fn_"+(1e9*Math.random()>>>0);function Cy(t){return typeof t=="function"?t:(t[Hp]||(t[Hp]=function(e){return t.handleEvent(e)}),t[Hp])}function yt(){Gs.call(this),this.i=new mf(this),this.P=this,this.I=null}Rt(yt,Gs);yt.prototype[Wu]=!0;yt.prototype.removeEventListener=function(t,e,n,r){Y1(this,t,e,n,r)};function bt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,typeof e=="string")e=new jt(e,t);else if(e instanceof jt)e.target=e.target||t;else{var s=e;e=new jt(r,t),H1(e,s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=e.g=n[i];s=zc(o,r,!0,e)&&s}if(o=e.g=t,s=zc(o,r,!0,e)&&s,s=zc(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)o=e.g=n[i],s=zc(o,r,!1,e)&&s}yt.prototype.M=function(){if(yt.X.M.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pf(n[r]);delete t.g[e],t.h--}}this.I=null};yt.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};yt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function zc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var s=!0,i=0;i<e.length;++i){var o=e[i];if(o&&!o.ba&&o.capture==n){var a=o.listener,l=o.ha||o.src;o.ea&&gg(t.i,o),s=a.call(l,r)!==!1&&s}}return s&&!r.defaultPrevented}var Ly=ce.JSON.stringify;function oj(){var t=eb;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class aj{constructor(){this.h=this.g=null}add(e,n){const r=Z1.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var Z1=new class{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}(()=>new lj,t=>t.reset());class lj{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function uj(t){ce.setTimeout(()=>{throw t},0)}function J1(t,e){yg||cj(),wg||(yg(),wg=!0),eb.add(t,e)}var yg;function cj(){var t=ce.Promise.resolve(void 0);yg=function(){t.then(hj)}}var wg=!1,eb=new aj;function hj(){for(var t;t=oj();){try{t.h.call(t.g)}catch(n){uj(n)}var e=Z1;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}wg=!1}function gf(t,e){yt.call(this),this.h=t||1,this.g=e||ce,this.j=Vt(this.lb,this),this.l=Date.now()}Rt(gf,yt);se=gf.prototype;se.ca=!1;se.R=null;se.lb=function(){if(this.ca){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-t):(this.R&&(this.g.clearTimeout(this.R),this.R=null),bt(this,"tick"),this.ca&&(Py(this),this.start()))}};se.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Py(t){t.ca=!1,t.R&&(t.g.clearTimeout(t.R),t.R=null)}se.M=function(){gf.X.M.call(this),Py(this),delete this.g};function Ry(t,e,n){if(typeof t=="function")n&&(t=Vt(t,n));else if(t&&typeof t.handleEvent=="function")t=Vt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ce.setTimeout(t,e||0)}function tb(t){t.g=Ry(()=>{t.g=null,t.i&&(t.i=!1,tb(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class dj extends Gs{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tb(this)}M(){super.M(),this.g&&(ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gu(t){Gs.call(this),this.h=t,this.g={}}Rt(gu,Gs);var oS=[];function nb(t,e,n,r){Array.isArray(n)||(n&&(oS[0]=n.toString()),n=oS);for(var s=0;s<n.length;s++){var i=G1(e,n[s],r||t.handleEvent,!1,t.h||t);if(!i)break;t.g[i.key]=i}}function rb(t){xy(t.g,function(e,n){this.g.hasOwnProperty(n)&&Ty(e)},t),t.g={}}gu.prototype.M=function(){gu.X.M.call(this),rb(this)};gu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function vf(){this.g=!0}vf.prototype.Aa=function(){this.g=!1};function fj(t,e,n,r,s,i){t.info(function(){if(t.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var u=a[l].split("=");if(1<u.length){var c=u[0];u=u[1];var h=c.split("_");o=2<=h.length&&h[1]=="type"?o+(c+"="+u+"&"):o+(c+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+e+`
`+n+`
`+o})}function pj(t,e,n,r,s,i,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+e+`
`+n+`
`+i+" "+o})}function No(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+gj(t,n)+(r?" "+r:"")})}function mj(t,e){t.info(function(){return"TIMEOUT: "+e})}vf.prototype.info=function(){};function gj(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if(i!="noop"&&i!="stop"&&i!="close")for(var o=1;o<s.length;o++)s[o]=""}}}}return Ly(n)}catch{return e}}var eo={},aS=null;function yf(){return aS=aS||new yt}eo.Pa="serverreachability";function sb(t){jt.call(this,eo.Pa,t)}Rt(sb,jt);function vu(t){const e=yf();bt(e,new sb(e))}eo.STAT_EVENT="statevent";function ib(t,e){jt.call(this,eo.STAT_EVENT,t),this.stat=e}Rt(ib,jt);function Qt(t){const e=yf();bt(e,new ib(e,t))}eo.Qa="timingevent";function ob(t,e){jt.call(this,eo.Qa,t),this.size=e}Rt(ob,jt);function Hu(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ce.setTimeout(function(){t()},e)}var wf={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ab={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ny(){}Ny.prototype.h=null;function lS(t){return t.h||(t.h=t.i())}function lb(){}var Gu={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Dy(){jt.call(this,"d")}Rt(Dy,jt);function Ay(){jt.call(this,"c")}Rt(Ay,jt);var _g;function _f(){}Rt(_f,Ny);_f.prototype.g=function(){return new XMLHttpRequest};_f.prototype.i=function(){return{}};_g=new _f;function Ku(t,e,n,r){this.l=t,this.j=e,this.m=n,this.U=r||1,this.S=new gu(this),this.O=vj,t=pg?125:void 0,this.T=new gf(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ub}function ub(){this.i=null,this.g="",this.h=!1}var vj=45e3,Eg={},od={};se=Ku.prototype;se.setTimeout=function(t){this.O=t};function Sg(t,e,n){t.K=1,t.v=Sf(qr(e)),t.s=n,t.P=!0,cb(t,null)}function cb(t,e){t.F=Date.now(),Qu(t),t.A=qr(t.v);var n=t.A,r=t.U;Array.isArray(r)||(r=[String(r)]),yb(n.i,"t",r),t.C=0,n=t.l.H,t.h=new ub,t.g=Fb(t.l,n?e:null,!t.s),0<t.N&&(t.L=new dj(Vt(t.La,t,t.g),t.N)),nb(t.S,t.g,"readystatechange",t.ib),e=t.H?W1(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.da(t.A,t.u,t.s,e)):(t.u="GET",t.g.da(t.A,t.u,null,e)),vu(),fj(t.j,t.u,t.A,t.m,t.U,t.s)}se.ib=function(t){t=t.target;const e=this.L;e&&Dr(t)==3?e.l():this.La(t)};se.La=function(t){try{if(t==this.g)e:{const c=Dr(this.g);var e=this.g.Ea();const h=this.g.aa();if(!(3>c)&&(c!=3||pg||this.g&&(this.h.h||this.g.fa()||dS(this.g)))){this.I||c!=4||e==7||(e==8||0>=h?vu(3):vu(2)),Ef(this);var n=this.g.aa();this.Y=n;t:if(hb(this)){var r=dS(this.g);t="";var s=r.length,i=Dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){vi(this),Ml(this);var o="";break t}this.h.i=new ce.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:i&&e==s-1});r.splice(0,s),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.fa();if(this.i=n==200,pj(this.j,this.u,this.A,this.m,this.U,c,n),this.i){if(this.Z&&!this.J){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sd(a)){var u=a;break t}}u=null}if(n=u)No(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ig(this,n);else{this.i=!1,this.o=3,Qt(12),vi(this),Ml(this);break e}}this.P?(db(this,c,o),pg&&this.i&&c==3&&(nb(this.S,this.T,"tick",this.hb),this.T.start())):(No(this.j,this.m,o,null),Ig(this,o)),c==4&&vi(this),this.i&&!this.I&&(c==4?Ob(this.l,this):(this.i=!1,Qu(this)))}else n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Qt(12)):(this.o=0,Qt(13)),vi(this),Ml(this)}}}catch{}finally{}};function hb(t){return t.g?t.u=="GET"&&t.K!=2&&t.l.Da:!1}function db(t,e,n){let r=!0,s;for(;!t.I&&t.C<n.length;)if(s=yj(t,n),s==od){e==4&&(t.o=4,Qt(14),r=!1),No(t.j,t.m,null,"[Incomplete Response]");break}else if(s==Eg){t.o=4,Qt(15),No(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else No(t.j,t.m,s,null),Ig(t,s);hb(t)&&s!=od&&s!=Eg&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Qt(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.$&&(t.$=!0,e=t.l,e.g==t&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Vy(e),e.K=!0,Qt(11))):(No(t.j,t.m,n,"[Invalid Chunked Response]"),vi(t),Ml(t))}se.hb=function(){if(this.g){var t=Dr(this.g),e=this.g.fa();this.C<e.length&&(Ef(this),db(this,t,e),this.i&&t!=4&&Qu(this))}};function yj(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?od:(n=Number(e.substring(n,r)),isNaN(n)?Eg:(r+=1,r+n>e.length?od:(e=e.substr(r,n),t.C=r+n,e)))}se.cancel=function(){this.I=!0,vi(this)};function Qu(t){t.V=Date.now()+t.O,fb(t,t.O)}function fb(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Hu(Vt(t.gb,t),e)}function Ef(t){t.B&&(ce.clearTimeout(t.B),t.B=null)}se.gb=function(){this.B=null;const t=Date.now();0<=t-this.V?(mj(this.j,this.A),this.K!=2&&(vu(),Qt(17)),vi(this),this.o=2,Ml(this)):fb(this,this.V-t)};function Ml(t){t.l.G==0||t.I||Ob(t.l,t)}function vi(t){Ef(t);var e=t.L;e&&typeof e.na=="function"&&e.na(),t.L=null,Py(t.T),rb(t.S),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Ig(t,e){try{var n=t.l;if(n.G!=0&&(n.g==t||xg(n.h,t))){if(!t.J&&xg(n.h,t)&&n.G==3){try{var r=n.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var s=r;if(s[0]==0){e:if(!n.u){if(n.g)if(n.g.F+3e3<t.F)ud(n),kf(n);else break e;By(n),Qt(18)}}else n.Ba=s[1],0<n.Ba-n.T&&37500>s[2]&&n.L&&n.A==0&&!n.v&&(n.v=Hu(Vt(n.cb,n),6e3));if(1>=Eb(n.h)&&n.ja){try{n.ja()}catch{}n.ja=void 0}}else yi(n,11)}else if((t.J||n.g==t)&&ud(n),!sd(e))for(s=n.Fa.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(n.T=u[0],u=u[1],n.G==2)if(u[0]=="c"){n.I=u[1],n.ka=u[2];const c=u[3];c!=null&&(n.ma=c,n.j.info("VER="+n.ma));const h=u[4];h!=null&&(n.Ca=h,n.j.info("SVER="+n.Ca));const f=u[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const m=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var i=r.h;i.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(i.j=i.l,i.g=new Set,i.h&&(Oy(i,i.h),i.h=null))}if(r.D){const _=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;_&&(r.za=_,$e(r.F,r.D,_))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-t.F,n.j.info("Handshake RTT: "+n.P+"ms")),r=n;var o=t;if(r.sa=Ub(r,r.H?r.ka:null,r.V),o.J){Sb(r.h,o);var a=o,l=r.J;l&&a.setTimeout(l),a.B&&(Ef(a),Qu(a)),r.g=o}else Db(r);0<n.i.length&&Tf(n)}else u[0]!="stop"&&u[0]!="close"||yi(n,7);else n.G==3&&(u[0]=="stop"||u[0]=="close"?u[0]=="stop"?yi(n,7):Fy(n):u[0]!="noop"&&n.l&&n.l.wa(u),n.A=0)}}vu(4)}catch{}}function wj(t){if(t.W&&typeof t.W=="function")return t.W();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(df(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function _j(t){if(t.oa&&typeof t.oa=="function")return t.oa();if(!t.W||typeof t.W!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(df(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function pb(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(df(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=_j(t),r=wj(t),s=r.length,i=0;i<s;i++)e.call(void 0,r[i],n&&n[i],t)}var mb=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ej(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),s=null;if(0<=r){var i=t[n].substring(0,r);s=t[n].substring(r+1)}else i=t[n];e(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}function Ci(t,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Ci){this.h=e!==void 0?e:t.h,ad(this,t.j),this.s=t.s,this.g=t.g,ld(this,t.m),this.l=t.l,e=t.i;var n=new yu;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),uS(this,n),this.o=t.o}else t&&(n=String(t).match(mb))?(this.h=!!e,ad(this,n[1]||"",!0),this.s=vl(n[2]||""),this.g=vl(n[3]||"",!0),ld(this,n[4]),this.l=vl(n[5]||"",!0),uS(this,n[6]||"",!0),this.o=vl(n[7]||"")):(this.h=!!e,this.i=new yu(null,this.h))}Ci.prototype.toString=function(){var t=[],e=this.j;e&&t.push(yl(e,cS,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(yl(e,cS,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(yl(n,n.charAt(0)=="/"?xj:Ij,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",yl(n,Tj)),t.join("")};function qr(t){return new Ci(t)}function ad(t,e,n){t.j=n?vl(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function ld(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function uS(t,e,n){e instanceof yu?(t.i=e,bj(t.i,t.h)):(n||(e=yl(e,kj)),t.i=new yu(e,t.h))}function $e(t,e,n){t.i.set(e,n)}function Sf(t){return $e(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function vl(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function yl(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,Sj),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Sj(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var cS=/[#\/\?@]/g,Ij=/[#\?:]/g,xj=/[#\?]/g,kj=/[#\?@]/g,Tj=/#/g;function yu(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Ks(t){t.g||(t.g=new Map,t.h=0,t.i&&Ej(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}se=yu.prototype;se.add=function(t,e){Ks(this),this.i=null,t=La(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function gb(t,e){Ks(t),e=La(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function vb(t,e){return Ks(t),e=La(t,e),t.g.has(e)}se.forEach=function(t,e){Ks(this),this.g.forEach(function(n,r){n.forEach(function(s){t.call(e,s,r,this)},this)},this)};se.oa=function(){Ks(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const s=t[r];for(let i=0;i<s.length;i++)n.push(e[r])}return n};se.W=function(t){Ks(this);let e=[];if(typeof t=="string")vb(this,t)&&(e=e.concat(this.g.get(La(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};se.set=function(t,e){return Ks(this),this.i=null,t=La(this,t),vb(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};se.get=function(t,e){return t?(t=this.W(t),0<t.length?String(t[0]):e):e};function yb(t,e,n){gb(t,e),0<n.length&&(t.i=null,t.g.set(La(t,e),Sy(n)),t.h+=n.length)}se.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const i=encodeURIComponent(String(r)),o=this.W(r);for(r=0;r<o.length;r++){var s=i;o[r]!==""&&(s+="="+encodeURIComponent(String(o[r]))),t.push(s)}}return this.i=t.join("&")};function La(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function bj(t,e){e&&!t.j&&(Ks(t),t.i=null,t.g.forEach(function(n,r){var s=r.toLowerCase();r!=s&&(gb(this,r),yb(this,s,n))},t)),t.j=e}var Cj=class{constructor(e,n){this.h=e,this.g=n}};function wb(t){this.l=t||Lj,ce.PerformanceNavigationTiming?(t=ce.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ce.g&&ce.g.Ga&&ce.g.Ga()&&ce.g.Ga().$b),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Lj=10;function _b(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Eb(t){return t.h?1:t.g?t.g.size:0}function xg(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function Oy(t,e){t.g?t.g.add(e):t.h=e}function Sb(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}wb.prototype.cancel=function(){if(this.i=Ib(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function Ib(t){if(t.h!=null)return t.i.concat(t.h.D);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.D);return e}return Sy(t.i)}function My(){}My.prototype.stringify=function(t){return ce.JSON.stringify(t,void 0)};My.prototype.parse=function(t){return ce.JSON.parse(t,void 0)};function Pj(){this.g=new My}function Rj(t,e,n){const r=n||"";try{pb(t,function(s,i){let o=s;qu(s)&&(o=Ly(s)),e.push(r+i+"="+encodeURIComponent(o))})}catch(s){throw e.push(r+"type="+encodeURIComponent("_badmap")),s}}function Nj(t,e){const n=new vf;if(ce.Image){const r=new Image;r.onload=jc(qc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=jc(qc,n,r,"TestLoadImage: error",!1,e),r.onabort=jc(qc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=jc(qc,n,r,"TestLoadImage: timeout",!1,e),ce.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function qc(t,e,n,r,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(r)}catch{}}function Yu(t){this.l=t.ac||null,this.j=t.jb||!1}Rt(Yu,Ny);Yu.prototype.g=function(){return new If(this.l,this.j)};Yu.prototype.i=function(t){return function(){return t}}({});function If(t,e){yt.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=$y,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Rt(If,yt);var $y=0;se=If.prototype;se.open=function(t,e){if(this.readyState!=$y)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,wu(this)};se.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||ce).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))};se.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Xu(this)),this.readyState=$y};se.Wa=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,wu(this)),this.g&&(this.readyState=3,wu(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof ce.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;xb(this)}else t.text().then(this.Va.bind(this),this.ga.bind(this))};function xb(t){t.j.read().then(t.Ta.bind(t)).catch(t.ga.bind(t))}se.Ta=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Xu(this):wu(this),this.readyState==3&&xb(this)}};se.Va=function(t){this.g&&(this.response=this.responseText=t,Xu(this))};se.Ua=function(t){this.g&&(this.response=t,Xu(this))};se.ga=function(){this.g&&Xu(this)};function Xu(t){t.readyState=4,t.l=null,t.j=null,t.A=null,wu(t)}se.setRequestHeader=function(t,e){this.v.append(t,e)};se.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};se.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function wu(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(If.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var Dj=ce.JSON.parse;function Ke(t){yt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kb,this.K=this.L=!1}Rt(Ke,yt);var kb="",Aj=/^https?$/i,Oj=["POST","PUT"];se=Ke.prototype;se.Ka=function(t){this.L=t};se.da=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():_g.g(),this.C=this.u?lS(this.u):lS(_g),this.g.onreadystatechange=Vt(this.Ha,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(i){hS(this,i);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const i of r.keys())n.set(i,r.get(i));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(i=>i.toLowerCase()=="content-type"),s=ce.FormData&&t instanceof ce.FormData,!(0<=V1(Oj,e))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Cb(this),0<this.B&&((this.K=Mj(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vt(this.qa,this)):this.A=Ry(this.qa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(i){hS(this,i)}};function Mj(t){return ra&&JV()&&typeof t.timeout=="number"&&t.ontimeout!==void 0}se.qa=function(){typeof Ey<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bt(this,"timeout"),this.abort(8))};function hS(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Tb(t),xf(t)}function Tb(t){t.D||(t.D=!0,bt(t,"complete"),bt(t,"error"))}se.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,bt(this,"complete"),bt(this,"abort"),xf(this))};se.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),xf(this,!0)),Ke.X.M.call(this)};se.Ha=function(){this.s||(this.F||this.v||this.l?bb(this):this.fb())};se.fb=function(){bb(this)};function bb(t){if(t.h&&typeof Ey<"u"&&(!t.C[1]||Dr(t)!=4||t.aa()!=2)){if(t.v&&Dr(t)==4)Ry(t.Ha,0,t);else if(bt(t,"readystatechange"),Dr(t)==4){t.h=!1;try{const a=t.aa();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=a===0){var s=String(t.H).match(mb)[1]||null;if(!s&&ce.self&&ce.self.location){var i=ce.self.location.protocol;s=i.substr(0,i.length-1)}r=!Aj.test(s?s.toLowerCase():"")}n=r}if(n)bt(t,"complete"),bt(t,"success");else{t.m=6;try{var o=2<Dr(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.aa()+"]",Tb(t)}}finally{xf(t)}}}}function xf(t,e){if(t.g){Cb(t);const n=t.g,r=t.C[0]?rd:null;t.g=null,t.C=null,e||bt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Cb(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(ce.clearTimeout(t.A),t.A=null)}function Dr(t){return t.g?t.g.readyState:0}se.aa=function(){try{return 2<Dr(this)?this.g.status:-1}catch{return-1}};se.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}};se.Sa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),Dj(e)}};function dS(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case kb:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}se.Ea=function(){return this.m};se.Oa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Lb(t){let e="";return xy(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Uy(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Lb(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):$e(t,e,n))}function nl(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Pb(t){this.Ca=0,this.i=[],this.j=new vf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=nl("failFast",!1,t),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=nl("baseRetryDelayMs",5e3,t),this.bb=nl("retryDelaySeedMs",1e4,t),this.$a=nl("forwardChannelMaxRetries",2,t),this.ta=nl("forwardChannelRequestTimeoutMs",2e4,t),this.ra=t&&t.xmlHttpFactory||void 0,this.Da=t&&t.Zb||!1,this.J=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.I="",this.h=new wb(t&&t.concurrentRequestLimit),this.Fa=new Pj,this.O=t&&t.fastHandshake||!1,this.N=t&&t.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=t&&t.Xb||!1,t&&t.Aa&&this.j.Aa(),t&&t.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&t&&t.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}se=Pb.prototype;se.ma=8;se.G=1;function Fy(t){if(Rb(t),t.G==3){var e=t.U++,n=qr(t.F);$e(n,"SID",t.I),$e(n,"RID",e),$e(n,"TYPE","terminate"),Zu(t,n),e=new Ku(t,t.j,e,void 0),e.K=2,e.v=Sf(qr(n)),n=!1,ce.navigator&&ce.navigator.sendBeacon&&(n=ce.navigator.sendBeacon(e.v.toString(),"")),!n&&ce.Image&&(new Image().src=e.v,n=!0),n||(e.g=Fb(e.l,null),e.g.da(e.v)),e.F=Date.now(),Qu(e)}$b(t)}function kf(t){t.g&&(Vy(t),t.g.cancel(),t.g=null)}function Rb(t){kf(t),t.u&&(ce.clearTimeout(t.u),t.u=null),ud(t),t.h.cancel(),t.m&&(typeof t.m=="number"&&ce.clearTimeout(t.m),t.m=null)}function Tf(t){_b(t.h)||t.m||(t.m=!0,J1(t.Ja,t),t.C=0)}function $j(t,e){return Eb(t.h)>=t.h.j-(t.m?1:0)?!1:t.m?(t.i=e.D.concat(t.i),!0):t.G==1||t.G==2||t.C>=(t.Za?0:t.$a)?!1:(t.m=Hu(Vt(t.Ja,t,e),Mb(t,t.C)),t.C++,!0)}se.Ja=function(t){if(this.m)if(this.m=null,this.G==1){if(!t){this.U=Math.floor(1e5*Math.random()),t=this.U++;const s=new Ku(this,this.j,t,void 0);let i=this.s;if(this.S&&(i?(i=W1(i),H1(i,this.S)):i=this.S),this.o!==null||this.N||(s.H=i,i=null),this.O)e:{for(var e=0,n=0;n<this.i.length;n++){t:{var r=this.i[n];if("__data__"in r.g&&(r=r.g.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.i.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Nb(this,s,e),n=qr(this.F),$e(n,"RID",t),$e(n,"CVER",22),this.D&&$e(n,"X-HTTP-Session-Id",this.D),Zu(this,n),i&&(this.N?e="headers="+encodeURIComponent(String(Lb(i)))+"&"+e:this.o&&Uy(n,this.o,i)),Oy(this.h,s),this.Ya&&$e(n,"TYPE","init"),this.O?($e(n,"$req",e),$e(n,"SID","null"),s.Z=!0,Sg(s,n,null)):Sg(s,n,e),this.G=2}}else this.G==3&&(t?fS(this,t):this.i.length==0||_b(this.h)||fS(this))};function fS(t,e){var n;e?n=e.m:n=t.U++;const r=qr(t.F);$e(r,"SID",t.I),$e(r,"RID",n),$e(r,"AID",t.T),Zu(t,r),t.o&&t.s&&Uy(r,t.o,t.s),n=new Ku(t,t.j,n,t.C+1),t.o===null&&(n.H=t.s),e&&(t.i=e.D.concat(t.i)),e=Nb(t,n,1e3),n.setTimeout(Math.round(.5*t.ta)+Math.round(.5*t.ta*Math.random())),Oy(t.h,n),Sg(n,r,e)}function Zu(t,e){t.ia&&xy(t.ia,function(n,r){$e(e,r,n)}),t.l&&pb({},function(n,r){$e(e,r,n)})}function Nb(t,e,n){n=Math.min(t.i.length,n);var r=t.l?Vt(t.l.Ra,t.l,t):null;e:{var s=t.i;let i=-1;for(;;){const o=["count="+n];i==-1?0<n?(i=s[0].h,o.push("ofs="+i)):i=0:o.push("ofs="+i);let a=!0;for(let l=0;l<n;l++){let u=s[l].h;const c=s[l].g;if(u-=i,0>u)i=Math.max(0,s[l].h-100),a=!1;else try{Rj(c,o,"req"+u+"_")}catch{r&&r(c)}}if(a){r=o.join("&");break e}}}return t=t.i.splice(0,n),e.D=t,r}function Db(t){t.g||t.u||(t.Z=1,J1(t.Ia,t),t.A=0)}function By(t){return t.g||t.u||3<=t.A?!1:(t.Z++,t.u=Hu(Vt(t.Ia,t),Mb(t,t.A)),t.A++,!0)}se.Ia=function(){if(this.u=null,Ab(this),this.$&&!(this.K||this.g==null||0>=this.P)){var t=2*this.P;this.j.info("BP detection timer enabled: "+t),this.B=Hu(Vt(this.eb,this),t)}};se.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Qt(10),kf(this),Ab(this))};function Vy(t){t.B!=null&&(ce.clearTimeout(t.B),t.B=null)}function Ab(t){t.g=new Ku(t,t.j,"rpc",t.Z),t.o===null&&(t.g.H=t.s),t.g.N=0;var e=qr(t.sa);$e(e,"RID","rpc"),$e(e,"SID",t.I),$e(e,"CI",t.L?"0":"1"),$e(e,"AID",t.T),$e(e,"TYPE","xmlhttp"),Zu(t,e),t.o&&t.s&&Uy(e,t.o,t.s),t.J&&t.g.setTimeout(t.J);var n=t.g;t=t.ka,n.K=1,n.v=Sf(qr(e)),n.s=null,n.P=!0,cb(n,t)}se.cb=function(){this.v!=null&&(this.v=null,kf(this),By(this),Qt(19))};function ud(t){t.v!=null&&(ce.clearTimeout(t.v),t.v=null)}function Ob(t,e){var n=null;if(t.g==e){ud(t),Vy(t),t.g=null;var r=2}else if(xg(t.h,e))n=e.D,Sb(t.h,e),r=1;else return;if(t.G!=0){if(t.pa=e.Y,e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.F;var s=t.C;r=yf(),bt(r,new ob(r,n)),Tf(t)}else Db(t);else if(s=e.o,s==3||s==0&&0<t.pa||!(r==1&&$j(t,e)||r==2&&By(t)))switch(n&&0<n.length&&(e=t.h,e.i=e.i.concat(n)),s){case 1:yi(t,5);break;case 4:yi(t,10);break;case 3:yi(t,6);break;default:yi(t,2)}}}function Mb(t,e){let n=t.Xa+Math.floor(Math.random()*t.bb);return t.l||(n*=2),n*e}function yi(t,e){if(t.j.info("Error code "+e),e==2){var n=null;t.l&&(n=null);var r=Vt(t.kb,t);n||(n=new Ci("//www.google.com/images/cleardot.gif"),ce.location&&ce.location.protocol=="http"||ad(n,"https"),Sf(n)),Nj(n.toString(),r)}else Qt(2);t.G=0,t.l&&t.l.va(e),$b(t),Rb(t)}se.kb=function(t){t?(this.j.info("Successfully pinged google.com"),Qt(2)):(this.j.info("Failed to ping google.com"),Qt(1))};function $b(t){if(t.G=0,t.la=[],t.l){const e=Ib(t.h);(e.length!=0||t.i.length!=0)&&(nS(t.la,e),nS(t.la,t.i),t.h.i.length=0,Sy(t.i),t.i.length=0),t.l.ua()}}function Ub(t,e,n){var r=n instanceof Ci?qr(n):new Ci(n,void 0);if(r.g!="")e&&(r.g=e+"."+r.g),ld(r,r.m);else{var s=ce.location;r=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var i=new Ci(null,void 0);r&&ad(i,r),e&&(i.g=e),s&&ld(i,s),n&&(i.l=n),r=i}return n=t.D,e=t.za,n&&e&&$e(r,n,e),$e(r,"VER",t.ma),Zu(t,r),r}function Fb(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Da&&!t.ra?new Ke(new Yu({jb:!0})):new Ke(t.ra),e.Ka(t.H),e}function Bb(){}se=Bb.prototype;se.xa=function(){};se.wa=function(){};se.va=function(){};se.ua=function(){};se.Ra=function(){};function cd(){if(ra&&!(10<=Number(ej)))throw Error("Environmental error: no available transport.")}cd.prototype.g=function(t,e){return new In(t,e)};function In(t,e){yt.call(this),this.g=new Pb(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.S=t,(t=e&&e.Yb)&&!sd(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!sd(e)&&(this.g.D=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Pa(this)}Rt(In,yt);In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;Qt(0),t.V=e,t.ia=n||{},t.L=t.Y,t.F=Ub(t,null,t.V),Tf(t)};In.prototype.close=function(){Fy(this.g)};In.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Ly(t),t=n);e.i.push(new Cj(e.ab++,t)),e.G==3&&Tf(e)};In.prototype.M=function(){this.g.l=null,delete this.j,Fy(this.g),delete this.g,In.X.M.call(this)};function Vb(t){Dy.call(this);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}Rt(Vb,Dy);function jb(){Ay.call(this),this.status=1}Rt(jb,Ay);function Pa(t){this.g=t}Rt(Pa,Bb);Pa.prototype.xa=function(){bt(this.g,"a")};Pa.prototype.wa=function(t){bt(this.g,new Vb(t))};Pa.prototype.va=function(t){bt(this.g,new jb)};Pa.prototype.ua=function(){bt(this.g,"b")};cd.prototype.createWebChannel=cd.prototype.g;In.prototype.send=In.prototype.u;In.prototype.open=In.prototype.m;In.prototype.close=In.prototype.close;wf.NO_ERROR=0;wf.TIMEOUT=8;wf.HTTP_ERROR=6;ab.COMPLETE="complete";lb.EventType=Gu;Gu.OPEN="a";Gu.CLOSE="b";Gu.ERROR="c";Gu.MESSAGE="d";yt.prototype.listen=yt.prototype.N;Ke.prototype.listenOnce=Ke.prototype.O;Ke.prototype.getLastError=Ke.prototype.Oa;Ke.prototype.getLastErrorCode=Ke.prototype.Ea;Ke.prototype.getStatus=Ke.prototype.aa;Ke.prototype.getResponseJson=Ke.prototype.Sa;Ke.prototype.getResponseText=Ke.prototype.fa;Ke.prototype.send=Ke.prototype.da;Ke.prototype.setWithCredentials=Ke.prototype.Ka;var Uj=function(){return new cd},Fj=function(){return yf()},Gp=wf,Bj=ab,Vj=eo,pS={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},jj=Yu,Wc=lb,zj=Ke;const mS="@firebase/firestore";class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");let Ra="9.15.0";const Ns=new Qd("@firebase/firestore");function kg(){return Ns.logLevel}function qj(t){Ns.setLogLevel(t)}function z(t,...e){if(Ns.logLevel<=Se.DEBUG){const n=e.map(jy);Ns.debug(`Firestore (${Ra}): ${t}`,...n)}}function Je(t,...e){if(Ns.logLevel<=Se.ERROR){const n=e.map(jy);Ns.error(`Firestore (${Ra}): ${t}`,...n)}}function sa(t,...e){if(Ns.logLevel<=Se.WARN){const n=e.map(jy);Ns.warn(`Firestore (${Ra}): ${t}`,...n)}}function jy(t){if(typeof t=="string")return t;try{return e=t,JSON.stringify(e)}catch{return t}var e}function J(t="Unexpected state"){const e=`FIRESTORE (${Ra}) INTERNAL ASSERTION FAILED: `+t;throw Je(e),new Error(e)}function ie(t,e){t||J()}function Wj(t,e){t||J()}function Z(t,e){return t}const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class j extends Bt{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class gt{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class zb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Hj{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class Gj{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Kj{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const s=l=>this.i!==r?(r=this.i,n(l)):Promise.resolve();let i=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new gt,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new gt)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new zb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new ft(e)}}class Qj{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(ie(!(typeof this.h!="object"||this.h===null||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Yj{constructor(e,n,r,s){this.h=e,this.l=n,this.m=r,this.g=s}getToken(){return Promise.resolve(new Qj(this.h,this.l,this.m,this.g))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Xj{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zj{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,n){const r=i=>{i.error!=null&&z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.A;return this.A=i.token,z("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.appCheck.addTokenListener(this.o)};this.T.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.T.getImmediate({optional:!0});i?s(i):z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ie(typeof n.token=="string"),this.A=n.token,new Xj(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Jj(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}class qb{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Jj(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function de(t,e){return t<e?-1:t>e?1:0}function ia(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}function Wb(t){return t+"\0"}class Fe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new j(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new j(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new j(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new j(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Fe.fromMillis(Date.now())}static fromDate(e){return Fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Fe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?de(this.nanoseconds,e.nanoseconds):de(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class oe{constructor(e){this.timestamp=e}static fromTimestamp(e){return new oe(e)}static min(){return new oe(new Fe(0,0))}static max(){return new oe(new Fe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class _u{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return _u.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof _u?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ee extends _u{construct(e,n,r){return new Ee(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new j(D.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ee(n)}static emptyPath(){return new Ee([])}}const ez=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends _u{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return ez.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new j(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new j(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new j(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new j(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}class X{constructor(e){this.path=e}static fromPath(e){return new X(Ee.fromString(e))}static fromName(e){return new X(Ee.fromString(e).popFirst(5))}static empty(){return new X(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ee.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ee(e.slice()))}}class Hb{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}function Tg(t){return t.fields.find(e=>e.kind===2)}function oi(t){return t.fields.filter(e=>e.kind!==2)}Hb.UNKNOWN_ID=-1;class tz{constructor(e,n){this.fieldPath=e,this.kind=n}}class hd{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new hd(0,xn.min())}}function Gb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new Fe(n+1,0):new Fe(n,r));return new xn(s,X.empty(),e)}function Kb(t){return new xn(t.readTime,t.key,-1)}class xn{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new xn(oe.min(),X.empty(),-1)}static max(){return new xn(oe.max(),X.empty(),-1)}}function zy(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:de(t.largestBatchId,e.largestBatchId))}const Qb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Yb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Qs(t){if(t.code!==D.FAILED_PRECONDITION||t.message!==Qb)throw t;z("LocalStore","Unexpectedly lost primary lease")}class N{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new N((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof N?n:N.resolve(n)}catch(n){return N.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):N.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):N.reject(n)}static resolve(e){return new N((n,r)=>{n(e)})}static reject(e){return new N((n,r)=>{r(e)})}static waitFor(e){return new N((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},l=>r(l))}),o=!0,i===s&&n()})}static or(e){let n=N.resolve(!1);for(const r of e)n=n.next(s=>s?N.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new N((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;n(e[u]).next(c=>{o[u]=c,++a,a===i&&r(o)},c=>s(c))}})}static doWhile(e,n){return new N((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}class bf{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.P=new gt,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{n.error?this.P.reject(new $l(e,n.error)):this.P.resolve()},this.transaction.onerror=r=>{const s=qy(r.target.error);this.P.reject(new $l(e,s))}}static open(e,n,r,s){try{return new bf(n,e.transaction(s,r))}catch(i){throw new $l(n,i)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new rz(n)}}class Hn{constructor(e,n,r){this.name=e,this.version=n,this.S=r,Hn.D(ze())===12.2&&Je("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return z("SimpleDb","Removing database:",e),ai(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!au())return!1;if(Hn.N())return!0;const e=ze(),n=Hn.D(e),r=0<n&&n<10,s=Hn.k(e),i=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||i)}static N(){var e;return typeof process<"u"&&((e=process.env)===null||e===void 0?void 0:e.O)==="YES"}static M(e,n){return e.store(n)}static D(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async F(e){return this.db||(z("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const s=indexedDB.open(this.name,this.version);s.onsuccess=i=>{const o=i.target.result;n(o)},s.onblocked=()=>{r(new $l(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=i=>{const o=i.target.error;o.name==="VersionError"?r(new j(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?r(new j(D.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):r(new $l(e,o))},s.onupgradeneeded=i=>{z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',i.oldVersion);const o=i.target.result;this.S.$(o,s.transaction,i.oldVersion,this.version).next(()=>{z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,s){const i=n==="readonly";let o=0;for(;;){++o;try{this.db=await this.F(e);const a=bf.open(this.db,e,i?"readonly":"readwrite",r),l=s(a).next(u=>(a.V(),u)).catch(u=>(a.abort(u),N.reject(u))).toPromise();return l.catch(()=>{}),await a.v,l}catch(a){const l=a,u=l.name!=="FirebaseError"&&o<3;if(z("SimpleDb","Transaction failed with error:",l.message,"Retrying:",u),this.close(),!u)return Promise.reject(l)}}}close(){this.db&&this.db.close(),this.db=void 0}}class nz{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return ai(this.q.delete())}}class $l extends j{constructor(e,n){super(D.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function Ys(t){return t.name==="IndexedDbTransactionError"}class rz{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(z("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ai(r)}add(e){return z("SimpleDb","ADD",this.store.name,e,e),ai(this.store.add(e))}get(e){return ai(this.store.get(e)).next(n=>(n===void 0&&(n=null),z("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return z("SimpleDb","DELETE",this.store.name,e),ai(this.store.delete(e))}count(){return z("SimpleDb","COUNT",this.store.name),ai(this.store.count())}W(e,n){const r=this.options(e,n);if(r.index||typeof this.store.getAll!="function"){const s=this.cursor(r),i=[];return this.H(s,(o,a)=>{i.push(a)}).next(()=>i)}{const s=this.store.getAll(r.range);return new N((i,o)=>{s.onerror=a=>{o(a.target.error)},s.onsuccess=a=>{i(a.target.result)}})}}J(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new N((s,i)=>{r.onerror=o=>{i(o.target.error)},r.onsuccess=o=>{s(o.target.result)}})}Y(e,n){z("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.X=!1;const s=this.cursor(r);return this.H(s,(i,o,a)=>a.delete())}Z(e,n){let r;n?r=e:(r={},n=e);const s=this.cursor(r);return this.H(s,n)}tt(e){const n=this.cursor({});return new N((r,s)=>{n.onerror=i=>{const o=qy(i.target.error);s(o)},n.onsuccess=i=>{const o=i.target.result;o?e(o.primaryKey,o.value).next(a=>{a?o.continue():r()}):r()}})}H(e,n){const r=[];return new N((s,i)=>{e.onerror=o=>{i(o.target.error)},e.onsuccess=o=>{const a=o.target.result;if(!a)return void s();const l=new nz(a),u=n(a.primaryKey,a.value,l);if(u instanceof N){const c=u.catch(h=>(l.done(),N.reject(h)));r.push(c)}l.isDone?s():l.G===null?a.continue():a.continue(l.G)}}).next(()=>N.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ai(t){return new N((e,n)=>{t.onsuccess=r=>{const s=r.target.result;e(s)},t.onerror=r=>{const s=qy(r.target.error);n(s)}})}let gS=!1;function qy(t){const e=Hn.D(ze());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new j("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return gS||(gS=!0,setTimeout(()=>{throw r},0)),r}}return t}class sz{constructor(e,n){this.asyncQueue=e,this.et=n,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}nt(e){z("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{z("IndexBackiller",`Documents written: ${await this.et.st()}`)}catch(n){Ys(n)?z("IndexBackiller","Ignoring IndexedDB error during index backfill: ",n):await Qs(n)}await this.nt(6e4)})}}class iz{constructor(e,n){this.localStore=e,this.persistence=n}async st(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.it(n,e))}it(e,n){const r=new Set;let s=n,i=!0;return N.doWhile(()=>i===!0&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(o=>{if(o!==null&&!r.has(o))return z("IndexBackiller",`Processing collection: ${o}`),this.rt(e,o,s).next(a=>{s-=a,r.add(o)});i=!1})).next(()=>n-s)}rt(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(s=>this.localStore.localDocuments.getNextDocuments(e,n,s,r).next(i=>{const o=i.changes;return this.localStore.indexManager.updateIndexEntries(e,o).next(()=>this.ot(s,i)).next(a=>(z("IndexBackiller",`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>o.size)}))}ot(e,n){let r=e;return n.changes.forEach((s,i)=>{const o=Kb(i);zy(o,r)>0&&(r=o)}),new xn(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}class sn{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ut(r),this.ct=r=>n.writeSequenceNumber(r))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}sn.at=-1;class oz{constructor(e,n,r,s,i,o,a,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.useFetchStreams=l}}class Ds{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ds("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ds&&e.projectId===this.projectId&&e.database===this.database}}function vS(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function to(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Xb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ju(t){return t==null}function Eu(t){return t===0&&1/t==-1/0}function Zb(t){return typeof t=="number"&&Number.isInteger(t)&&!Eu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}function az(){return typeof atob<"u"}class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new ut(n)}static fromUint8Array(e){const n=function(r){let s="";for(let i=0;i<r.length;++i)s+=String.fromCharCode(r[i]);return s}(e);return new ut(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return de(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const lz=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(t){if(ie(!!t),typeof t=="string"){let e=0;const n=lz.exec(t);if(ie(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:He(t.seconds),nanos:He(t.nanos)}}function He(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fi(t){return typeof t=="string"?ut.fromBase64String(t):ut.fromUint8Array(t)}function Wy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Jb(t){const e=t.mapValue.fields.__previous_value__;return Wy(e)?Jb(e):e}function Su(t){const e=As(t.mapValue.fields.__local_write_time__.timestampValue);return new Fe(e.seconds,e.nanos)}const gs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},mh={nullValue:"NULL_VALUE"};function Bi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Wy(t)?4:eC(t)?9007199254740991:10:J()}function _r(t,e){if(t===e)return!0;const n=Bi(t);if(n!==Bi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Su(t).isEqual(Su(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const i=As(r.timestampValue),o=As(s.timestampValue);return i.seconds===o.seconds&&i.nanos===o.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(r,s){return Fi(r.bytesValue).isEqual(Fi(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(r,s){return He(r.geoPointValue.latitude)===He(s.geoPointValue.latitude)&&He(r.geoPointValue.longitude)===He(s.geoPointValue.longitude)}(t,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return He(r.integerValue)===He(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const i=He(r.doubleValue),o=He(s.doubleValue);return i===o?Eu(i)===Eu(o):isNaN(i)&&isNaN(o)}return!1}(t,e);case 9:return ia(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:return function(r,s){const i=r.mapValue.fields||{},o=s.mapValue.fields||{};if(vS(i)!==vS(o))return!1;for(const a in i)if(i.hasOwnProperty(a)&&(o[a]===void 0||!_r(i[a],o[a])))return!1;return!0}(t,e);default:return J()}}function Iu(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function Os(t,e){if(t===e)return 0;const n=Bi(t),r=Bi(e);if(n!==r)return de(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return de(t.booleanValue,e.booleanValue);case 2:return function(s,i){const o=He(s.integerValue||s.doubleValue),a=He(i.integerValue||i.doubleValue);return o<a?-1:o>a?1:o===a?0:isNaN(o)?isNaN(a)?0:-1:1}(t,e);case 3:return yS(t.timestampValue,e.timestampValue);case 4:return yS(Su(t),Su(e));case 5:return de(t.stringValue,e.stringValue);case 6:return function(s,i){const o=Fi(s),a=Fi(i);return o.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,i){const o=s.split("/"),a=i.split("/");for(let l=0;l<o.length&&l<a.length;l++){const u=de(o[l],a[l]);if(u!==0)return u}return de(o.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,i){const o=de(He(s.latitude),He(i.latitude));return o!==0?o:de(He(s.longitude),He(i.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,i){const o=s.values||[],a=i.values||[];for(let l=0;l<o.length&&l<a.length;++l){const u=Os(o[l],a[l]);if(u)return u}return de(o.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,i){if(s===gs.mapValue&&i===gs.mapValue)return 0;if(s===gs.mapValue)return 1;if(i===gs.mapValue)return-1;const o=s.fields||{},a=Object.keys(o),l=i.fields||{},u=Object.keys(l);a.sort(),u.sort();for(let c=0;c<a.length&&c<u.length;++c){const h=de(a[c],u[c]);if(h!==0)return h;const f=Os(o[a[c]],l[u[c]]);if(f!==0)return f}return de(a.length,u.length)}(t.mapValue,e.mapValue);default:throw J()}}function yS(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return de(t,e);const n=As(t),r=As(e),s=de(n.seconds,r.seconds);return s!==0?s:de(n.nanos,r.nanos)}function oa(t){return bg(t)}function bg(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const s=As(r);return`time(${s.seconds},${s.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Fi(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,X.fromName(n).toString()):"geoPointValue"in t?`geo(${(e=t.geoPointValue).latitude},${e.longitude})`:"arrayValue"in t?function(r){let s="[",i=!0;for(const o of r.values||[])i?i=!1:s+=",",s+=bg(o);return s+"]"}(t.arrayValue):"mapValue"in t?function(r){const s=Object.keys(r.fields||{}).sort();let i="{",o=!0;for(const a of s)o?o=!1:i+=",",i+=`${a}:${bg(r.fields[a])}`;return i+"}"}(t.mapValue):J();var e,n}function Vi(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Cg(t){return!!t&&"integerValue"in t}function xu(t){return!!t&&"arrayValue"in t}function wS(t){return!!t&&"nullValue"in t}function _S(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gh(t){return!!t&&"mapValue"in t}function Ul(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return to(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ul(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ul(t.arrayValue.values[n]);return e}return Object.assign({},t)}function eC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function uz(t){return"nullValue"in t?mh:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?Vi(Ds.empty(),X.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:J()}function cz(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?Vi(Ds.empty(),X.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?gs:J()}function ES(t,e){const n=Os(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function SS(t,e){const n=Os(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}class Ms{constructor(e,n){this.position=e,this.inclusive=n}}function IS(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Os(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function xS(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}class tC{}class ye extends tC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hz(e,n,r):n==="array-contains"?new pz(e,r):n==="in"?new uC(e,r):n==="not-in"?new mz(e,r):n==="array-contains-any"?new gz(e,r):new ye(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dz(e,r):new fz(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Os(n,this.value)):n!==null&&Bi(this.value)===Bi(n)&&this.matchesComparison(Os(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Te extends tC{constructor(e,n){super(),this.filters=e,this.op=n,this.ht=null}static create(e,n){return new Te(e,n)}matches(e){return aa(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ht!==null||(this.ht=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(n=>n.isInequality());return e!==null?e.field:null}lt(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function aa(t){return t.op==="and"}function Lg(t){return t.op==="or"}function nC(t){return rC(t)&&aa(t)}function rC(t){for(const e of t.filters)if(e instanceof Te)return!1;return!0}function sC(t){if(t instanceof ye)return t.field.canonicalString()+t.op.toString()+oa(t.value);{const e=t.filters.map(n=>sC(n)).join(",");return`${t.op}(${e})`}}function iC(t,e){return t instanceof ye?function(n,r){return r instanceof ye&&n.op===r.op&&n.field.isEqual(r.field)&&_r(n.value,r.value)}(t,e):t instanceof Te?function(n,r){return r instanceof Te&&n.op===r.op&&n.filters.length===r.filters.length?n.filters.reduce((s,i,o)=>s&&iC(i,r.filters[o]),!0):!1}(t,e):void J()}function oC(t,e){const n=t.filters.concat(e);return Te.create(n,t.op)}function aC(t){return t instanceof ye?function(e){return`${e.field.canonicalString()} ${e.op} ${oa(e.value)}`}(t):t instanceof Te?function(e){return e.op.toString()+" {"+e.getFilters().map(aC).join(" ,")+"}"}(t):"Filter"}class hz extends ye{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class dz extends ye{constructor(e,n){super(e,"in",n),this.keys=lC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class fz extends ye{constructor(e,n){super(e,"not-in",n),this.keys=lC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function lC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class pz extends ye{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return xu(n)&&Iu(n.arrayValue,this.value)}}class uC extends ye{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Iu(this.value.arrayValue,n)}}class mz extends ye{constructor(e,n){super(e,"not-in",n)}matches(e){if(Iu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Iu(this.value.arrayValue,n)}}class gz extends ye{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!xu(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Iu(this.value.arrayValue,r))}}class Wo{constructor(e,n="asc"){this.field=e,this.dir=n}}function vz(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}class Qe{constructor(e,n){this.comparator=e,this.root=n||It.EMPTY}insert(e,n){return new Qe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,It.BLACK,null,null))}remove(e){return new Qe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,It.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hc(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hc(this.root,e,this.comparator,!0)}}class Hc{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class It{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??It.RED,this.left=s??It.EMPTY,this.right=i??It.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new It(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return It.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return It.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}It.EMPTY=null,It.RED=!0,It.BLACK=!1;It.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(t,e,n,r,s){return this}insert(t,e,n){return new It(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Le{constructor(e){this.comparator=e,this.data=new Qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new kS(this.data.getIterator())}getIteratorFrom(e){return new kS(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class kS{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function po(t){return t.hasNext()?t.getNext():void 0}class _n{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new _n([])}unionWith(e){let n=new Le(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new _n(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ia(this.fields,e.fields,(n,r)=>n.isEqual(r))}}class xt{constructor(e){this.value=e}static empty(){return new xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ul(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const l=this.getFieldsMap(n);this.applyChanges(l,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=Ul(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());gh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gh(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){to(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new xt(Ul(this.value))}}function cC(t){const e=[];return to(t.fields,(n,r)=>{const s=new et([n]);if(gh(r)){const i=cC(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new _n(e)}class De{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new De(e,0,oe.min(),oe.min(),oe.min(),xt.empty(),0)}static newFoundDocument(e,n,r,s){return new De(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new De(e,2,n,oe.min(),oe.min(),xt.empty(),0)}static newUnknownDocument(e,n){return new De(e,3,n,oe.min(),oe.min(),xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof De&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new De(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yz{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ft=null}}function Pg(t,e=null,n=[],r=[],s=null,i=null,o=null){return new yz(t,e,n,r,s,i,o)}function ji(t){const e=Z(t);if(e.ft===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>sC(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),Ju(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oa(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oa(r)).join(",")),e.ft=n}return e.ft}function ec(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vz(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!iC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!xS(t.startAt,e.startAt)&&xS(t.endAt,e.endAt)}function dd(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function fd(t,e){return t.filters.filter(n=>n instanceof ye&&n.field.isEqual(e))}function TS(t,e,n){let r=mh,s=!0;for(const i of fd(t,e)){let o=mh,a=!0;switch(i.op){case"<":case"<=":o=uz(i.value);break;case"==":case"in":case">=":o=i.value;break;case">":o=i.value,a=!1;break;case"!=":case"not-in":o=mh}ES({value:r,inclusive:s},{value:o,inclusive:a})<0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];ES({value:r,inclusive:s},{value:o,inclusive:n.inclusive})<0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}function bS(t,e,n){let r=gs,s=!0;for(const i of fd(t,e)){let o=gs,a=!0;switch(i.op){case">=":case">":o=cz(i.value),a=!1;break;case"==":case"in":case"<=":o=i.value;break;case"<":o=i.value,a=!1;break;case"!=":case"not-in":o=gs}SS({value:r,inclusive:s},{value:o,inclusive:a})>0&&(r=o,s=a)}if(n!==null){for(let i=0;i<t.orderBy.length;++i)if(t.orderBy[i].field.isEqual(e)){const o=n.position[i];SS({value:r,inclusive:s},{value:o,inclusive:n.inclusive})>0&&(r=o,s=n.inclusive);break}}return{value:r,inclusive:s}}class Xr{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.dt=null,this._t=null,this.startAt,this.endAt}}function hC(t,e,n,r,s,i,o,a){return new Xr(t,e,n,r,s,i,o,a)}function Na(t){return new Xr(t)}function CS(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Hy(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Cf(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function Gy(t){return t.collectionGroup!==null}function Li(t){const e=Z(t);if(e.dt===null){e.dt=[];const n=Cf(e),r=Hy(e);if(n!==null&&r===null)n.isKeyField()||e.dt.push(new Wo(n)),e.dt.push(new Wo(et.keyField(),"asc"));else{let s=!1;for(const i of e.explicitOrderBy)e.dt.push(i),i.field.isKeyField()&&(s=!0);if(!s){const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Wo(et.keyField(),i))}}}return e.dt}function cn(t){const e=Z(t);if(!e._t)if(e.limitType==="F")e._t=Pg(e.path,e.collectionGroup,Li(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const i of Li(e)){const o=i.dir==="desc"?"asc":"desc";n.push(new Wo(i.field,o))}const r=e.endAt?new Ms(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Ms(e.startAt.position,e.startAt.inclusive):null;e._t=Pg(e.path,e.collectionGroup,n,e.filters,e.limit,r,s)}return e._t}function Rg(t,e){e.getFirstInequalityField(),Cf(t);const n=t.filters.concat([e]);return new Xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function pd(t,e,n){return new Xr(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function tc(t,e){return ec(cn(t),cn(e))&&t.limitType===e.limitType}function dC(t){return`${ji(cn(t))}|lt:${t.limitType}`}function Ng(t){return`Query(target=${function(e){let n=e.path.canonicalString();return e.collectionGroup!==null&&(n+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(n+=`, filters: [${e.filters.map(r=>aC(r)).join(", ")}]`),Ju(e.limit)||(n+=", limit: "+e.limit),e.orderBy.length>0&&(n+=`, orderBy: [${e.orderBy.map(r=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(r)).join(", ")}]`),e.startAt&&(n+=", startAt: ",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>oa(r)).join(",")),e.endAt&&(n+=", endAt: ",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>oa(r)).join(",")),`Target(${n})`}(cn(t))}; limitType=${t.limitType})`}function Ky(t,e){return e.isFoundDocument()&&function(n,r){const s=r.key.path;return n.collectionGroup!==null?r.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(s):X.isDocumentKey(n.path)?n.path.isEqual(s):n.path.isImmediateParentOf(s)}(t,e)&&function(n,r){for(const s of Li(n))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(t,e)&&function(n,r){for(const s of n.filters)if(!s.matches(r))return!1;return!0}(t,e)&&function(n,r){return!(n.startAt&&!function(s,i,o){const a=IS(s,i,o);return s.inclusive?a<=0:a<0}(n.startAt,Li(n),r)||n.endAt&&!function(s,i,o){const a=IS(s,i,o);return s.inclusive?a>=0:a>0}(n.endAt,Li(n),r))}(t,e)}function fC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function pC(t){return(e,n)=>{let r=!1;for(const s of Li(t)){const i=wz(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wz(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(s,i,o){const a=i.data.field(s),l=o.data.field(s);return a!==null&&l!==null?Os(a,l):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}function mC(t,e){if(t.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Eu(e)?"-0":e}}function gC(t){return{integerValue:""+t}}function vC(t,e){return Zb(e)?gC(e):mC(t,e)}class Lf{constructor(){this._=void 0}}function _z(t,e,n){return t instanceof la?function(r,s){const i={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&(i.fields.__previous_value__=s),{mapValue:i}}(n,e):t instanceof zi?wC(t,e):t instanceof qi?_C(t,e):function(r,s){const i=yC(r,s),o=LS(i)+LS(r.gt);return Cg(i)&&Cg(r.gt)?gC(o):mC(r.yt,o)}(t,e)}function Ez(t,e,n){return t instanceof zi?wC(t,e):t instanceof qi?_C(t,e):n}function yC(t,e){return t instanceof ua?Cg(n=e)||function(r){return!!r&&"doubleValue"in r}(n)?e:{integerValue:0}:null;var n}class la extends Lf{}class zi extends Lf{constructor(e){super(),this.elements=e}}function wC(t,e){const n=EC(e);for(const r of t.elements)n.some(s=>_r(s,r))||n.push(r);return{arrayValue:{values:n}}}class qi extends Lf{constructor(e){super(),this.elements=e}}function _C(t,e){let n=EC(e);for(const r of t.elements)n=n.filter(s=>!_r(s,r));return{arrayValue:{values:n}}}class ua extends Lf{constructor(e,n){super(),this.yt=e,this.gt=n}}function LS(t){return He(t.integerValue||t.doubleValue)}function EC(t){return xu(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}class nc{constructor(e,n){this.field=e,this.transform=n}}function Sz(t,e){return t.field.isEqual(e.field)&&function(n,r){return n instanceof zi&&r instanceof zi||n instanceof qi&&r instanceof qi?ia(n.elements,r.elements,_r):n instanceof ua&&r instanceof ua?_r(n.gt,r.gt):n instanceof la&&r instanceof la}(t.transform,e.transform)}class Iz{constructor(e,n){this.version=e,this.transformResults=n}}class Ue{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ue}static exists(e){return new Ue(void 0,e)}static updateTime(e){return new Ue(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function vh(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Pf{}function SC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Aa(t.key,Ue.none()):new Da(t.key,t.data,Ue.none());{const n=t.data,r=xt.empty();let s=new Le(et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Zr(t.key,r,new _n(s.toArray()),Ue.none())}}function xz(t,e,n){t instanceof Da?function(r,s,i){const o=r.value.clone(),a=RS(r.fieldTransforms,s,i.transformResults);o.setAll(a),s.convertToFoundDocument(i.version,o).setHasCommittedMutations()}(t,e,n):t instanceof Zr?function(r,s,i){if(!vh(r.precondition,s))return void s.convertToUnknownDocument(i.version);const o=RS(r.fieldTransforms,s,i.transformResults),a=s.data;a.setAll(IC(r)),a.setAll(o),s.convertToFoundDocument(i.version,a).setHasCommittedMutations()}(t,e,n):function(r,s,i){s.convertToNoDocument(i.version).setHasCommittedMutations()}(0,e,n)}function Fl(t,e,n,r){return t instanceof Da?function(s,i,o,a){if(!vh(s.precondition,i))return o;const l=s.value.clone(),u=NS(s.fieldTransforms,a,i);return l.setAll(u),i.convertToFoundDocument(i.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zr?function(s,i,o,a){if(!vh(s.precondition,i))return o;const l=NS(s.fieldTransforms,a,i),u=i.data;return u.setAll(IC(s)),u.setAll(l),i.convertToFoundDocument(i.version,u).setHasLocalMutations(),o===null?null:o.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(c=>c.field))}(t,e,n,r):function(s,i,o){return vh(s.precondition,i)?(i.convertToNoDocument(i.version).setHasLocalMutations(),null):o}(t,e,n)}function kz(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=yC(r.transform,s||null);i!=null&&(n===null&&(n=xt.empty()),n.set(r.field,i))}return n||null}function PS(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,r){return n===void 0&&r===void 0||!(!n||!r)&&ia(n,r,(s,i)=>Sz(s,i))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Da extends Pf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zr extends Pf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function IC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function RS(t,e,n){const r=new Map;ie(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Ez(o,a,n[s]))}return r}function NS(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,_z(i,o,e))}return r}class Aa extends Pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Qy extends Pf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Tz{constructor(e){this.count=e}}var nt,_e;function xC(t){switch(t){default:return J();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function kC(t){if(t===void 0)return Je("GRPC error has no .code"),D.UNKNOWN;switch(t){case nt.OK:return D.OK;case nt.CANCELLED:return D.CANCELLED;case nt.UNKNOWN:return D.UNKNOWN;case nt.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case nt.INTERNAL:return D.INTERNAL;case nt.UNAVAILABLE:return D.UNAVAILABLE;case nt.UNAUTHENTICATED:return D.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case nt.NOT_FOUND:return D.NOT_FOUND;case nt.ALREADY_EXISTS:return D.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return D.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case nt.ABORTED:return D.ABORTED;case nt.OUT_OF_RANGE:return D.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return D.UNIMPLEMENTED;case nt.DATA_LOSS:return D.DATA_LOSS;default:return J()}}(_e=nt||(nt={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";class Xs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){to(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Xb(this.inner)}size(){return this.innerSize}}const bz=new Qe(X.comparator);function on(){return bz}const TC=new Qe(X.comparator);function wl(...t){let e=TC;for(const n of t)e=e.insert(n.key,n);return e}function bC(t){let e=TC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hr(){return Bl()}function CC(){return Bl()}function Bl(){return new Xs(t=>t.toString(),(t,e)=>t.isEqual(e))}const Cz=new Qe(X.comparator),Lz=new Le(X.comparator);function fe(...t){let e=Lz;for(const n of t)e=e.add(n);return e}const Pz=new Le(de);function Rf(){return Pz}class rc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,sc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new rc(oe.min(),s,Rf(),on(),fe())}}class sc{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new sc(r,n,fe(),fe(),fe())}}class yh{constructor(e,n,r,s){this.It=e,this.removedTargetIds=n,this.key=r,this.Tt=s}}class LC{constructor(e,n){this.targetId=e,this.Et=n}}class PC{constructor(e,n,r=ut.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class DS{constructor(){this.At=0,this.Rt=OS(),this.bt=ut.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return this.At!==0}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=fe(),n=fe(),r=fe();return this.Rt.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J()}}),new sc(this.bt,this.Pt,e,n,r)}xt(){this.vt=!1,this.Rt=OS()}Nt(e,n){this.vt=!0,this.Rt=this.Rt.insert(e,n)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Rz{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=on(),this.qt=AS(),this.Ut=new Le(de)}Kt(e){for(const n of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(n,e.Tt):this.Qt(n,e.key,e.Tt);for(const n of e.removedTargetIds)this.Qt(n,e.key,e.Tt)}jt(e){this.forEachTarget(e,n=>{const r=this.Wt(n);switch(e.state){case 0:this.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(n);break;case 3:this.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(n)&&(this.Ht(n),r.Dt(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Bt.forEach((r,s)=>{this.zt(s)&&n(s)})}Jt(e){const n=e.targetId,r=e.Et.count,s=this.Yt(n);if(s){const i=s.target;if(dd(i))if(r===0){const o=new X(i.path);this.Qt(n,o,De.newNoDocument(o,oe.min()))}else ie(r===1);else this.Xt(n)!==r&&(this.Ht(n),this.Ut=this.Ut.add(n))}}Zt(e){const n=new Map;this.Bt.forEach((i,o)=>{const a=this.Yt(o);if(a){if(i.current&&dd(a.target)){const l=new X(a.target.path);this.Lt.get(l)!==null||this.te(o,l)||this.Qt(o,l,De.newNoDocument(l,e))}i.St&&(n.set(o,i.Ct()),i.xt())}});let r=fe();this.qt.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Yt(l);return!u||u.purpose===2||(a=!1,!1)}),a&&(r=r.add(i))}),this.Lt.forEach((i,o)=>o.setReadTime(e));const s=new rc(e,n,this.Ut,this.Lt,r);return this.Lt=on(),this.qt=AS(),this.Ut=new Le(de),s}Gt(e,n){if(!this.zt(e))return;const r=this.te(e,n.key)?2:0;this.Wt(e).Nt(n.key,r),this.Lt=this.Lt.insert(n.key,n),this.qt=this.qt.insert(n.key,this.ee(n.key).add(e))}Qt(e,n,r){if(!this.zt(e))return;const s=this.Wt(e);this.te(e,n)?s.Nt(n,1):s.kt(n),this.qt=this.qt.insert(n,this.ee(n).delete(e)),r&&(this.Lt=this.Lt.insert(n,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const n=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let n=this.Bt.get(e);return n||(n=new DS,this.Bt.set(e,n)),n}ee(e){let n=this.qt.get(e);return n||(n=new Le(de),this.qt=this.qt.insert(e,n)),n}zt(e){const n=this.Yt(e)!==null;return n||z("WatchChangeAggregator","Detected inactive target",e),n}Yt(e){const n=this.Bt.get(e);return n&&n.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new DS),this.$t.getRemoteKeysForTarget(e).forEach(n=>{this.Qt(e,n,null)})}te(e,n){return this.$t.getRemoteKeysForTarget(e).has(n)}}function AS(){return new Qe(X.comparator)}function OS(){return new Qe(X.comparator)}const Nz=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Dz=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Az=(()=>({and:"AND",or:"OR"}))();class Oz{constructor(e,n){this.databaseId=e,this.wt=n}}function ca(t,e){return t.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function RC(t,e){return t.wt?e.toBase64():e.toUint8Array()}function Mz(t,e){return ca(t,e.toTimestamp())}function tt(t){return ie(!!t),oe.fromTimestamp(function(e){const n=As(e);return new Fe(n.seconds,n.nanos)}(t))}function Yy(t,e){return function(n){return new Ee(["projects",n.projectId,"databases",n.database])}(t).child("documents").child(e).canonicalString()}function NC(t){const e=Ee.fromString(t);return ie(VC(e)),e}function ku(t,e){return Yy(t.databaseId,e.path)}function vr(t,e){const n=NC(e);if(n.get(1)!==t.databaseId.projectId)throw new j(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new j(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(AC(n))}function Dg(t,e){return Yy(t.databaseId,e)}function DC(t){const e=NC(t);return e.length===4?Ee.emptyPath():AC(e)}function Tu(t){return new Ee(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function AC(t){return ie(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function MS(t,e,n){return{name:ku(t,e),fields:n.value.mapValue.fields}}function OC(t,e,n){const r=vr(t,e.name),s=tt(e.updateTime),i=e.createTime?tt(e.createTime):oe.min(),o=new xt({mapValue:{fields:e.fields}}),a=De.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function $z(t,e){return"found"in e?function(n,r){ie(!!r.found),r.found.name,r.found.updateTime;const s=vr(n,r.found.name),i=tt(r.found.updateTime),o=r.found.createTime?tt(r.found.createTime):oe.min(),a=new xt({mapValue:{fields:r.found.fields}});return De.newFoundDocument(s,i,o,a)}(t,e):"missing"in e?function(n,r){ie(!!r.missing),ie(!!r.readTime);const s=vr(n,r.missing),i=tt(r.readTime);return De.newNoDocument(s,i)}(t,e):J()}function Uz(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(l,u){return l.wt?(ie(u===void 0||typeof u=="string"),ut.fromBase64String(u||"")):(ie(u===void 0||u instanceof Uint8Array),ut.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){const u=l.code===void 0?D.UNKNOWN:kC(l.code);return new j(u,l.message||"")}(o);n=new PC(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=vr(t,r.document.name),i=tt(r.document.updateTime),o=r.document.createTime?tt(r.document.createTime):oe.min(),a=new xt({mapValue:{fields:r.document.fields}}),l=De.newFoundDocument(s,i,o,a),u=r.targetIds||[],c=r.removedTargetIds||[];n=new yh(u,c,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=vr(t,r.document),i=r.readTime?tt(r.readTime):oe.min(),o=De.newNoDocument(s,i),a=r.removedTargetIds||[];n=new yh([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=vr(t,r.document),i=r.removedTargetIds||[];n=new yh([],i,s,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const s=r.count||0,i=new Tz(s),o=r.targetId;n=new LC(o,i)}}return n}function bu(t,e){let n;if(e instanceof Da)n={update:MS(t,e.key,e.value)};else if(e instanceof Aa)n={delete:ku(t,e.key)};else if(e instanceof Zr)n={update:MS(t,e.key,e.data),updateMask:qz(e.fieldMask)};else{if(!(e instanceof Qy))return J();n={verify:ku(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,i){const o=i.transform;if(o instanceof la)return{fieldPath:i.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(o instanceof zi)return{fieldPath:i.field.canonicalString(),appendMissingElements:{values:o.elements}};if(o instanceof qi)return{fieldPath:i.field.canonicalString(),removeAllFromArray:{values:o.elements}};if(o instanceof ua)return{fieldPath:i.field.canonicalString(),increment:o.gt};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Mz(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:J()}(t,e.precondition)),n}function Ag(t,e){const n=e.currentDocument?function(s){return s.updateTime!==void 0?Ue.updateTime(tt(s.updateTime)):s.exists!==void 0?Ue.exists(s.exists):Ue.none()}(e.currentDocument):Ue.none(),r=e.updateTransforms?e.updateTransforms.map(s=>function(i,o){let a=null;if("setToServerValue"in o)ie(o.setToServerValue==="REQUEST_TIME"),a=new la;else if("appendMissingElements"in o){const u=o.appendMissingElements.values||[];a=new zi(u)}else if("removeAllFromArray"in o){const u=o.removeAllFromArray.values||[];a=new qi(u)}else"increment"in o?a=new ua(i,o.increment):J();const l=et.fromServerFormat(o.fieldPath);return new nc(l,a)}(t,s)):[];if(e.update){e.update.name;const s=vr(t,e.update.name),i=new xt({mapValue:{fields:e.update.fields}});if(e.updateMask){const o=function(a){const l=a.fieldPaths||[];return new _n(l.map(u=>et.fromServerFormat(u)))}(e.updateMask);return new Zr(s,i,o,n,r)}return new Da(s,i,n,r)}if(e.delete){const s=vr(t,e.delete);return new Aa(s,n)}if(e.verify){const s=vr(t,e.verify);return new Qy(s,n)}return J()}function Fz(t,e){return t&&t.length>0?(ie(e!==void 0),t.map(n=>function(r,s){let i=r.updateTime?tt(r.updateTime):tt(s);return i.isEqual(oe.min())&&(i=tt(s)),new Iz(i,r.transformResults||[])}(n,e))):[]}function MC(t,e){return{documents:[Dg(t,e.path)]}}function $C(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Dg(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Dg(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(l){if(l.length!==0)return BC(Te.create(l,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const i=function(l){if(l.length!==0)return l.map(u=>function(c){return{field:go(c.field),direction:Vz(c.dir)}}(u))}(e.orderBy);i&&(n.structuredQuery.orderBy=i);const o=function(l,u){return l.wt||Ju(u)?u:{value:u}}(t,e.limit);var a;return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt={before:(a=e.startAt).inclusive,values:a.position}),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),n}function UC(t){let e=DC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ie(r===1);const c=n.from[0];c.allDescendants?s=c.collectionId:e=e.child(c.collectionId)}let i=[];n.where&&(i=function(c){const h=FC(c);return h instanceof Te&&nC(h)?h.getFilters():[h]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(c=>function(h){return new Wo(vo(h.field),function(f){switch(f){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))}(c)));let a=null;n.limit&&(a=function(c){let h;return h=typeof c=="object"?c.value:c,Ju(h)?null:h}(n.limit));let l=null;n.startAt&&(l=function(c){const h=!!c.before,f=c.values||[];return new Ms(f,h)}(n.startAt));let u=null;return n.endAt&&(u=function(c){const h=!c.before,f=c.values||[];return new Ms(f,h)}(n.endAt)),hC(e,s,o,i,a,"F",l,u)}function Bz(t,e){const n=function(r,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return J()}}(0,e.purpose);return n==null?null:{"goog-listen-tags":n}}function FC(t){return t.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":const n=vo(e.unaryFilter.field);return ye.create(n,"==",{doubleValue:NaN});case"IS_NULL":const r=vo(e.unaryFilter.field);return ye.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=vo(e.unaryFilter.field);return ye.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=vo(e.unaryFilter.field);return ye.create(i,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(e){return ye.create(vo(e.fieldFilter.field),function(n){switch(n){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(e){return Te.create(e.compositeFilter.filters.map(n=>FC(n)),function(n){switch(n){case"AND":return"and";case"OR":return"or";default:return J()}}(e.compositeFilter.op))}(t):J()}function Vz(t){return Nz[t]}function jz(t){return Dz[t]}function zz(t){return Az[t]}function go(t){return{fieldPath:t.canonicalString()}}function vo(t){return et.fromServerFormat(t.fieldPath)}function BC(t){return t instanceof ye?function(e){if(e.op==="=="){if(_S(e.value))return{unaryFilter:{field:go(e.field),op:"IS_NAN"}};if(wS(e.value))return{unaryFilter:{field:go(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(_S(e.value))return{unaryFilter:{field:go(e.field),op:"IS_NOT_NAN"}};if(wS(e.value))return{unaryFilter:{field:go(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:go(e.field),op:jz(e.op),value:e.value}}}(t):t instanceof Te?function(e){const n=e.getFilters().map(r=>BC(r));return n.length===1?n[0]:{compositeFilter:{op:zz(e.op),filters:n}}}(t):J()}function qz(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function Xt(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=$S(e)),e=Wz(t.get(n),e);return $S(e)}function Wz(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case"":n+="";break;default:n+=i}}return n}function $S(t){return t+""}function dr(t){const e=t.length;if(ie(e>=2),e===2)return ie(t.charAt(0)===""&&t.charAt(1)===""),Ee.emptyPath();const n=e-2,r=[];let s="";for(let i=0;i<e;){const o=t.indexOf("",i);switch((o<0||o>n)&&J(),t.charAt(o+1)){case"":const a=t.substring(i,o);let l;s.length===0?l=a:(s+=a,l=s,s=""),r.push(l);break;case"":s+=t.substring(i,o),s+="\0";break;case"":s+=t.substring(i,o+1);break;default:J()}i=o+2}return new Ee(r)}const US=["userId","batchId"];function wh(t,e){return[t,Xt(e)]}function jC(t,e,n){return[t,Xt(e),n]}const Hz={},Gz=["prefixPath","collectionGroup","readTime","documentId"],Kz=["prefixPath","collectionGroup","documentId"],Qz=["collectionGroup","readTime","prefixPath","documentId"],Yz=["canonicalId","targetId"],Xz=["targetId","path"],Zz=["path","targetId"],Jz=["collectionId","parent"],eq=["indexId","uid"],tq=["uid","sequenceNumber"],nq=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rq=["indexId","uid","orderedDocumentKey"],sq=["userId","collectionPath","documentId"],iq=["userId","collectionPath","largestBatchId"],oq=["userId","collectionGroup","largestBatchId"],zC=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],aq=[...zC,"documentOverlays"],qC=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],WC=qC,lq=[...WC,"indexConfiguration","indexState","indexEntries"];class Og extends Yb{constructor(e,n){super(),this.se=e,this.currentSequenceNumber=n}}function _t(t,e){const n=Z(t);return Hn.M(n.se,e)}class Xy{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&xz(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fl(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fl(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const l=SC(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),fe())}isEqual(e){return this.batchId===e.batchId&&ia(this.mutations,e.mutations,(n,r)=>PS(n,r))&&ia(this.baseMutations,e.baseMutations,(n,r)=>PS(n,r))}}class Zy{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ie(e.mutations.length===r.length);let s=Cz;const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Zy(e,n,r,s)}}class Jy{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class bs{constructor(e,n,r,s,i=oe.min(),o=oe.min(),a=ut.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a}withSequenceNumber(e){return new bs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new bs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class HC{constructor(e){this.ie=e}}function uq(t,e){let n;if(e.document)n=OC(t.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=X.fromSegments(e.noDocument.path),s=Hi(e.noDocument.readTime);n=De.newNoDocument(r,s),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return J();{const r=X.fromSegments(e.unknownDocument.path),s=Hi(e.unknownDocument.version);n=De.newUnknownDocument(r,s)}}return e.readTime&&n.setReadTime(function(r){const s=new Fe(r[0],r[1]);return oe.fromTimestamp(s)}(e.readTime)),n}function FS(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:md(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(s,i){return{name:ku(s,i.key),fields:i.data.value.mapValue.fields,updateTime:ca(s,i.version.toTimestamp()),createTime:ca(s,i.createTime.toTimestamp())}}(t.ie,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wi(e.version)};else{if(!e.isUnknownDocument())return J();r.unknownDocument={path:n.path.toArray(),version:Wi(e.version)}}return r}function md(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Wi(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Hi(t){const e=new Fe(t.seconds,t.nanoseconds);return oe.fromTimestamp(e)}function li(t,e){const n=(e.baseMutations||[]).map(i=>Ag(t.ie,i));for(let i=0;i<e.mutations.length-1;++i){const o=e.mutations[i];if(i+1<e.mutations.length&&e.mutations[i+1].transform!==void 0){const a=e.mutations[i+1];o.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(i+1,1),++i}}const r=e.mutations.map(i=>Ag(t.ie,i)),s=Fe.fromMillis(e.localWriteTimeMs);return new Xy(e.batchId,s,n,r)}function _l(t){const e=Hi(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?Hi(t.lastLimboFreeSnapshotVersion):oe.min();let r;var s;return t.query.documents!==void 0?(ie((s=t.query).documents.length===1),r=cn(Na(DC(s.documents[0])))):r=function(i){return cn(UC(i))}(t.query),new bs(r,t.targetId,0,t.lastListenSequenceNumber,e,n,ut.fromBase64String(t.resumeToken))}function GC(t,e){const n=Wi(e.snapshotVersion),r=Wi(e.lastLimboFreeSnapshotVersion);let s;s=dd(e.target)?MC(t.ie,e.target):$C(t.ie,e.target);const i=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ji(e.target),readTime:n,resumeToken:i,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function ew(t){const e=UC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?pd(e,e.limit,"L"):e}function Kp(t,e){return new Jy(e.largestBatchId,Ag(t.ie,e.overlayMutation))}function BS(t,e){const n=e.path.lastSegment();return[t,Xt(e.path.popLast()),n]}function VS(t,e,n,r){return{indexId:t,uid:e.uid||"",sequenceNumber:n,readTime:Wi(r.readTime),documentKey:Xt(r.documentKey.path),largestBatchId:r.largestBatchId}}class cq{getBundleMetadata(e,n){return jS(e).get(n).next(r=>{if(r)return{id:(s=r).bundleId,createTime:Hi(s.createTime),version:s.version};var s})}saveBundleMetadata(e,n){return jS(e).put({bundleId:(r=n).id,createTime:Wi(tt(r.createTime)),version:r.version});var r}getNamedQuery(e,n){return zS(e).get(n).next(r=>{if(r)return{name:(s=r).name,query:ew(s.bundledQuery),readTime:Hi(s.readTime)};var s})}saveNamedQuery(e,n){return zS(e).put(function(r){return{name:r.name,readTime:Wi(tt(r.readTime)),bundledQuery:r.bundledQuery}}(n))}}function jS(t){return _t(t,"bundles")}function zS(t){return _t(t,"namedQueries")}class Nf{constructor(e,n){this.yt=e,this.userId=n}static re(e,n){const r=n.uid||"";return new Nf(e,r)}getOverlay(e,n){return rl(e).get(BS(this.userId,n)).next(r=>r?Kp(this.yt,r):null)}getOverlays(e,n){const r=hr();return N.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){const s=[];return r.forEach((i,o)=>{const a=new Jy(n,o);s.push(this.oe(e,a))}),N.waitFor(s)}removeOverlaysForBatchId(e,n,r){const s=new Set;n.forEach(o=>s.add(Xt(o.getCollectionPath())));const i=[];return s.forEach(o=>{const a=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,r+1],!1,!0);i.push(rl(e).Y("collectionPathOverlayIndex",a))}),N.waitFor(i)}getOverlaysForCollection(e,n,r){const s=hr(),i=Xt(n),o=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,Number.POSITIVE_INFINITY],!0);return rl(e).W("collectionPathOverlayIndex",o).next(a=>{for(const l of a){const u=Kp(this.yt,l);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,n,r,s){const i=hr();let o;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return rl(e).Z({index:"collectionGroupOverlayIndex",range:a},(l,u,c)=>{const h=Kp(this.yt,u);i.size()<s||h.largestBatchId===o?(i.set(h.getKey(),h),o=h.largestBatchId):c.done()}).next(()=>i)}oe(e,n){return rl(e).put(function(r,s,i){const[o,a,l]=BS(s,i.mutation.key);return{userId:s,collectionPath:a,documentId:l,collectionGroup:i.mutation.key.getCollectionGroup(),largestBatchId:i.largestBatchId,overlayMutation:bu(r.ie,i.mutation)}}(this.yt,this.userId,n))}}function rl(t){return _t(t,"documentOverlays")}class ui{constructor(){}ue(e,n){this.ce(e,n),n.ae()}ce(e,n){if("nullValue"in e)this.he(n,5);else if("booleanValue"in e)this.he(n,10),n.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(n,15),n.le(He(e.integerValue));else if("doubleValue"in e){const r=He(e.doubleValue);isNaN(r)?this.he(n,13):(this.he(n,15),Eu(r)?n.le(0):n.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(n,20),typeof r=="string"?n.fe(r):(n.fe(`${r.seconds||""}`),n.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,n),this._e(n);else if("bytesValue"in e)this.he(n,30),n.we(Fi(e.bytesValue)),this._e(n);else if("referenceValue"in e)this.me(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(n,45),n.le(r.latitude||0),n.le(r.longitude||0)}else"mapValue"in e?eC(e)?this.he(n,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,n),this._e(n)):"arrayValue"in e?(this.ye(e.arrayValue,n),this._e(n)):J()}de(e,n){this.he(n,25),this.pe(e,n)}pe(e,n){n.fe(e)}ge(e,n){const r=e.fields||{};this.he(n,55);for(const s of Object.keys(r))this.de(s,n),this.ce(r[s],n)}ye(e,n){const r=e.values||[];this.he(n,50);for(const s of r)this.ce(s,n)}me(e,n){this.he(n,37),X.fromName(e).path.forEach(r=>{this.he(n,60),this.pe(r,n)})}he(e,n){e.le(n)}_e(e){e.le(2)}}ui.Ie=new ui;function hq(t){if(t===0)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function qS(t){const e=64-function(n){let r=0;for(let s=0;s<8;++s){const i=hq(255&n[s]);if(r+=i,i!==8)break}return r}(t);return Math.ceil(e/8)}class dq{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ee(r.value),r=n.next();this.Ae()}Re(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.be(r.value),r=n.next();this.Pe()}ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const s=n.codePointAt(0);this.Ee(240|s>>>18),this.Ee(128|63&s>>>12),this.Ee(128|63&s>>>6),this.Ee(128|63&s)}}this.Ae()}Ve(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const s=n.codePointAt(0);this.be(240|s>>>18),this.be(128|63&s>>>12),this.be(128|63&s>>>6),this.be(128|63&s)}}this.Pe()}Se(e){const n=this.De(e),r=qS(n);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=255&n[s]}xe(e){const n=this.De(e),r=qS(n);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let s=n.length-r;s<n.length;++s)this.buffer[this.position++]=~(255&n[s])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const n=function(s){const i=new DataView(new ArrayBuffer(8));return i.setFloat64(0,s,!1),new Uint8Array(i.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let s=1;s<n.length;++s)n[s]^=r?255:0;return n}Ee(e){const n=255&e;n===0?(this.ke(0),this.ke(255)):n===255?(this.ke(255),this.ke(0)):this.ke(n)}be(e){const n=255&e;n===0?(this.Me(0),this.Me(255)):n===255?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const s=new Uint8Array(r);s.set(this.buffer),this.buffer=s}}class fq{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class pq{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class sl{constructor(){this.$e=new dq,this.Be=new fq(this.$e),this.Le=new pq(this.$e)}seed(e){this.$e.seed(e)}qe(e){return e===0?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class ci{constructor(e,n,r,s){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=s}Ue(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new ci(this.indexId,this.documentKey,this.arrayValue,r)}}function ns(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=WS(t.arrayValue,e.arrayValue),n!==0?n:(n=WS(t.directionalValue,e.directionalValue),n!==0?n:X.comparator(t.documentKey,e.documentKey)))}function WS(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}class mq{constructor(e){this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const n of e.filters){const r=n;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){ie(e.collectionGroup===this.collectionId);const n=Tg(e);if(n!==void 0&&!this.We(n))return!1;const r=oi(e);let s=0,i=0;for(;s<r.length&&this.We(r[s]);++s);if(s===r.length)return!0;if(this.Qe!==void 0){const o=r[s];if(!this.ze(this.Qe,o)||!this.He(this.Ke[i++],o))return!1;++s}for(;s<r.length;++s){const o=r[s];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}We(e){for(const n of this.Ge)if(this.ze(n,e))return!0;return!1}ze(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}He(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}function KC(t){var e,n;if(ie(t instanceof ye||t instanceof Te),t instanceof ye){if(t instanceof uC){const s=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(i=>ye.create(t.field,"==",i)))||[];return Te.create(s,"or")}return t}const r=t.filters.map(s=>KC(s));return Te.create(r,t.op)}function gq(t){if(t.getFilters().length===0)return[];const e=Ug(KC(t));return ie(QC(e)),Mg(e)||$g(e)?[e]:e.getFilters()}function Mg(t){return t instanceof ye}function $g(t){return t instanceof Te&&nC(t)}function QC(t){return Mg(t)||$g(t)||function(e){if(e instanceof Te&&Lg(e)){for(const n of e.getFilters())if(!Mg(n)&&!$g(n))return!1;return!0}return!1}(t)}function Ug(t){if(ie(t instanceof ye||t instanceof Te),t instanceof ye)return t;if(t.filters.length===1)return Ug(t.filters[0]);const e=t.filters.map(r=>Ug(r));let n=Te.create(e,t.op);return n=gd(n),QC(n)?n:(ie(n instanceof Te),ie(aa(n)),ie(n.filters.length>1),n.filters.reduce((r,s)=>tw(r,s)))}function tw(t,e){let n;return ie(t instanceof ye||t instanceof Te),ie(e instanceof ye||e instanceof Te),n=t instanceof ye?e instanceof ye?function(r,s){return Te.create([r,s],"and")}(t,e):HS(t,e):e instanceof ye?HS(e,t):function(r,s){if(ie(r.filters.length>0&&s.filters.length>0),aa(r)&&aa(s))return oC(r,s.getFilters());const i=Lg(r)?r:s,o=Lg(r)?s:r,a=i.filters.map(l=>tw(l,o));return Te.create(a,"or")}(t,e),gd(n)}function HS(t,e){if(aa(e))return oC(e,t.getFilters());{const n=e.filters.map(r=>tw(t,r));return Te.create(n,"or")}}function gd(t){if(ie(t instanceof ye||t instanceof Te),t instanceof ye)return t;const e=t.getFilters();if(e.length===1)return gd(e[0]);if(rC(t))return t;const n=e.map(s=>gd(s)),r=[];return n.forEach(s=>{s instanceof ye?r.push(s):s instanceof Te&&(s.op===t.op?r.push(...s.filters):r.push(s))}),r.length===1?r[0]:Te.create(r,t.op)}class vq{constructor(){this.Je=new nw}addToCollectionParentIndex(e,n){return this.Je.add(n),N.resolve()}getCollectionParents(e,n){return N.resolve(this.Je.getEntries(n))}addFieldIndex(e,n){return N.resolve()}deleteFieldIndex(e,n){return N.resolve()}getDocumentsMatchingTarget(e,n){return N.resolve(null)}getIndexType(e,n){return N.resolve(0)}getFieldIndexes(e,n){return N.resolve([])}getNextCollectionGroupToUpdate(e){return N.resolve(null)}getMinOffset(e,n){return N.resolve(xn.min())}getMinOffsetFromCollectionGroup(e,n){return N.resolve(xn.min())}updateCollectionGroup(e,n,r){return N.resolve()}updateIndexEntries(e,n){return N.resolve()}}class nw{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Le(Ee.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Le(Ee.comparator)).toArray()}}const Gc=new Uint8Array(0);class yq{constructor(e,n){this.user=e,this.databaseId=n,this.Ye=new nw,this.Xe=new Xs(r=>ji(r),(r,s)=>ec(r,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ye.has(n)){const r=n.lastSegment(),s=n.popLast();e.addOnCommittedListener(()=>{this.Ye.add(n)});const i={collectionId:r,parent:Xt(s)};return GS(e).put(i)}return N.resolve()}getCollectionParents(e,n){const r=[],s=IDBKeyRange.bound([n,""],[Wb(n),""],!1,!0);return GS(e).W(s).next(i=>{for(const o of i){if(o.collectionId!==n)break;r.push(dr(o.parent))}return r})}addFieldIndex(e,n){const r=Kc(e),s=function(o){return{indexId:o.indexId,collectionGroup:o.collectionGroup,fields:o.fields.map(a=>[a.fieldPath.canonicalString(),a.kind])}}(n);delete s.indexId;const i=r.add(s);if(n.indexState){const o=ol(e);return i.next(a=>{o.put(VS(a,this.user,n.indexState.sequenceNumber,n.indexState.offset))})}return i.next()}deleteFieldIndex(e,n){const r=Kc(e),s=ol(e),i=il(e);return r.delete(n.indexId).next(()=>s.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const r=il(e);let s=!0;const i=new Map;return N.forEach(this.Ze(n),o=>this.tn(e,o).next(a=>{s&&(s=!!a),i.set(o,a)})).next(()=>{if(s){let o=fe();const a=[];return N.forEach(i,(l,u)=>{var c;z("IndexedDbIndexManager",`Using index ${c=l,`id=${c.indexId}|cg=${c.collectionGroup}|f=${c.fields.map(v=>`${v.fieldPath}:${v.kind}`).join(",")}`} to execute ${ji(n)}`);const h=function(v,w){const b=Tg(w);if(b===void 0)return null;for(const I of fd(v,b.fieldPath))switch(I.op){case"array-contains-any":return I.value.arrayValue.values||[];case"array-contains":return[I.value]}return null}(u,l),f=function(v,w){const b=new Map;for(const I of oi(w))for(const R of fd(v,I.fieldPath))switch(R.op){case"==":case"in":b.set(I.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return b.set(I.fieldPath.canonicalString(),R.value),Array.from(b.values())}return null}(u,l),p=function(v,w){const b=[];let I=!0;for(const R of oi(w)){const A=R.kind===0?TS(v,R.fieldPath,v.startAt):bS(v,R.fieldPath,v.startAt);b.push(A.value),I&&(I=A.inclusive)}return new Ms(b,I)}(u,l),m=function(v,w){const b=[];let I=!0;for(const R of oi(w)){const A=R.kind===0?bS(v,R.fieldPath,v.endAt):TS(v,R.fieldPath,v.endAt);b.push(A.value),I&&(I=A.inclusive)}return new Ms(b,I)}(u,l),_=this.en(l,u,p),E=this.en(l,u,m),g=this.nn(l,u,f),y=this.sn(l.indexId,h,_,p.inclusive,E,m.inclusive,g);return N.forEach(y,v=>r.J(v,n.limit).next(w=>{w.forEach(b=>{const I=X.fromSegments(b.documentKey);o.has(I)||(o=o.add(I),a.push(I))})}))}).next(()=>a)}return N.resolve(null)})}Ze(e){let n=this.Xe.get(e);return n||(e.filters.length===0?n=[e]:n=gq(Te.create(e.filters,"and")).map(r=>Pg(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,n),n)}sn(e,n,r,s,i,o,a){const l=(n!=null?n.length:1)*Math.max(r.length,i.length),u=l/(n!=null?n.length:1),c=[];for(let h=0;h<l;++h){const f=n?this.rn(n[h/u]):Gc,p=this.on(e,f,r[h%u],s),m=this.un(e,f,i[h%u],o),_=a.map(E=>this.on(e,f,E,!0));c.push(...this.createRange(p,m,_))}return c}on(e,n,r,s){const i=new ci(e,X.empty(),n,r);return s?i:i.Ue()}un(e,n,r,s){const i=new ci(e,X.empty(),n,r);return s?i.Ue():i}tn(e,n){const r=new mq(n),s=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,s).next(i=>{let o=null;for(const a of i)r.je(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(e,n){let r=2;const s=this.Ze(n);return N.forEach(s,i=>this.tn(e,i).next(o=>{o?r!==0&&o.fields.length<function(a){let l=new Le(et.comparator),u=!1;for(const c of a.filters)for(const h of c.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?u=!0:l=l.add(h.field));for(const c of a.orderBy)c.field.isKeyField()||(l=l.add(c.field));return l.size+(u?1:0)}(i)&&(r=1):r=0})).next(()=>function(i){return i.limit!==null}(n)&&s.length>1&&r===2?1:r)}cn(e,n){const r=new sl;for(const s of oi(e)){const i=n.data.field(s.fieldPath);if(i==null)return null;const o=r.qe(s.kind);ui.Ie.ue(i,o)}return r.Fe()}rn(e){const n=new sl;return ui.Ie.ue(e,n.qe(0)),n.Fe()}an(e,n){const r=new sl;return ui.Ie.ue(Vi(this.databaseId,n),r.qe(function(s){const i=oi(s);return i.length===0?0:i[i.length-1].kind}(e))),r.Fe()}nn(e,n,r){if(r===null)return[];let s=[];s.push(new sl);let i=0;for(const o of oi(e)){const a=r[i++];for(const l of s)if(this.hn(n,o.fieldPath)&&xu(a))s=this.ln(s,o,a);else{const u=l.qe(o.kind);ui.Ie.ue(a,u)}}return this.fn(s)}en(e,n,r){return this.nn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Fe();return n}ln(e,n,r){const s=[...e],i=[];for(const o of r.arrayValue.values||[])for(const a of s){const l=new sl;l.seed(a.Fe()),ui.Ie.ue(o,l.qe(n.kind)),i.push(l)}return i}hn(e,n){return!!e.filters.find(r=>r instanceof ye&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=Kc(e),s=ol(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(i=>{const o=[];return N.forEach(i,a=>s.get([a.indexId,this.uid]).next(l=>{o.push(function(u,c){const h=c?new hd(c.sequenceNumber,new xn(Hi(c.readTime),new X(dr(c.documentKey)),c.largestBatchId)):hd.empty(),f=u.fields.map(([p,m])=>new tz(et.fromServerFormat(p),m));return new Hb(u.indexId,u.collectionGroup,f,h)}(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,s)=>{const i=r.indexState.sequenceNumber-s.indexState.sequenceNumber;return i!==0?i:de(r.collectionGroup,s.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const s=Kc(e),i=ol(e);return this.dn(e).next(o=>s.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>N.forEach(a,l=>i.put(VS(l.indexId,this.user,o,r)))))}updateIndexEntries(e,n){const r=new Map;return N.forEach(n,(s,i)=>{const o=r.get(s.collectionGroup);return(o?N.resolve(o):this.getFieldIndexes(e,s.collectionGroup)).next(a=>(r.set(s.collectionGroup,a),N.forEach(a,l=>this._n(e,s,l).next(u=>{const c=this.wn(i,l);return u.isEqual(c)?N.resolve():this.mn(e,i,l,u,c)}))))})}gn(e,n,r,s){return il(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.an(r,n.key),documentKey:n.key.path.toArray()})}yn(e,n,r,s){return il(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.an(r,n.key),n.key.path.toArray()])}_n(e,n,r){const s=il(e);let i=new Le(ns);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,n)])},(o,a)=>{i=i.add(new ci(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>i)}wn(e,n){let r=new Le(ns);const s=this.cn(n,e);if(s==null)return r;const i=Tg(n);if(i!=null){const o=e.data.field(i.fieldPath);if(xu(o))for(const a of o.arrayValue.values||[])r=r.add(new ci(n.indexId,e.key,this.rn(a),s))}else r=r.add(new ci(n.indexId,e.key,Gc,s));return r}mn(e,n,r,s,i){z("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const o=[];return function(a,l,u,c,h){const f=a.getIterator(),p=l.getIterator();let m=po(f),_=po(p);for(;m||_;){let E=!1,g=!1;if(m&&_){const y=u(m,_);y<0?g=!0:y>0&&(E=!0)}else m!=null?g=!0:E=!0;E?(c(_),_=po(p)):g?(h(m),m=po(f)):(m=po(f),_=po(p))}}(s,i,ns,a=>{o.push(this.gn(e,n,r,a))},a=>{o.push(this.yn(e,n,r,a))}),N.waitFor(o)}dn(e){let n=1;return ol(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,i)=>{i.done(),n=s.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((o,a)=>ns(o,a)).filter((o,a,l)=>!a||ns(o,l[a-1])!==0);const s=[];s.push(e);for(const o of r){const a=ns(o,e),l=ns(o,n);if(a===0)s[0]=e.Ue();else if(a>0&&l<0)s.push(o),s.push(o.Ue());else if(l>0)break}s.push(n);const i=[];for(let o=0;o<s.length;o+=2){if(this.pn(s[o],s[o+1]))return[];const a=[s[o].indexId,this.uid,s[o].arrayValue,s[o].directionalValue,Gc,[]],l=[s[o+1].indexId,this.uid,s[o+1].arrayValue,s[o+1].directionalValue,Gc,[]];i.push(IDBKeyRange.bound(a,l))}return i}pn(e,n){return ns(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(KS)}getMinOffset(e,n){return N.mapArray(this.Ze(n),r=>this.tn(e,r).next(s=>s||J())).next(KS)}}function GS(t){return _t(t,"collectionParents")}function il(t){return _t(t,"indexEntries")}function Kc(t){return _t(t,"indexConfiguration")}function ol(t){return _t(t,"indexState")}function KS(t){ie(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const s=t[r].indexState.offset;zy(s,e)<0&&(e=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new xn(e.readTime,e.documentKey,n)}const QS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class tn{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new tn(e,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function YC(t,e,n){const r=t.store("mutations"),s=t.store("documentMutations"),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=r.Z({range:o},(c,h,f)=>(a++,f.delete()));i.push(l.next(()=>{ie(a===1)}));const u=[];for(const c of n.mutations){const h=jC(e,c.key.path,n.batchId);i.push(s.delete(h)),u.push(c.key)}return N.waitFor(i).next(()=>u)}function vd(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw J();e=t.noDocument}return JSON.stringify(e).length}tn.DEFAULT_COLLECTION_PERCENTILE=10,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tn.DEFAULT=new tn(41943040,tn.DEFAULT_COLLECTION_PERCENTILE,tn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tn.DISABLED=new tn(-1,0,0);class Df{constructor(e,n,r,s){this.userId=e,this.yt=n,this.indexManager=r,this.referenceDelegate=s,this.In={}}static re(e,n,r,s){ie(e.uid!=="");const i=e.isAuthenticated()?e.uid:"";return new Df(i,n,r,s)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rs(e).Z({index:"userMutationsIndex",range:r},(s,i,o)=>{n=!1,o.done()}).next(()=>n)}addMutationBatch(e,n,r,s){const i=yo(e),o=rs(e);return o.add({}).next(a=>{ie(typeof a=="number");const l=new Xy(a,n,r,s),u=function(f,p,m){const _=m.baseMutations.map(g=>bu(f.ie,g)),E=m.mutations.map(g=>bu(f.ie,g));return{userId:p,batchId:m.batchId,localWriteTimeMs:m.localWriteTime.toMillis(),baseMutations:_,mutations:E}}(this.yt,this.userId,l),c=[];let h=new Le((f,p)=>de(f.canonicalString(),p.canonicalString()));for(const f of s){const p=jC(this.userId,f.key.path,a);h=h.add(f.key.path.popLast()),c.push(o.put(u)),c.push(i.put(p,Hz))}return h.forEach(f=>{c.push(this.indexManager.addToCollectionParentIndex(e,f))}),e.addOnCommittedListener(()=>{this.In[a]=l.keys()}),N.waitFor(c).next(()=>l)})}lookupMutationBatch(e,n){return rs(e).get(n).next(r=>r?(ie(r.userId===this.userId),li(this.yt,r)):null)}Tn(e,n){return this.In[n]?N.resolve(this.In[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const s=r.keys();return this.In[n]=s,s}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=IDBKeyRange.lowerBound([this.userId,r]);let i=null;return rs(e).Z({index:"userMutationsIndex",range:s},(o,a,l)=>{a.userId===this.userId&&(ie(a.batchId>=r),i=li(this.yt,a)),l.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return rs(e).Z({index:"userMutationsIndex",range:n,reverse:!0},(s,i,o)=>{r=i.batchId,o.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rs(e).W("userMutationsIndex",n).next(r=>r.map(s=>li(this.yt,s)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=wh(this.userId,n.path),s=IDBKeyRange.lowerBound(r),i=[];return yo(e).Z({range:s},(o,a,l)=>{const[u,c,h]=o,f=dr(c);if(u===this.userId&&n.path.isEqual(f))return rs(e).get(h).next(p=>{if(!p)throw J();ie(p.userId===this.userId),i.push(li(this.yt,p))});l.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(de);const s=[];return n.forEach(i=>{const o=wh(this.userId,i.path),a=IDBKeyRange.lowerBound(o),l=yo(e).Z({range:a},(u,c,h)=>{const[f,p,m]=u,_=dr(p);f===this.userId&&i.path.isEqual(_)?r=r.add(m):h.done()});s.push(l)}),N.waitFor(s).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1,i=wh(this.userId,r),o=IDBKeyRange.lowerBound(i);let a=new Le(de);return yo(e).Z({range:o},(l,u,c)=>{const[h,f,p]=l,m=dr(f);h===this.userId&&r.isPrefixOf(m)?m.length===s&&(a=a.add(p)):c.done()}).next(()=>this.En(e,a))}En(e,n){const r=[],s=[];return n.forEach(i=>{s.push(rs(e).get(i).next(o=>{if(o===null)throw J();ie(o.userId===this.userId),r.push(li(this.yt,o))}))}),N.waitFor(s).next(()=>r)}removeMutationBatch(e,n){return YC(e.se,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.An(n.batchId)}),N.forEach(r,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return N.resolve();const r=IDBKeyRange.lowerBound([this.userId]),s=[];return yo(e).Z({range:r},(i,o,a)=>{if(i[0]===this.userId){const l=dr(i[1]);s.push(l)}else a.done()}).next(()=>{ie(s.length===0)})})}containsKey(e,n){return XC(e,this.userId,n)}Rn(e){return ZC(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function XC(t,e,n){const r=wh(e,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return yo(t).Z({range:i,X:!0},(a,l,u)=>{const[c,h,f]=a;c===e&&h===s&&(o=!0),u.done()}).next(()=>o)}function rs(t){return _t(t,"mutations")}function yo(t){return _t(t,"documentMutations")}function ZC(t){return _t(t,"mutationQueues")}class Gi{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Gi(0)}static vn(){return new Gi(-1)}}class wq{constructor(e,n){this.referenceDelegate=e,this.yt=n}allocateTargetId(e){return this.Vn(e).next(n=>{const r=new Gi(n.highestTargetId);return n.highestTargetId=r.next(),this.Sn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(n=>oe.fromTimestamp(new Fe(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=n,r&&(s.lastRemoteSnapshotVersion=r.toTimestamp()),n>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=n),this.Sn(e,s)))}addTargetData(e,n){return this.Dn(e,n).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(n,r),this.Sn(e,r))))}updateTargetData(e,n){return this.Dn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>mo(e).delete(n.targetId)).next(()=>this.Vn(e)).next(r=>(ie(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,n,r){let s=0;const i=[];return mo(e).Z((o,a)=>{const l=_l(a);l.sequenceNumber<=n&&r.get(l.targetId)===null&&(s++,i.push(this.removeTargetData(e,l)))}).next(()=>N.waitFor(i)).next(()=>s)}forEachTarget(e,n){return mo(e).Z((r,s)=>{const i=_l(s);n(i)})}Vn(e){return YS(e).get("targetGlobalKey").next(n=>(ie(n!==null),n))}Sn(e,n){return YS(e).put("targetGlobalKey",n)}Dn(e,n){return mo(e).put(GC(this.yt,n))}Cn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(n=>n.targetCount)}getTargetData(e,n){const r=ji(n),s=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let i=null;return mo(e).Z({range:s,index:"queryTargetsIndex"},(o,a,l)=>{const u=_l(a);ec(n,u.target)&&(i=u,l.done())}).next(()=>i)}addMatchingKeys(e,n,r){const s=[],i=cs(e);return n.forEach(o=>{const a=Xt(o.path);s.push(i.put({targetId:r,path:a})),s.push(this.referenceDelegate.addReference(e,r,o))}),N.waitFor(s)}removeMatchingKeys(e,n,r){const s=cs(e);return N.forEach(n,i=>{const o=Xt(i.path);return N.waitFor([s.delete([r,o]),this.referenceDelegate.removeReference(e,r,i)])})}removeMatchingKeysForTargetId(e,n){const r=cs(e),s=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(s)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),s=cs(e);let i=fe();return s.Z({range:r,X:!0},(o,a,l)=>{const u=dr(o[1]),c=new X(u);i=i.add(c)}).next(()=>i)}containsKey(e,n){const r=Xt(n.path),s=IDBKeyRange.bound([r],[Wb(r)],!1,!0);let i=0;return cs(e).Z({index:"documentTargetsIndex",X:!0,range:s},([o,a],l,u)=>{o!==0&&(i++,u.done())}).next(()=>i>0)}ne(e,n){return mo(e).get(n).next(r=>r?_l(r):null)}}function mo(t){return _t(t,"targets")}function YS(t){return _t(t,"targetGlobal")}function cs(t){return _t(t,"targetDocuments")}function XS([t,e],[n,r]){const s=de(t,n);return s===0?de(e,r):s}class _q{constructor(e){this.xn=e,this.buffer=new Le(XS),this.Nn=0}kn(){return++this.Nn}On(e){const n=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();XS(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Eq{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Mn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return this.Mn!==null}Fn(e){z("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Mn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Ys(n)?z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await Qs(n)}await this.Fn(3e5)})}}class Sq{constructor(e,n){this.$n=e,this.params=n}calculateTargetCount(e,n){return this.$n.Bn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return N.resolve(sn.at);const r=new _q(n);return this.$n.forEachTarget(e,s=>r.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>r.On(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.$n.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.$n.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(z("LruGarbageCollector","Garbage collection skipped; disabled"),N.resolve(QS)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(z("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),QS):this.qn(e,n))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,n){let r,s,i,o,a,l,u;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,o=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,a=Date.now(),this.removeTargets(e,r,n))).next(h=>(i=h,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),kg()<=Se.DEBUG&&z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${h} documents in `+(u-l)+`ms
Total Duration: ${u-c}ms`),N.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:h})))}}class Iq{constructor(e,n){this.db=e,this.garbageCollector=function(r,s){return new Sq(r,s)}(this,n)}Bn(e){const n=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}Un(e){let n=0;return this.Ln(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Ln(e,n){return this.Kn(e,(r,s)=>n(s))}addReference(e,n,r){return Qc(e,r)}removeReference(e,n,r){return Qc(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Qc(e,n)}Gn(e,n){return function(r,s){let i=!1;return ZC(r).tt(o=>XC(r,o,s).next(a=>(a&&(i=!0),N.resolve(!a)))).next(()=>i)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let i=0;return this.Kn(e,(o,a)=>{if(a<=n){const l=this.Gn(e,o).next(u=>{if(!u)return i++,r.getEntry(e,o).next(()=>(r.removeEntry(o,oe.min()),cs(e).delete([0,Xt(o.path)])))});s.push(l)}}).next(()=>N.waitFor(s)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Qc(e,n)}Kn(e,n){const r=cs(e);let s,i=sn.at;return r.Z({index:"documentTargetsIndex"},([o,a],{path:l,sequenceNumber:u})=>{o===0?(i!==sn.at&&n(new X(dr(s)),i),i=u,s=l):i=sn.at}).next(()=>{i!==sn.at&&n(new X(dr(s)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qc(t,e){return cs(t).put(function(n,r){return{targetId:0,path:Xt(n.path),sequenceNumber:r}}(e,t.currentSequenceNumber))}class JC{constructor(){this.changes=new Xs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,De.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?N.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xq{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ti(e).put(r)}removeEntry(e,n,r){return ti(e).delete(function(s,i){const o=s.path.toArray();return[o.slice(0,o.length-2),o[o.length-2],md(i),o[o.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.Qn(e,r)))}getEntry(e,n){let r=De.newInvalidDocument(n);return ti(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(al(n))},(s,i)=>{r=this.jn(n,i)}).next(()=>r)}Wn(e,n){let r={size:0,document:De.newInvalidDocument(n)};return ti(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(al(n))},(s,i)=>{r={document:this.jn(n,i),size:vd(i)}}).next(()=>r)}getEntries(e,n){let r=on();return this.zn(e,n,(s,i)=>{const o=this.jn(s,i);r=r.insert(s,o)}).next(()=>r)}Hn(e,n){let r=on(),s=new Qe(X.comparator);return this.zn(e,n,(i,o)=>{const a=this.jn(i,o);r=r.insert(i,a),s=s.insert(i,vd(o))}).next(()=>({documents:r,Jn:s}))}zn(e,n,r){if(n.isEmpty())return N.resolve();let s=new Le(eI);n.forEach(l=>s=s.add(l));const i=IDBKeyRange.bound(al(s.first()),al(s.last())),o=s.getIterator();let a=o.getNext();return ti(e).Z({index:"documentKeyIndex",range:i},(l,u,c)=>{const h=X.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;a&&eI(a,h)<0;)r(a,null),a=o.getNext();a&&a.isEqual(h)&&(r(a,u),a=o.hasNext()?o.getNext():null),a?c.j(al(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=o.hasNext()?o.getNext():null})}getAllFromCollection(e,n,r){const s=[n.popLast().toArray(),n.lastSegment(),md(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],i=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ti(e).W(IDBKeyRange.bound(s,i,!0)).next(o=>{let a=on();for(const l of o){const u=this.jn(X.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);a=a.insert(u.key,u)}return a})}getAllFromCollectionGroup(e,n,r,s){let i=on();const o=JS(n,r),a=JS(n,xn.max());return ti(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},(l,u,c)=>{const h=this.jn(X.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);i=i.insert(h.key,h),i.size===s&&c.done()}).next(()=>i)}newChangeBuffer(e){return new kq(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return ZS(e).get("remoteDocumentGlobalKey").next(n=>(ie(!!n),n))}Qn(e,n){return ZS(e).put("remoteDocumentGlobalKey",n)}jn(e,n){if(n){const r=uq(this.yt,n);if(!(r.isNoDocument()&&r.version.isEqual(oe.min())))return r}return De.newInvalidDocument(e)}}function eL(t){return new xq(t)}class kq extends JC{constructor(e,n){super(),this.Yn=e,this.trackRemovals=n,this.Xn=new Xs(r=>r.toString(),(r,s)=>r.isEqual(s))}applyChanges(e){const n=[];let r=0,s=new Le((i,o)=>de(i.canonicalString(),o.canonicalString()));return this.changes.forEach((i,o)=>{const a=this.Xn.get(i);if(n.push(this.Yn.removeEntry(e,i,a.readTime)),o.isValidDocument()){const l=FS(this.Yn.yt,o);s=s.add(i.path.popLast());const u=vd(l);r+=u-a.size,n.push(this.Yn.addEntry(e,i,l))}else if(r-=a.size,this.trackRemovals){const l=FS(this.Yn.yt,o.convertToNoDocument(oe.min()));n.push(this.Yn.addEntry(e,i,l))}}),s.forEach(i=>{n.push(this.Yn.indexManager.addToCollectionParentIndex(e,i))}),n.push(this.Yn.updateMetadata(e,r)),N.waitFor(n)}getFromCache(e,n){return this.Yn.Wn(e,n).next(r=>(this.Xn.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.Yn.Hn(e,n).next(({documents:r,Jn:s})=>(s.forEach((i,o)=>{this.Xn.set(i,{size:o,readTime:r.get(i).readTime})}),r))}}function ZS(t){return _t(t,"remoteDocumentGlobal")}function ti(t){return _t(t,"remoteDocumentsV14")}function al(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function JS(t,e){const n=e.documentKey.path.toArray();return[t,md(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function eI(t,e){const n=t.path.toArray(),r=e.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=de(n[i],r[i]),s)return s;return s=de(n.length,r.length),s||(s=de(n[n.length-2],r[r.length-2]),s||de(n[n.length-1],r[r.length-1]))}class Tq{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class tL{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Fl(r.mutation,s,_n.empty(),Fe.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,fe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=fe()){const s=hr();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=wl();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,fe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=on();const o=Bl(),a=Bl();return n.forEach((l,u)=>{const c=r.get(u.key);s.has(u.key)&&(c===void 0||c.mutation instanceof Zr)?i=i.insert(u.key,u):c!==void 0&&(o.set(u.key,c.mutation.getFieldMask()),Fl(c.mutation,u,c.mutation.getFieldMask(),Fe.now()))}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,c)=>o.set(u,c)),n.forEach((u,c)=>{var h;return a.set(u,new Tq(c,(h=o.get(u))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(e,n){const r=Bl();let s=new Qe((o,a)=>o-a),i=fe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=n.get(l);if(u===null)return;let c=r.get(l)||_n.empty();c=a.applyToLocalView(u,c),r.set(l,c);const h=(s.get(a.batchId)||fe()).add(l);s=s.insert(a.batchId,h)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,c=l.value,h=CC();c.forEach(f=>{if(!i.has(f)){const p=SC(n.get(f),r.get(f));p!==null&&h.set(f,p),i=i.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,h))}return N.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return X.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Gy(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):N.resolve(hr());let a=-1,l=i;return o.next(u=>N.forEach(u,(c,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),i.get(c)?N.resolve():this.remoteDocumentCache.getEntry(e,c).next(f=>{l=l.insert(c,f)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,fe())).next(c=>({batchId:a,changes:bC(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=wl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const s=n.collectionGroup;let i=wl();return this.indexManager.getCollectionParents(e,s).next(o=>N.forEach(o,a=>{const l=function(u,c){return new Xr(c,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,r).next(u=>{u.forEach((c,h)=>{i=i.insert(c,h)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,n,r){let s;return this.remoteDocumentCache.getAllFromCollection(e,n.path,r).next(i=>(s=i,this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId))).next(i=>{i.forEach((a,l)=>{const u=l.getKey();s.get(u)===null&&(s=s.insert(u,De.newInvalidDocument(u)))});let o=wl();return s.forEach((a,l)=>{const u=i.get(a);u!==void 0&&Fl(u.mutation,l,_n.empty(),Fe.now()),Ky(n,l)&&(o=o.insert(a,l))}),o})}}class bq{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,n){return N.resolve(this.Zn.get(n))}saveBundleMetadata(e,n){var r;return this.Zn.set(n.id,{id:(r=n).id,version:r.version,createTime:tt(r.createTime)}),N.resolve()}getNamedQuery(e,n){return N.resolve(this.ts.get(n))}saveNamedQuery(e,n){return this.ts.set(n.name,function(r){return{name:r.name,query:ew(r.bundledQuery),readTime:tt(r.readTime)}}(n)),N.resolve()}}class Cq{constructor(){this.overlays=new Qe(X.comparator),this.es=new Map}getOverlay(e,n){return N.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hr();return N.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.oe(e,n,i)}),N.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.es.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.es.delete(r)),N.resolve()}getOverlaysForCollection(e,n,r){const s=hr(),i=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return N.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Qe((u,c)=>u-c);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let c=i.get(u.largestBatchId);c===null&&(c=hr(),i=i.insert(u.largestBatchId,c)),c.set(u.getKey(),u)}}const a=hr(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,c)=>a.set(u,c)),!(a.size()>=s)););return N.resolve(a)}oe(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.es.get(s.largestBatchId).delete(r.key);this.es.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Jy(n,r));let i=this.es.get(n);i===void 0&&(i=fe(),this.es.set(n,i)),this.es.set(n,i.add(r.key))}}class rw{constructor(){this.ns=new Le(ht.ss),this.rs=new Le(ht.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,n){const r=new ht(e,n);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.cs(new ht(e,n))}hs(e,n){e.forEach(r=>this.removeReference(r,n))}ls(e){const n=new X(new Ee([])),r=new ht(n,e),s=new ht(n,e+1),i=[];return this.rs.forEachInRange([r,s],o=>{this.cs(o),i.push(o.key)}),i}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const n=new X(new Ee([])),r=new ht(n,e),s=new ht(n,e+1);let i=fe();return this.rs.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ht(e,0),r=this.ns.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ht{constructor(e,n){this.key=e,this._s=n}static ss(e,n){return X.comparator(e.key,n.key)||de(e._s,n._s)}static os(e,n){return de(e._s,n._s)||X.comparator(e.key,n.key)}}class Lq{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new Le(ht.ss)}checkEmpty(e){return N.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Xy(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.gs=this.gs.add(new ht(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return N.resolve(o)}lookupMutationBatch(e,n){return N.resolve(this.ys(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ps(r),i=s<0?0:s;return N.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return N.resolve(this.mutationQueue.length===0?-1:this.ws-1)}getAllMutationBatches(e){return N.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ht(n,0),s=new ht(n,Number.POSITIVE_INFINITY),i=[];return this.gs.forEachInRange([r,s],o=>{const a=this.ys(o._s);i.push(a)}),N.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(de);return n.forEach(s=>{const i=new ht(s,0),o=new ht(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([i,o],a=>{r=r.add(a._s)})}),N.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new ht(new X(i),0);let a=new Le(de);return this.gs.forEachWhile(l=>{const u=l.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(a=a.add(l._s)),!0)},o),N.resolve(this.Is(a))}Is(e){const n=[];return e.forEach(r=>{const s=this.ys(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ie(this.Ts(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.gs;return N.forEach(n.mutations,s=>{const i=new ht(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,n){const r=new ht(n,0),s=this.gs.firstAfterOrEqual(r);return N.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,N.resolve()}Ts(e,n){return this.ps(e)}ps(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}ys(e){const n=this.ps(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class Pq{constructor(e){this.Es=e,this.docs=new Qe(X.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Es(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return N.resolve(r?r.document.mutableCopy():De.newInvalidDocument(n))}getEntries(e,n){let r=on();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():De.newInvalidDocument(s))}),N.resolve(r)}getAllFromCollection(e,n,r){let s=on();const i=new X(n.child("")),o=this.docs.getIteratorFrom(i);for(;o.hasNext();){const{key:a,value:{document:l}}=o.getNext();if(!n.isPrefixOf(a.path))break;a.path.length>n.length+1||zy(Kb(l),r)<=0||(s=s.insert(l.key,l.mutableCopy()))}return N.resolve(s)}getAllFromCollectionGroup(e,n,r,s){J()}As(e,n){return N.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Rq(this)}getSize(e){return N.resolve(this.size)}}class Rq extends JC{constructor(e){super(),this.Yn=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(r)}),N.waitFor(n)}getFromCache(e,n){return this.Yn.getEntry(e,n)}getAllFromCache(e,n){return this.Yn.getEntries(e,n)}}class Nq{constructor(e){this.persistence=e,this.Rs=new Xs(n=>ji(n),ec),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.bs=0,this.Ps=new rw,this.targetCount=0,this.vs=Gi.Pn()}forEachTarget(e,n){return this.Rs.forEach((r,s)=>n(s)),N.resolve()}getLastRemoteSnapshotVersion(e){return N.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return N.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),N.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.bs&&(this.bs=n),N.resolve()}Dn(e){this.Rs.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.vs=new Gi(n),this.highestTargetId=n),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,n){return this.Dn(n),this.targetCount+=1,N.resolve()}updateTargetData(e,n){return this.Dn(n),N.resolve()}removeTargetData(e,n){return this.Rs.delete(n.target),this.Ps.ls(n.targetId),this.targetCount-=1,N.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Rs.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Rs.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),N.waitFor(i).next(()=>s)}getTargetCount(e){return N.resolve(this.targetCount)}getTargetData(e,n){const r=this.Rs.get(n)||null;return N.resolve(r)}addMatchingKeys(e,n,r){return this.Ps.us(n,r),N.resolve()}removeMatchingKeys(e,n,r){this.Ps.hs(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),N.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Ps.ls(n),N.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Ps.ds(n);return N.resolve(r)}containsKey(e,n){return N.resolve(this.Ps.containsKey(n))}}class nL{constructor(e,n){this.Vs={},this.overlays={},this.Ss=new sn(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Nq(this),this.indexManager=new vq,this.remoteDocumentCache=function(r){return new Pq(r)}(r=>this.referenceDelegate.xs(r)),this.yt=new HC(n),this.Ns=new bq(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Cq,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Vs[e.toKey()];return r||(r=new Lq(n,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,n,r){z("MemoryPersistence","Starting transaction:",e);const s=new Dq(this.Ss.next());return this.referenceDelegate.ks(),r(s).next(i=>this.referenceDelegate.Os(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ms(e,n){return N.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,n)))}}class Dq extends Yb{constructor(e){super(),this.currentSequenceNumber=e}}class Af{constructor(e){this.persistence=e,this.Fs=new rw,this.$s=null}static Bs(e){return new Af(e)}get Ls(){if(this.$s)return this.$s;throw J()}addReference(e,n,r){return this.Fs.addReference(r,n),this.Ls.delete(r.toString()),N.resolve()}removeReference(e,n,r){return this.Fs.removeReference(r,n),this.Ls.add(r.toString()),N.resolve()}markPotentiallyOrphaned(e,n){return this.Ls.add(n.toString()),N.resolve()}removeTarget(e,n){this.Fs.ls(n.targetId).forEach(s=>this.Ls.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Ls.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}ks(){this.$s=new Set}Os(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return N.forEach(this.Ls,r=>{const s=X.fromPath(r);return this.qs(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.$s=null,n.apply(e)))}updateLimboDocument(e,n){return this.qs(e,n).next(r=>{r?this.Ls.delete(n.toString()):this.Ls.add(n.toString())})}xs(e){return 0}qs(e,n){return N.or([()=>N.resolve(this.Fs.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ms(e,n)])}}class Aq{constructor(e){this.yt=e}$(e,n,r,s){const i=new bf("createOrUpgrade",n);r<1&&s>=1&&(function(a){a.createObjectStore("owner")}(e),function(a){a.createObjectStore("mutationQueues",{keyPath:"userId"}),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",US,{unique:!0}),a.createObjectStore("documentMutations")}(e),tI(e),function(a){a.createObjectStore("remoteDocuments")}(e));let o=N.resolve();return r<3&&s>=3&&(r!==0&&(function(a){a.deleteObjectStore("targetDocuments"),a.deleteObjectStore("targets"),a.deleteObjectStore("targetGlobal")}(e),tI(e)),o=o.next(()=>function(a){const l=a.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:oe.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",u)}(i))),r<4&&s>=4&&(r!==0&&(o=o.next(()=>function(a,l){return l.store("mutations").W().next(u=>{a.deleteObjectStore("mutations"),a.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",US,{unique:!0});const c=l.store("mutations"),h=u.map(f=>c.put(f));return N.waitFor(h)})}(e,i))),o=o.next(()=>{(function(a){a.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&s>=5&&(o=o.next(()=>this.Us(i))),r<6&&s>=6&&(o=o.next(()=>(function(a){a.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(i)))),r<7&&s>=7&&(o=o.next(()=>this.Gs(i))),r<8&&s>=8&&(o=o.next(()=>this.Qs(e,i))),r<9&&s>=9&&(o=o.next(()=>{(function(a){a.objectStoreNames.contains("remoteDocumentChanges")&&a.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&s>=10&&(o=o.next(()=>this.js(i))),r<11&&s>=11&&(o=o.next(()=>{(function(a){a.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(a){a.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&s>=12&&(o=o.next(()=>{(function(a){const l=a.createObjectStore("documentOverlays",{keyPath:sq});l.createIndex("collectionPathOverlayIndex",iq,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",oq,{unique:!1})})(e)})),r<13&&s>=13&&(o=o.next(()=>function(a){const l=a.createObjectStore("remoteDocumentsV14",{keyPath:Gz});l.createIndex("documentKeyIndex",Kz),l.createIndex("collectionGroupIndex",Qz)}(e)).next(()=>this.Ws(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&s>=14&&(o=o.next(()=>this.zs(e,i))),r<15&&s>=15&&(o=o.next(()=>function(a){a.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),a.createObjectStore("indexState",{keyPath:eq}).createIndex("sequenceNumberIndex",tq,{unique:!1}),a.createObjectStore("indexEntries",{keyPath:nq}).createIndex("documentKeyIndex",rq,{unique:!1})}(e))),o}Ks(e){let n=0;return e.store("remoteDocuments").Z((r,s)=>{n+=vd(s)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(s=>N.forEach(s,i=>{const o=IDBKeyRange.bound([i.userId,-1],[i.userId,i.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",o).next(a=>N.forEach(a,l=>{ie(l.userId===i.userId);const u=li(this.yt,l);return YC(e,i.userId,u).next(()=>{})}))}))}Gs(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const i=[];return r.Z((o,a)=>{const l=new Ee(o),u=function(c){return[0,Xt(c)]}(l);i.push(n.get(u).next(c=>c?N.resolve():(h=>n.put({targetId:0,path:Xt(h),sequenceNumber:s.highestListenSequenceNumber}))(l)))}).next(()=>N.waitFor(i))})}Qs(e,n){e.createObjectStore("collectionParents",{keyPath:Jz});const r=n.store("collectionParents"),s=new nw,i=o=>{if(s.add(o)){const a=o.lastSegment(),l=o.popLast();return r.put({collectionId:a,parent:Xt(l)})}};return n.store("remoteDocuments").Z({X:!0},(o,a)=>{const l=new Ee(o);return i(l.popLast())}).next(()=>n.store("documentMutations").Z({X:!0},([o,a,l],u)=>{const c=dr(a);return i(c.popLast())}))}js(e){const n=e.store("targets");return n.Z((r,s)=>{const i=_l(s),o=GC(this.yt,i);return n.put(o)})}Ws(e,n){const r=n.store("remoteDocuments"),s=[];return r.Z((i,o)=>{const a=n.store("remoteDocumentsV14"),l=(u=o,u.document?new X(Ee.fromString(u.document.name).popFirst(5)):u.noDocument?X.fromSegments(u.noDocument.path):u.unknownDocument?X.fromSegments(u.unknownDocument.path):J()).path.toArray();var u;const c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};s.push(a.put(c))}).next(()=>N.waitFor(s))}zs(e,n){const r=n.store("mutations"),s=eL(this.yt),i=new nL(Af.Bs,this.yt.ie);return r.W().next(o=>{const a=new Map;return o.forEach(l=>{var u;let c=(u=a.get(l.userId))!==null&&u!==void 0?u:fe();li(this.yt,l).keys().forEach(h=>c=c.add(h)),a.set(l.userId,c)}),N.forEach(a,(l,u)=>{const c=new ft(u),h=Nf.re(this.yt,c),f=i.getIndexManager(c),p=Df.re(c,this.yt,f,i.referenceDelegate);return new tL(s,p,h,f).recalculateAndSaveOverlaysForDocumentKeys(new Og(n,sn.at),l).next()})})}}function tI(t){t.createObjectStore("targetDocuments",{keyPath:Xz}).createIndex("documentTargetsIndex",Zz,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Yz,{unique:!0}),t.createObjectStore("targetGlobal")}const Qp="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sw{constructor(e,n,r,s,i,o,a,l,u,c,h=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Hs=i,this.window=o,this.document=a,this.Js=u,this.Ys=c,this.Xs=h,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=f=>Promise.resolve(),!sw.C())throw new j(D.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Iq(this,s),this.ii=n+"main",this.yt=new HC(l),this.ri=new Hn(this.ii,this.Xs,new Aq(this.yt)),this.Cs=new wq(this.referenceDelegate,this.yt),this.remoteDocumentCache=eL(this.yt),this.Ns=new cq,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,c===!1&&Je("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new j(D.FAILED_PRECONDITION,Qp);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new sn(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){return this.si=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(async()=>{this.started&&await this.ui()}))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Yc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(n=>{n||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(n=>this.isPrimary&&!n?this._i(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(Ys(e))return z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return ll(e).get("owner").next(n=>N.resolve(this.mi(n)))}gi(e){return Yc(e).delete(this.clientId)}async yi(){if(this.isPrimary&&!this.pi(this.ni,18e5)){this.ni=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=_t(n,"clientMetadata");return r.W().next(s=>{const i=this.Ii(s,18e5),o=s.filter(a=>i.indexOf(a)===-1);return N.forEach(o,a=>r.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.oi)for(const n of e)this.oi.removeItem(this.Ti(n.clientId))}}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?N.resolve(!0):ll(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)){if(this.mi(n)&&this.networkEnabled)return!0;if(!this.mi(n)){if(!n.allowTabSynchronization)throw new j(D.FAILED_PRECONDITION,Qp);return!1}}return!(!this.networkEnabled||!this.inForeground)||Yc(e).W().next(r=>this.Ii(r,5e3).find(s=>{if(this.clientId!==s.clientId){const i=!this.networkEnabled&&s.networkEnabled,o=!this.inForeground&&s.inForeground,a=this.networkEnabled===s.networkEnabled;if(i||o&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&z("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}async shutdown(){this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),await this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new Og(e,sn.at);return this._i(n).next(()=>this.gi(n))}),this.ri.close(),this.Pi()}Ii(e,n){return e.filter(r=>this.pi(r.updateTimeMs,n)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Yc(e).W().next(n=>this.Ii(n,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,n){return Df.re(e,this.yt,n,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new yq(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return Nf.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,n,r){z("IndexedDbPersistence","Starting transaction:",e);const s=n==="readonly"?"readonly":"readwrite",i=(o=this.Xs)===15?lq:o===14?WC:o===13?qC:o===12?aq:o===11?zC:void J();var o;let a;return this.ri.runTransaction(e,s,i,l=>(a=new Og(l,this.Ss?this.Ss.next():sn.at),n==="readwrite-primary"?this.fi(a).next(u=>!!u||this.di(a)).next(u=>{if(!u)throw Je(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new j(D.FAILED_PRECONDITION,Qb);return r(a)}).next(u=>this.wi(a).next(()=>u)):this.Vi(a).next(()=>r(a)))).then(l=>(a.raiseOnCommittedEvent(),l))}Vi(e){return ll(e).get("owner").next(n=>{if(n!==null&&this.pi(n.leaseTimestampMs,5e3)&&!this.Ei(n.ownerId)&&!this.mi(n)&&!(this.Ys||this.allowTabSynchronization&&n.allowTabSynchronization))throw new j(D.FAILED_PRECONDITION,Qp)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ll(e).put("owner",n)}static C(){return Hn.C()}_i(e){const n=ll(e);return n.get("owner").next(r=>this.mi(r)?(z("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):N.resolve())}pi(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||(Je(`Detected an update time that is in the future: ${e} > ${r}`),!1))}ci(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground=this.document.visibilityState==="visible")}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.Zs=()=>{this.Ai(),UO()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var n;try{const r=((n=this.oi)===null||n===void 0?void 0:n.getItem(this.Ti(e)))!==null;return z("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Je("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Je("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ll(t){return _t(t,"owner")}function Yc(t){return _t(t,"clientMetadata")}function iw(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}class ow{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Si=r,this.Di=s}static Ci(e,n){let r=fe(),s=fe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ow(e,n.fromCache,r,s)}}class rL{constructor(){this.xi=!1}initialize(e,n){this.Ni=e,this.indexManager=n,this.xi=!0}getDocumentsMatchingQuery(e,n,r,s){return this.ki(e,n).next(i=>i||this.Oi(e,n,s,r)).next(i=>i||this.Mi(e,n))}ki(e,n){if(CS(n))return N.resolve(null);let r=cn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=pd(n,null,"F"),r=cn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=fe(...i);return this.Ni.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const u=this.Fi(n,a);return this.$i(n,u,o,l.readTime)?this.ki(e,pd(n,null,"F")):this.Bi(e,u,n,l)}))})))}Oi(e,n,r,s){return CS(n)||s.isEqual(oe.min())?this.Mi(e,n):this.Ni.getDocuments(e,r).next(i=>{const o=this.Fi(n,i);return this.$i(n,o,r,s)?this.Mi(e,n):(kg()<=Se.DEBUG&&z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ng(n)),this.Bi(e,o,n,Gb(s,-1)))})}Fi(e,n){let r=new Le(pC(e));return n.forEach((s,i)=>{Ky(e,i)&&(r=r.add(i))}),r}$i(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Mi(e,n){return kg()<=Se.DEBUG&&z("QueryEngine","Using full collection scan to execute query:",Ng(n)),this.Ni.getDocumentsMatchingQuery(e,n,xn.min())}Bi(e,n,r,s){return this.Ni.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}class Oq{constructor(e,n,r,s){this.persistence=e,this.Li=n,this.yt=s,this.qi=new Qe(de),this.Ui=new Xs(i=>ji(i),ec),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new tL(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.qi))}}function sL(t,e,n,r){return new Oq(t,e,n,r)}async function iL(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Qi(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=fe();for(const u of s){o.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}for(const u of i){a.push(u.batchId);for(const c of u.mutations)l=l.add(c.key)}return n.localDocuments.getDocuments(r,l).next(u=>({ji:u,removedBatchIds:o,addedBatchIds:a}))})})}function Mq(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(o,a,l,u){const c=l.batch,h=c.keys();let f=N.resolve();return h.forEach(p=>{f=f.next(()=>u.getEntry(a,p)).next(m=>{const _=l.docVersions.get(p);ie(_!==null),m.version.compareTo(_)<0&&(c.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),u.addEntry(m)))})}),f.next(()=>o.mutationQueue.removeMutationBatch(a,c))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(o){let a=fe();for(let l=0;l<o.mutationResults.length;++l)o.mutationResults[l].transformResults.length>0&&(a=a.add(o.batch.mutations[l].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function oL(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Cs.getLastRemoteSnapshotVersion(n))}function $q(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Gi.newChangeBuffer({trackRemovals:!0});s=n.qi;const a=[];e.targetChanges.forEach((c,h)=>{const f=s.get(h);if(!f)return;a.push(n.Cs.removeMatchingKeys(i,c.removedDocuments,h).next(()=>n.Cs.addMatchingKeys(i,c.addedDocuments,h)));let p=f.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.has(h)?p=p.withResumeToken(ut.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):c.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(c.resumeToken,r)),s=s.insert(h,p),function(m,_,E){return m.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(f,p,c)&&a.push(n.Cs.updateTargetData(i,p))});let l=on(),u=fe();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,c))}),a.push(aL(i,o,e.documentUpdates).next(c=>{l=c.Wi,u=c.zi})),!r.isEqual(oe.min())){const c=n.Cs.getLastRemoteSnapshotVersion(i).next(h=>n.Cs.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(c)}return N.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(n.qi=s,i))}function aL(t,e,n){let r=fe(),s=fe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=on();return n.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(oe.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Wi:o,zi:s}})}function Uq(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ha(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Cs.getTargetData(r,e).next(i=>i?(s=i,N.resolve(s)):n.Cs.allocateTargetId(r).next(o=>(s=new bs(e,o,0,r.currentSequenceNumber),n.Cs.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.qi.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.qi=n.qi.insert(r.targetId,r),n.Ui.set(e,r.targetId)),r})}async function da(t,e,n){const r=Z(t),s=r.qi.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ys(o))throw o;z("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.qi=r.qi.remove(e),r.Ui.delete(s.target)}function yd(t,e,n){const r=Z(t);let s=oe.min(),i=fe();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,l,u){const c=Z(a),h=c.Ui.get(u);return h!==void 0?N.resolve(c.qi.get(h)):c.Cs.getTargetData(l,u)}(r,o,cn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.Li.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:fe())).next(a=>(cL(r,fC(e),a),{documents:a,Hi:i})))}function lL(t,e){const n=Z(t),r=Z(n.Cs),s=n.qi.get(e);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",i=>r.ne(i,e).next(o=>o?o.target:null))}function uL(t,e){const n=Z(t),r=n.Ki.get(e)||oe.min();return n.persistence.runTransaction("Get new document changes","readonly",s=>n.Gi.getAllFromCollectionGroup(s,e,Gb(r,-1),Number.MAX_SAFE_INTEGER)).then(s=>(cL(n,e,s),s))}function cL(t,e,n){let r=t.Ki.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ki.set(e,r)}async function Fq(t,e,n,r){const s=Z(t);let i=fe(),o=on();for(const u of n){const c=e.Ji(u.metadata.name);u.document&&(i=i.add(c));const h=e.Yi(u);h.setReadTime(e.Xi(u.metadata.readTime)),o=o.insert(c,h)}const a=s.Gi.newChangeBuffer({trackRemovals:!0}),l=await ha(s,function(u){return cn(Na(Ee.fromString(`__bundle__/docs/${u}`)))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",u=>aL(u,a,o).next(c=>(a.apply(u),c)).next(c=>s.Cs.removeMatchingKeysForTargetId(u,l.targetId).next(()=>s.Cs.addMatchingKeys(u,i,l.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(u,c.Wi,c.zi)).next(()=>c.Wi)))}async function Bq(t,e,n=fe()){const r=await ha(t,cn(ew(e.bundledQuery))),s=Z(t);return s.persistence.runTransaction("Save named query","readwrite",i=>{const o=tt(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return s.Ns.saveNamedQuery(i,e);const a=r.withResumeToken(ut.EMPTY_BYTE_STRING,o);return s.qi=s.qi.insert(a.targetId,a),s.Cs.updateTargetData(i,a).next(()=>s.Cs.removeMatchingKeysForTargetId(i,r.targetId)).next(()=>s.Cs.addMatchingKeys(i,n,r.targetId)).next(()=>s.Ns.saveNamedQuery(i,e))})}function nI(t,e){return`firestore_clients_${t}_${e}`}function rI(t,e,n){let r=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function Yp(t,e){return`firestore_targets_${t}_${e}`}class wd{constructor(e,n,r,s){this.user=e,this.batchId=n,this.state=r,this.error=s}static Zi(e,n,r){const s=JSON.parse(r);let i,o=typeof s=="object"&&["pending","acknowledged","rejected"].indexOf(s.state)!==-1&&(s.error===void 0||typeof s.error=="object");return o&&s.error&&(o=typeof s.error.message=="string"&&typeof s.error.code=="string",o&&(i=new j(s.error.code,s.error.message))),o?new wd(e,n,s.state,i):(Je("SharedClientState",`Failed to parse mutation state for ID '${n}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Vl{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Zi(e,n){const r=JSON.parse(n);let s,i=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return i&&r.error&&(i=typeof r.error.message=="string"&&typeof r.error.code=="string",i&&(s=new j(r.error.code,r.error.message))),i?new Vl(e,r.state,s):(Je("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class _d{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Zi(e,n){const r=JSON.parse(n);let s=typeof r=="object"&&r.activeTargetIds instanceof Array,i=Rf();for(let o=0;s&&o<r.activeTargetIds.length;++o)s=Zb(r.activeTargetIds[o]),i=i.add(r.activeTargetIds[o]);return s?new _d(e,i):(Je("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class aw{constructor(e,n){this.clientId=e,this.onlineState=n}static Zi(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new aw(n.clientId,n.onlineState):(Je("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Fg{constructor(){this.activeTargetIds=Rf()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xp{constructor(e,n,r,s,i){this.window=e,this.Hs=n,this.persistenceKey=r,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Qe(de),this.started=!1,this.cr=[];const o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ar=nI(this.persistenceKey,this.sr),this.hr=function(a){return`firestore_sequence_number_${a}`}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new Fg),this.lr=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.wr=function(a){return`firestore_online_state_${a}`}(this.persistenceKey),this.mr=function(a){return`firestore_bundle_loaded_v2_${a}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.vi();for(const r of e){if(r===this.sr)continue;const s=this.getItem(nI(this.persistenceKey,r));if(s){const i=_d.Zi(r,s);i&&(this.ur=this.ur.insert(i.clientId,i))}}this.gr();const n=this.storage.getItem(this.wr);if(n){const r=this.yr(n);r&&this.pr(r)}for(const r of this.cr)this.rr(r);this.cr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let n=!1;return this.ur.forEach((r,s)=>{s.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,n,r){this.Tr(e,n,r),this.Er(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Yp(this.persistenceKey,e));if(r){const s=Vl.Zi(e,r);s&&(n=s.state)}}return this.Ar.er(e),this.gr(),n}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Yp(this.persistenceKey,e))}updateQueryState(e,n,r){this.Rr(e,n,r)}handleUserChange(e,n,r){n.forEach(s=>{this.Er(s)}),this.currentUser=e,r.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return z("SharedClientState","READ",e,n),n}setItem(e,n){z("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){const n=e;if(n.storageArea===this.storage){if(z("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void Je("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.lr.test(n.key)){if(n.newValue==null){const r=this.vr(n.key);return this.Vr(r,null)}{const r=this.Sr(n.key,n.newValue);if(r)return this.Vr(r.clientId,r)}}else if(this.dr.test(n.key)){if(n.newValue!==null){const r=this.Dr(n.key,n.newValue);if(r)return this.Cr(r)}}else if(this._r.test(n.key)){if(n.newValue!==null){const r=this.Nr(n.key,n.newValue);if(r)return this.kr(r)}}else if(n.key===this.wr){if(n.newValue!==null){const r=this.yr(n.newValue);if(r)return this.pr(r)}}else if(n.key===this.hr){const r=function(s){let i=sn.at;if(s!=null)try{const o=JSON.parse(s);ie(typeof o=="number"),i=o}catch(o){Je("SharedClientState","Failed to read sequence number from WebStorage",o)}return i}(n.newValue);r!==sn.at&&this.sequenceNumberHandler(r)}else if(n.key===this.mr){const r=this.Or(n.newValue);await Promise.all(r.map(s=>this.syncEngine.Mr(s)))}}}else this.cr.push(n)})}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,n,r){const s=new wd(this.currentUser,e,n,r),i=rI(this.persistenceKey,this.currentUser,e);this.setItem(i,s.tr())}Er(e){const n=rI(this.persistenceKey,this.currentUser,e);this.removeItem(n)}br(e){const n={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(n))}Rr(e,n,r){const s=Yp(this.persistenceKey,e),i=new Vl(e,n,r);this.setItem(s,i.tr())}Pr(e){const n=JSON.stringify(Array.from(e));this.setItem(this.mr,n)}vr(e){const n=this.lr.exec(e);return n?n[1]:null}Sr(e,n){const r=this.vr(e);return _d.Zi(r,n)}Dr(e,n){const r=this.dr.exec(e),s=Number(r[1]),i=r[2]!==void 0?r[2]:null;return wd.Zi(new ft(i),s,n)}Nr(e,n){const r=this._r.exec(e),s=Number(r[1]);return Vl.Zi(s,n)}yr(e){return aw.Zi(e)}Or(e){return JSON.parse(e)}async Cr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Fr(e.batchId,e.state,e.error);z("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,n){const r=n?this.ur.insert(e,n):this.ur.remove(e),s=this.Ir(this.ur),i=this.Ir(r),o=[],a=[];return i.forEach(l=>{s.has(l)||o.push(l)}),s.forEach(l=>{i.has(l)||a.push(l)}),this.syncEngine.Br(o,a).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let n=Rf();return e.forEach((r,s)=>{n=n.unionWith(s.activeTargetIds)}),n}}class hL{constructor(){this.Lr=new Fg,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,n,r){this.qr[e]=n}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Fg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vq{Ur(e){}shutdown(){}}class sI{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}const jq={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class zq{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class qq extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http";this.oo=n+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,n,r,s,i){const o=this.ho(e,n);z("RestConnection","Sending: ",o,r);const a={};return this.lo(a,s,i),this.fo(e,o,a,r).then(l=>(z("RestConnection","Received: ",l),l),l=>{throw sa("RestConnection",`${e} failed with error: `,l,"url: ",o,"request:",r),l})}_o(e,n,r,s,i,o){return this.ao(e,n,r,s,i)}lo(e,n,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ra,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}ho(e,n){const r=jq[e];return`${this.oo}/v1/${n}:${r}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,n,r,s){return new Promise((i,o)=>{const a=new zj;a.setWithCredentials(!0),a.listenOnce(Bj.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Gp.NO_ERROR:const u=a.getResponseJson();z("Connection","XHR received:",JSON.stringify(u)),i(u);break;case Gp.TIMEOUT:z("Connection",'RPC "'+e+'" timed out'),o(new j(D.DEADLINE_EXCEEDED,"Request time out"));break;case Gp.HTTP_ERROR:const c=a.getStatus();if(z("Connection",'RPC "'+e+'" failed with status:',c,"response text:",a.getResponseText()),c>0){let h=a.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const p=function(m){const _=m.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(_)>=0?_:D.UNKNOWN}(f.status);o(new j(p,f.message))}else o(new j(D.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new j(D.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{z("Connection",'RPC "'+e+'" completed.')}});const l=JSON.stringify(s);a.send(n,"POST",l,r,15)})}wo(e,n,r){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Uj(),o=Fj(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new jj({})),this.lo(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const l=s.join("");z("Connection","Creating WebChannel: "+l,a);const u=i.createWebChannel(l,a);let c=!1,h=!1;const f=new zq({Hr:m=>{h?z("Connection","Not sending because WebChannel is closed:",m):(c||(z("Connection","Opening WebChannel transport."),u.open(),c=!0),z("Connection","WebChannel sending:",m),u.send(m))},Jr:()=>u.close()}),p=(m,_,E)=>{m.listen(_,g=>{try{E(g)}catch(y){setTimeout(()=>{throw y},0)}})};return p(u,Wc.EventType.OPEN,()=>{h||z("Connection","WebChannel transport opened.")}),p(u,Wc.EventType.CLOSE,()=>{h||(h=!0,z("Connection","WebChannel transport closed"),f.io())}),p(u,Wc.EventType.ERROR,m=>{h||(h=!0,sa("Connection","WebChannel transport errored:",m),f.io(new j(D.UNAVAILABLE,"The operation could not be completed")))}),p(u,Wc.EventType.MESSAGE,m=>{var _;if(!h){const E=m.data[0];ie(!!E);const g=E,y=g.error||((_=g[0])===null||_===void 0?void 0:_.error);if(y){z("Connection","WebChannel received error:",y);const v=y.status;let w=function(I){const R=nt[I];if(R!==void 0)return kC(R)}(v),b=y.message;w===void 0&&(w=D.INTERNAL,b="Unknown error status: "+v+" with message "+y.message),h=!0,f.io(new j(w,b)),u.close()}else z("Connection","WebChannel received:",E),f.ro(E)}}),p(o,Vj.STAT_EVENT,m=>{m.stat===pS.PROXY?z("Connection","Detected buffering proxy"):m.stat===pS.NOPROXY&&z("Connection","Detected no buffering proxy")}),setTimeout(()=>{f.so()},0),f}}function dL(){return typeof window<"u"?window:null}function _h(){return typeof document<"u"?document:null}function ic(t){return new Oz(t,!0)}class lw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Hs=e,this.timerId=n,this.mo=r,this.yo=s,this.po=i,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),s=Math.max(0,n-r);s>0&&z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){this.To!==null&&(this.To.skipDelay(),this.To=null)}cancel(){this.To!==null&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class fL{constructor(e,n,r,s,i,o,a,l){this.Hs=e,this.vo=r,this.Vo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new lw(e,n)}No(){return this.state===1||this.state===5||this.ko()}ko(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Oo()}async stop(){this.No()&&await this.close(0)}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&this.Do===null&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}async $o(){if(this.ko())return this.close(0)}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}async close(e,n){this.Lo(),this.qo(),this.xo.cancel(),this.So++,e!==4?this.xo.reset():n&&n.code===D.RESOURCE_EXHAUSTED?(Je(n.toString()),Je("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Uo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zr(n)}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.So===n&&this.Go(r,s)},r=>{e(()=>{const s=new j(D.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(s)})})}Go(e,n){const r=this.Ko(this.So);this.stream=this.jo(e,n),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{r(()=>this.Qo(s))}),this.stream.onMessage(s=>{r(()=>this.onMessage(s))})}Oo(){this.state=5,this.xo.Ro(async()=>{this.state=0,this.start()})}Qo(e){return z("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return n=>{this.Hs.enqueueAndForget(()=>this.So===e?n():(z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Wq extends fL{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.yt=i}jo(e,n){return this.connection.wo("Listen",e,n)}onMessage(e){this.xo.reset();const n=Uz(this.yt,e),r=function(s){if(!("targetChange"in s))return oe.min();const i=s.targetChange;return i.targetIds&&i.targetIds.length?oe.min():i.readTime?tt(i.readTime):oe.min()}(e);return this.listener.Wo(n,r)}zo(e){const n={};n.database=Tu(this.yt),n.addTarget=function(s,i){let o;const a=i.target;return o=dd(a)?{documents:MC(s,a)}:{query:$C(s,a)},o.targetId=i.targetId,i.resumeToken.approximateByteSize()>0?o.resumeToken=RC(s,i.resumeToken):i.snapshotVersion.compareTo(oe.min())>0&&(o.readTime=ca(s,i.snapshotVersion.toTimestamp())),o}(this.yt,e);const r=Bz(this.yt,e);r&&(n.labels=r),this.Bo(n)}Ho(e){const n={};n.database=Tu(this.yt),n.removeTarget=e,this.Bo(n)}}class Hq extends fL{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.yt=i,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,n){return this.connection.wo("Write",e,n)}onMessage(e){if(ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const n=Fz(e.writeResults,e.commitTime),r=tt(e.commitTime);return this.listener.Zo(r,n)}return ie(!e.writeResults||e.writeResults.length===0),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=Tu(this.yt),this.Bo(e)}Xo(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>bu(this.yt,r))};this.Bo(n)}}class Gq extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.yt=s,this.nu=!1}su(){if(this.nu)throw new j(D.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,n,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,i])=>this.connection.ao(e,n,r,s,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new j(D.UNKNOWN,s.toString())})}_o(e,n,r,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection._o(e,n,r,i,o,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new j(D.UNKNOWN,i.toString())})}terminate(){this.nu=!0}}class Kq{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){this.iu===0&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){this.state==="Online"?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,e==="Online"&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Je(n),this.ou=!1):z("OnlineStateTracker",n)}lu(){this.ru!==null&&(this.ru.cancel(),this.ru=null)}}class Qq{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=i,this.mu.Ur(o=>{r.enqueueAndForget(async()=>{Zs(this)&&(z("RemoteStore","Restarting streams for network reachability change."),await async function(a){const l=Z(a);l._u.add(4),await Oa(l),l.gu.set("Unknown"),l._u.delete(4),await oc(l)}(this))})}),this.gu=new Kq(r,s)}}async function oc(t){if(Zs(t))for(const e of t.wu)await e(!0)}async function Oa(t){for(const e of t.wu)await e(!1)}function Of(t,e){const n=Z(t);n.du.has(e.targetId)||(n.du.set(e.targetId,e),hw(n)?cw(n):$a(n).ko()&&uw(n,e))}function Cu(t,e){const n=Z(t),r=$a(n);n.du.delete(e),r.ko()&&pL(n,e),n.du.size===0&&(r.ko()?r.Fo():Zs(n)&&n.gu.set("Unknown"))}function uw(t,e){t.yu.Ot(e.targetId),$a(t).zo(e)}function pL(t,e){t.yu.Ot(e),$a(t).Ho(e)}function cw(t){t.yu=new Rz({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>t.du.get(e)||null}),$a(t).start(),t.gu.uu()}function hw(t){return Zs(t)&&!$a(t).No()&&t.du.size>0}function Zs(t){return Z(t)._u.size===0}function mL(t){t.yu=void 0}async function Yq(t){t.du.forEach((e,n)=>{uw(t,e)})}async function Xq(t,e){mL(t),hw(t)?(t.gu.hu(e),cw(t)):t.gu.set("Unknown")}async function Zq(t,e,n){if(t.gu.set("Online"),e instanceof PC&&e.state===2&&e.cause)try{await async function(r,s){const i=s.cause;for(const o of s.targetIds)r.du.has(o)&&(await r.remoteSyncer.rejectListen(o,i),r.du.delete(o),r.yu.removeTarget(o))}(t,e)}catch(r){z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ed(t,r)}else if(e instanceof yh?t.yu.Kt(e):e instanceof LC?t.yu.Jt(e):t.yu.jt(e),!n.isEqual(oe.min()))try{const r=await oL(t.localStore);n.compareTo(r)>=0&&await function(s,i){const o=s.yu.Zt(i);return o.targetChanges.forEach((a,l)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.du.get(l);u&&s.du.set(l,u.withResumeToken(a.resumeToken,i))}}),o.targetMismatches.forEach(a=>{const l=s.du.get(a);if(!l)return;s.du.set(a,l.withResumeToken(ut.EMPTY_BYTE_STRING,l.snapshotVersion)),pL(s,a);const u=new bs(l.target,a,1,l.sequenceNumber);uw(s,u)}),s.remoteSyncer.applyRemoteEvent(o)}(t,n)}catch(r){z("RemoteStore","Failed to raise snapshot:",r),await Ed(t,r)}}async function Ed(t,e,n){if(!Ys(e))throw e;t._u.add(1),await Oa(t),t.gu.set("Offline"),n||(n=()=>oL(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{z("RemoteStore","Retrying IndexedDB access"),await n(),t._u.delete(1),await oc(t)})}function gL(t,e){return e().catch(n=>Ed(t,n,e))}async function Ma(t){const e=Z(t),n=$s(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;Jq(e);)try{const s=await Uq(e.localStore,r);if(s===null){e.fu.length===0&&n.Fo();break}r=s.batchId,eW(e,s)}catch(s){await Ed(e,s)}vL(e)&&yL(e)}function Jq(t){return Zs(t)&&t.fu.length<10}function eW(t,e){t.fu.push(e);const n=$s(t);n.ko()&&n.Yo&&n.Xo(e.mutations)}function vL(t){return Zs(t)&&!$s(t).No()&&t.fu.length>0}function yL(t){$s(t).start()}async function tW(t){$s(t).eu()}async function nW(t){const e=$s(t);for(const n of t.fu)e.Xo(n.mutations)}async function rW(t,e,n){const r=t.fu.shift(),s=Zy.from(r,e,n);await gL(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ma(t)}async function sW(t,e){e&&$s(t).Yo&&await async function(n,r){if(s=r.code,xC(s)&&s!==D.ABORTED){const i=n.fu.shift();$s(n).Mo(),await gL(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,r)),await Ma(n)}var s}(t,e),vL(t)&&yL(t)}async function iI(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),z("RemoteStore","RemoteStore received new credentials");const r=Zs(n);n._u.add(3),await Oa(n),r&&n.gu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n._u.delete(3),await oc(n)}async function Bg(t,e){const n=Z(t);e?(n._u.delete(2),await oc(n)):e||(n._u.add(2),await Oa(n),n.gu.set("Unknown"))}function $a(t){return t.pu||(t.pu=function(e,n,r){const s=Z(e);return s.su(),new Wq(n,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(t.datastore,t.asyncQueue,{Yr:Yq.bind(null,t),Zr:Xq.bind(null,t),Wo:Zq.bind(null,t)}),t.wu.push(async e=>{e?(t.pu.Mo(),hw(t)?cw(t):t.gu.set("Unknown")):(await t.pu.stop(),mL(t))})),t.pu}function $s(t){return t.Iu||(t.Iu=function(e,n,r){const s=Z(e);return s.su(),new Hq(n,s.connection,s.authCredentials,s.appCheckCredentials,s.yt,r)}(t.datastore,t.asyncQueue,{Yr:tW.bind(null,t),Zr:sW.bind(null,t),tu:nW.bind(null,t),Zo:rW.bind(null,t)}),t.wu.push(async e=>{e?(t.Iu.Mo(),await Ma(t)):(await t.Iu.stop(),t.fu.length>0&&(z("RemoteStore",`Stopping write stream with ${t.fu.length} pending writes`),t.fu=[]))})),t.Iu}class dw{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new dw(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new j(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ua(t,e){if(Je("AsyncQueue",`${e}: ${t}`),Ys(t))return new j(D.UNAVAILABLE,`${e}: ${t}`);throw t}class Ho{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=wl(),this.sortedSet=new Qe(this.comparator)}static emptySet(e){return new Ho(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}class oI{constructor(){this.Tu=new Qe(X.comparator)}track(e){const n=e.doc.key,r=this.Tu.get(n);r?e.type!==0&&r.type===3?this.Tu=this.Tu.insert(n,e):e.type===3&&r.type!==1?this.Tu=this.Tu.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Tu=this.Tu.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Tu=this.Tu.remove(n):e.type===1&&r.type===2?this.Tu=this.Tu.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Tu=this.Tu.insert(n,{type:2,doc:e.doc}):J():this.Tu=this.Tu.insert(n,e)}Eu(){const e=[];return this.Tu.inorderTraversal((n,r)=>{e.push(r)}),e}}class fa{constructor(e,n,r,s,i,o,a,l,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new fa(e,n,Ho.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&tc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}class iW{constructor(){this.Au=void 0,this.listeners=[]}}class oW{constructor(){this.queries=new Xs(e=>dC(e),tc),this.onlineState="Unknown",this.Ru=new Set}}async function fw(t,e){const n=Z(t),r=e.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new iW),s)try{i.Au=await n.onListen(r)}catch(o){const a=Ua(o,`Initialization of query '${Ng(e.query)}' failed`);return void e.onError(a)}n.queries.set(r,i),i.listeners.push(e),e.bu(n.onlineState),i.Au&&e.Pu(i.Au)&&mw(n)}async function pw(t,e){const n=Z(t),r=e.query;let s=!1;const i=n.queries.get(r);if(i){const o=i.listeners.indexOf(e);o>=0&&(i.listeners.splice(o,1),s=i.listeners.length===0)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function aW(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.listeners)a.Pu(s)&&(r=!0);o.Au=s}}r&&mw(n)}function lW(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(e)}function mw(t){t.Ru.forEach(e=>{e.next()})}class gw{constructor(e,n,r){this.query=e,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new fa(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),n=!0):this.Cu(e,this.onlineState)&&(this.xu(e),n=!0),this.Su=e,n}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let n=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),n=!0),n}Cu(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Nu||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Du(e){if(e.docChanges.length>0)return!0;const n=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}xu(e){e=fa.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class uW{constructor(e,n){this.ku=e,this.byteLength=n}Ou(){return"metadata"in this.ku}}class aI{constructor(e){this.yt=e}Ji(e){return vr(this.yt,e)}Yi(e){return e.metadata.exists?OC(this.yt,e.document,!1):De.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return tt(e)}}class cW{constructor(e,n,r){this.Mu=e,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=wL(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++n;const r=Ee.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}$u(e){const n=new Map,r=new aI(this.yt);for(const s of e)if(s.metadata.queries){const i=r.Ji(s.metadata.name);for(const o of s.metadata.queries){const a=(n.get(o)||fe()).add(i);n.set(o,a)}}return n}async complete(){const e=await Fq(this.localStore,new aI(this.yt),this.documents,this.Mu.id),n=this.$u(this.documents);for(const r of this.queries)await Bq(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:e}}}function wL(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}class _L{constructor(e){this.key=e}}class EL{constructor(e){this.key=e}}class SL{constructor(e,n){this.query=e,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=fe(),this.mutatedKeys=fe(),this.Gu=pC(e),this.Qu=new Ho(this.Gu)}get ju(){return this.qu}Wu(e,n){const r=n?n.zu:new oI,s=n?n.Qu:this.Qu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((c,h)=>{const f=s.get(c),p=Ky(this.query,h)?h:null,m=!!f&&this.mutatedKeys.has(f.key),_=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let E=!1;f&&p?f.data.isEqual(p.data)?m!==_&&(r.track({type:3,doc:p}),E=!0):this.Hu(f,p)||(r.track({type:2,doc:p}),E=!0,(l&&this.Gu(p,l)>0||u&&this.Gu(p,u)<0)&&(a=!0)):!f&&p?(r.track({type:0,doc:p}),E=!0):f&&!p&&(r.track({type:1,doc:f}),E=!0,(l||u)&&(a=!0)),E&&(p?(o=o.add(p),i=_?i.add(c):i.delete(c)):(o=o.delete(c),i=i.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),i=i.delete(c.key),r.track({type:1,doc:c})}return{Qu:o,zu:r,$i:a,mutatedKeys:i}}Hu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const i=e.zu.Eu();i.sort((u,c)=>function(h,f){const p=m=>{switch(m){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return p(h)-p(f)}(u.type,c.type)||this.Gu(u.doc,c.doc)),this.Ju(r);const o=n?this.Yu():[],a=this.Ku.size===0&&this.current?1:0,l=a!==this.Uu;return this.Uu=a,i.length!==0||l?{snapshot:new fa(this.query,e.Qu,s,i,e.mutatedKeys,a===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}bu(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new oI,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(n=>this.qu=this.qu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.qu=this.qu.delete(n)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=fe(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const n=[];return e.forEach(r=>{this.Ku.has(r)||n.push(new EL(r))}),this.Ku.forEach(r=>{e.has(r)||n.push(new _L(r))}),n}tc(e){this.qu=e.Hi,this.Ku=fe();const n=this.Wu(e.documents);return this.applyChanges(n,!0)}ec(){return fa.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,this.Uu===0,this.hasCachedResults)}}class hW{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class dW{constructor(e){this.key=e,this.nc=!1}}class fW{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new Xs(a=>dC(a),tc),this.rc=new Map,this.oc=new Set,this.uc=new Qe(X.comparator),this.cc=new Map,this.ac=new rw,this.hc={},this.lc=new Map,this.fc=Gi.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return this.dc===!0}}async function pW(t,e){const n=Ew(t);let r,s;const i=n.ic.get(e);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.ec();else{const o=await ha(n.localStore,cn(e));n.isPrimaryClient&&Of(n.remoteStore,o);const a=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,s=await vw(n,e,r,a==="current",o.resumeToken)}return s}async function vw(t,e,n,r,s){t._c=(h,f,p)=>async function(m,_,E,g){let y=_.view.Wu(E);y.$i&&(y=await yd(m.localStore,_.query,!1).then(({documents:b})=>_.view.Wu(b,y)));const v=g&&g.targetChanges.get(_.targetId),w=_.view.applyChanges(y,m.isPrimaryClient,v);return Vg(m,_.targetId,w.Xu),w.snapshot}(t,h,f,p);const i=await yd(t.localStore,e,!0),o=new SL(e,i.Hi),a=o.Wu(i.documents),l=sc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);Vg(t,n,u.Xu);const c=new hW(e,n,o);return t.ic.set(e,c),t.rc.has(n)?t.rc.get(n).push(e):t.rc.set(n,[e]),u.snapshot}async function mW(t,e){const n=Z(t),r=n.ic.get(e),s=n.rc.get(r.targetId);if(s.length>1)return n.rc.set(r.targetId,s.filter(i=>!tc(i,e))),void n.ic.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await da(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Cu(n.remoteStore,r.targetId),pa(n,r.targetId)}).catch(Qs)):(pa(n,r.targetId),await da(n.localStore,r.targetId,!0))}async function gW(t,e,n){const r=Sw(t);try{const s=await function(i,o){const a=Z(i),l=Fe.now(),u=o.reduce((f,p)=>f.add(p.key),fe());let c,h;return a.persistence.runTransaction("Locally write mutations","readwrite",f=>{let p=on(),m=fe();return a.Gi.getEntries(f,u).next(_=>{p=_,p.forEach((E,g)=>{g.isValidDocument()||(m=m.add(E))})}).next(()=>a.localDocuments.getOverlayedDocuments(f,p)).next(_=>{c=_;const E=[];for(const g of o){const y=kz(g,c.get(g.key).overlayedDocument);y!=null&&E.push(new Zr(g.key,y,cC(y.value.mapValue),Ue.exists(!0)))}return a.mutationQueue.addMutationBatch(f,l,E,o)}).next(_=>{h=_;const E=_.applyToLocalDocumentSet(c,m);return a.documentOverlayCache.saveOverlays(f,_.batchId,E)})}).then(()=>({batchId:h.batchId,changes:bC(c)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(i,o,a){let l=i.hc[i.currentUser.toKey()];l||(l=new Qe(de)),l=l.insert(o,a),i.hc[i.currentUser.toKey()]=l}(r,s.batchId,n),await Jr(r,s.changes),await Ma(r.remoteStore)}catch(s){const i=Ua(s,"Failed to persist write");n.reject(i)}}async function IL(t,e){const n=Z(t);try{const r=await $q(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.cc.get(i);o&&(ie(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.nc=!0:s.modifiedDocuments.size>0?ie(o.nc):s.removedDocuments.size>0&&(ie(o.nc),o.nc=!1))}),await Jr(n,r,e)}catch(r){await Qs(r)}}function lI(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ic.forEach((i,o)=>{const a=o.view.bu(e);a.snapshot&&s.push(a.snapshot)}),function(i,o){const a=Z(i);a.onlineState=o;let l=!1;a.queries.forEach((u,c)=>{for(const h of c.listeners)h.bu(o)&&(l=!0)}),l&&mw(a)}(r.eventManager,e),s.length&&r.sc.Wo(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vW(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.cc.get(e),i=s&&s.key;if(i){let o=new Qe(X.comparator);o=o.insert(i,De.newNoDocument(i,oe.min()));const a=fe().add(i),l=new rc(oe.min(),new Map,new Le(de),o,a);await IL(r,l),r.uc=r.uc.remove(i),r.cc.delete(e),_w(r)}else await da(r.localStore,e,!1).then(()=>pa(r,e,n)).catch(Qs)}async function yW(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await Mq(n.localStore,e);ww(n,r,null),yw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jr(n,s)}catch(s){await Qs(s)}}async function wW(t,e,n){const r=Z(t);try{const s=await function(i,o){const a=Z(i);return a.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let u;return a.mutationQueue.lookupMutationBatch(l,o).next(c=>(ie(c!==null),u=c.keys(),a.mutationQueue.removeMutationBatch(l,c))).next(()=>a.mutationQueue.performConsistencyCheck(l)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(l,u,o)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,u)).next(()=>a.localDocuments.getDocuments(l,u))})}(r.localStore,e);ww(r,e,n),yw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Jr(r,s)}catch(s){await Qs(s)}}async function _W(t,e){const n=Z(t);Zs(n.remoteStore)||z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(i){const o=Z(i);return o.persistence.runTransaction("Get highest unacknowledged batch id","readonly",a=>o.mutationQueue.getHighestUnacknowledgedBatchId(a))}(n.localStore);if(r===-1)return void e.resolve();const s=n.lc.get(r)||[];s.push(e),n.lc.set(r,s)}catch(r){const s=Ua(r,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}function yw(t,e){(t.lc.get(e)||[]).forEach(n=>{n.resolve()}),t.lc.delete(e)}function ww(t,e,n){const r=Z(t);let s=r.hc[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.hc[r.currentUser.toKey()]=s}}function pa(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.rc.get(e))t.ic.delete(r),n&&t.sc.wc(r,n);t.rc.delete(e),t.isPrimaryClient&&t.ac.ls(e).forEach(r=>{t.ac.containsKey(r)||xL(t,r)})}function xL(t,e){t.oc.delete(e.path.canonicalString());const n=t.uc.get(e);n!==null&&(Cu(t.remoteStore,n),t.uc=t.uc.remove(e),t.cc.delete(n),_w(t))}function Vg(t,e,n){for(const r of n)r instanceof _L?(t.ac.addReference(r.key,e),EW(t,r)):r instanceof EL?(z("SyncEngine","Document no longer in limbo: "+r.key),t.ac.removeReference(r.key,e),t.ac.containsKey(r.key)||xL(t,r.key)):J()}function EW(t,e){const n=e.key,r=n.path.canonicalString();t.uc.get(n)||t.oc.has(r)||(z("SyncEngine","New document in limbo: "+n),t.oc.add(r),_w(t))}function _w(t){for(;t.oc.size>0&&t.uc.size<t.maxConcurrentLimboResolutions;){const e=t.oc.values().next().value;t.oc.delete(e);const n=new X(Ee.fromString(e)),r=t.fc.next();t.cc.set(r,new dW(n)),t.uc=t.uc.insert(n,r),Of(t.remoteStore,new bs(cn(Na(n.path)),r,2,sn.at))}}async function Jr(t,e,n){const r=Z(t),s=[],i=[],o=[];r.ic.isEmpty()||(r.ic.forEach((a,l)=>{o.push(r._c(l,e,n).then(u=>{if((u||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(l.targetId,u!=null&&u.fromCache?"not-current":"current"),u){s.push(u);const c=ow.Ci(l.targetId,u);i.push(c)}}))}),await Promise.all(o),r.sc.Wo(s),await async function(a,l){const u=Z(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",c=>N.forEach(l,h=>N.forEach(h.Si,f=>u.persistence.referenceDelegate.addReference(c,h.targetId,f)).next(()=>N.forEach(h.Di,f=>u.persistence.referenceDelegate.removeReference(c,h.targetId,f)))))}catch(c){if(!Ys(c))throw c;z("LocalStore","Failed to update sequence numbers: "+c)}for(const c of l){const h=c.targetId;if(!c.fromCache){const f=u.qi.get(h),p=f.snapshotVersion,m=f.withLastLimboFreeSnapshotVersion(p);u.qi=u.qi.insert(h,m)}}}(r.localStore,i))}async function SW(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){z("SyncEngine","User change. New user:",e.toKey());const r=await iL(n.localStore,e);n.currentUser=e,function(s,i){s.lc.forEach(o=>{o.forEach(a=>{a.reject(new j(D.CANCELLED,i))})}),s.lc.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Jr(n,r.ji)}}function IW(t,e){const n=Z(t),r=n.cc.get(e);if(r&&r.nc)return fe().add(r.key);{let s=fe();const i=n.rc.get(e);if(!i)return s;for(const o of i){const a=n.ic.get(o);s=s.unionWith(a.view.ju)}return s}}async function xW(t,e){const n=Z(t),r=await yd(n.localStore,e.query,!0),s=e.view.tc(r);return n.isPrimaryClient&&Vg(n,e.targetId,s.Xu),s}async function kW(t,e){const n=Z(t);return uL(n.localStore,e).then(r=>Jr(n,r))}async function TW(t,e,n,r){const s=Z(t),i=await function(o,a){const l=Z(o),u=Z(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",c=>u.Tn(c,a).next(h=>h?l.localDocuments.getDocuments(c,h):N.resolve(null)))}(s.localStore,e);i!==null?(n==="pending"?await Ma(s.remoteStore):n==="acknowledged"||n==="rejected"?(ww(s,e,r||null),yw(s,e),function(o,a){Z(Z(o).mutationQueue).An(a)}(s.localStore,e)):J(),await Jr(s,i)):z("SyncEngine","Cannot apply mutation batch with id: "+e)}async function bW(t,e){const n=Z(t);if(Ew(n),Sw(n),e===!0&&n.dc!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),s=await uI(n,r.toArray());n.dc=!0,await Bg(n.remoteStore,!0);for(const i of s)Of(n.remoteStore,i)}else if(e===!1&&n.dc!==!1){const r=[];let s=Promise.resolve();n.rc.forEach((i,o)=>{n.sharedClientState.isLocalQueryTarget(o)?r.push(o):s=s.then(()=>(pa(n,o),da(n.localStore,o,!0))),Cu(n.remoteStore,o)}),await s,await uI(n,r),function(i){const o=Z(i);o.cc.forEach((a,l)=>{Cu(o.remoteStore,l)}),o.ac.fs(),o.cc=new Map,o.uc=new Qe(X.comparator)}(n),n.dc=!1,await Bg(n.remoteStore,!1)}}async function uI(t,e,n){const r=Z(t),s=[],i=[];for(const o of e){let a;const l=r.rc.get(o);if(l&&l.length!==0){a=await ha(r.localStore,cn(l[0]));for(const u of l){const c=r.ic.get(u),h=await xW(r,c);h.snapshot&&i.push(h.snapshot)}}else{const u=await lL(r.localStore,o);a=await ha(r.localStore,u),await vw(r,kL(u),o,!1,a.resumeToken)}s.push(a)}return r.sc.Wo(i),s}function kL(t){return hC(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function CW(t){const e=Z(t);return Z(Z(e.localStore).persistence).vi()}async function LW(t,e,n,r){const s=Z(t);if(s.dc)return void z("SyncEngine","Ignoring unexpected query state notification.");const i=s.rc.get(e);if(i&&i.length>0)switch(n){case"current":case"not-current":{const o=await uL(s.localStore,fC(i[0])),a=rc.createSynthesizedRemoteEventForCurrentChange(e,n==="current",ut.EMPTY_BYTE_STRING);await Jr(s,o,a);break}case"rejected":await da(s.localStore,e,!0),pa(s,e,r);break;default:J()}}async function PW(t,e,n){const r=Ew(t);if(r.dc){for(const s of e){if(r.rc.has(s)){z("SyncEngine","Adding an already active target "+s);continue}const i=await lL(r.localStore,s),o=await ha(r.localStore,i);await vw(r,kL(i),o.targetId,!1,o.resumeToken),Of(r.remoteStore,o)}for(const s of n)r.rc.has(s)&&await da(r.localStore,s,!1).then(()=>{Cu(r.remoteStore,s),pa(r,s)}).catch(Qs)}}function Ew(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=IL.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IW.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vW.bind(null,e),e.sc.Wo=aW.bind(null,e.eventManager),e.sc.wc=lW.bind(null,e.eventManager),e}function Sw(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=yW.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wW.bind(null,e),e}function RW(t,e,n){const r=Z(t);(async function(s,i,o){try{const a=await i.getMetadata();if(await function(h,f){const p=Z(h),m=tt(f.createTime);return p.persistence.runTransaction("hasNewerBundle","readonly",_=>p.Ns.getBundleMetadata(_,f.id)).then(_=>!!_&&_.createTime.compareTo(m)>=0)}(s.localStore,a))return await i.close(),o._completeWith(function(h){return{taskState:"Success",documentsLoaded:h.totalDocuments,bytesLoaded:h.totalBytes,totalDocuments:h.totalDocuments,totalBytes:h.totalBytes}}(a)),Promise.resolve(new Set);o._updateProgress(wL(a));const l=new cW(a,s.localStore,i.yt);let u=await i.mc();for(;u;){const h=await l.Fu(u);h&&o._updateProgress(h),u=await i.mc()}const c=await l.complete();return await Jr(s,c.Lu,void 0),await function(h,f){const p=Z(h);return p.persistence.runTransaction("Save bundle","readwrite",m=>p.Ns.saveBundleMetadata(m,f))}(s.localStore,a),o._completeWith(c.progress),Promise.resolve(c.Bu)}catch(a){return sa("SyncEngine",`Loading bundle failed with ${a}`),o._failWith(a),Promise.resolve(new Set)}})(r,e,n).then(s=>{r.sharedClientState.notifyBundleLoaded(s)})}class TL{constructor(){this.synchronizeTabs=!1}async initialize(e){this.yt=ic(e.databaseInfo.databaseId),this.sharedClientState=this.gc(e),this.persistence=this.yc(e),await this.persistence.start(),this.localStore=this.Ic(e),this.gcScheduler=this.Tc(e,this.localStore),this.indexBackfillerScheduler=this.Ec(e,this.localStore)}Tc(e,n){return null}Ec(e,n){return null}Ic(e){return sL(this.persistence,new rL,e.initialUser,this.yt)}yc(e){return new nL(Af.Bs,this.yt)}gc(e){return new hL}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class bL extends TL{constructor(e,n,r){super(),this.Ac=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Ac.initialize(this,e),await Sw(this.Ac.syncEngine),await Ma(this.Ac.remoteStore),await this.persistence.li(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ic(e){return sL(this.persistence,new rL,e.initialUser,this.yt)}Tc(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new Eq(r,e.asyncQueue,n)}Ec(e,n){const r=new iz(n,this.persistence);return new sz(e.asyncQueue,r)}yc(e){const n=iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?tn.withCacheSize(this.cacheSizeBytes):tn.DEFAULT;return new sw(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,dL(),_h(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new hL}}class NW extends bL{constructor(e,n){super(e,n,!1),this.Ac=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Ac.syncEngine;this.sharedClientState instanceof Xp&&(this.sharedClientState.syncEngine={Fr:TW.bind(null,n),$r:LW.bind(null,n),Br:PW.bind(null,n),vi:CW.bind(null,n),Mr:kW.bind(null,n)},await this.sharedClientState.start()),await this.persistence.li(async r=>{await bW(this.Ac.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}gc(e){const n=dL();if(!Xp.C(n))throw new j(D.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=iw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Xp(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class Iw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>lI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=SW.bind(null,this.syncEngine),await Bg(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new oW}createDatastore(e){const n=ic(e.databaseInfo.databaseId),r=(s=e.databaseInfo,new qq(s));var s;return function(i,o,a,l){return new Gq(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return n=this.localStore,r=this.datastore,s=e.asyncQueue,i=a=>lI(this.syncEngine,a,0),o=sI.C()?new sI:new Vq,new Qq(n,r,s,i,o);var n,r,s,i,o}createSyncEngine(e,n){return function(r,s,i,o,a,l,u){const c=new fW(r,s,i,o,a,l);return u&&(c.dc=!0),c}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(e){const n=Z(e);z("RemoteStore","RemoteStore shutting down."),n._u.add(5),await Oa(n),n.mu.shutdown(),n.gu.set("Unknown")}(this.remoteStore)}}function xw(t,e,n){if(!n)throw new j(D.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function CL(t,e,n,r){if(e===!0&&r===!0)throw new j(D.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function cI(t){if(!X.isDocumentKey(t))throw new j(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function hI(t){if(X.isDocumentKey(t))throw new j(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Mf(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function xe(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new j(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mf(t);throw new j(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function LL(t,e){if(e<=0)throw new j(D.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}const dI=new Map;class fI{constructor(e){var n;if(e.host===void 0){if(e.ssl!==void 0)throw new j(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new j(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,CL("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ac{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fI({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new j(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new j(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fI(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new Hj;switch(n.type){case"gapi":const r=n.client;return new Yj(r,n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new j(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=dI.get(e);n&&(z("ComponentProvider","Removing Datastore"),dI.delete(e),n.terminate())}(this),Promise.resolve()}}function PL(t,e,n,r={}){var s;const i=(t=xe(t,ac))._getSettings();if(i.host!=="firestore.googleapis.com"&&i.host!==e&&sa("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:`${e}:${n}`,ssl:!1})),r.mockUserToken){let o,a;if(typeof r.mockUserToken=="string")o=r.mockUserToken,a=ft.MOCK_USER;else{o=aT(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new j(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new ft(l)}t._authCredentials=new Gj(new zb(o,a))}}class Oe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Oe(this.firestore,e,this._key)}}class Pt{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Pt(this.firestore,e,this._query)}}class yr extends Pt{constructor(e,n,r){super(e,n,Na(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Oe(this.firestore,null,new X(e))}withConverter(e){return new yr(this.firestore,e,this._path)}}function pt(t,e,...n){if(t=re(t),xw("collection","path",e),t instanceof ac){const r=Ee.fromString(e,...n);return hI(r),new yr(t,null,r)}{if(!(t instanceof Oe||t instanceof yr))throw new j(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return hI(r),new yr(t.firestore,null,r)}}function DW(t,e){if(t=xe(t,ac),xw("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new j(D.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pt(t,null,function(n){return new Xr(Ee.emptyPath(),n)}(e))}function Ut(t,e,...n){if(t=re(t),arguments.length===1&&(e=qb.R()),xw("doc","path",e),t instanceof ac){const r=Ee.fromString(e,...n);return cI(r),new Oe(t,null,new X(r))}{if(!(t instanceof Oe||t instanceof yr))throw new j(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ee.fromString(e,...n));return cI(r),new Oe(t.firestore,t instanceof yr?t.converter:null,new X(r))}}function RL(t,e){return t=re(t),e=re(e),(t instanceof Oe||t instanceof yr)&&(e instanceof Oe||e instanceof yr)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function NL(t,e){return t=re(t),e=re(e),t instanceof Pt&&e instanceof Pt&&t.firestore===e.firestore&&tc(t._query,e._query)&&t.converter===e.converter}function pI(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class $f{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Je("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class AW{constructor(e,n){this.Pc=e,this.yt=n,this.metadata=new gt,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(r==null?void 0:r.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}async getMetadata(){return this.metadata.promise}async mc(){return await this.getMetadata(),this.Vc()}async Vc(){const e=await this.Sc();if(e===null)return null;const n=this.vc.decode(e),r=Number(n);isNaN(r)&&this.Dc(`length string (${n}) is not valid number`);const s=await this.Cc(r);return new uW(JSON.parse(s),e.length+r)}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async Sc(){for(;this.xc()<0&&!await this.Nc(););if(this.buffer.length===0)return null;const e=this.xc();e<0&&this.Dc("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Cc(e){for(;this.buffer.length<e;)await this.Nc()&&this.Dc("Reached the end of bundle when more is expected.");const n=this.vc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}async Nc(){const e=await this.Pc.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}class OW{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new j(D.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=await async function(r,s){const i=Z(r),o=Tu(i.yt)+"/documents",a={documents:s.map(h=>ku(i.yt,h))},l=await i._o("BatchGetDocuments",o,a,s.length),u=new Map;l.forEach(h=>{const f=$z(i.yt,h);u.set(f.key.toString(),f)});const c=[];return s.forEach(h=>{const f=u.get(h.toString());ie(!!f),c.push(f)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Aa(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const s=X.fromPath(r);this.mutations.push(new Qy(s,this.precondition(s)))}),await async function(n,r){const s=Z(n),i=Tu(s.yt)+"/documents",o={writes:r.map(a=>bu(s.yt,a))};await s.ao("Commit",i,o)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw J();n=oe.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new j(D.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(oe.min())?Ue.exists(!1):Ue.updateTime(n):Ue.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(oe.min()))throw new j(D.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ue.updateTime(n)}return Ue.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class MW{constructor(e,n,r,s,i){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=s,this.deferred=i,this.kc=r.maxAttempts,this.xo=new lw(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){this.xo.Ro(async()=>{const e=new OW(this.datastore),n=this.Mc(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(s=>{this.Fc(s)}))}).catch(r=>{this.Fc(r)})})}Mc(e){try{const n=this.updateFunction(e);return!Ju(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!xC(n)}return!1}}class $W{constructor(e,n,r,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ft.UNAUTHENTICATED,this.clientId=qb.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async i=>{z("FirestoreClient","Received user=",i.uid),await this.authCredentialListener(i),this.user=i}),this.appCheckCredentials.start(r,i=>(z("FirestoreClient","Received new app check token=",i),this.appCheckCredentialListener(i,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new j(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ua(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function DL(t,e){t.asyncQueue.verifyOperationInProgress(),z("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await iL(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t.offlineComponents=e}async function AL(t,e){t.asyncQueue.verifyOperationInProgress();const n=await kw(t);z("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(s=>iI(e.remoteStore,s)),t.setAppCheckTokenChangeListener((s,i)=>iI(e.remoteStore,i)),t.onlineComponents=e}async function kw(t){return t.offlineComponents||(z("FirestoreClient","Using default OfflineComponentProvider"),await DL(t,new TL)),t.offlineComponents}async function Uf(t){return t.onlineComponents||(z("FirestoreClient","Using default OnlineComponentProvider"),await AL(t,new Iw)),t.onlineComponents}function OL(t){return kw(t).then(e=>e.persistence)}function Tw(t){return kw(t).then(e=>e.localStore)}function ML(t){return Uf(t).then(e=>e.remoteStore)}function bw(t){return Uf(t).then(e=>e.syncEngine)}function UW(t){return Uf(t).then(e=>e.datastore)}async function ma(t){const e=await Uf(t),n=e.eventManager;return n.onListen=pW.bind(null,e.syncEngine),n.onUnlisten=mW.bind(null,e.syncEngine),n}function FW(t){return t.asyncQueue.enqueue(async()=>{const e=await OL(t),n=await ML(t);return e.setNetworkEnabled(!0),function(r){const s=Z(r);return s._u.delete(0),oc(s)}(n)})}function BW(t){return t.asyncQueue.enqueue(async()=>{const e=await OL(t),n=await ML(t);return e.setNetworkEnabled(!1),async function(r){const s=Z(r);s._u.add(0),await Oa(s),s.gu.set("Offline")}(n)})}function VW(t,e){const n=new gt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,i){try{const o=await function(a,l){const u=Z(a);return u.persistence.runTransaction("read document","readonly",c=>u.localDocuments.getDocument(c,l))}(r,s);o.isFoundDocument()?i.resolve(o):o.isNoDocument()?i.resolve(null):i.reject(new j(D.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(o){const a=Ua(o,`Failed to get document '${s} from cache`);i.reject(a)}}(await Tw(t),e,n)),n.promise}function $L(t,e,n={}){const r=new gt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new $f({next:h=>{i.enqueueAndForget(()=>pw(s,c));const f=h.docs.has(o);!f&&h.fromCache?l.reject(new j(D.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&a&&a.source==="server"?l.reject(new j(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new gw(Na(o.path),u,{includeMetadataChanges:!0,Nu:!0});return fw(s,c)}(await ma(t),t.asyncQueue,e,n,r)),r.promise}function jW(t,e){const n=new gt;return t.asyncQueue.enqueueAndForget(async()=>async function(r,s,i){try{const o=await yd(r,s,!0),a=new SL(s,o.Hi),l=a.Wu(o.documents),u=a.applyChanges(l,!1);i.resolve(u.snapshot)}catch(o){const a=Ua(o,`Failed to execute query '${s} against cache`);i.reject(a)}}(await Tw(t),e,n)),n.promise}function UL(t,e,n={}){const r=new gt;return t.asyncQueue.enqueueAndForget(async()=>function(s,i,o,a,l){const u=new $f({next:h=>{i.enqueueAndForget(()=>pw(s,c)),h.fromCache&&a.source==="server"?l.reject(new j(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),c=new gw(o,u,{includeMetadataChanges:!0,Nu:!0});return fw(s,c)}(await ma(t),t.asyncQueue,e,n,r)),r.promise}function zW(t,e){const n=new $f(e);return t.asyncQueue.enqueueAndForget(async()=>function(r,s){Z(r).Ru.add(s),s.next()}(await ma(t),n)),()=>{n.bc(),t.asyncQueue.enqueueAndForget(async()=>function(r,s){Z(r).Ru.delete(s)}(await ma(t),n))}}function qW(t,e,n,r){const s=function(i,o){let a;return a=typeof i=="string"?new TextEncoder().encode(i):i,function(l,u){return new AW(l,u)}(function(l,u){if(l instanceof Uint8Array)return pI(l,u);if(l instanceof ArrayBuffer)return pI(new Uint8Array(l),u);if(l instanceof ReadableStream)return l.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(a),o)}(n,ic(e));t.asyncQueue.enqueueAndForget(async()=>{RW(await bw(t),s,r)})}function WW(t,e){return t.asyncQueue.enqueue(async()=>function(n,r){const s=Z(n);return s.persistence.runTransaction("Get named query","readonly",i=>s.Ns.getNamedQuery(i,r))}(await Tw(t),e))}class HW{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new lw(this,"async_queue_retry"),this.Wc=()=>{const n=_h();n&&z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.xo.Po()};const e=_h();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const n=_h();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const n=new gt;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}async Jc(){if(this.Lc.length!==0){try{await this.Lc[0](),this.Lc.shift(),this.xo.reset()}catch(e){if(!Ys(e))throw e;z("AsyncQueue","Operation failed with retryable error: "+e)}this.Lc.length>0&&this.xo.Ro(()=>this.Jc())}}Hc(e){const n=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{this.Kc=r,this.Gc=!1;const s=function(i){let o=i.message||"";return i.stack&&(o=i.stack.includes(i.message)?i.stack:i.message+`
`+i.stack),o}(r);throw Je("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.Gc=!1,r))));return this.Bc=n,n}enqueueAfterDelay(e,n,r){this.zc(),this.jc.indexOf(e)>-1&&(n=0);const s=dw.createAndSchedule(this,e,n,r,i=>this.Yc(i));return this.Uc.push(s),s}zc(){this.Kc&&J()}verifyOperationInProgress(){}async Xc(){let e;do e=this.Bc,await e;while(e!==this.Bc)}Zc(e){for(const n of this.Uc)if(n.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const n=this.Uc.indexOf(e);this.Uc.splice(n,1)}}function jg(t){return function(e,n){if(typeof e!="object"||e===null)return!1;const r=e;for(const s of n)if(s in r&&typeof r[s]=="function")return!0;return!1}(t,["next","error","complete"])}class GW{constructor(){this._progressObserver={},this._taskCompletionResolver=new gt,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const KW=-1;class Ye extends ac{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new HW,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||FL(this),this._firestoreClient.terminate()}}function QW(t,e){const n=typeof t=="object"?t:fT(),r=typeof t=="string"?t:e||"(default)",s=Qv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=WO("firestore");i&&PL(s,...i)}return s}function Et(t){return t._firestoreClient||FL(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function FL(t){var e;const n=t._freezeSettings(),r=function(s,i,o,a){return new oz(s,i,o,a.host,a.ssl,a.experimentalForceLongPolling,a.experimentalAutoDetectLongPolling,a.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new $W(t._authCredentials,t._appCheckCredentials,t._queue,r)}function YW(t,e){VL(t=xe(t,Ye));const n=Et(t),r=t._freezeSettings(),s=new Iw;return BL(n,s,new bL(s,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function XW(t){VL(t=xe(t,Ye));const e=Et(t),n=t._freezeSettings(),r=new Iw;return BL(e,r,new NW(r,n.cacheSizeBytes))}function BL(t,e,n){const r=new gt;return t.asyncQueue.enqueue(async()=>{try{await DL(t,n),await AL(t,e),r.resolve()}catch(s){const i=s;if(!function(o){return o.name==="FirebaseError"?o.code===D.FAILED_PRECONDITION||o.code===D.UNIMPLEMENTED:typeof DOMException<"u"&&o instanceof DOMException?o.code===22||o.code===20||o.code===11:!0}(i))throw i;sa("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}}).then(()=>r.promise)}function ZW(t){if(t._initialized&&!t._terminated)throw new j(D.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new gt;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(n){if(!Hn.C())return Promise.resolve();const r=n+"main";await Hn.delete(r)}(iw(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function JW(t){return function(e){const n=new gt;return e.asyncQueue.enqueueAndForget(async()=>_W(await bw(e),n)),n.promise}(Et(t=xe(t,Ye)))}function e3(t){return FW(Et(t=xe(t,Ye)))}function t3(t){return BW(Et(t=xe(t,Ye)))}function n3(t,e){const n=Et(t=xe(t,Ye)),r=new GW;return qW(n,t._databaseId,e,r),r}function r3(t,e){return WW(Et(t=xe(t,Ye)),e).then(n=>n?new Pt(t,null,n.query):null)}function VL(t){if(t._initialized||t._terminated)throw new j(D.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Er{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Er(ut.fromBase64String(e))}catch(n){throw new j(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Er(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Us{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new j(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class no{constructor(e){this._methodName=e}}class Ff{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new j(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new j(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return de(this._lat,e._lat)||de(this._long,e._long)}}const s3=/^__.*__$/;class i3{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Da(e,this.data,n,this.fieldTransforms)}}class jL{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function zL(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class Bf{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=s,i===void 0&&this.na(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Bf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ia({path:r,oa:!1});return s.ua(e),s}ca(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.ia({path:r,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Sd(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(e.length===0)throw this.ha("Document fields must not be empty");if(zL(this.sa)&&s3.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class o3{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.yt=r||ic(e)}da(e,n,r,s=!1){return new Bf({sa:e,methodName:n,fa:r,path:et.emptyPath(),oa:!1,la:s},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function ro(t){const e=t._freezeSettings(),n=ic(t._databaseId);return new o3(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Vf(t,e,n,r,s,i={}){const o=t.da(i.merge||i.mergeFields?2:0,e,n,s);Rw("Data must be an object, but it was:",o,r);const a=HL(r,o);let l,u;if(i.merge)l=new _n(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const c=[];for(const h of i.mergeFields){const f=zg(e,h,n);if(!o.contains(f))throw new j(D.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);KL(c,f)||c.push(f)}l=new _n(c),u=o.fieldTransforms.filter(h=>l.covers(h.field))}else l=null,u=o.fieldTransforms;return new i3(new xt(a),l,u)}class lc extends no{_toFieldTransform(e){if(e.sa!==2)throw e.sa===1?e.ha(`${this._methodName}() can only appear at the top level of your update data`):e.ha(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lc}}function qL(t,e,n){return new Bf({sa:3,fa:e.settings.fa,methodName:t._methodName,oa:n},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class Cw extends no{_toFieldTransform(e){return new nc(e.path,new la)}isEqual(e){return e instanceof Cw}}class a3 extends no{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=qL(this,e,!0),r=this._a.map(i=>so(i,n)),s=new zi(r);return new nc(e.path,s)}isEqual(e){return this===e}}class l3 extends no{constructor(e,n){super(e),this._a=n}_toFieldTransform(e){const n=qL(this,e,!0),r=this._a.map(i=>so(i,n)),s=new qi(r);return new nc(e.path,s)}isEqual(e){return this===e}}class u3 extends no{constructor(e,n){super(e),this.wa=n}_toFieldTransform(e){const n=new ua(e.yt,vC(e.yt,this.wa));return new nc(e.path,n)}isEqual(e){return this===e}}function Lw(t,e,n,r){const s=t.da(1,e,n);Rw("Data must be an object, but it was:",s,r);const i=[],o=xt.empty();to(r,(l,u)=>{const c=Nw(e,l,n);u=re(u);const h=s.ca(c);if(u instanceof lc)i.push(c);else{const f=so(u,h);f!=null&&(i.push(c),o.set(c,f))}});const a=new _n(i);return new jL(o,a,s.fieldTransforms)}function Pw(t,e,n,r,s,i){const o=t.da(1,e,n),a=[zg(e,r,n)],l=[s];if(i.length%2!=0)throw new j(D.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let f=0;f<i.length;f+=2)a.push(zg(e,i[f])),l.push(i[f+1]);const u=[],c=xt.empty();for(let f=a.length-1;f>=0;--f)if(!KL(u,a[f])){const p=a[f];let m=l[f];m=re(m);const _=o.ca(p);if(m instanceof lc)u.push(p);else{const E=so(m,_);E!=null&&(u.push(p),c.set(p,E))}}const h=new _n(u);return new jL(c,h,o.fieldTransforms)}function WL(t,e,n,r=!1){return so(n,t.da(r?4:3,e))}function so(t,e){if(GL(t=re(t)))return Rw("Unsupported field value:",e,t),HL(t,e);if(t instanceof no)return function(n,r){if(!zL(r.sa))throw r.ha(`${n._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${n._methodName}() is not currently supported inside arrays`);const s=n._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.oa&&e.sa!==4)throw e.ha("Nested arrays are not supported");return function(n,r){const s=[];let i=0;for(const o of n){let a=so(o,r.aa(i));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),i++}return{arrayValue:{values:s}}}(t,e)}return function(n,r){if((n=re(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return vC(r.yt,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const s=Fe.fromDate(n);return{timestampValue:ca(r.yt,s)}}if(n instanceof Fe){const s=new Fe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:ca(r.yt,s)}}if(n instanceof Ff)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Er)return{bytesValue:RC(r.yt,n._byteString)};if(n instanceof Oe){const s=r.databaseId,i=n.firestore._databaseId;if(!i.isEqual(s))throw r.ha(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Yy(n.firestore._databaseId||r.databaseId,n._key.path)}}throw r.ha(`Unsupported field value: ${Mf(n)}`)}(t,e)}function HL(t,e){const n={};return Xb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):to(t,(r,s)=>{const i=so(s,e.ra(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function GL(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Fe||t instanceof Ff||t instanceof Er||t instanceof Oe||t instanceof no)}function Rw(t,e,n){if(!GL(n)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(n)){const r=Mf(n);throw r==="an object"?e.ha(t+" a custom object"):e.ha(t+" "+r)}}function zg(t,e,n){if((e=re(e))instanceof Us)return e._internalPath;if(typeof e=="string")return Nw(t,e);throw Sd("Field path arguments must be of type string or ",t,!1,void 0,n)}const c3=new RegExp("[~\\*/\\[\\]]");function Nw(t,e,n){if(e.search(c3)>=0)throw Sd(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Us(...e.split("."))._internalPath}catch{throw Sd(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Sd(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new j(D.INVALID_ARGUMENT,a+t+l)}function KL(t,e){return t.some(n=>n.isEqual(e))}class Lu{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Oe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new h3(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class h3 extends Lu{data(){return super.data()}}function jf(t,e){return typeof e=="string"?Nw(t,e):e instanceof Us?e._internalPath:e._delegate._internalPath}function QL(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new j(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dw{}class uc extends Dw{}function tr(t,e,...n){let r=[];e instanceof Dw&&r.push(e),r=r.concat(n),function(s){const i=s.filter(a=>a instanceof Aw).length,o=s.filter(a=>a instanceof zf).length;if(i>1||i>0&&o>0)throw new j(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class zf extends uc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new zf(e,n,r)}_apply(e){const n=this._parse(e);return ZL(e._query,n),new Pt(e.firestore,e.converter,Rg(e._query,n))}_parse(e){const n=ro(e.firestore);return function(s,i,o,a,l,u,c){let h;if(l.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new j(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){gI(c,u);const f=[];for(const p of c)f.push(mI(a,s,p));h={arrayValue:{values:f}}}else h=mI(a,s,c)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||gI(c,u),h=WL(o,i,c,u==="in"||u==="not-in");return ye.create(l,u,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function d3(t,e,n){const r=e,s=jf("where",t);return zf._create(s,r,n)}class Aw extends Dw{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Aw(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Te.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(r,s){let i=r;const o=s.getFlattenedFilters();for(const a of o)ZL(i,a),i=Rg(i,a)}(e._query,n),new Pt(e.firestore,e.converter,Rg(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ow extends uc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ow(e,n)}_apply(e){const n=function(r,s,i){if(r.startAt!==null)throw new j(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new j(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const o=new Wo(s,i);return function(a,l){if(Hy(a)===null){const u=Cf(a);u!==null&&JL(a,u,l.field)}}(r,o),o}(e._query,this._field,this._direction);return new Pt(e.firestore,e.converter,function(r,s){const i=r.explicitOrderBy.concat([s]);return new Xr(r.path,r.collectionGroup,i,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,n))}}function YL(t,e="asc"){const n=e,r=jf("orderBy",t);return Ow._create(r,n)}class qf extends uc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new qf(e,n,r)}_apply(e){return new Pt(e.firestore,e.converter,pd(e._query,this._limit,this._limitType))}}function f3(t){return LL("limit",t),qf._create("limit",t,"F")}function p3(t){return LL("limitToLast",t),qf._create("limitToLast",t,"L")}class Wf extends uc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Wf(e,n,r)}_apply(e){const n=XL(e,this.type,this._docOrFields,this._inclusive);return new Pt(e.firestore,e.converter,function(r,s){return new Xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,s,r.endAt)}(e._query,n))}}function m3(...t){return Wf._create("startAt",t,!0)}function g3(...t){return Wf._create("startAfter",t,!1)}class Hf extends uc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Hf(e,n,r)}_apply(e){const n=XL(e,this.type,this._docOrFields,this._inclusive);return new Pt(e.firestore,e.converter,function(r,s){return new Xr(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,s)}(e._query,n))}}function v3(...t){return Hf._create("endBefore",t,!1)}function y3(...t){return Hf._create("endAt",t,!0)}function XL(t,e,n,r){if(n[0]=re(n[0]),n[0]instanceof Lu)return function(s,i,o,a,l){if(!a)throw new j(D.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${o}().`);const u=[];for(const c of Li(s))if(c.field.isKeyField())u.push(Vi(i,a.key));else{const h=a.data.field(c.field);if(Wy(h))throw new j(D.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=c.field.canonicalString();throw new j(D.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${f}' (used as the orderBy) does not exist.`)}u.push(h)}return new Ms(u,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=ro(t.firestore);return function(i,o,a,l,u,c){const h=i.explicitOrderBy;if(u.length>h.length)throw new j(D.INVALID_ARGUMENT,`Too many arguments provided to ${l}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const f=[];for(let p=0;p<u.length;p++){const m=u[p];if(h[p].field.isKeyField()){if(typeof m!="string")throw new j(D.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${l}(), but got a ${typeof m}`);if(!Gy(i)&&m.indexOf("/")!==-1)throw new j(D.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${l}() must be a plain document ID, but '${m}' contains a slash.`);const _=i.path.child(Ee.fromString(m));if(!X.isDocumentKey(_))throw new j(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${l}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const E=new X(_);f.push(Vi(o,E))}else{const _=WL(a,l,m);f.push(_)}}return new Ms(f,c)}(t._query,t.firestore._databaseId,s,e,n,r)}}function mI(t,e,n){if(typeof(n=re(n))=="string"){if(n==="")throw new j(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gy(e)&&n.indexOf("/")!==-1)throw new j(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ee.fromString(n));if(!X.isDocumentKey(r))throw new j(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Vi(t,new X(r))}if(n instanceof Oe)return Vi(t,n._key);throw new j(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Mf(n)}.`)}function gI(t,e){if(!Array.isArray(t)||t.length===0)throw new j(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(t.length>10)throw new j(D.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function ZL(t,e){if(e.isInequality()){const r=Cf(t),s=e.field;if(r!==null&&!r.isEqual(s))throw new j(D.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${s.toString()}'`);const i=Hy(t);i!==null&&JL(t,s,i)}const n=function(r,s){for(const i of r)for(const o of i.getFlattenedFilters())if(s.indexOf(o.op)>=0)return o.op;return null}(t.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new j(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new j(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function JL(t,e,n){if(!n.isEqual(e))throw new j(D.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Mw{convertValue(e,n="none"){switch(Bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return He(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw J()}}convertObject(e,n){const r={};return to(e.fields,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertGeoPoint(e){return new Ff(He(e.latitude),He(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Jb(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Su(e));default:return null}}convertTimestamp(e){const n=As(e);return new Fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ee.fromString(e);ie(VC(r));const s=new Ds(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||Je(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}function Gf(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class w3 extends Mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}class wi{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Wr extends Lu{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(jf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class jl extends Wr{data(e={}){return super.data(e)}}class Fs{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new wi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new jl(this._firestore,this._userDataWriter,r.key,r,new wi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new j(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let i=0;return r._snapshot.docChanges.map(o=>{const a=new jl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new wi(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);return o.doc,{type:"added",doc:a,oldIndex:-1,newIndex:i++}})}{let i=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(o=>s||o.type!==3).map(o=>{const a=new jl(r._firestore,r._userDataWriter,o.doc.key,o.doc,new wi(r._snapshot.mutatedKeys.has(o.doc.key),r._snapshot.fromCache),r.query.converter);let l=-1,u=-1;return o.type!==0&&(l=i.indexOf(o.doc.key),i=i.delete(o.doc.key)),o.type!==1&&(i=i.add(o.doc),u=i.indexOf(o.doc.key)),{type:_3(o.type),doc:a,oldIndex:l,newIndex:u}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function _3(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}function eP(t,e){return t instanceof Wr&&e instanceof Wr?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Fs&&e instanceof Fs&&t._firestore===e._firestore&&NL(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function E3(t){t=xe(t,Oe);const e=xe(t.firestore,Ye);return $L(Et(e),t._key).then(n=>$w(e,t,n))}class io extends Mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Er(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Oe(this.firestore,null,n)}}function S3(t){t=xe(t,Oe);const e=xe(t.firestore,Ye),n=Et(e),r=new io(e);return VW(n,t._key).then(s=>new Wr(e,r,t._key,s,new wi(s!==null&&s.hasLocalMutations,!0),t.converter))}function I3(t){t=xe(t,Oe);const e=xe(t.firestore,Ye);return $L(Et(e),t._key,{source:"server"}).then(n=>$w(e,t,n))}function x3(t){t=xe(t,Pt);const e=xe(t.firestore,Ye),n=Et(e),r=new io(e);return QL(t._query),UL(n,t._query).then(s=>new Fs(e,r,t,s))}function k3(t){t=xe(t,Pt);const e=xe(t.firestore,Ye),n=Et(e),r=new io(e);return jW(n,t._query).then(s=>new Fs(e,r,t,s))}function T3(t){t=xe(t,Pt);const e=xe(t.firestore,Ye),n=Et(e),r=new io(e);return UL(n,t._query,{source:"server"}).then(s=>new Fs(e,r,t,s))}function vI(t,e,n){t=xe(t,Oe);const r=xe(t.firestore,Ye),s=Gf(t.converter,e,n);return cc(r,[Vf(ro(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Ue.none())])}function _i(t,e,n,...r){t=xe(t,Oe);const s=xe(t.firestore,Ye),i=ro(s);let o;return o=typeof(e=re(e))=="string"||e instanceof Us?Pw(i,"updateDoc",t._key,e,n,r):Lw(i,"updateDoc",t._key,e),cc(s,[o.toMutation(t._key,Ue.exists(!0))])}function Bs(t){return cc(xe(t.firestore,Ye),[new Aa(t._key,Ue.none())])}function ga(t,e){const n=xe(t.firestore,Ye),r=Ut(t),s=Gf(t.converter,e);return cc(n,[Vf(ro(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Ue.exists(!1))]).then(()=>r)}function mn(t,...e){var n,r,s;t=re(t);let i={includeMetadataChanges:!1},o=0;typeof e[o]!="object"||jg(e[o])||(i=e[o],o++);const a={includeMetadataChanges:i.includeMetadataChanges};if(jg(e[o])){const h=e[o];e[o]=(n=h.next)===null||n===void 0?void 0:n.bind(h),e[o+1]=(r=h.error)===null||r===void 0?void 0:r.bind(h),e[o+2]=(s=h.complete)===null||s===void 0?void 0:s.bind(h)}let l,u,c;if(t instanceof Oe)u=xe(t.firestore,Ye),c=Na(t._key.path),l={next:h=>{e[o]&&e[o]($w(u,t,h))},error:e[o+1],complete:e[o+2]};else{const h=xe(t,Pt);u=xe(h.firestore,Ye),c=h._query;const f=new io(u);l={next:p=>{e[o]&&e[o](new Fs(u,f,h,p))},error:e[o+1],complete:e[o+2]},QL(t._query)}return function(h,f,p,m){const _=new $f(m),E=new gw(f,_,p);return h.asyncQueue.enqueueAndForget(async()=>fw(await ma(h),E)),()=>{_.bc(),h.asyncQueue.enqueueAndForget(async()=>pw(await ma(h),E))}}(Et(u),c,a,l)}function b3(t,e){return zW(Et(t=xe(t,Ye)),jg(e)?e:{next:e})}function cc(t,e){return function(n,r){const s=new gt;return n.asyncQueue.enqueueAndForget(async()=>gW(await bw(n),r,s)),s.promise}(Et(t),e)}function $w(t,e,n){const r=n.docs.get(e._key),s=new io(t);return new Wr(t,s,e._key,r,new wi(n.hasPendingWrites,n.fromCache),e.converter)}const C3={maxAttempts:5};class L3{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=ro(e)}set(e,n,r){this._verifyNotCommitted();const s=hs(e,this._firestore),i=Gf(s.converter,n,r),o=Vf(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Ue.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=hs(e,this._firestore);let o;return o=typeof(n=re(n))=="string"||n instanceof Us?Pw(this._dataReader,"WriteBatch.update",i._key,n,r,s):Lw(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Ue.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=hs(e,this._firestore);return this._mutations=this._mutations.concat(new Aa(n._key,Ue.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new j(D.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hs(t,e){if((t=re(t)).firestore!==e)throw new j(D.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}class P3 extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=ro(e)}get(e){const n=hs(e,this._firestore),r=new w3(this._firestore);return this._transaction.lookup([n._key]).then(s=>{if(!s||s.length!==1)return J();const i=s[0];if(i.isFoundDocument())return new Lu(this._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Lu(this._firestore,r,n._key,null,n.converter);throw J()})}set(e,n,r){const s=hs(e,this._firestore),i=Gf(s.converter,n,r),o=Vf(this._dataReader,"Transaction.set",s._key,i,s.converter!==null,r);return this._transaction.set(s._key,o),this}update(e,n,r,...s){const i=hs(e,this._firestore);let o;return o=typeof(n=re(n))=="string"||n instanceof Us?Pw(this._dataReader,"Transaction.update",i._key,n,r,s):Lw(this._dataReader,"Transaction.update",i._key,n),this._transaction.update(i._key,o),this}delete(e){const n=hs(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=hs(e,this._firestore),r=new io(this._firestore);return super.get(e).then(s=>new Wr(this._firestore,r,n._key,s._document,new wi(!1,!1),n.converter))}}function R3(t,e,n){t=xe(t,Ye);const r=Object.assign(Object.assign({},C3),n);return function(s){if(s.maxAttempts<1)throw new j(D.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(s,i,o){const a=new gt;return s.asyncQueue.enqueueAndForget(async()=>{const l=await UW(s);new MW(s.asyncQueue,l,o,i,a).run()}),a.promise}(Et(t),s=>e(new P3(t,s)),r)}function N3(){return new lc("deleteField")}function tP(){return new Cw("serverTimestamp")}function D3(...t){return new a3("arrayUnion",t)}function A3(...t){return new l3("arrayRemove",t)}function O3(t){return new u3("increment",t)}(function(t,e=!0){(function(n){Ra=n})(qs),jr(new Un("firestore",(n,{instanceIdentifier:r,options:s})=>{const i=n.getProvider("app").getImmediate(),o=new Ye(new Kj(n.getProvider("auth-internal")),new Zj(n.getProvider("app-check-internal")),function(a,l){if(!Object.prototype.hasOwnProperty.apply(a.options,["projectId"]))throw new j(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ds(a.options.projectId,l)}(i,r),i);return s=Object.assign({useFetchStreams:e},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),wn(mS,"3.8.0",t),wn(mS,"3.8.0","esm2017")})();const M3="@firebase/firestore-compat",$3="0.3.0";function Uw(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new j("invalid-argument",`Invalid options passed to function ${t}(): You cannot specify both "merge" and "mergeFields".`);return e}function yI(){if(typeof Uint8Array>"u")throw new j("unimplemented","Uint8Arrays are not available in this environment.")}function wI(){if(!az())throw new j("unimplemented","Blobs are unavailable in Firestore in this environment.")}let Id=class{constructor(e){this._delegate=e}static fromBase64String(e){return wI(),new Id(Er.fromBase64String(e))}static fromUint8Array(e){return yI(),new Id(Er.fromUint8Array(e))}toBase64(){return wI(),this._delegate.toBase64()}toUint8Array(){return yI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function qg(t){return U3(t,["next","error","complete"])}function U3(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}class F3{enableIndexedDbPersistence(e,n){return YW(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return XW(e._delegate)}clearIndexedDbPersistence(e){return ZW(e._delegate)}}class nP{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Ds||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&sa("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){PL(this._delegate,e,n,r)}enableNetwork(){return e3(this._delegate)}disableNetwork(){return t3(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,CL("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return JW(this._delegate)}onSnapshotsInSync(e){return b3(this._delegate,e)}get app(){if(!this._appCompat)throw new j("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new va(this,pt(this._delegate,e))}catch(n){throw Kt(n,"collection()","Firestore.collection()")}}doc(e){try{return new An(this,Ut(this._delegate,e))}catch(n){throw Kt(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ht(this,DW(this._delegate,e))}catch(n){throw Kt(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return R3(this._delegate,n=>e(new rP(this,n)))}batch(){return Et(this._delegate),new sP(new L3(this._delegate,e=>cc(this._delegate,e)))}loadBundle(e){return n3(this._delegate,e)}namedQuery(e){return r3(this._delegate,e).then(n=>n?new Ht(this,n):null)}}class Kf extends Mw{constructor(e){super(),this.firestore=e}convertBytes(e){return new Id(new Er(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return An.forKey(n,this.firestore,null)}}function B3(t){qj(t)}class rP{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new Kf(e)}get(e){const n=Ei(e);return this._delegate.get(n).then(r=>new Pu(this._firestore,new Wr(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const s=Ei(e);return r?(Uw("Transaction.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Ei(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Ei(e);return this._delegate.delete(n),this}}class sP{constructor(e){this._delegate=e}set(e,n,r){const s=Ei(e);return r?(Uw("WriteBatch.set",r),this._delegate.set(s,n,r)):this._delegate.set(s,n),this}update(e,n,r,...s){const i=Ei(e);return arguments.length===2?this._delegate.update(i,n):this._delegate.update(i,n,r,...s),this}delete(e){const n=Ei(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class Ki{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new jl(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ru(this._firestore,r),n??{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=Ki.INSTANCES;let s=r.get(e);s||(s=new WeakMap,r.set(e,s));let i=s.get(n);return i||(i=new Ki(e,new Kf(e),n),s.set(n,i)),i}}Ki.INSTANCES=new WeakMap;class An{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Kf(e)}static forPath(e,n,r){if(e.length%2!==0)throw new j("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new An(n,new Oe(n._delegate,r,new X(e)))}static forKey(e,n,r){return new An(n,new Oe(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new va(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new va(this.firestore,pt(this._delegate,e))}catch(n){throw Kt(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=re(e),e instanceof Oe?RL(this._delegate,e):!1}set(e,n){n=Uw("DocumentReference.set",n);try{return n?vI(this._delegate,e,n):vI(this._delegate,e)}catch(r){throw Kt(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?_i(this._delegate,e):_i(this._delegate,e,n,...r)}catch(s){throw Kt(s,"updateDoc()","DocumentReference.update()")}}delete(){return Bs(this._delegate)}onSnapshot(...e){const n=iP(e),r=oP(e,s=>new Pu(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return mn(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=S3(this._delegate):(e==null?void 0:e.source)==="server"?n=I3(this._delegate):n=E3(this._delegate),n.then(r=>new Pu(this.firestore,new Wr(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new An(this.firestore,e?this._delegate.withConverter(Ki.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Kt(t,e,n){return t.message=t.message.replace(e,n),t}function iP(t){for(const e of t)if(typeof e=="object"&&!qg(e))return e;return{}}function oP(t,e){var n,r;let s;return qg(t[0])?s=t[0]:qg(t[1])?s=t[1]:typeof t[0]=="function"?s={next:t[0],error:t[1],complete:t[2]}:s={next:t[1],error:t[2],complete:t[3]},{next:i=>{s.next&&s.next(e(i))},error:(n=s.error)===null||n===void 0?void 0:n.bind(s),complete:(r=s.complete)===null||r===void 0?void 0:r.bind(s)}}class Pu{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new An(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return eP(this._delegate,e._delegate)}}class Ru extends Pu{data(e){const n=this._delegate.data(e);return Wj(n!==void 0),n}}class Ht{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new Kf(e)}where(e,n,r){try{return new Ht(this.firestore,tr(this._delegate,d3(e,n,r)))}catch(s){throw Kt(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new Ht(this.firestore,tr(this._delegate,YL(e,n)))}catch(r){throw Kt(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ht(this.firestore,tr(this._delegate,f3(e)))}catch(n){throw Kt(n,"limit()","Query.limit()")}}limitToLast(e){try{return new Ht(this.firestore,tr(this._delegate,p3(e)))}catch(n){throw Kt(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ht(this.firestore,tr(this._delegate,m3(...e)))}catch(n){throw Kt(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ht(this.firestore,tr(this._delegate,g3(...e)))}catch(n){throw Kt(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ht(this.firestore,tr(this._delegate,v3(...e)))}catch(n){throw Kt(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ht(this.firestore,tr(this._delegate,y3(...e)))}catch(n){throw Kt(n,"endAt()","Query.endAt()")}}isEqual(e){return NL(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=k3(this._delegate):(e==null?void 0:e.source)==="server"?n=T3(this._delegate):n=x3(this._delegate),n.then(r=>new Wg(this.firestore,new Fs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=iP(e),r=oP(e,s=>new Wg(this.firestore,new Fs(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return mn(this._delegate,n,r)}withConverter(e){return new Ht(this.firestore,e?this._delegate.withConverter(Ki.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class V3{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new Ru(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Wg{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new Ht(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Ru(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new V3(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new Ru(this._firestore,r))})}isEqual(e){return eP(this._delegate,e._delegate)}}class va extends Ht{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new An(this.firestore,e):null}doc(e){try{return e===void 0?new An(this.firestore,Ut(this._delegate)):new An(this.firestore,Ut(this._delegate,e))}catch(n){throw Kt(n,"doc()","CollectionReference.doc()")}}add(e){return ga(this._delegate,e).then(n=>new An(this.firestore,n))}isEqual(e){return RL(this._delegate,e._delegate)}withConverter(e){return new va(this.firestore,e?this._delegate.withConverter(Ki.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Ei(t){return xe(t,Oe)}class Fw{constructor(...e){this._delegate=new Us(...e)}static documentId(){return new Fw(et.keyField().canonicalString())}isEqual(e){return e=re(e),e instanceof Us?this._delegate._internalPath.isEqual(e._internalPath):!1}}class hi{constructor(e){this._delegate=e}static serverTimestamp(){const e=tP();return e._methodName="FieldValue.serverTimestamp",new hi(e)}static delete(){const e=N3();return e._methodName="FieldValue.delete",new hi(e)}static arrayUnion(...e){const n=D3(...e);return n._methodName="FieldValue.arrayUnion",new hi(n)}static arrayRemove(...e){const n=A3(...e);return n._methodName="FieldValue.arrayRemove",new hi(n)}static increment(e){const n=O3(e);return n._methodName="FieldValue.increment",new hi(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const j3={Firestore:nP,GeoPoint:Ff,Timestamp:Fe,Blob:Id,Transaction:rP,WriteBatch:sP,DocumentReference:An,DocumentSnapshot:Pu,Query:Ht,QueryDocumentSnapshot:Ru,QuerySnapshot:Wg,CollectionReference:va,FieldPath:Fw,FieldValue:hi,setLogLevel:B3,CACHE_SIZE_UNLIMITED:KW};function z3(t,e){t.INTERNAL.registerComponent(new Un("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),s=n.getProvider("firestore").getImmediate();return e(r,s)},"PUBLIC").setServiceProps(Object.assign({},j3)))}function q3(t){z3(t,(e,n)=>new nP(e,n,new F3)),t.registerVersion(M3,$3)}q3(Zn);var W3="firebase",H3="9.15.0";wn(W3,H3,"app");const G3={apiKey:import.meta.vite.env.VITE_FB_API_KEY,authDomain:"maps-371417.firebaseapp.com",projectId:"maps-371417",storageBucket:"maps-371417.appspot.com",messagingSenderId:"262710273291",appId:"1:262710273291:web:c8ca1af103889e8612ee0e"},aP=Zn.initializeApp(G3);Zn.storage(aP);const Hr=Zn.firestore(),Ce=QW(aP);Zn.firestore();const Bn=Zn.auth();function K3(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(c){try{u(r.next(c))}catch(h){o(h)}}function l(c){try{u(r.throw(c))}catch(h){o(h)}}function u(c){c.done?i(c.value):s(c.value).then(a,l)}u((r=r.apply(t,e||[])).next())})}function Q3(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,s=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(c){u=[6,c],s=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Do=function(){return Do=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},Do.apply(this,arguments)},lP=function(t){return{loading:t==null,value:t}},Y3=function(){return function(t,e){switch(e.type){case"error":return Do(Do({},t),{error:e.error,loading:!1,value:void 0});case"reset":return lP(e.defaultValue);case"value":return Do(Do({},t),{error:void 0,loading:!1,value:e.value});default:return t}}},X3=function(t){var e=t?t():void 0,n=d.exports.useReducer(Y3(),lP(e)),r=n[0],s=n[1],i=d.exports.useCallback(function(){var l=t?t():void 0;s({type:"reset",defaultValue:l})},[t]),o=d.exports.useCallback(function(l){s({type:"error",error:l})},[]),a=d.exports.useCallback(function(l){s({type:"value",value:l})},[]);return d.exports.useMemo(function(){return{error:r.error,loading:r.loading,reset:i,setError:o,setValue:a,value:r.value}},[r.error,r.loading,i,o,a,r.value])},Z3=function(t,e){var n=X3(function(){return t.currentUser}),r=n.error,s=n.loading,i=n.setError,o=n.setValue,a=n.value;return d.exports.useEffect(function(){var l=gB(t,function(u){return K3(void 0,void 0,void 0,function(){var c;return Q3(this,function(h){switch(h.label){case 0:if(!(e!=null&&e.onUserChanged))return[3,4];h.label=1;case 1:return h.trys.push([1,3,,4]),[4,e.onUserChanged(u)];case 2:return h.sent(),[3,4];case 3:return c=h.sent(),i(c),[3,4];case 4:return o(u),[2]}})})},i);return function(){l()}},[t]),[a,s,r]};const Qf=({user:t})=>{const e=Gd(),n=()=>{Bn.signOut().then(()=>{e("/")})};return Z3(Bn),Y("div",{className:"nav",children:[t&&Y(Gn,{children:[U(nr,{className:"nav-link",to:"/",children:"map"}),U(nr,{className:"nav-link",to:"/admin",children:"admin"}),U(nr,{className:"nav-link",to:"/Driver",children:"driver"}),Y("div",{className:"logged-in",children:[Y("p",{children:[" logged in as ",t]}),U("button",{className:"navlink navlinklogout",onClick:n,children:"LOGOUT"})]})]}),!t&&Y(Gn,{children:[U(nr,{className:"nav-link",to:"/",children:"map"}),U(nr,{className:"nav-link",to:"/login",children:"login"}),U(nr,{className:"nav-link",to:"/signup",children:"signup"})]})]})};var uP={},cP={exports:{}};(function(t){var e=function(n){var r=Object.prototype,s=r.hasOwnProperty,i=Object.defineProperty||function(P,x,C){P[x]=C.value},o,a=typeof Symbol=="function"?Symbol:{},l=a.iterator||"@@iterator",u=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function h(P,x,C){return Object.defineProperty(P,x,{value:C,enumerable:!0,configurable:!0,writable:!0}),P[x]}try{h({},"")}catch{h=function(x,C,k){return x[C]=k}}function f(P,x,C,k){var S=x&&x.prototype instanceof v?x:v,T=Object.create(S.prototype),O=new ae(k||[]);return i(T,"_invoke",{value:$(P,C,O)}),T}n.wrap=f;function p(P,x,C){try{return{type:"normal",arg:P.call(x,C)}}catch(k){return{type:"throw",arg:k}}}var m="suspendedStart",_="suspendedYield",E="executing",g="completed",y={};function v(){}function w(){}function b(){}var I={};h(I,l,function(){return this});var R=Object.getPrototypeOf,A=R&&R(R(ue([])));A&&A!==r&&s.call(A,l)&&(I=A);var L=b.prototype=v.prototype=Object.create(I);w.prototype=b,i(L,"constructor",{value:b,configurable:!0}),i(b,"constructor",{value:w,configurable:!0}),w.displayName=h(b,c,"GeneratorFunction");function F(P){["next","throw","return"].forEach(function(x){h(P,x,function(C){return this._invoke(x,C)})})}n.isGeneratorFunction=function(P){var x=typeof P=="function"&&P.constructor;return x?x===w||(x.displayName||x.name)==="GeneratorFunction":!1},n.mark=function(P){return Object.setPrototypeOf?Object.setPrototypeOf(P,b):(P.__proto__=b,h(P,c,"GeneratorFunction")),P.prototype=Object.create(L),P},n.awrap=function(P){return{__await:P}};function G(P,x){function C(T,O,M,V){var K=p(P[T],P,O);if(K.type==="throw")V(K.arg);else{var le=K.arg,ne=le.value;return ne&&typeof ne=="object"&&s.call(ne,"__await")?x.resolve(ne.__await).then(function(Re){C("next",Re,M,V)},function(Re){C("throw",Re,M,V)}):x.resolve(ne).then(function(Re){le.value=Re,M(le)},function(Re){return C("throw",Re,M,V)})}}var k;function S(T,O){function M(){return new x(function(V,K){C(T,O,V,K)})}return k=k?k.then(M,M):M()}i(this,"_invoke",{value:S})}F(G.prototype),h(G.prototype,u,function(){return this}),n.AsyncIterator=G,n.async=function(P,x,C,k,S){S===void 0&&(S=Promise);var T=new G(f(P,x,C,k),S);return n.isGeneratorFunction(x)?T:T.next().then(function(O){return O.done?O.value:T.next()})};function $(P,x,C){var k=m;return function(T,O){if(k===E)throw new Error("Generator is already running");if(k===g){if(T==="throw")throw O;return B()}for(C.method=T,C.arg=O;;){var M=C.delegate;if(M){var V=Q(M,C);if(V){if(V===y)continue;return V}}if(C.method==="next")C.sent=C._sent=C.arg;else if(C.method==="throw"){if(k===m)throw k=g,C.arg;C.dispatchException(C.arg)}else C.method==="return"&&C.abrupt("return",C.arg);k=E;var K=p(P,x,C);if(K.type==="normal"){if(k=C.done?g:_,K.arg===y)continue;return{value:K.arg,done:C.done}}else K.type==="throw"&&(k=g,C.method="throw",C.arg=K.arg)}}}function Q(P,x){var C=x.method,k=P.iterator[C];if(k===o)return x.delegate=null,C==="throw"&&P.iterator.return&&(x.method="return",x.arg=o,Q(P,x),x.method==="throw")||C!=="return"&&(x.method="throw",x.arg=new TypeError("The iterator does not provide a '"+C+"' method")),y;var S=p(k,P.iterator,x.arg);if(S.type==="throw")return x.method="throw",x.arg=S.arg,x.delegate=null,y;var T=S.arg;if(!T)return x.method="throw",x.arg=new TypeError("iterator result is not an object"),x.delegate=null,y;if(T.done)x[P.resultName]=T.value,x.next=P.nextLoc,x.method!=="return"&&(x.method="next",x.arg=o);else return T;return x.delegate=null,y}F(L),h(L,c,"Generator"),h(L,l,function(){return this}),h(L,"toString",function(){return"[object Generator]"});function W(P){var x={tryLoc:P[0]};1 in P&&(x.catchLoc=P[1]),2 in P&&(x.finallyLoc=P[2],x.afterLoc=P[3]),this.tryEntries.push(x)}function ee(P){var x=P.completion||{};x.type="normal",delete x.arg,P.completion=x}function ae(P){this.tryEntries=[{tryLoc:"root"}],P.forEach(W,this),this.reset(!0)}n.keys=function(P){var x=Object(P),C=[];for(var k in x)C.push(k);return C.reverse(),function S(){for(;C.length;){var T=C.pop();if(T in x)return S.value=T,S.done=!1,S}return S.done=!0,S}};function ue(P){if(P){var x=P[l];if(x)return x.call(P);if(typeof P.next=="function")return P;if(!isNaN(P.length)){var C=-1,k=function S(){for(;++C<P.length;)if(s.call(P,C))return S.value=P[C],S.done=!1,S;return S.value=o,S.done=!0,S};return k.next=k}}return{next:B}}n.values=ue;function B(){return{value:o,done:!0}}return ae.prototype={constructor:ae,reset:function(P){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(ee),!P)for(var x in this)x.charAt(0)==="t"&&s.call(this,x)&&!isNaN(+x.slice(1))&&(this[x]=o)},stop:function(){this.done=!0;var P=this.tryEntries[0],x=P.completion;if(x.type==="throw")throw x.arg;return this.rval},dispatchException:function(P){if(this.done)throw P;var x=this;function C(V,K){return T.type="throw",T.arg=P,x.next=V,K&&(x.method="next",x.arg=o),!!K}for(var k=this.tryEntries.length-1;k>=0;--k){var S=this.tryEntries[k],T=S.completion;if(S.tryLoc==="root")return C("end");if(S.tryLoc<=this.prev){var O=s.call(S,"catchLoc"),M=s.call(S,"finallyLoc");if(O&&M){if(this.prev<S.catchLoc)return C(S.catchLoc,!0);if(this.prev<S.finallyLoc)return C(S.finallyLoc)}else if(O){if(this.prev<S.catchLoc)return C(S.catchLoc,!0)}else if(M){if(this.prev<S.finallyLoc)return C(S.finallyLoc)}else throw new Error("try statement without catch or finally")}}},abrupt:function(P,x){for(var C=this.tryEntries.length-1;C>=0;--C){var k=this.tryEntries[C];if(k.tryLoc<=this.prev&&s.call(k,"finallyLoc")&&this.prev<k.finallyLoc){var S=k;break}}S&&(P==="break"||P==="continue")&&S.tryLoc<=x&&x<=S.finallyLoc&&(S=null);var T=S?S.completion:{};return T.type=P,T.arg=x,S?(this.method="next",this.next=S.finallyLoc,y):this.complete(T)},complete:function(P,x){if(P.type==="throw")throw P.arg;return P.type==="break"||P.type==="continue"?this.next=P.arg:P.type==="return"?(this.rval=this.arg=P.arg,this.method="return",this.next="end"):P.type==="normal"&&x&&(this.next=x),y},finish:function(P){for(var x=this.tryEntries.length-1;x>=0;--x){var C=this.tryEntries[x];if(C.finallyLoc===P)return this.complete(C.completion,C.afterLoc),ee(C),y}},catch:function(P){for(var x=this.tryEntries.length-1;x>=0;--x){var C=this.tryEntries[x];if(C.tryLoc===P){var k=C.completion;if(k.type==="throw"){var S=k.arg;ee(C)}return S}}throw new Error("illegal catch attempt")},delegateYield:function(P,x,C){return this.delegate={iterator:ue(P),resultName:x,nextLoc:C},this.method==="next"&&(this.arg=o),y}},n}(t.exports);try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}})(cP);(function(t){var e=cP.exports;function n(m,_,E,g,y,v,w){try{var b=m[v](w),I=b.value}catch(R){return void E(R)}b.done?_(I):Promise.resolve(I).then(g,y)}function r(m){return function(){var _=this,E=arguments;return new Promise(function(g,y){var v=m.apply(_,E);function w(I){n(v,g,y,w,b,"next",I)}function b(I){n(v,g,y,w,b,"throw",I)}w(void 0)})}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=!1,i=null,o="en",a=null,l=null,u="https://maps.googleapis.com/maps/api/geocode/json";function c(m){var _=arguments.length>1&&arguments[1]!==void 0&&arguments[1];s&&(_?console.warn(m):console.log(m))}function h(m){return f.apply(this,arguments)}function f(){return(f=r(e.mark(function m(_){var E,g;return e.wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,fetch(_).catch(function(){return Promise.reject(new Error("Error fetching data"))});case 2:return E=y.sent,y.next=5,E.json().catch(function(){return c("Error parsing server response"),Promise.reject(new Error("Error parsing server response"))});case 5:if((g=y.sent).status!=="OK"){y.next=9;break}return c(g),y.abrupt("return",g);case 9:return c("".concat(g.error_message,`.
Server returned status code `).concat(g.status),!0),y.abrupt("return",Promise.reject(new Error("".concat(g.error_message,`.
Server returned status code `).concat(g.status))));case 11:case"end":return y.stop()}},m)}))).apply(this,arguments)}var p={setApiKey:function(m){i=m},setLanguage:function(m){o=m},setRegion:function(m){a=m},setLocationType:function(m){l=m},enableDebug:function(){var m=!(arguments.length>0&&arguments[0]!==void 0)||arguments[0];s=m},fromLatLng:function(m,_,E,g,y,v){return r(e.mark(function w(){var b,I;return e.wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(m&&_){R.next=3;break}return c("Provided coordinates are invalid",!0),R.abrupt("return",Promise.reject(new Error("Provided coordinates are invalid")));case 3:return b="".concat(m,",").concat(_),I="".concat(u,"?latlng=").concat(encodeURIComponent(b)),(E||i)&&(I+="&key=".concat(i=E||i)),(g||o)&&(I+="&language=".concat(o=g||o)),(y||a)&&(a=y||a,I+="&region=".concat(encodeURIComponent(a))),(v||l)&&(l=v||l,I+="&location_type=".concat(encodeURIComponent(l))),R.abrupt("return",h(I));case 9:case"end":return R.stop()}},w)}))()},fromAddress:function(m,_,E,g){return r(e.mark(function y(){var v;return e.wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(m){w.next=3;break}return c("Provided address is invalid",!0),w.abrupt("return",Promise.reject(new Error("Provided address is invalid")));case 3:return v="".concat(u,"?address=").concat(encodeURIComponent(m)),(_||i)&&(v+="&key=".concat(i=_||i)),(E||o)&&(v+="&language=".concat(o=E||o)),(g||a)&&(a=g||a,v+="&region=".concat(encodeURIComponent(a))),w.abrupt("return",h(v));case 8:case"end":return w.stop()}},y)}))()}};t.default=p})(uP);const ul=bI(uP);function J3(){ul.setApiKey("AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA"),ul.setLanguage("en"),ul.setLocationType("ROOFTOP");const{isLoaded:t}=Ea({googleMapsApiKey:"AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA",libraries:["places"]});function e(){const[S,T]=d.exports.useState(null);return d.exports.useEffect(()=>{Bn.onAuthStateChanged(O=>{O&&T(O.uid)})},[]),S}e();function n(){const[S,T]=d.exports.useState(null);return d.exports.useEffect(()=>{Bn.onAuthStateChanged(O=>{O&&Hr.collection("users").doc(O.uid).get().then(M=>{T(M.data().FullName)}),O?Hr.collection("admin").doc(O.uid).get().then(M=>{T(M.data().FullName)}):T(null)})},[]),S}const r=n(),s={lat:5.839398,lng:-55.199089},[i,o]=d.exports.useState(null),[a,l]=d.exports.useState(null),[u,c]=d.exports.useState(""),[h,f]=d.exports.useState(""),[p,m]=d.exports.useState(""),[_,E]=d.exports.useState(""),[g,y]=d.exports.useState(""),[v,w]=d.exports.useState(""),[b,I]=d.exports.useState(""),[R,A]=d.exports.useState(""),[L,F]=d.exports.useState(""),G=d.exports.useRef(),$=d.exports.useRef();async function Q(){if(G.current.value===""||$.current.value==="")return;const T=await new google.maps.DirectionsService().route({origin:G.current.value,destination:$.current.value,travelMode:google.maps.TravelMode.DRIVING});l(T),c(T.routes[0].legs[0].distance.text),f(T.routes[0].legs[0].duration.text),w(G.current.value),I($.current.value)}function W(){l(null),c(""),f(""),m(""),E(""),y(""),w(""),G.current.value="",$.current.value=""}const ee=()=>{var S,T;S=new google.maps.Map(document.getElementById("map"),{center:{lat:5.839398,lng:-55.199089},zoom:18}),T=new google.maps.InfoWindow,new google.maps.InfoWindow,new google.maps.Geocoder,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(O){var M={lat:O.coords.latitude,lng:O.coords.longitude};T.setPosition(M),T.setContent("Location found."),T.open(S),S.setCenter(M),m(O.coords.latitude+","),E(O.coords.longitude),ul.fromLatLng(O.coords.latitude,O.coords.longitude).then(V=>{const K=V.results[0].formatted_address;console.log(K),w(K)},V=>{console.error(V)})},function(){ae(!0,T,S.getCenter())}):ae(!1,T,S.getCenter()),ul.fromLatLng(position.coords.latitude,position.coords.longitude).then(O=>{const M=O.results[0].formatted_address;console.log(M)},O=>{console.error(O)})};function ae(S,T){infoWindow.setPosition(T),infoWindow.setContent(S?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),infoWindow.open(i)}window.initMap=ee;const[ue,B]=d.exports.useState([]);d.exports.useEffect(()=>{(async()=>{const T=pt(Ce,"client");mn(T,O=>{B(O.docs.map(M=>({...M.data(),id:M.id})))})})()},[]);const P=()=>ue.map(S=>S.client==="client pickedup"?null:U("div",{children:Y("p",{children:[" ",S.client," "]})}));function x(S){S.preventDefault()}function C(){const S=pt(Ce,"test");ga(S,{name:R,start:v,end:b,distance:u,duration:h,number:L,status:"client waiting",timestamp:tP()})}function k(){return Y("div",{className:"client-whole-div",children:[U(Qf,{user:r}),Y($u,{id:"map",zoom:12,center:s,mapContainerClassName:"map-container client-map",children:[U(ea,{}),a&&U(zd,{directions:a})]}),Y("div",{className:"client-status",children:[" ",U(P,{})]}),Y("form",{onSubmit:x,className:"client-form",children:[U(Gh,{children:U("input",{id:"input",className:"client-input",type:"text",placeholder:"from",defaultValue:v,ref:G,onBlur:S=>w(S.target.value)})}),U("input",{type:"text",className:"client-input",placeholder:"name ",defaultValue:R,onBlur:S=>A(S.target.value)}),U("input",{type:"text",className:"client-input",placeholder:"number ",defaultValue:L,onBlur:S=>F(S.target.value)}),U(Gh,{children:U("input",{type:"text",className:"client-input",placeholder:"to",ref:$,defaultValue:b,onBlur:S=>I(S.target.value)})}),U("button",{onClick:C,children:" confirm "}),U("button",{onClick:Q,children:" enter "}),U("button",{onClick:W,children:" del route "})]}),Y("div",{className:"client-find-me",children:[Y("div",{className:"client-span",children:[Y("p",{children:["Distance: ",u]}),Y("p",{children:[" Duration:",h]})]}),U("button",{id:"button",className:"map-btn ",onClick:()=>ee(),children:" find me "}),U("div",{id:"reverse"})]})]})}if(!t)return U("div",{children:" loading .... "});if(t)return U("div",{children:U(k,{})})}const eH="/taxi-test/assets/untitled-f11a0ab3.mp3";var Bw={exports:{}},hP={},Vw={exports:{}},tH="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",nH=tH,rH=nH;function dP(){}function fP(){}fP.resetWarningCache=dP;var sH=function(){function t(r,s,i,o,a,l){if(l!==rH){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:fP,resetWarningCache:dP};return n.PropTypes=n,n};Vw.exports=sH();function pP(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=pP(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function _I(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=pP(t))&&(r&&(r+=" "),r+=e);return r}const iH=Object.freeze(Object.defineProperty({__proto__:null,clsx:_I,default:_I},Symbol.toStringTag,{value:"Module"})),oH=LP(iH);var Xe={},Ir={};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.dontSetMe=hH;Ir.findInArray=aH;Ir.int=cH;Ir.isFunction=lH;Ir.isNum=uH;function aH(t,e){for(var n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function lH(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function uH(t){return typeof t=="number"&&!isNaN(t)}function cH(t){return parseInt(t,10)}function hH(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var oo={};Object.defineProperty(oo,"__esModule",{value:!0});oo.browserPrefixToKey=gP;oo.browserPrefixToStyle=dH;oo.default=void 0;oo.getPrefix=mP;var Zp=["Moz","Webkit","O","ms"];function mP(){var t,e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";var r=(t=window.document)===null||t===void 0||(e=t.documentElement)===null||e===void 0?void 0:e.style;if(!r||n in r)return"";for(var s=0;s<Zp.length;s++)if(gP(n,Zp[s])in r)return Zp[s];return""}function gP(t,e){return e?"".concat(e).concat(fH(t)):t}function dH(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function fH(t){for(var e="",n=!0,r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}var pH=mP();oo.default=pH;function Hg(t){return Hg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hg(t)}Object.defineProperty(Xe,"__esModule",{value:!0});Xe.addClassName=EP;Xe.addEvent=vH;Xe.addUserSelectStyles=CH;Xe.createCSSTransform=xH;Xe.createSVGTransform=kH;Xe.getTouch=TH;Xe.getTouchIdentifier=bH;Xe.getTranslation=jw;Xe.innerHeight=EH;Xe.innerWidth=SH;Xe.matchesSelector=_P;Xe.matchesSelectorAndParentsTo=gH;Xe.offsetXYFromParent=IH;Xe.outerHeight=wH;Xe.outerWidth=_H;Xe.removeClassName=SP;Xe.removeEvent=yH;Xe.removeUserSelectStyles=LH;var En=Ir,EI=mH(oo);function vP(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(vP=function(s){return s?n:e})(t)}function mH(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||Hg(t)!=="object"&&typeof t!="function")return{default:t};var n=vP(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function SI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function yP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SI(Object(n),!0).forEach(function(r){wP(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function wP(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Xc="";function _P(t,e){return Xc||(Xc=(0,En.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,En.isFunction)(t[n])})),(0,En.isFunction)(t[Xc])?t[Xc](e):!1}function gH(t,e,n){var r=t;do{if(_P(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function vH(t,e,n,r){if(!!t){var s=yP({capture:!0},r);t.addEventListener?t.addEventListener(e,n,s):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}}function yH(t,e,n,r){if(!!t){var s=yP({capture:!0},r);t.removeEventListener?t.removeEventListener(e,n,s):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}}function wH(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,En.int)(n.borderTopWidth),e+=(0,En.int)(n.borderBottomWidth),e}function _H(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,En.int)(n.borderLeftWidth),e+=(0,En.int)(n.borderRightWidth),e}function EH(t){var e=t.clientHeight,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,En.int)(n.paddingTop),e-=(0,En.int)(n.paddingBottom),e}function SH(t){var e=t.clientWidth,n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,En.int)(n.paddingLeft),e-=(0,En.int)(n.paddingRight),e}function IH(t,e,n){var r=e===e.ownerDocument.body,s=r?{left:0,top:0}:e.getBoundingClientRect(),i=(t.clientX+e.scrollLeft-s.left)/n,o=(t.clientY+e.scrollTop-s.top)/n;return{x:i,y:o}}function xH(t,e){var n=jw(t,e,"px");return wP({},(0,EI.browserPrefixToKey)("transform",EI.default),n)}function kH(t,e){var n=jw(t,e,"");return n}function jw(t,e,n){var r=t.x,s=t.y,i="translate(".concat(r).concat(n,",").concat(s).concat(n,")");if(e){var o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);i="translate(".concat(o,", ").concat(a,")")+i}return i}function TH(t,e){return t.targetTouches&&(0,En.findInArray)(t.targetTouches,function(n){return e===n.identifier})||t.changedTouches&&(0,En.findInArray)(t.changedTouches,function(n){return e===n.identifier})}function bH(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function CH(t){if(!!t){var e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&EP(t.body,"react-draggable-transparent-selection")}}function LH(t){if(!!t)try{if(t.body&&SP(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{var e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function EP(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function SP(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var xr={};Object.defineProperty(xr,"__esModule",{value:!0});xr.canDragX=NH;xr.canDragY=DH;xr.createCoreData=OH;xr.createDraggableData=MH;xr.getBoundPosition=PH;xr.getControlPosition=AH;xr.snapToGrid=RH;var dn=Ir,Ao=Xe;function PH(t,e,n){if(!t.props.bounds)return[e,n];var r=t.props.bounds;r=typeof r=="string"?r:$H(r);var s=zw(t);if(typeof r=="string"){var i=s.ownerDocument,o=i.defaultView,a;if(r==="parent"?a=s.parentNode:a=i.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');var l=a,u=o.getComputedStyle(s),c=o.getComputedStyle(l);r={left:-s.offsetLeft+(0,dn.int)(c.paddingLeft)+(0,dn.int)(u.marginLeft),top:-s.offsetTop+(0,dn.int)(c.paddingTop)+(0,dn.int)(u.marginTop),right:(0,Ao.innerWidth)(l)-(0,Ao.outerWidth)(s)-s.offsetLeft+(0,dn.int)(c.paddingRight)-(0,dn.int)(u.marginRight),bottom:(0,Ao.innerHeight)(l)-(0,Ao.outerHeight)(s)-s.offsetTop+(0,dn.int)(c.paddingBottom)-(0,dn.int)(u.marginBottom)}}return(0,dn.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,dn.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,dn.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,dn.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function RH(t,e,n){var r=Math.round(e/t[0])*t[0],s=Math.round(n/t[1])*t[1];return[r,s]}function NH(t){return t.props.axis==="both"||t.props.axis==="x"}function DH(t){return t.props.axis==="both"||t.props.axis==="y"}function AH(t,e,n){var r=typeof e=="number"?(0,Ao.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;var s=zw(n),i=n.props.offsetParent||s.offsetParent||s.ownerDocument.body;return(0,Ao.offsetXYFromParent)(r||t,i,n.props.scale)}function OH(t,e,n){var r=t.state,s=!(0,dn.isNum)(r.lastX),i=zw(t);return s?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-r.lastX,deltaY:n-r.lastY,lastX:r.lastX,lastY:r.lastY,x:e,y:n}}function MH(t,e){var n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function $H(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function zw(t){var e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var Yf={},Xf={};Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=UH;function UH(){}function xd(t){return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xd(t)}Object.defineProperty(Yf,"__esModule",{value:!0});Yf.default=void 0;var Jp=BH(d.exports),hn=qw(Vw.exports),FH=qw(Sr.exports),Ot=Xe,ss=xr,em=Ir,cl=qw(Xf);function qw(t){return t&&t.__esModule?t:{default:t}}function IP(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(IP=function(s){return s?n:e})(t)}function BH(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||xd(t)!=="object"&&typeof t!="function")return{default:t};var n=IP(e);if(n&&n.has(t))return n.get(t);var r={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function II(t,e){return qH(t)||zH(t,e)||jH(t,e)||VH()}function VH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jH(t,e){if(!!t){if(typeof t=="string")return xI(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xI(t,e)}}function xI(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function zH(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var r=[],s=!0,i=!1,o,a;try{for(n=n.call(t);!(s=(o=n.next()).done)&&(r.push(o.value),!(e&&r.length===e));s=!0);}catch(l){i=!0,a=l}finally{try{!s&&n.return!=null&&n.return()}finally{if(i)throw a}}return r}}function qH(t){if(Array.isArray(t))return t}function WH(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function kI(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function HH(t,e,n){return e&&kI(t.prototype,e),n&&kI(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function GH(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gg(t,e)}function Gg(t,e){return Gg=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},Gg(t,e)}function KH(t){var e=YH();return function(){var r=kd(t),s;if(e){var i=kd(this).constructor;s=Reflect.construct(r,arguments,i)}else s=r.apply(this,arguments);return QH(this,s)}}function QH(t,e){if(e&&(xd(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mt(t)}function Mt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function YH(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kd(t){return kd=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},kd(t)}function Ln(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jn={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},is=jn.mouse,Zf=function(t){GH(n,t);var e=KH(n);function n(){var r;WH(this,n);for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r=e.call.apply(e,[this].concat(i)),Ln(Mt(r),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),Ln(Mt(r),"mounted",!1),Ln(Mt(r),"handleDragStart",function(a){if(r.props.onMouseDown(a),!r.props.allowAnyClick&&typeof a.button=="number"&&a.button!==0)return!1;var l=r.findDOMNode();if(!l||!l.ownerDocument||!l.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var u=l.ownerDocument;if(!(r.props.disabled||!(a.target instanceof u.defaultView.Node)||r.props.handle&&!(0,Ot.matchesSelectorAndParentsTo)(a.target,r.props.handle,l)||r.props.cancel&&(0,Ot.matchesSelectorAndParentsTo)(a.target,r.props.cancel,l))){a.type==="touchstart"&&a.preventDefault();var c=(0,Ot.getTouchIdentifier)(a);r.setState({touchIdentifier:c});var h=(0,ss.getControlPosition)(a,c,Mt(r));if(h!=null){var f=h.x,p=h.y,m=(0,ss.createCoreData)(Mt(r),f,p);(0,cl.default)("DraggableCore: handleDragStart: %j",m),(0,cl.default)("calling",r.props.onStart);var _=r.props.onStart(a,m);_===!1||r.mounted===!1||(r.props.enableUserSelectHack&&(0,Ot.addUserSelectStyles)(u),r.setState({dragging:!0,lastX:f,lastY:p}),(0,Ot.addEvent)(u,is.move,r.handleDrag),(0,Ot.addEvent)(u,is.stop,r.handleDragStop))}}}),Ln(Mt(r),"handleDrag",function(a){var l=(0,ss.getControlPosition)(a,r.state.touchIdentifier,Mt(r));if(l!=null){var u=l.x,c=l.y;if(Array.isArray(r.props.grid)){var h=u-r.state.lastX,f=c-r.state.lastY,p=(0,ss.snapToGrid)(r.props.grid,h,f),m=II(p,2);if(h=m[0],f=m[1],!h&&!f)return;u=r.state.lastX+h,c=r.state.lastY+f}var _=(0,ss.createCoreData)(Mt(r),u,c);(0,cl.default)("DraggableCore: handleDrag: %j",_);var E=r.props.onDrag(a,_);if(E===!1||r.mounted===!1){try{r.handleDragStop(new MouseEvent("mouseup"))}catch{var g=document.createEvent("MouseEvents");g.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.handleDragStop(g)}return}r.setState({lastX:u,lastY:c})}}),Ln(Mt(r),"handleDragStop",function(a){if(!!r.state.dragging){var l=(0,ss.getControlPosition)(a,r.state.touchIdentifier,Mt(r));if(l!=null){var u=l.x,c=l.y;if(Array.isArray(r.props.grid)){var h=u-r.state.lastX||0,f=c-r.state.lastY||0,p=(0,ss.snapToGrid)(r.props.grid,h,f),m=II(p,2);h=m[0],f=m[1],u=r.state.lastX+h,c=r.state.lastY+f}var _=(0,ss.createCoreData)(Mt(r),u,c),E=r.props.onStop(a,_);if(E===!1||r.mounted===!1)return!1;var g=r.findDOMNode();g&&r.props.enableUserSelectHack&&(0,Ot.removeUserSelectStyles)(g.ownerDocument),(0,cl.default)("DraggableCore: handleDragStop: %j",_),r.setState({dragging:!1,lastX:NaN,lastY:NaN}),g&&((0,cl.default)("DraggableCore: Removing handlers"),(0,Ot.removeEvent)(g.ownerDocument,is.move,r.handleDrag),(0,Ot.removeEvent)(g.ownerDocument,is.stop,r.handleDragStop))}}}),Ln(Mt(r),"onMouseDown",function(a){return is=jn.mouse,r.handleDragStart(a)}),Ln(Mt(r),"onMouseUp",function(a){return is=jn.mouse,r.handleDragStop(a)}),Ln(Mt(r),"onTouchStart",function(a){return is=jn.touch,r.handleDragStart(a)}),Ln(Mt(r),"onTouchEnd",function(a){return is=jn.touch,r.handleDragStop(a)}),r}return HH(n,[{key:"componentDidMount",value:function(){this.mounted=!0;var s=this.findDOMNode();s&&(0,Ot.addEvent)(s,jn.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.findDOMNode();if(s){var i=s.ownerDocument;(0,Ot.removeEvent)(i,jn.mouse.move,this.handleDrag),(0,Ot.removeEvent)(i,jn.touch.move,this.handleDrag),(0,Ot.removeEvent)(i,jn.mouse.stop,this.handleDragStop),(0,Ot.removeEvent)(i,jn.touch.stop,this.handleDragStop),(0,Ot.removeEvent)(s,jn.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,Ot.removeUserSelectStyles)(i)}}},{key:"findDOMNode",value:function(){var s,i,o;return(s=this.props)!==null&&s!==void 0&&s.nodeRef?(i=this.props)===null||i===void 0||(o=i.nodeRef)===null||o===void 0?void 0:o.current:FH.default.findDOMNode(this)}},{key:"render",value:function(){return Jp.cloneElement(Jp.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),n}(Jp.Component);Yf.default=Zf;Ln(Zf,"displayName","DraggableCore");Ln(Zf,"propTypes",{allowAnyClick:hn.default.bool,disabled:hn.default.bool,enableUserSelectHack:hn.default.bool,offsetParent:function(e,n){if(e[n]&&e[n].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:hn.default.arrayOf(hn.default.number),handle:hn.default.string,cancel:hn.default.string,nodeRef:hn.default.object,onStart:hn.default.func,onDrag:hn.default.func,onStop:hn.default.func,onMouseDown:hn.default.func,scale:hn.default.number,className:em.dontSetMe,style:em.dontSetMe,transform:em.dontSetMe});Ln(Zf,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){function e(k){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},e(k)}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var n=m(d.exports),r=f(Vw.exports),s=f(Sr.exports),i=f(oH),o=Xe,a=xr,l=Ir,u=f(Yf),c=f(Xf),h=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function f(k){return k&&k.__esModule?k:{default:k}}function p(k){if(typeof WeakMap!="function")return null;var S=new WeakMap,T=new WeakMap;return(p=function(M){return M?T:S})(k)}function m(k,S){if(!S&&k&&k.__esModule)return k;if(k===null||e(k)!=="object"&&typeof k!="function")return{default:k};var T=p(S);if(T&&T.has(k))return T.get(k);var O={},M=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var V in k)if(V!=="default"&&Object.prototype.hasOwnProperty.call(k,V)){var K=M?Object.getOwnPropertyDescriptor(k,V):null;K&&(K.get||K.set)?Object.defineProperty(O,V,K):O[V]=k[V]}return O.default=k,T&&T.set(k,O),O}function _(){return _=Object.assign||function(k){for(var S=1;S<arguments.length;S++){var T=arguments[S];for(var O in T)Object.prototype.hasOwnProperty.call(T,O)&&(k[O]=T[O])}return k},_.apply(this,arguments)}function E(k,S){if(k==null)return{};var T=g(k,S),O,M;if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(k);for(M=0;M<V.length;M++)O=V[M],!(S.indexOf(O)>=0)&&(!Object.prototype.propertyIsEnumerable.call(k,O)||(T[O]=k[O]))}return T}function g(k,S){if(k==null)return{};var T={},O=Object.keys(k),M,V;for(V=0;V<O.length;V++)M=O[V],!(S.indexOf(M)>=0)&&(T[M]=k[M]);return T}function y(k,S){var T=Object.keys(k);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(k);S&&(O=O.filter(function(M){return Object.getOwnPropertyDescriptor(k,M).enumerable})),T.push.apply(T,O)}return T}function v(k){for(var S=1;S<arguments.length;S++){var T=arguments[S]!=null?arguments[S]:{};S%2?y(Object(T),!0).forEach(function(O){x(k,O,T[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(T)):y(Object(T)).forEach(function(O){Object.defineProperty(k,O,Object.getOwnPropertyDescriptor(T,O))})}return k}function w(k,S){return L(k)||A(k,S)||I(k,S)||b()}function b(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function I(k,S){if(!!k){if(typeof k=="string")return R(k,S);var T=Object.prototype.toString.call(k).slice(8,-1);if(T==="Object"&&k.constructor&&(T=k.constructor.name),T==="Map"||T==="Set")return Array.from(k);if(T==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(T))return R(k,S)}}function R(k,S){(S==null||S>k.length)&&(S=k.length);for(var T=0,O=new Array(S);T<S;T++)O[T]=k[T];return O}function A(k,S){var T=k==null?null:typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(T!=null){var O=[],M=!0,V=!1,K,le;try{for(T=T.call(k);!(M=(K=T.next()).done)&&(O.push(K.value),!(S&&O.length===S));M=!0);}catch(ne){V=!0,le=ne}finally{try{!M&&T.return!=null&&T.return()}finally{if(V)throw le}}return O}}function L(k){if(Array.isArray(k))return k}function F(k,S){if(!(k instanceof S))throw new TypeError("Cannot call a class as a function")}function G(k,S){for(var T=0;T<S.length;T++){var O=S[T];O.enumerable=O.enumerable||!1,O.configurable=!0,"value"in O&&(O.writable=!0),Object.defineProperty(k,O.key,O)}}function $(k,S,T){return S&&G(k.prototype,S),T&&G(k,T),Object.defineProperty(k,"prototype",{writable:!1}),k}function Q(k,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");k.prototype=Object.create(S&&S.prototype,{constructor:{value:k,writable:!0,configurable:!0}}),Object.defineProperty(k,"prototype",{writable:!1}),S&&W(k,S)}function W(k,S){return W=Object.setPrototypeOf||function(O,M){return O.__proto__=M,O},W(k,S)}function ee(k){var S=B();return function(){var O=P(k),M;if(S){var V=P(this).constructor;M=Reflect.construct(O,arguments,V)}else M=O.apply(this,arguments);return ae(this,M)}}function ae(k,S){if(S&&(e(S)==="object"||typeof S=="function"))return S;if(S!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ue(k)}function ue(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k}function B(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function P(k){return P=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},P(k)}function x(k,S,T){return S in k?Object.defineProperty(k,S,{value:T,enumerable:!0,configurable:!0,writable:!0}):k[S]=T,k}var C=function(k){Q(T,k);var S=ee(T);function T(O){var M;return F(this,T),M=S.call(this,O),x(ue(M),"onDragStart",function(V,K){(0,c.default)("Draggable: onDragStart: %j",K);var le=M.props.onStart(V,(0,a.createDraggableData)(ue(M),K));if(le===!1)return!1;M.setState({dragging:!0,dragged:!0})}),x(ue(M),"onDrag",function(V,K){if(!M.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",K);var le=(0,a.createDraggableData)(ue(M),K),ne={x:le.x,y:le.y};if(M.props.bounds){var Re=ne.x,Nt=ne.y;ne.x+=M.state.slackX,ne.y+=M.state.slackY;var bn=(0,a.getBoundPosition)(ue(M),ne.x,ne.y),ve=w(bn,2),ao=ve[0],kr=ve[1];ne.x=ao,ne.y=kr,ne.slackX=M.state.slackX+(Re-ne.x),ne.slackY=M.state.slackY+(Nt-ne.y),le.x=ne.x,le.y=ne.y,le.deltaX=ne.x-M.state.x,le.deltaY=ne.y-M.state.y}var Js=M.props.onDrag(V,le);if(Js===!1)return!1;M.setState(ne)}),x(ue(M),"onDragStop",function(V,K){if(!M.state.dragging)return!1;var le=M.props.onStop(V,(0,a.createDraggableData)(ue(M),K));if(le===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",K);var ne={dragging:!1,slackX:0,slackY:0},Re=Boolean(M.props.position);if(Re){var Nt=M.props.position,bn=Nt.x,ve=Nt.y;ne.x=bn,ne.y=ve}M.setState(ne)}),M.state={dragging:!1,dragged:!1,x:O.position?O.position.x:O.defaultPosition.x,y:O.position?O.position.y:O.defaultPosition.y,prevPropsPosition:v({},O.position),slackX:0,slackY:0,isElementSVG:!1},O.position&&!(O.onDrag||O.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),M}return $(T,[{key:"componentDidMount",value:function(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var M,V,K;return(M=(V=this.props)===null||V===void 0||(K=V.nodeRef)===null||K===void 0?void 0:K.current)!==null&&M!==void 0?M:s.default.findDOMNode(this)}},{key:"render",value:function(){var M,V=this.props;V.axis,V.bounds;var K=V.children,le=V.defaultPosition,ne=V.defaultClassName,Re=V.defaultClassNameDragging,Nt=V.defaultClassNameDragged,bn=V.position,ve=V.positionOffset;V.scale;var ao=E(V,h),kr={},Js=null,lo=Boolean(bn),Fa=!lo||this.state.dragging,ei=bn||le,Ba={x:(0,a.canDragX)(this)&&Fa?this.state.x:ei.x,y:(0,a.canDragY)(this)&&Fa?this.state.y:ei.y};this.state.isElementSVG?Js=(0,o.createSVGTransform)(Ba,ve):kr=(0,o.createCSSTransform)(Ba,ve);var uo=(0,i.default)(K.props.className||"",ne,(M={},x(M,Re,this.state.dragging),x(M,Nt,this.state.dragged),M));return n.createElement(u.default,_({},ao,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),n.cloneElement(n.Children.only(K),{className:uo,style:v(v({},K.props.style),kr),transform:Js}))}}],[{key:"getDerivedStateFromProps",value:function(M,V){var K=M.position,le=V.prevPropsPosition;return K&&(!le||K.x!==le.x||K.y!==le.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:K,prevPropsPosition:le}),{x:K.x,y:K.y,prevPropsPosition:v({},K)}):null}}]),T}(n.Component);t.default=C,x(C,"displayName","Draggable"),x(C,"propTypes",v(v({},u.default.propTypes),{},{axis:r.default.oneOf(["both","x","y","none"]),bounds:r.default.oneOfType([r.default.shape({left:r.default.number,right:r.default.number,top:r.default.number,bottom:r.default.number}),r.default.string,r.default.oneOf([!1])]),defaultClassName:r.default.string,defaultClassNameDragging:r.default.string,defaultClassNameDragged:r.default.string,defaultPosition:r.default.shape({x:r.default.number,y:r.default.number}),positionOffset:r.default.shape({x:r.default.oneOfType([r.default.number,r.default.string]),y:r.default.oneOfType([r.default.number,r.default.string])}),position:r.default.shape({x:r.default.number,y:r.default.number}),className:l.dontSetMe,style:l.dontSetMe,transform:l.dontSetMe})),x(C,"defaultProps",v(v({},u.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))})(hP);var xP=hP,kP=xP.default,XH=xP.DraggableCore;Bw.exports=kP;Bw.exports.default=kP;Bw.exports.DraggableCore=XH;function TI({driver:t}){function e(){Bs(Ut(Ce,"pending",t.id))}return Y("div",{className:"admin-client-see",children:[U("br",{}),Y("p",{children:[" ",t.name," "]}),U("p",{children:t.status}),U("button",{onClick:e,children:" delete "})]})}function ZH({driver:t}){return t.map(e=>U(TI,{driver:e},TI.ID))}function TP(){const[t,e]=d.exports.useState([]);return d.exports.useEffect(()=>{(async()=>{const r=pt(Ce,"pending");mn(r,s=>{e(s.docs.map(i=>({...i.data(),id:i.id})))})})()},[]),U("div",{className:"",children:U(ZH,{driver:t})})}function JH(){function t(){const[$,Q]=d.exports.useState(null);return d.exports.useEffect(()=>{Bn.onAuthStateChanged(W=>{W&&Q(W.uid)})},[]),$}t();function e(){const[$,Q]=d.exports.useState(null);return d.exports.useEffect(()=>{Bn.onAuthStateChanged(W=>{W&&Hr.collection("users").doc(W.uid).get().then(ee=>{Q(ee.data().FullName)}),W?Hr.collection("admin").doc(W.uid).get().then(ee=>{Q(ee.data().FullName)}):Q(null)})},[]),$}const n=e(),{isLoaded:r}=Ea({googleMapsApiKey:"AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA",libraries:["places"]}),s={lat:5.839398,lng:-55.199089};d.exports.useState(null),d.exports.useState(""),d.exports.useState("");const[i,o]=d.exports.useState(null),a=d.exports.useRef(),l=d.exports.useRef(),[u,c]=d.exports.useState([]);tr(),d.exports.useEffect(()=>{(async()=>{const Q=pt(Ce,"test"),W=tr(Q,YL("timestamp","desc"));mn(W,ee=>{c(ee.docs.map(ae=>({...ae.data(),id:ae.id})))})})()},[]);const[h,f]=d.exports.useState([]);d.exports.useEffect(()=>{(async()=>{const Q=pt(Ce,"place");mn(Q,W=>{f(W.docs.map(ee=>({...ee.data(),id:ee.id})))})})()},[]);function p({}){Bs(Ut(Ce,"place",E))}const[m,_]=d.exports.useState([]),[E,g]=d.exports.useState(""),y=()=>h.map($=>Y("div",{children:[U("input",{value:"click here",onClick:Q=>{_(W=>[...W,{lat:$.lat,lng:$.lng,time:new Date}])}}),U("button",{onClick:Q=>g($.id),children:" remove    "})]}));d.exports.useState("");const v=d.exports.useRef(null);d.exports.useState("");const[w,b]=d.exports.useState([]),[I,R]=d.exports.useState([]),[A,L]=d.exports.useState(-1),F=()=>u.map(($,Q)=>U("div",{children:Y("form",{onClick:()=>L(Q),style:{background:A===Q?"salmon":"ghostwhite"},children:[Y("p",{children:[" Name: ",$.name]}),Y("p",{children:[" Number: ",$.number]}),Y("p",{children:[" From : ",$.start]}),Y("p",{children:[" To : ",$.end]}),Y("p",{children:[" Avg duration : ",$.duration]}),Y("p",{children:[" Distance : ",$.distance]}),Y("p",{children:[" status : ",$.status," "]}),Y("button",{onClick:(W,ee)=>{b($.start),$.end;const ae=pt(Ce,"driver");ga(ae,{nameDispatch:$.name,numberDispatch:$.number,pickupDispatch:$.start,ToDispatch:$.end,distanceDispatch:$.distance,durationDispatch:$.duration,statusDispatch:"client waiting"})},children:["  ",U("a",{href:"http://localhost:3000/?#/d1",target:"_blank",rel:"noreferrer",children:" Accept Route"})]}),U("button",{onClick:W=>{Bs(Ut(Ce,"test",$.id))},children:" delete "})]})},Q)),G=()=>{v&&v.current&&v.current.play().catch($=>{console.error("Error attempting to play",$)})};if(d.exports.useEffect(()=>{G()},[]),!r)return U("div",{children:" loading .... "});if(r)return U(Gn,{children:Y("div",{className:"admin-side",children:[U(Qf,{user:n}),Y("div",{className:"split",children:[Y("div",{className:"rides",children:[Y("div",{className:"admin-see",children:[U(F,{}),U(TP,{})]}),U("input",{className:"hide",id:"input",type:"text",placeholder:"from",ref:a,defaultValue:w}),U("input",{className:"hide",type:"text",placeholder:"to",ref:l,defaultValue:I})]}),Y("div",{className:"map-and-markers",children:[Y($u,{id:"map",zoom:12,center:s,mapContainerClassName:"map-container",children:[m.map($=>U(ea,{position:{lat:$.lat,lng:$.lng}},$.time.toISOString())),U(ea,{}),i&&U(zd,{directions:i})]}),Y("div",{className:"driverLocal",children:[U(y,{}),U("button",{onClick:p,children:" del marker on map"})," "]})]}),U("audio",{src:eH,ref:v,muted:!0,children:" sound"})]})]})})}function eG(){const{isLoaded:t}=Ea({googleMapsApiKey:"AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA",libraries:["places"]}),e={lat:5.839398,lng:-55.199089};if(!t)return U("div",{children:" loading .... "});if(t)return U("div",{className:"",children:U($u,{zoom:12,center:e,mapContainerClassName:"admin-map "})})}function tG(){const[t,e]=d.exports.useState([]);d.exports.useState(""),d.exports.useState("");const[n,r]=d.exports.useState(""),[s,i]=d.exports.useState("");d.exports.useState([]);const[o,a]=d.exports.useState([]),[l,u]=d.exports.useState(""),[c,h]=d.exports.useState(null),[f,p]=d.exports.useState([]),[m,_]=d.exports.useState(""),[E,g]=d.exports.useState([]);d.exports.useEffect(()=>{(async()=>{const C=pt(Ce,"place");mn(C,k=>{g(k.docs.map(S=>({...S.data(),id:S.id})))})})()},[]),d.exports.useEffect(()=>{(async()=>{const C=pt(Ce,"drivers");mn(C,k=>{e(k.docs.map(S=>({...S.data(),id:S.id})))})})()},[]),d.exports.useEffect(()=>{(async()=>{const C=pt(Ce,"driver");mn(C,k=>{a(k.docs.map(S=>({...S.data(),id:S.id})))})})()},[]),d.exports.useEffect(()=>{(async()=>{const C=pt(Ce,"rider");mn(C,k=>{p(k.docs.map(S=>({...S.data(),id:S.id})))})})()},[]);const{isLoaded:y}=Ea({googleMapsApiKey:"AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA",libraries:["places"]}),v={lat:5.839398,lng:-55.199089};function w(){var x,C;x=new google.maps.Map(document.getElementById("map"),{center:{lat:5.839398,lng:-55.199089},zoom:18}),C=new google.maps.InfoWindow,navigator.geolocation?navigator.geolocation.getCurrentPosition(function(k){var S={lat:k.coords.latitude,lng:k.coords.longitude};C.setPosition(S),C.setContent(l),C.open(x),x.setCenter(S),r(k.coords.latitude),i(k.coords.longitude)},function(){b(!0,C,x.getCenter())}):b(!1,C,x.getCenter())}function b(x,C){infoWindow.setPosition(C),infoWindow.setContent(x?"Error: The Geolocation service failed.":"Error: Your browser doesn't support geolocation."),infoWindow.open(eG)}window.initMap=w;const[I,R]=d.exports.useState([]);d.exports.useEffect(()=>{(async()=>{const C=pt(Ce,"client");mn(C,k=>{R(k.docs.map(S=>({...S.data(),id:S.id})))})})()},[]);const A=()=>t.map((x,C)=>x.toDriver===l?Y("div",{children:[Y("h4",{children:[" Client Name:  ",x.name," "]}),Y("h4",{children:[" number: ",x.number]}),Y("h4",{children:[" From : ",x.To," "]}),Y("h4",{children:[" To : ",x.pickup," "]}),Y("h4",{children:[" Distance : ",x.distance]}),Y("h4",{children:[" Avg Duration : ",x.duration]}),Y("h4",{children:[" Ride Status : ",x.status]}),Y("h4",{children:[" Driver : ",x.toDriver,"  "]}),Y("h4",{onClick:()=>{_(x.id)},children:[" id : ",x.id,"  "]})]},C):null),L=()=>t.map((x,C)=>{if(l===x.toDriver)return U("button",{onClick:()=>{h(x.toDriver)},children:x.toDriver},C)}),F=()=>I.map((x,C)=>{if(l===x.number)return Y("div",{className:"button-css",children:[Y("h4",{children:[" Client Status : ",x.client]}),U("button",{className:"button",onClick:()=>{const k=Ut(Ce,"client",x.id);_i(k,{client:"client pickedup"})},children:" client pickup"})]},C)});function G(){return(()=>o.map((C,k)=>{const S=Ut(Ce,"driver",C.id);_i(S,{statusDispatch:"accepted"})}))()}function $(){return(()=>E.map((C,k)=>{const S=Ut(Ce,"place",C.id);_i(S,{lat:n,lng:s})}))()}function Q(){const x=pt(Ce,"place");ga(x,{lat:n,lng:s,number:l})}function W(){return(()=>t.map((C,k)=>{const S=Ut(Ce,"drivers",C.id);_i(S,{status:"accepted"});const O=pt(Ce,"client");ga(O,{client:"driver underway",number:Number(l)})}))()}console.log(m);function ee(){return(()=>t.map((C,k)=>{Bs(Ut(Ce,"drivers",m)),h(0)}))()}function ae(){return(()=>I.map((C,k)=>{Bs(Ut(Ce,"client",C.id)),h(0)}))()}function ue(){const[x,C]=d.exports.useState(null);return d.exports.useEffect(()=>{Bn.onAuthStateChanged(k=>{k&&C(k.uid)})},[]),x}ue();function B(){const[x,C]=d.exports.useState(null);return d.exports.useEffect(()=>{Bn.onAuthStateChanged(k=>{k==="purry"?Hr.collection("users").doc(k.uid).get().then(S=>{C(S.data().FullName)}):k?Hr.collection("rider").doc(k.uid).get().then(S=>{C(S.data().FullName),u(S.data().Number)}):C(null)})},[]),x}const P=B();if(!y)return U("div",{children:" loading .... "});if(y||c===l)return Y("div",{className:"",children:[U(Qf,{user:P}),U(L,{}),Y("div",{className:"whole-driver-div",children:[Y("div",{className:"driver-view",children:[U("button",{id:"button",className:"map-btn button",onClick:()=>{setInterval(()=>{w()},1e4),setTimeout(()=>{Q()},11e3)},children:" Open For Ride "}),U("button",{className:"button",onClick:()=>setInterval(()=>{$()},9e3),children:"   Send to Dispatch "}),U(A,{}),"  ",U("button",{className:"button",onClick:()=>{W(),G()},children:" Accept Ride "}),U("button",{className:"button",onClick:()=>{ee(),ae()},children:" Remove Ride  aa "}),U(F,{})]}),U("div",{className:"map-view-driver",children:U($u,{id:"map",className:"",zoom:12,center:v,mapContainerClassName:"admin-map driver-map"})})]})]})}function nG(){const{isLoaded:t}=Ea({googleMapsApiKey:"AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA",libraries:["places"]}),e={lat:5.839398,lng:-55.199089};d.exports.useState(null);const[n,r]=d.exports.useState(""),[s,i]=d.exports.useState(""),[o,a]=d.exports.useState(null),l=d.exports.useRef(),u=d.exports.useRef();async function c(){if(l.current.value===""||u.current.value==="")return;const Q=await new google.maps.DirectionsService().route({origin:l.current.value,destination:u.current.value,travelMode:google.maps.TravelMode.DRIVING});a(Q),r(Q.routes[0].legs[0].distance.text),i(Q.routes[0].legs[0].duration.text)}const[h,f]=d.exports.useState([]);d.exports.useEffect(()=>{(async()=>{const Q=pt(Ce,"driver");mn(Q,W=>{f(W.docs.map(ee=>({...ee.data(),id:ee.id})))})})()},[]);const[p,m]=d.exports.useState([]);d.exports.useEffect(()=>{(async()=>{const Q=pt(Ce,"place");mn(Q,W=>{m(W.docs.map(ee=>({...ee.data(),id:ee.id})))})})()},[]),d.exports.useState([]);const[_,E]=d.exports.useState(""),g=()=>p.map(($,Q)=>Y("div",{children:[Y("h2",{onClick:()=>{E($.id)},children:[$.number," "]}),U("button",{onClick:W=>{Bs(Ut(Ce,"place",$.id))},children:" remove    "})]},Q)),[y,v]=d.exports.useState("");d.exports.useRef(null),d.exports.useState("");const[w,b]=d.exports.useState([]),[I,R]=d.exports.useState([]),A=()=>h.map(($,Q)=>Y("div",{className:"admin-client-see",children:[Y("p",{children:[" ",$.nameDispatch," "]}),Y("p",{children:[" ",$.numberDispatch," "]}),Y("p",{children:[" ",$.pickupDispatch," "]}),Y("p",{children:[" ",$.ToDispatch," "]}),U("p",{children:$.distanceDispatch}),Y("p",{children:[" ",$.durationDispatch]}),Y("p",{children:[" ",$.statusDispatch]}),U("button",{onClick:W=>{b($.pickupDispatch),R($.ToDispatch)},children:"  accept Route"}),U("button",{onClick:c,children:"cal route "}),U("button",{onClick:W=>{const ee=pt(Ce,"drivers");ga(ee,{name:$.nameDispatch,numberDispatch:$.numberDispatch,To:$.ToDispatch,pickup:$.pickupDispatch,distance:$.distanceDispatch,status:"Awaiting Driver",toDriver:Number(y)}),v(0);const ae=Ut(Ce,"driver",$.id);_i(ae,{statusDispatch:"awating driver"}),v("")},children:" send to driver "}),U("button",{onClick:W=>{Bs(Ut(Ce,"driver",$.id))},children:" delete "}),U("input",{type:"number",className:"driver-number",placeholder:"driver-number",onMouseOut:W=>v(W.target.value)})]},Q));function L(){const[$,Q]=d.exports.useState(null);return d.exports.useEffect(()=>{Bn.onAuthStateChanged(W=>{W&&Q(W.uid)})},[]),$}L();function F(){const[$,Q]=d.exports.useState(null);return d.exports.useEffect(()=>{Bn.onAuthStateChanged(W=>{W&&Hr.collection("users").doc(W.uid).get().then(ee=>{Q(ee.data().FullName)}),W?Hr.collection("admin").doc(W.uid).get().then(ee=>{Q(ee.data().FullName)}):Q(null)})},[]),$}const G=F();if(!t)return U("div",{children:" loading .... "});if(t)return U(Gn,{children:Y("div",{className:"admin-side",children:[U(Qf,{user:G}),Y("div",{className:"split",children:[Y("div",{className:"rides",children:[Y("div",{className:"admin-see",children:[U(A,{}),U(TP,{})]}),U("input",{className:"hide",id:"input",type:"text",placeholder:"from",ref:l,defaultValue:w}),U("input",{className:"hide",type:"text",placeholder:"to",ref:u,defaultValue:I})]}),Y("div",{className:"map-and-markers",children:[Y($u,{id:"map",zoom:12,center:e,mapContainerClassName:"map-container",children:[p.map(($,Q)=>U(ea,{position:{lat:$.lat,lng:$.lng},label:"yello"},Q)),U(ea,{}),o&&U(zd,{directions:o})]}),U("div",{className:"driverLocal",children:U(g,{})})]})]})]})})}function rG(){const[t,e]=d.exports.useState(""),[n,r]=d.exports.useState(""),s=Gd(),[i,o]=d.exports.useState(""),[a,l]=d.exports.useState("");return Y(Gn,{children:["  ",U("div",{children:U(nr,{to:"/",children:" return to home "})}),Y("form",{className:"form-login",onSubmit:c=>{c.preventDefault(),Bn.signInWithEmailAndPassword(t,n).then(()=>{l("Signup successful, you will be redirected to Home page!!"),e(""),r(""),o(""),setTimeout(()=>{l(""),s("/")},3e3)}).catch(h=>o(h.message))},children:[U("h3",{children:" Please log in to your existing account "}),Y("div",{children:[Y("div",{children:["  ",U("input",{type:"email",placeholder:"Email",className:"input-login",onChange:c=>e(c.target.value),value:t,required:!0})," "]}),Y("div",{children:["  ",U("input",{type:"text",placeholder:"Password",className:"input-login",onChange:c=>r(c.target.value),value:n,required:!0})," "]}),Y("div",{className:"btnLogin",children:[U("button",{className:"btn-login",children:" LOGIN"}),Y("div",{className:"login-signup",children:["  ",U(nr,{className:"logindec",to:"/Signup",children:"SIGNUP"})," "]})]})]}),U("div",{className:"loginmsg",children:a&&Y(Gn,{children:[Y("p",{children:[" ",a]})," "]})}),U("div",{className:"loginmsg",children:i&&Y(Gn,{children:[U("div",{children:" Invalid email or password"})," "]})})]})]})}function sG(){const[t,e]=d.exports.useState(""),[n,r]=d.exports.useState(""),[s,i]=d.exports.useState(""),[o,a]=d.exports.useState(""),[l,u]=d.exports.useState(""),[c,h]=d.exports.useState(""),f=Gd();return Y(Gn,{children:[U("div",{className:"form-navbar",children:U(nr,{className:"homeIcon",to:"/",children:" home "})}),Y("form",{className:"form-signup",onSubmit:m=>{m.preventDefault(),Bn.createUserWithEmailAndPassword(n,s).then(_=>{Hr.collection("rider").doc(_.user.uid).set({FullName:t,Email:n,Password:s,Number:Number(o)}).then(()=>{h("signup successful "),e(""),r(""),i(""),u(""),setTimeout(()=>{h(""),f("/")},3e3)}).catch(E=>u(E.message))}).catch(_=>{u(_.message)})},children:[Y("div",{className:"divsignup",children:[U("h3",{className:"signup-text",children:"Please sign up for a account "}),U("input",{type:"email",placeholder:"Email",className:"input-signup",onChange:m=>r(m.target.value),value:n,required:!0}),Y("div",{children:["  ",U("input",{type:"text",placeholder:"Full Name",className:"input-signup",onChange:m=>e(m.target.value),value:t,maxLength:"12",required:!0})," "]}),U("input",{type:"text",placeholder:"Password",className:"input-signup",onChange:m=>i(m.target.value),value:s,required:!0}),U("input",{type:"text",placeholder:"Number",className:"input-signup",onChange:m=>a(m.target.value),value:o,required:!0}),Y("div",{className:"btnsetsignup",children:["  ",U("button",{className:"btn-signup",variant:"contained",color:"success",children:" signup"}),Y("div",{className:"signup-logIn",children:["  ",U(nr,{className:"notextdec",to:"/login",children:" log in "})," "]})]})]}),Y("div",{className:"signupmsg",children:[l&&Y(Gn,{children:[U("div",{className:"errorsignmsg",children:" Email already exists"})," "]}),c&&Y(Gn,{children:[Y("div",{className:"successsignmsg",children:[" ",c]})," "]})]})]})]})}function iG(){return U(Gn,{children:U(RO,{children:Y(TO,{children:[U(si,{path:"/",element:U(J3,{})}),U(si,{path:"admin",element:U(JH,{})}),U(si,{path:"driver",element:U(tG,{})}),U(si,{path:"d1",element:U(nG,{})}),U(si,{path:"login",element:U(rG,{})}),U(si,{path:"signup",element:U(sG,{})})]})})})}nm.createRoot(document.getElementById("root")).render(U(iG,{}));
