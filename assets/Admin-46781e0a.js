import{r as t,s as S,j as r,F as _,c as n,a as p,f as b,T as d,l as z,b as m,G as v,A as N,d as i,Q as V}from"./index-c166a26e.js";import"./cjs-fe7c74b5.js";import{P as W}from"./Pending-82d5ff26.js";import{u as q,N as I,G as K,M as O,D as B}from"./Navbar-b1695df9.js";const H="/taxi-test/assets/untitled-f11a0ab3.mp3";function ae(){function D(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{p.onAuthStateChanged(a=>{a&&s(a.uid)})},[]),e}D();function R(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{p.onAuthStateChanged(a=>{a?b.collection("admin").doc(a.uid).get().then(o=>{s(o.data().FullName)}):s(null)})},[]),e}const u=R();function y(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{p.onAuthStateChanged(a=>{a?b.collection("manager").doc(a.uid).get().then(o=>{s(o.data().FullName)}):s(null)})},[]),e}const h=y(),{isLoaded:f}=q({googleMapsApiKey:"AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA",libraries:["places"]}),E={lat:5.839398,lng:-55.199089};t.exports.useState(null),t.exports.useState(""),t.exports.useState("");const[x,J]=t.exports.useState(null),k=t.exports.useRef(),A=t.exports.useRef(),[C,L]=t.exports.useState([]);S(),t.exports.useEffect(()=>{(async()=>{const s=d(i,"test"),a=S(s,z("timestamp","desc"));m(a,o=>{L(o.docs.map(l=>({...l.data(),id:l.id})))})})()},[]);const[X,T]=t.exports.useState([]);t.exports.useEffect(()=>{(async()=>{const s=d(i,"place");m(s,a=>{T(a.docs.map(o=>({...o.data(),id:o.id})))})})()},[]);const[g,G]=t.exports.useState([]);t.exports.useEffect(()=>{(async()=>{const s=d(i,"place");m(s,a=>{G(a.docs.map(o=>({...o.data(),id:o.id})))})})()},[]),t.exports.useState([]);const[Y,M]=t.exports.useState(""),F=()=>g.map((e,s)=>n("div",{children:[n("h2",{onClick:()=>{M(e.id)},children:[e.number," "]}),r("button",{onClick:a=>{v(N(i,"place",e.id))},children:" remove    "})]},s));t.exports.useState("");const c=t.exports.useRef(null);t.exports.useState("");const[U,j]=t.exports.useState([]),[P,Z]=t.exports.useState([]);t.exports.useState(-1);const w=()=>C.map((e,s)=>r("div",{children:n("form",{style:{background:"ghostwhite"},children:[n("p",{children:[" Name: ",e.name]}),n("p",{children:[" Number: ",e.number]}),n("p",{children:[" From : ",e.start]}),n("p",{children:[" To : ",e.end]}),n("p",{children:[" Avg duration : ",e.duration]}),n("p",{children:[" Distance : ",e.distance]}),n("p",{children:[" status : ",e.status," "]}),n("button",{onClick:(a,o)=>{j(e.start),e.end;const l=d(i,"driver");V(l,{nameDispatch:e.name,numberDispatch:e.number,pickupDispatch:e.start,ToDispatch:e.end,distanceDispatch:e.distance,durationDispatch:e.duration,statusDispatch:"client waiting"})},children:["  ",r("a",{href:"https://balanss.github.io/taxi-test/#/d1",target:"_blank",rel:"noreferrer",children:" Accept Route"})]}),r("button",{onClick:a=>{v(N(i,"test",e.id))},children:" delete "})]})},s)),Q=()=>{c&&c.current&&c.current.play().catch(e=>{console.error("Error attempting to play",e)})};if(t.exports.useEffect(()=>{Q()},[]),!f)return r("div",{children:" loading .... "});if(f&&h||u)return r(_,{children:n("div",{className:"admin-side",children:[r(I,{admin:u,manager:h}),n("div",{className:"split",children:[n("div",{className:"rides",children:[n("div",{className:"admin-see",children:[r(w,{}),r(W,{})]}),r("input",{className:"hide",id:"input",type:"text",placeholder:"from",ref:k,defaultValue:U}),r("input",{className:"hide",type:"text",placeholder:"to",ref:A,defaultValue:P})]}),n("div",{className:"map-and-markers",children:[n(K,{id:"map",zoom:12,center:E,mapContainerClassName:"map-container",children:[g.map((e,s)=>r(O,{position:{lat:e.lat,lng:e.lng},label:"yello"},s)),x&&r(B,{directions:x})]}),r("div",{className:"driverLocal",children:r(F,{})})]}),r("audio",{src:H,ref:c,muted:!0,children:" sound"})]})]})});if(!u)return null}export{ae as default};
