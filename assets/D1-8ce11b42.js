import{r as t,j as a,F as O,c as i,T as d,b as S,G as v,A as p,d as c,Q as W,K as _,a as h,f as b}from"./index-c166a26e.js";import"./cjs-fe7c74b5.js";import{P as q}from"./Pending-82d5ff26.js";import{u as B,N as H,G as J,M as N,D as X}from"./Navbar-b1695df9.js";function ie(){const{isLoaded:m}=B({googleMapsApiKey:"AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA",libraries:["places"]}),R={lat:5.839398,lng:-55.199089};t.exports.useState(null);const[Y,k]=t.exports.useState(""),[Z,C]=t.exports.useState(""),[f,y]=t.exports.useState(null),r=t.exports.useRef(),l=t.exports.useRef();async function L(){if(r.current.value===""||l.current.value==="")return;const s=await new google.maps.DirectionsService().route({origin:r.current.value,destination:l.current.value,travelMode:google.maps.TravelMode.DRIVING});y(s),k(s.routes[0].legs[0].distance.text),C(s.routes[0].legs[0].duration.text)}const[M,A]=t.exports.useState([]);t.exports.useEffect(()=>{(async()=>{const s=d(c,"driver");S(s,n=>{A(n.docs.map(o=>({...o.data(),id:o.id})))})})()},[]);const[x,E]=t.exports.useState([]);t.exports.useEffect(()=>{(async()=>{const s=d(c,"place");S(s,n=>{E(n.docs.map(o=>({...o.data(),id:o.id})))})})()},[]),t.exports.useState([]);const[$,G]=t.exports.useState(""),T=()=>x.map((e,s)=>i("div",{children:[i("h2",{onClick:()=>{G(e.id)},children:[e.number," "]}),a("button",{onClick:n=>{v(p(c,"place",e.id))},children:" remove    "})]},s)),[U,u]=t.exports.useState("");t.exports.useRef(null),t.exports.useState("");const[j,w]=t.exports.useState([]),[F,z]=t.exports.useState([]),I=()=>M.map((e,s)=>i("div",{className:"admin-client-see",children:[i("p",{children:[" ",e.nameDispatch," "]}),i("p",{children:[" ",e.numberDispatch," "]}),i("p",{children:[" ",e.pickupDispatch," "]}),i("p",{children:[" ",e.ToDispatch," "]}),a("p",{children:e.distanceDispatch}),i("p",{children:[" ",e.durationDispatch]}),i("p",{children:[" ",e.statusDispatch]}),a("button",{onClick:n=>{w(e.pickupDispatch),z(e.ToDispatch)},children:"  accept Route"}),a("button",{onClick:L,children:"cal route "}),a("button",{onClick:n=>{const o=d(c,"drivers");W(o,{name:e.nameDispatch,numberDispatch:e.numberDispatch,To:e.ToDispatch,pickup:e.pickupDispatch,distance:e.distanceDispatch,status:"Awaiting Driver",toDriver:Number(U)}),u(0);const V=p(c,"driver",e.id);_(V,{statusDispatch:"awating driver"}),u("")},children:" send to driver "}),a("button",{onClick:n=>{v(p(c,"driver",e.id))},children:" delete "}),a("input",{type:"number",className:"driver-number",placeholder:"driver-number",onMouseOut:n=>u(n.target.value)})]},s));function K(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{h.onAuthStateChanged(n=>{n&&s(n.uid)})},[]),e}K();function P(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{h.onAuthStateChanged(n=>{n?b.collection("admin").doc(n.uid).get().then(o=>{s(o.data().FullName)}):s(null)})},[]),e}const D=P();function Q(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{h.onAuthStateChanged(n=>{n?b.collection("manager").doc(n.uid).get().then(o=>{s(o.data().FullName)}):s(null)})},[]),e}const g=Q();return m?m&&g||D?a(O,{children:i("div",{className:"admin-side",children:[a(H,{admin:D,manager:g}),i("div",{className:"split",children:[i("div",{className:"rides",children:[i("div",{className:"admin-see",children:[a(I,{}),a(q,{})]}),a("input",{className:"hide",id:"input",type:"text",placeholder:"from",ref:r,defaultValue:j}),a("input",{className:"hide",type:"text",placeholder:"to",ref:l,defaultValue:F})]}),i("div",{className:"map-and-markers",children:[i(J,{id:"map",zoom:12,center:R,mapContainerClassName:"map-container",children:[x.map((e,s)=>a(N,{position:{lat:e.lat,lng:e.lng},label:"yello"},s)),a(N,{}),f&&a(X,{directions:f})]}),a("div",{className:"driverLocal",children:a(T,{})})]})]})]})}):null:a("div",{children:" loading .... "})}export{ie as default};
