import{r as t,j as a,F as O,c as i,T as d,b,G as v,A as p,d as c,Q as W,K as _,a as h,f as N}from"./index-dc51c0e8.js";import"./cjs-c1300a82.js";import{P as q}from"./Pending-a96acf49.js";import{u as B,N as H,G as J,M as R,D as X}from"./Navbar-73b17090.js";function ie(){const{isLoaded:m}=B({googleMapsApiKey:"AIzaSyDWW3NiTjdfwhcLPFux_oOEhfped_Qs3EA",libraries:["places"]}),k={lat:5.839398,lng:-55.199089};t.exports.useState(null);const[Y,C]=t.exports.useState(""),[Z,y]=t.exports.useState(""),[f,L]=t.exports.useState(null),r=t.exports.useRef(),l=t.exports.useRef();async function M(){if(r.current.value===""||l.current.value==="")return;const s=await new google.maps.DirectionsService().route({origin:r.current.value,destination:l.current.value,travelMode:google.maps.TravelMode.DRIVING});L(s),C(s.routes[0].legs[0].distance.text),y(s.routes[0].legs[0].duration.text)}const[A,E]=t.exports.useState([]);t.exports.useEffect(()=>{(async()=>{const s=d(c,"driver");b(s,n=>{E(n.docs.map(o=>({...o.data(),id:o.id})))})})()},[]);const[x,G]=t.exports.useState([]);t.exports.useEffect(()=>{(async()=>{const s=d(c,"place");b(s,n=>{G(n.docs.map(o=>({...o.data(),id:o.id})))})})()},[]),t.exports.useState([]);const[$,T]=t.exports.useState(""),U=()=>x.map((e,s)=>i("div",{children:[i("h2",{onClick:()=>{T(e.id)},children:[e.number," "]}),a("button",{onClick:n=>{v(p(c,"place",e.id))},children:" remove    "})]},s)),[D,u]=t.exports.useState("");t.exports.useRef(null),t.exports.useState("");const[j,w]=t.exports.useState([]),[F,I]=t.exports.useState([]),V=()=>A.map((e,s)=>i("div",{className:"admin-client-see",children:[i("p",{children:[" ",e.nameDispatch," "]}),i("p",{children:[" ",e.numberDispatch," "]}),i("p",{children:[" ",e.pickupDispatch," "]}),i("p",{children:[" ",e.ToDispatch," "]}),a("p",{children:e.distanceDispatch}),i("p",{children:[" ",e.durationDispatch]}),i("p",{children:[" ",e.statusDispatch]}),a("button",{onClick:n=>{w(e.pickupDispatch),I(e.ToDispatch)},children:"  accept Route"}),a("button",{onClick:M,children:"cal route "}),a("button",{onClick:n=>{const o=d(c,"drivers");W(o,{name:e.nameDispatch,numberDispatch:e.numberDispatch,To:e.ToDispatch,pickup:e.pickupDispatch,distance:e.distanceDispatch,status:"Awaiting Driver",toDriver:Number(D),client:e.clientId}),u(0);const Q=p(c,"driver",e.id);_(Q,{statusDispatch:"awating driver"}),u("")},children:" send to driver "}),a("button",{onClick:n=>{v(p(c,"driver",e.id))},children:" delete "}),a("input",{type:"number",className:"driver-number",placeholder:"driver-number",defaultValue:D,onMouseOut:n=>u(n.target.value)})]},s));function z(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{h.onAuthStateChanged(n=>{n&&s(n.uid)})},[]),e}z();function K(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{h.onAuthStateChanged(n=>{n?N.collection("admin").doc(n.uid).get().then(o=>{s(o.data().FullName)}):s(null)})},[]),e}const g=K();function P(){const[e,s]=t.exports.useState(null);return t.exports.useEffect(()=>{h.onAuthStateChanged(n=>{n?N.collection("manager").doc(n.uid).get().then(o=>{s(o.data().FullName)}):s(null)})},[]),e}const S=P();return m?m&&S||g?a(O,{children:i("div",{className:"admin-side",children:[a(H,{admin:g,manager:S}),i("div",{className:"split",children:[i("div",{className:"rides",children:[i("div",{className:"admin-see",children:[a(V,{}),a(q,{})]}),a("input",{className:"hide",id:"input",type:"text",placeholder:"from",ref:r,defaultValue:j}),a("input",{className:"hide",type:"text",placeholder:"to",ref:l,defaultValue:F})]}),i("div",{className:"map-and-markers",children:[i(J,{id:"map",zoom:12,center:k,mapContainerClassName:"map-container",children:[x.map((e,s)=>a(R,{position:{lat:e.lat,lng:e.lng},label:"yello"},s)),a(R,{}),f&&a(X,{directions:f})]}),a("div",{className:"driverLocal",children:a(U,{})})]})]})]})}):null:a("div",{children:" loading .... "})}export{ie as default};
